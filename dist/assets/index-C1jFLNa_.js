function OA(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function rE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var um={exports:{}},fc={},dm={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function LA(){if(C_)return Ke;C_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function b(q,z,se){this.props=q,this.context=z,this.refs=C,this.updater=se||I}b.prototype.isReactComponent={},b.prototype.setState=function(q,z){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,z,"setState")},b.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function L(){}L.prototype=b.prototype;function N(q,z,se){this.props=q,this.context=z,this.refs=C,this.updater=se||I}var P=N.prototype=new L;P.constructor=N,k(P,b.prototype),P.isPureReactComponent=!0;var B=Array.isArray,H=Object.prototype.hasOwnProperty,Z={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(q,z,se){var ne,ye={},Se=null,re=null;if(z!=null)for(ne in z.ref!==void 0&&(re=z.ref),z.key!==void 0&&(Se=""+z.key),z)H.call(z,ne)&&!D.hasOwnProperty(ne)&&(ye[ne]=z[ne]);var ge=arguments.length-2;if(ge===1)ye.children=se;else if(1<ge){for(var xe=Array(ge),be=0;be<ge;be++)xe[be]=arguments[be+2];ye.children=xe}if(q&&q.defaultProps)for(ne in ge=q.defaultProps,ge)ye[ne]===void 0&&(ye[ne]=ge[ne]);return{$$typeof:n,type:q,key:Se,ref:re,props:ye,_owner:Z.current}}function O(q,z){return{$$typeof:n,type:q.type,key:z,ref:q.ref,props:q.props,_owner:q._owner}}function F(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function j(q){var z={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(se){return z[se]})}var V=/\/+/g;function M(q,z){return typeof q=="object"&&q!==null&&q.key!=null?j(""+q.key):z.toString(36)}function fe(q,z,se,ne,ye){var Se=typeof q;(Se==="undefined"||Se==="boolean")&&(q=null);var re=!1;if(q===null)re=!0;else switch(Se){case"string":case"number":re=!0;break;case"object":switch(q.$$typeof){case n:case e:re=!0}}if(re)return re=q,ye=ye(re),q=ne===""?"."+M(re,0):ne,B(ye)?(se="",q!=null&&(se=q.replace(V,"$&/")+"/"),fe(ye,z,se,"",function(be){return be})):ye!=null&&(F(ye)&&(ye=O(ye,se+(!ye.key||re&&re.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+q)),z.push(ye)),1;if(re=0,ne=ne===""?".":ne+":",B(q))for(var ge=0;ge<q.length;ge++){Se=q[ge];var xe=ne+M(Se,ge);re+=fe(Se,z,se,xe,ye)}else if(xe=x(q),typeof xe=="function")for(q=xe.call(q),ge=0;!(Se=q.next()).done;)Se=Se.value,xe=ne+M(Se,ge++),re+=fe(Se,z,se,xe,ye);else if(Se==="object")throw z=String(q),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return re}function me(q,z,se){if(q==null)return q;var ne=[],ye=0;return fe(q,ne,"","",function(Se){return z.call(se,Se,ye++)}),ne}function de(q){if(q._status===-1){var z=q._result;z=z(),z.then(function(se){(q._status===0||q._status===-1)&&(q._status=1,q._result=se)},function(se){(q._status===0||q._status===-1)&&(q._status=2,q._result=se)}),q._status===-1&&(q._status=0,q._result=z)}if(q._status===1)return q._result.default;throw q._result}var _e={current:null},G={transition:null},ee={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:G,ReactCurrentOwner:Z};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:me,forEach:function(q,z,se){me(q,function(){z.apply(this,arguments)},se)},count:function(q){var z=0;return me(q,function(){z++}),z},toArray:function(q){return me(q,function(z){return z})||[]},only:function(q){if(!F(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Ke.Component=b,Ke.Fragment=t,Ke.Profiler=i,Ke.PureComponent=N,Ke.StrictMode=r,Ke.Suspense=p,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ke.act=le,Ke.cloneElement=function(q,z,se){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ne=k({},q.props),ye=q.key,Se=q.ref,re=q._owner;if(z!=null){if(z.ref!==void 0&&(Se=z.ref,re=Z.current),z.key!==void 0&&(ye=""+z.key),q.type&&q.type.defaultProps)var ge=q.type.defaultProps;for(xe in z)H.call(z,xe)&&!D.hasOwnProperty(xe)&&(ne[xe]=z[xe]===void 0&&ge!==void 0?ge[xe]:z[xe])}var xe=arguments.length-2;if(xe===1)ne.children=se;else if(1<xe){ge=Array(xe);for(var be=0;be<xe;be++)ge[be]=arguments[be+2];ne.children=ge}return{$$typeof:n,type:q.type,key:ye,ref:Se,props:ne,_owner:re}},Ke.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:a,_context:q},q.Consumer=q},Ke.createElement=A,Ke.createFactory=function(q){var z=A.bind(null,q);return z.type=q,z},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(q){return{$$typeof:h,render:q}},Ke.isValidElement=F,Ke.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:de}},Ke.memo=function(q,z){return{$$typeof:m,type:q,compare:z===void 0?null:z}},Ke.startTransition=function(q){var z=G.transition;G.transition={};try{q()}finally{G.transition=z}},Ke.unstable_act=le,Ke.useCallback=function(q,z){return _e.current.useCallback(q,z)},Ke.useContext=function(q){return _e.current.useContext(q)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(q){return _e.current.useDeferredValue(q)},Ke.useEffect=function(q,z){return _e.current.useEffect(q,z)},Ke.useId=function(){return _e.current.useId()},Ke.useImperativeHandle=function(q,z,se){return _e.current.useImperativeHandle(q,z,se)},Ke.useInsertionEffect=function(q,z){return _e.current.useInsertionEffect(q,z)},Ke.useLayoutEffect=function(q,z){return _e.current.useLayoutEffect(q,z)},Ke.useMemo=function(q,z){return _e.current.useMemo(q,z)},Ke.useReducer=function(q,z,se){return _e.current.useReducer(q,z,se)},Ke.useRef=function(q){return _e.current.useRef(q)},Ke.useState=function(q){return _e.current.useState(q)},Ke.useSyncExternalStore=function(q,z,se){return _e.current.useSyncExternalStore(q,z,se)},Ke.useTransition=function(){return _e.current.useTransition()},Ke.version="18.3.1",Ke}var A_;function Mg(){return A_||(A_=1,dm.exports=LA()),dm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function VA(){if(b_)return fc;b_=1;var n=Mg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,p,m){var y,_={},x=null,I=null;m!==void 0&&(x=""+m),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(I=p.ref);for(y in p)r.call(p,y)&&!a.hasOwnProperty(y)&&(_[y]=p[y]);if(h&&h.defaultProps)for(y in p=h.defaultProps,p)_[y]===void 0&&(_[y]=p[y]);return{$$typeof:e,type:h,key:x,ref:I,props:_,_owner:i.current}}return fc.Fragment=t,fc.jsx=l,fc.jsxs=l,fc}var N_;function FA(){return N_||(N_=1,um.exports=VA()),um.exports}var u=FA(),Rd={},hm={exports:{}},bn={},fm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function UA(){return k_||(k_=1,(function(n){function e(G,ee){var le=G.length;G.push(ee);e:for(;0<le;){var q=le-1>>>1,z=G[q];if(0<i(z,ee))G[q]=ee,G[le]=z,le=q;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ee=G[0],le=G.pop();if(le!==ee){G[0]=le;e:for(var q=0,z=G.length,se=z>>>1;q<se;){var ne=2*(q+1)-1,ye=G[ne],Se=ne+1,re=G[Se];if(0>i(ye,le))Se<z&&0>i(re,ye)?(G[q]=re,G[Se]=le,q=Se):(G[q]=ye,G[ne]=le,q=ne);else if(Se<z&&0>i(re,le))G[q]=re,G[Se]=le,q=Se;else break e}}return ee}function i(G,ee){var le=G.sortIndex-ee.sortIndex;return le!==0?le:G.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var p=[],m=[],y=1,_=null,x=3,I=!1,k=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(G){for(var ee=t(m);ee!==null;){if(ee.callback===null)r(m);else if(ee.startTime<=G)r(m),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=t(m)}}function B(G){if(C=!1,P(G),!k)if(t(p)!==null)k=!0,de(H);else{var ee=t(m);ee!==null&&_e(B,ee.startTime-G)}}function H(G,ee){k=!1,C&&(C=!1,L(A),A=-1),I=!0;var le=x;try{for(P(ee),_=t(p);_!==null&&(!(_.expirationTime>ee)||G&&!j());){var q=_.callback;if(typeof q=="function"){_.callback=null,x=_.priorityLevel;var z=q(_.expirationTime<=ee);ee=n.unstable_now(),typeof z=="function"?_.callback=z:_===t(p)&&r(p),P(ee)}else r(p);_=t(p)}if(_!==null)var se=!0;else{var ne=t(m);ne!==null&&_e(B,ne.startTime-ee),se=!1}return se}finally{_=null,x=le,I=!1}}var Z=!1,D=null,A=-1,O=5,F=-1;function j(){return!(n.unstable_now()-F<O)}function V(){if(D!==null){var G=n.unstable_now();F=G;var ee=!0;try{ee=D(!0,G)}finally{ee?M():(Z=!1,D=null)}}else Z=!1}var M;if(typeof N=="function")M=function(){N(V)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,me=fe.port2;fe.port1.onmessage=V,M=function(){me.postMessage(null)}}else M=function(){b(V,0)};function de(G){D=G,Z||(Z=!0,M())}function _e(G,ee){A=b(function(){G(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){k||I||(k=!0,de(H))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var le=x;x=ee;try{return G()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var le=x;x=G;try{return ee()}finally{x=le}},n.unstable_scheduleCallback=function(G,ee,le){var q=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?q+le:q):le=q,G){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=le+z,G={id:y++,callback:ee,priorityLevel:G,startTime:le,expirationTime:z,sortIndex:-1},le>q?(G.sortIndex=le,e(m,G),t(p)===null&&G===t(m)&&(C?(L(A),A=-1):C=!0,_e(B,le-q))):(G.sortIndex=z,e(p,G),k||I||(k=!0,de(H))),G},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(G){var ee=x;return function(){var le=x;x=ee;try{return G.apply(this,arguments)}finally{x=le}}}})(pm)),pm}var R_;function zA(){return R_||(R_=1,fm.exports=UA()),fm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function $A(){if(P_)return bn;P_=1;var n=Mg(),e=zA();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function x(s){return p.call(_,s)?!0:p.call(y,s)?!1:m.test(s)?_[s]=!0:(y[s]=!0,!1)}function I(s,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,o,c,f){if(o===null||typeof o>"u"||I(s,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(s,o,c,f,g,v,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=T}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new C(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];b[o]=new C(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new C(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new C(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new C(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new C(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new C(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new C(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new C(s,5,!1,s.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function N(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(L,N);b[o]=new C(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(L,N);b[o]=new C(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(L,N);b[o]=new C(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new C(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new C(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,o,c,f){var g=b.hasOwnProperty(o)?b[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,c,g,f)&&(c=null),f||g===null?x(o)&&(c===null?s.removeAttribute(o):s.setAttribute(o,""+c)):g.mustUseProperty?s[g.propertyName]=c===null?g.type===3?!1:"":c:(o=g.attributeName,f=g.attributeNamespace,c===null?s.removeAttribute(o):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?s.setAttributeNS(f,o,c):s.setAttribute(o,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Z=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),j=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),G=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=G&&s[G]||s["@@iterator"],typeof s=="function"?s:null)}var le=Object.assign,q;function z(s){if(q===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);q=o&&o[1]||""}return`
`+q+s}var se=!1;function ne(s,o){if(!s||se)return"";se=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var f=X}Reflect.construct(s,[],o)}else{try{o.call()}catch(X){f=X}s.call(o.prototype)}else{try{throw Error()}catch(X){f=X}s()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var g=X.stack.split(`
`),v=f.stack.split(`
`),T=g.length-1,U=v.length-1;1<=T&&0<=U&&g[T]!==v[U];)U--;for(;1<=T&&0<=U;T--,U--)if(g[T]!==v[U]){if(T!==1||U!==1)do if(T--,U--,0>U||g[T]!==v[U]){var $=`
`+g[T].replace(" at new "," at ");return s.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",s.displayName)),$}while(1<=T&&0<=U);break}}}finally{se=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?z(s):""}function ye(s){switch(s.tag){case 5:return z(s.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function Se(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case Z:return"Portal";case O:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case fe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case j:return(s.displayName||"Context")+".Consumer";case F:return(s._context.displayName||"Context")+".Provider";case V:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case me:return o=s.displayName||null,o!==null?o:Se(s.type)||"Memo";case de:o=s._payload,s=s._init;try{return Se(s(o))}catch{}}return null}function re(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ge(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function xe(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function be(s){var o=xe(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,v.call(this,T)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function qe(s){s._valueTracker||(s._valueTracker=be(s))}function We(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return s&&(f=xe(s)?s.checked?"true":"false":s.value),s=f,s!==c?(o.setValue(s),!0):!1}function At(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Jt(s,o){var c=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Nr(s,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=ge(o.value!=null?o.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Qn(s,o){o=o.checked,o!=null&&P(s,"checked",o,!1)}function Pn(s,o){Qn(s,o);var c=ge(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?gt(s,o.type,c):o.hasOwnProperty("defaultValue")&&gt(s,o.type,ge(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function no(s,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,c||o===s.value||(s.value=o),s.defaultValue=o}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function gt(s,o,c){(o!=="number"||At(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var kt=Array.isArray;function ar(s,o,c,f){if(s=s.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=o.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&f&&(s[c].defaultSelected=!0)}else{for(c=""+ge(c),o=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function xl(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function El(s,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(t(92));if(kt(c)){if(1<c.length)throw Error(t(93));c=c[0]}o=c}o==null&&(o=""),c=o}s._wrapperState={initialValue:ge(c)}}function yu(s,o){var c=ge(o.value),f=ge(o.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),o.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function Ks(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function Sl(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?Sl(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Qs,vu=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,g){MSApp.execUnsafeLocalFunction(function(){return s(o,c,f,g)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Qs.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ro(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wu=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(s){wu.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ys[o]=Ys[s]})});function Xs(s,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Ys.hasOwnProperty(s)&&Ys[s]?(""+o).trim():o+"px"}function Jo(s,o){s=s.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=Xs(c,o[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,g):s[c]=g}}var Tl=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(s,o){if(o){if(Tl[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Zo(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Js=null;function ea(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ps=null,ms=null,bt=null;function Il(s){if(s=Jl(s)){if(typeof ps!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Hu(o),ps(s.stateNode,s.type,o))}}function Zs(s){ms?bt?bt.push(s):bt=[s]:ms=s}function ei(){if(ms){var s=ms,o=bt;if(bt=ms=null,Il(s),o)for(s=0;s<o.length;s++)Il(o[s])}}function _u(s,o){return s(o)}function xu(){}var kr=!1;function Eu(s,o,c){if(kr)return s(o,c);kr=!0;try{return _u(s,o,c)}finally{kr=!1,(ms!==null||bt!==null)&&(xu(),ei())}}function so(s,o){var c=s.stateNode;if(c===null)return null;var f=Hu(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,o,typeof c));return c}var ti=!1;if(h)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){ti=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{ti=!1}function Su(s,o,c,f,g,v,T,U,$){var X=Array.prototype.slice.call(arguments,3);try{o.apply(c,X)}catch(ae){this.onError(ae)}}var gs=!1,Rr=null,ta=!1,Yn=null,Tu={onError:function(s){gs=!0,Rr=s}};function Iu(s,o,c,f,g,v,T,U,$){gs=!1,Rr=null,Su.apply(Tu,arguments)}function Cl(s,o,c,f,g,v,T,U,$){if(Iu.apply(this,arguments),gs){if(gs){var X=Rr;gs=!1,Rr=null}else throw Error(t(198));ta||(ta=!0,Yn=X)}}function cr(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function Al(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Cu(s){if(cr(s)!==s)throw Error(t(188))}function Au(s){var o=s.alternate;if(!o){if(o=cr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var c=s,f=o;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return Cu(g),s;if(v===f)return Cu(g),o;v=v.sibling}throw Error(t(188))}if(c.return!==f.return)c=g,f=v;else{for(var T=!1,U=g.child;U;){if(U===c){T=!0,c=g,f=v;break}if(U===f){T=!0,f=g,c=v;break}U=U.sibling}if(!T){for(U=v.child;U;){if(U===c){T=!0,c=v,f=g;break}if(U===f){T=!0,f=v,c=g;break}U=U.sibling}if(!T)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:o}function bu(s){return s=Au(s),s!==null?io(s):null}function io(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=io(s);if(o!==null)return o;s=s.sibling}return null}var bl=e.unstable_scheduleCallback,na=e.unstable_cancelCallback,oo=e.unstable_shouldYield,ys=e.unstable_requestPaint,yt=e.unstable_now,zf=e.unstable_getCurrentPriorityLevel,ra=e.unstable_ImmediatePriority,Nl=e.unstable_UserBlockingPriority,ao=e.unstable_NormalPriority,kl=e.unstable_LowPriority,sa=e.unstable_IdlePriority,lo=null,jn=null;function Nu(s){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(lo,s,void 0,(s.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:co,Pr=Math.log,Xn=Math.LN2;function co(s){return s>>>=0,s===0?32:31-(Pr(s)/Xn|0)|0}var jr=64,ri=4194304;function it(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function vs(s,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,g=s.suspendedLanes,v=s.pingedLanes,T=c&268435455;if(T!==0){var U=T&~g;U!==0?f=it(U):(v&=T,v!==0&&(f=it(v)))}else T=c&~g,T!==0?f=it(T):v!==0&&(f=it(v));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,v=o&-o,g>=v||g===16&&(v&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)c=31-Dn(o),g=1<<c,f|=s[c],o&=~g;return f}function uo(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(s,o){for(var c=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var T=31-Dn(v),U=1<<T,$=g[T];$===-1?((U&c)===0||(U&f)!==0)&&(g[T]=uo(U,o)):$<=o&&(s.expiredLanes|=U),v&=~U}}function Rl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Pl(){var s=jr;return jr<<=1,(jr&4194240)===0&&(jr=64),s}function jl(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function fo(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Dn(o),s[o]=c}function $f(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<c;){var g=31-Dn(c),v=1<<g;o[g]=0,f[g]=-1,s[g]=-1,c&=~v}}function Dl(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var f=31-Dn(c),g=1<<f;g&o|s[f]&o&&(s[f]|=o),c&=~g}}var Ze=0;function Dr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Ml,ia,Ol,Ll,Vl,Mr=!1,oa=[],Or=null,Lr=null,Zt=null,po=new Map,ws=new Map,Mn=[],ku="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function si(s,o){switch(s){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":po.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(o.pointerId)}}function ur(s,o,c,f,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},o!==null&&(o=Jl(o),o!==null&&ia(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function Ru(s,o,c,f,g){switch(o){case"focusin":return Or=ur(Or,s,o,c,f,g),!0;case"dragenter":return Lr=ur(Lr,s,o,c,f,g),!0;case"mouseover":return Zt=ur(Zt,s,o,c,f,g),!0;case"pointerover":var v=g.pointerId;return po.set(v,ur(po.get(v)||null,s,o,c,f,g)),!0;case"gotpointercapture":return v=g.pointerId,ws.set(v,ur(ws.get(v)||null,s,o,c,f,g)),!0}return!1}function aa(s){var o=vo(s.target);if(o!==null){var c=cr(o);if(c!==null){if(o=c.tag,o===13){if(o=Al(c),o!==null){s.blockedOn=o,Vl(s.priority,function(){Ol(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ct(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=la(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);Js=f,c.target.dispatchEvent(f),Js=null}else return o=Jl(c),o!==null&&ia(o),s.blockedOn=c,!1;o.shift()}return!0}function Pu(s,o,c){ct(s)&&c.delete(o)}function Bf(){Mr=!1,Or!==null&&ct(Or)&&(Or=null),Lr!==null&&ct(Lr)&&(Lr=null),Zt!==null&&ct(Zt)&&(Zt=null),po.forEach(Pu),ws.forEach(Pu)}function ii(s,o){s.blockedOn===o&&(s.blockedOn=null,Mr||(Mr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bf)))}function oi(s){function o(g){return ii(g,s)}if(0<oa.length){ii(oa[0],s);for(var c=1;c<oa.length;c++){var f=oa[c];f.blockedOn===s&&(f.blockedOn=null)}}for(Or!==null&&ii(Or,s),Lr!==null&&ii(Lr,s),Zt!==null&&ii(Zt,s),po.forEach(o),ws.forEach(o),c=0;c<Mn.length;c++)f=Mn[c],f.blockedOn===s&&(f.blockedOn=null);for(;0<Mn.length&&(c=Mn[0],c.blockedOn===null);)aa(c),c.blockedOn===null&&Mn.shift()}var _s=B.ReactCurrentBatchConfig,xs=!0;function Vr(s,o,c,f){var g=Ze,v=_s.transition;_s.transition=null;try{Ze=1,Fl(s,o,c,f)}finally{Ze=g,_s.transition=v}}function ju(s,o,c,f){var g=Ze,v=_s.transition;_s.transition=null;try{Ze=4,Fl(s,o,c,f)}finally{Ze=g,_s.transition=v}}function Fl(s,o,c,f){if(xs){var g=la(s,o,c,f);if(g===null)ep(s,o,f,Fr,c),si(s,f);else if(Ru(g,s,o,c,f))f.stopPropagation();else if(si(s,f),o&4&&-1<ku.indexOf(s)){for(;g!==null;){var v=Jl(g);if(v!==null&&Ml(v),v=la(s,o,c,f),v===null&&ep(s,o,f,Fr,c),v===g)break;g=v}g!==null&&f.stopPropagation()}else ep(s,o,f,null,c)}}var Fr=null;function la(s,o,c,f){if(Fr=null,s=ea(f),s=vo(s),s!==null)if(o=cr(s),o===null)s=null;else if(c=o.tag,c===13){if(s=Al(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Fr=s,null}function ca(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zf()){case ra:return 1;case Nl:return 4;case ao:case kl:return 16;case sa:return 536870912;default:return 16}default:return 16}}var On=null,ua=null,Es=null;function Du(){if(Es)return Es;var s,o=ua,c=o.length,f,g="value"in On?On.value:On.textContent,v=g.length;for(s=0;s<c&&o[s]===g[s];s++);var T=c-s;for(f=1;f<=T&&o[c-f]===g[v-f];f++);return Es=g.slice(s,1<f?1-f:void 0)}function mo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ur(){return!0}function Ul(){return!1}function an(s){function o(c,f,g,v,T){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(c=s[U],this[U]=c?c(v):v[U]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ur:Ul,this.isPropagationStopped=Ul,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),o}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=an(zr),ai=le({},zr,{view:0,detail:0}),da=an(ai),ha,fa,Ln,yo=le({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ln&&(Ln&&s.type==="mousemove"?(ha=s.screenX-Ln.screenX,fa=s.screenY-Ln.screenY):fa=ha=0,Ln=s),ha)},movementY:function(s){return"movementY"in s?s.movementY:fa}}),zl=an(yo),Mu=le({},yo,{dataTransfer:0}),Ou=an(Mu),pa=le({},ai,{relatedTarget:0}),en=an(pa),Lu=le({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=an(Lu),li=le({},zr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=an(li),w=le({},zr,{data:0}),E=an(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function he(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=J[s])?!!o[s]:!1}function $e(){return he}var Rt=le({},ai,{key:function(s){if(s.key){var o=R[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=mo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Q[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(s){return s.type==="keypress"?mo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?mo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),lt=an(Rt),Mt=le({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vn=an(Mt),Ss=le({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),$r=an(Ss),Br=le({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ma=an(Br),$l=le({},yo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kC=an($l),RC=[9,13,27,32],qf=h&&"CompositionEvent"in window,Bl=null;h&&"documentMode"in document&&(Bl=document.documentMode);var PC=h&&"TextEvent"in window&&!Bl,vv=h&&(!qf||Bl&&8<Bl&&11>=Bl),wv=" ",_v=!1;function xv(s,o){switch(s){case"keyup":return RC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ev(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ga=!1;function jC(s,o){switch(s){case"compositionend":return Ev(o);case"keypress":return o.which!==32?null:(_v=!0,wv);case"textInput":return s=o.data,s===wv&&_v?null:s;default:return null}}function DC(s,o){if(ga)return s==="compositionend"||!qf&&xv(s,o)?(s=Du(),Es=ua=On=null,ga=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return vv&&o.locale!=="ko"?null:o.data;default:return null}}var MC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!MC[s.type]:o==="textarea"}function Tv(s,o,c,f){Zs(f),o=Bu(o,"onChange"),0<o.length&&(c=new go("onChange","change",null,c,f),s.push({event:c,listeners:o}))}var ql=null,Wl=null;function OC(s){$v(s,0)}function Fu(s){var o=xa(s);if(We(o))return s}function LC(s,o){if(s==="change")return o}var Iv=!1;if(h){var Wf;if(h){var Hf="oninput"in document;if(!Hf){var Cv=document.createElement("div");Cv.setAttribute("oninput","return;"),Hf=typeof Cv.oninput=="function"}Wf=Hf}else Wf=!1;Iv=Wf&&(!document.documentMode||9<document.documentMode)}function Av(){ql&&(ql.detachEvent("onpropertychange",bv),Wl=ql=null)}function bv(s){if(s.propertyName==="value"&&Fu(Wl)){var o=[];Tv(o,Wl,s,ea(s)),Eu(OC,o)}}function VC(s,o,c){s==="focusin"?(Av(),ql=o,Wl=c,ql.attachEvent("onpropertychange",bv)):s==="focusout"&&Av()}function FC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Fu(Wl)}function UC(s,o){if(s==="click")return Fu(o)}function zC(s,o){if(s==="input"||s==="change")return Fu(o)}function $C(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var dr=typeof Object.is=="function"?Object.is:$C;function Hl(s,o){if(dr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!p.call(o,g)||!dr(s[g],o[g]))return!1}return!0}function Nv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kv(s,o){var c=Nv(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=o&&f>=o)return{node:c,offset:o-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Nv(c)}}function Rv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Rv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Pv(){for(var s=window,o=At();o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=At(s.document)}return o}function Gf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function BC(s){var o=Pv(),c=s.focusedElem,f=s.selectionRange;if(o!==c&&c&&c.ownerDocument&&Rv(c.ownerDocument.documentElement,c)){if(f!==null&&Gf(c)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(s,c.value.length);else if(s=(o=c.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=c.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!s.extend&&v>f&&(g=f,f=v,v=g),g=kv(c,v);var T=kv(c,f);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),v>f?(s.addRange(o),s.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),s.addRange(o)))}}for(o=[],s=c;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)s=o[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var qC=h&&"documentMode"in document&&11>=document.documentMode,ya=null,Kf=null,Gl=null,Qf=!1;function jv(s,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qf||ya==null||ya!==At(f)||(f=ya,"selectionStart"in f&&Gf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Gl&&Hl(Gl,f)||(Gl=f,f=Bu(Kf,"onSelect"),0<f.length&&(o=new go("onSelect","select",null,o,c),s.push({event:o,listeners:f}),o.target=ya)))}function Uu(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var va={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionend:Uu("Transition","TransitionEnd")},Yf={},Dv={};h&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function zu(s){if(Yf[s])return Yf[s];if(!va[s])return s;var o=va[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in Dv)return Yf[s]=o[c];return s}var Mv=zu("animationend"),Ov=zu("animationiteration"),Lv=zu("animationstart"),Vv=zu("transitionend"),Fv=new Map,Uv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(s,o){Fv.set(s,o),a(o,[s])}for(var Xf=0;Xf<Uv.length;Xf++){var Jf=Uv[Xf],WC=Jf.toLowerCase(),HC=Jf[0].toUpperCase()+Jf.slice(1);ci(WC,"on"+HC)}ci(Mv,"onAnimationEnd"),ci(Ov,"onAnimationIteration"),ci(Lv,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(Vv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kl));function zv(s,o,c){var f=s.type||"unknown-event";s.currentTarget=c,Cl(f,o,void 0,s),s.currentTarget=null}function $v(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],g=f.event;f=f.listeners;e:{var v=void 0;if(o)for(var T=f.length-1;0<=T;T--){var U=f[T],$=U.instance,X=U.currentTarget;if(U=U.listener,$!==v&&g.isPropagationStopped())break e;zv(g,U,X),v=$}else for(T=0;T<f.length;T++){if(U=f[T],$=U.instance,X=U.currentTarget,U=U.listener,$!==v&&g.isPropagationStopped())break e;zv(g,U,X),v=$}}}if(ta)throw s=Yn,ta=!1,Yn=null,s}function vt(s,o){var c=o[op];c===void 0&&(c=o[op]=new Set);var f=s+"__bubble";c.has(f)||(Bv(o,s,2,!1),c.add(f))}function Zf(s,o,c){var f=0;o&&(f|=4),Bv(c,s,f,o)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Ql(s){if(!s[$u]){s[$u]=!0,r.forEach(function(c){c!=="selectionchange"&&(GC.has(c)||Zf(c,!1,s),Zf(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[$u]||(o[$u]=!0,Zf("selectionchange",!1,o))}}function Bv(s,o,c,f){switch(ca(o)){case 1:var g=Vr;break;case 4:g=ju;break;default:g=Fl}c=g.bind(null,o,c,s),g=void 0,!ti||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(o,c,{capture:!0,passive:g}):s.addEventListener(o,c,!0):g!==void 0?s.addEventListener(o,c,{passive:g}):s.addEventListener(o,c,!1)}function ep(s,o,c,f,g){var v=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var U=f.stateNode.containerInfo;if(U===g||U.nodeType===8&&U.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var $=T.tag;if(($===3||$===4)&&($=T.stateNode.containerInfo,$===g||$.nodeType===8&&$.parentNode===g))return;T=T.return}for(;U!==null;){if(T=vo(U),T===null)return;if($=T.tag,$===5||$===6){f=v=T;continue e}U=U.parentNode}}f=f.return}Eu(function(){var X=v,ae=ea(c),ce=[];e:{var oe=Fv.get(s);if(oe!==void 0){var ve=go,Te=s;switch(s){case"keypress":if(mo(c)===0)break e;case"keydown":case"keyup":ve=lt;break;case"focusin":Te="focus",ve=en;break;case"focusout":Te="blur",ve=en;break;case"beforeblur":case"afterblur":ve=en;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=Ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=$r;break;case Mv:case Ov:case Lv:ve=Vu;break;case Vv:ve=ma;break;case"scroll":ve=da;break;case"wheel":ve=kC;break;case"copy":case"cut":case"paste":ve=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Vn}var Ae=(o&4)!==0,Pt=!Ae&&s==="scroll",K=Ae?oe!==null?oe+"Capture":null:oe;Ae=[];for(var W=X,Y;W!==null;){Y=W;var ue=Y.stateNode;if(Y.tag===5&&ue!==null&&(Y=ue,K!==null&&(ue=so(W,K),ue!=null&&Ae.push(Yl(W,ue,Y)))),Pt)break;W=W.return}0<Ae.length&&(oe=new ve(oe,Te,null,c,ae),ce.push({event:oe,listeners:Ae}))}}if((o&7)===0){e:{if(oe=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",oe&&c!==Js&&(Te=c.relatedTarget||c.fromElement)&&(vo(Te)||Te[Ts]))break e;if((ve||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,ve?(Te=c.relatedTarget||c.toElement,ve=X,Te=Te?vo(Te):null,Te!==null&&(Pt=cr(Te),Te!==Pt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ve=null,Te=X),ve!==Te)){if(Ae=zl,ue="onMouseLeave",K="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=Vn,ue="onPointerLeave",K="onPointerEnter",W="pointer"),Pt=ve==null?oe:xa(ve),Y=Te==null?oe:xa(Te),oe=new Ae(ue,W+"leave",ve,c,ae),oe.target=Pt,oe.relatedTarget=Y,ue=null,vo(ae)===X&&(Ae=new Ae(K,W+"enter",Te,c,ae),Ae.target=Y,Ae.relatedTarget=Pt,ue=Ae),Pt=ue,ve&&Te)t:{for(Ae=ve,K=Te,W=0,Y=Ae;Y;Y=wa(Y))W++;for(Y=0,ue=K;ue;ue=wa(ue))Y++;for(;0<W-Y;)Ae=wa(Ae),W--;for(;0<Y-W;)K=wa(K),Y--;for(;W--;){if(Ae===K||K!==null&&Ae===K.alternate)break t;Ae=wa(Ae),K=wa(K)}Ae=null}else Ae=null;ve!==null&&qv(ce,oe,ve,Ae,!1),Te!==null&&Pt!==null&&qv(ce,Pt,Te,Ae,!0)}}e:{if(oe=X?xa(X):window,ve=oe.nodeName&&oe.nodeName.toLowerCase(),ve==="select"||ve==="input"&&oe.type==="file")var Ne=LC;else if(Sv(oe))if(Iv)Ne=zC;else{Ne=FC;var je=VC}else(ve=oe.nodeName)&&ve.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ne=UC);if(Ne&&(Ne=Ne(s,X))){Tv(ce,Ne,c,ae);break e}je&&je(s,oe,X),s==="focusout"&&(je=oe._wrapperState)&&je.controlled&&oe.type==="number"&&gt(oe,"number",oe.value)}switch(je=X?xa(X):window,s){case"focusin":(Sv(je)||je.contentEditable==="true")&&(ya=je,Kf=X,Gl=null);break;case"focusout":Gl=Kf=ya=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,jv(ce,c,ae);break;case"selectionchange":if(qC)break;case"keydown":case"keyup":jv(ce,c,ae)}var De;if(qf)e:{switch(s){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ga?xv(s,c)&&(Ve="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(vv&&c.locale!=="ko"&&(ga||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ga&&(De=Du()):(On=ae,ua="value"in On?On.value:On.textContent,ga=!0)),je=Bu(X,Ve),0<je.length&&(Ve=new E(Ve,s,null,c,ae),ce.push({event:Ve,listeners:je}),De?Ve.data=De:(De=Ev(c),De!==null&&(Ve.data=De)))),(De=PC?jC(s,c):DC(s,c))&&(X=Bu(X,"onBeforeInput"),0<X.length&&(ae=new E("onBeforeInput","beforeinput",null,c,ae),ce.push({event:ae,listeners:X}),ae.data=De))}$v(ce,o)})}function Yl(s,o,c){return{instance:s,listener:o,currentTarget:c}}function Bu(s,o){for(var c=o+"Capture",f=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=so(s,c),v!=null&&f.unshift(Yl(s,v,g)),v=so(s,o),v!=null&&f.push(Yl(s,v,g))),s=s.return}return f}function wa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function qv(s,o,c,f,g){for(var v=o._reactName,T=[];c!==null&&c!==f;){var U=c,$=U.alternate,X=U.stateNode;if($!==null&&$===f)break;U.tag===5&&X!==null&&(U=X,g?($=so(c,v),$!=null&&T.unshift(Yl(c,$,U))):g||($=so(c,v),$!=null&&T.push(Yl(c,$,U)))),c=c.return}T.length!==0&&s.push({event:o,listeners:T})}var KC=/\r\n?/g,QC=/\u0000|\uFFFD/g;function Wv(s){return(typeof s=="string"?s:""+s).replace(KC,`
`).replace(QC,"")}function qu(s,o,c){if(o=Wv(o),Wv(s)!==o&&c)throw Error(t(425))}function Wu(){}var tp=null,np=null;function rp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sp=typeof setTimeout=="function"?setTimeout:void 0,YC=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,XC=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(s){return Hv.resolve(null).then(s).catch(JC)}:sp;function JC(s){setTimeout(function(){throw s})}function ip(s,o){var c=o,f=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){s.removeChild(g),oi(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);oi(o)}function ui(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Gv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}var _a=Math.random().toString(36).slice(2),qr="__reactFiber$"+_a,Xl="__reactProps$"+_a,Ts="__reactContainer$"+_a,op="__reactEvents$"+_a,ZC="__reactListeners$"+_a,eA="__reactHandles$"+_a;function vo(s){var o=s[qr];if(o)return o;for(var c=s.parentNode;c;){if(o=c[Ts]||c[qr]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=Gv(s);s!==null;){if(c=s[qr])return c;s=Gv(s)}return o}s=c,c=s.parentNode}return null}function Jl(s){return s=s[qr]||s[Ts],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function xa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Hu(s){return s[Xl]||null}var ap=[],Ea=-1;function di(s){return{current:s}}function wt(s){0>Ea||(s.current=ap[Ea],ap[Ea]=null,Ea--)}function ft(s,o){Ea++,ap[Ea]=s.current,s.current=o}var hi={},ln=di(hi),Sn=di(!1),wo=hi;function Sa(s,o){var c=s.type.contextTypes;if(!c)return hi;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in c)g[v]=o[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function Tn(s){return s=s.childContextTypes,s!=null}function Gu(){wt(Sn),wt(ln)}function Kv(s,o,c){if(ln.current!==hi)throw Error(t(168));ft(ln,o),ft(Sn,c)}function Qv(s,o,c){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,re(s)||"Unknown",g));return le({},c,f)}function Ku(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||hi,wo=ln.current,ft(ln,s),ft(Sn,Sn.current),!0}function Yv(s,o,c){var f=s.stateNode;if(!f)throw Error(t(169));c?(s=Qv(s,o,wo),f.__reactInternalMemoizedMergedChildContext=s,wt(Sn),wt(ln),ft(ln,s)):wt(Sn),ft(Sn,c)}var Is=null,Qu=!1,lp=!1;function Xv(s){Is===null?Is=[s]:Is.push(s)}function tA(s){Qu=!0,Xv(s)}function fi(){if(!lp&&Is!==null){lp=!0;var s=0,o=Ze;try{var c=Is;for(Ze=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}Is=null,Qu=!1}catch(g){throw Is!==null&&(Is=Is.slice(s+1)),bl(ra,fi),g}finally{Ze=o,lp=!1}}return null}var Ta=[],Ia=0,Yu=null,Xu=0,Jn=[],Zn=0,_o=null,Cs=1,As="";function xo(s,o){Ta[Ia++]=Xu,Ta[Ia++]=Yu,Yu=s,Xu=o}function Jv(s,o,c){Jn[Zn++]=Cs,Jn[Zn++]=As,Jn[Zn++]=_o,_o=s;var f=Cs;s=As;var g=32-Dn(f)-1;f&=~(1<<g),c+=1;var v=32-Dn(o)+g;if(30<v){var T=g-g%5;v=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Cs=1<<32-Dn(o)+g|c<<g|f,As=v+s}else Cs=1<<v|c<<g|f,As=s}function cp(s){s.return!==null&&(xo(s,1),Jv(s,1,0))}function up(s){for(;s===Yu;)Yu=Ta[--Ia],Ta[Ia]=null,Xu=Ta[--Ia],Ta[Ia]=null;for(;s===_o;)_o=Jn[--Zn],Jn[Zn]=null,As=Jn[--Zn],Jn[Zn]=null,Cs=Jn[--Zn],Jn[Zn]=null}var Fn=null,Un=null,_t=!1,hr=null;function Zv(s,o){var c=rr(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function ew(s,o){switch(s.tag){case 5:var c=s.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Fn=s,Un=ui(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Fn=s,Un=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=_o!==null?{id:Cs,overflow:As}:null,s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=rr(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,Fn=s,Un=null,!0):!1;default:return!1}}function dp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function hp(s){if(_t){var o=Un;if(o){var c=o;if(!ew(s,o)){if(dp(s))throw Error(t(418));o=ui(c.nextSibling);var f=Fn;o&&ew(s,o)?Zv(f,c):(s.flags=s.flags&-4097|2,_t=!1,Fn=s)}}else{if(dp(s))throw Error(t(418));s.flags=s.flags&-4097|2,_t=!1,Fn=s}}}function tw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Fn=s}function Ju(s){if(s!==Fn)return!1;if(!_t)return tw(s),_t=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!rp(s.type,s.memoizedProps)),o&&(o=Un)){if(dp(s))throw nw(),Error(t(418));for(;o;)Zv(s,o),o=ui(o.nextSibling)}if(tw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(o===0){Un=ui(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}s=s.nextSibling}Un=null}}else Un=Fn?ui(s.stateNode.nextSibling):null;return!0}function nw(){for(var s=Un;s;)s=ui(s.nextSibling)}function Ca(){Un=Fn=null,_t=!1}function fp(s){hr===null?hr=[s]:hr.push(s)}var nA=B.ReactCurrentBatchConfig;function Zl(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,s));var g=f,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(T){var U=g.refs;T===null?delete U[v]:U[v]=T},o._stringRef=v,o)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function Zu(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function rw(s){var o=s._init;return o(s._payload)}function sw(s){function o(K,W){if(s){var Y=K.deletions;Y===null?(K.deletions=[W],K.flags|=16):Y.push(W)}}function c(K,W){if(!s)return null;for(;W!==null;)o(K,W),W=W.sibling;return null}function f(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function g(K,W){return K=xi(K,W),K.index=0,K.sibling=null,K}function v(K,W,Y){return K.index=Y,s?(Y=K.alternate,Y!==null?(Y=Y.index,Y<W?(K.flags|=2,W):Y):(K.flags|=2,W)):(K.flags|=1048576,W)}function T(K){return s&&K.alternate===null&&(K.flags|=2),K}function U(K,W,Y,ue){return W===null||W.tag!==6?(W=sm(Y,K.mode,ue),W.return=K,W):(W=g(W,Y),W.return=K,W)}function $(K,W,Y,ue){var Ne=Y.type;return Ne===D?ae(K,W,Y.props.children,ue,Y.key):W!==null&&(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===de&&rw(Ne)===W.type)?(ue=g(W,Y.props),ue.ref=Zl(K,W,Y),ue.return=K,ue):(ue=Sd(Y.type,Y.key,Y.props,null,K.mode,ue),ue.ref=Zl(K,W,Y),ue.return=K,ue)}function X(K,W,Y,ue){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=im(Y,K.mode,ue),W.return=K,W):(W=g(W,Y.children||[]),W.return=K,W)}function ae(K,W,Y,ue,Ne){return W===null||W.tag!==7?(W=No(Y,K.mode,ue,Ne),W.return=K,W):(W=g(W,Y),W.return=K,W)}function ce(K,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=sm(""+W,K.mode,Y),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case H:return Y=Sd(W.type,W.key,W.props,null,K.mode,Y),Y.ref=Zl(K,null,W),Y.return=K,Y;case Z:return W=im(W,K.mode,Y),W.return=K,W;case de:var ue=W._init;return ce(K,ue(W._payload),Y)}if(kt(W)||ee(W))return W=No(W,K.mode,Y,null),W.return=K,W;Zu(K,W)}return null}function oe(K,W,Y,ue){var Ne=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ne!==null?null:U(K,W,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return Y.key===Ne?$(K,W,Y,ue):null;case Z:return Y.key===Ne?X(K,W,Y,ue):null;case de:return Ne=Y._init,oe(K,W,Ne(Y._payload),ue)}if(kt(Y)||ee(Y))return Ne!==null?null:ae(K,W,Y,ue,null);Zu(K,Y)}return null}function ve(K,W,Y,ue,Ne){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return K=K.get(Y)||null,U(W,K,""+ue,Ne);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case H:return K=K.get(ue.key===null?Y:ue.key)||null,$(W,K,ue,Ne);case Z:return K=K.get(ue.key===null?Y:ue.key)||null,X(W,K,ue,Ne);case de:var je=ue._init;return ve(K,W,Y,je(ue._payload),Ne)}if(kt(ue)||ee(ue))return K=K.get(Y)||null,ae(W,K,ue,Ne,null);Zu(W,ue)}return null}function Te(K,W,Y,ue){for(var Ne=null,je=null,De=W,Ve=W=0,Ht=null;De!==null&&Ve<Y.length;Ve++){De.index>Ve?(Ht=De,De=null):Ht=De.sibling;var nt=oe(K,De,Y[Ve],ue);if(nt===null){De===null&&(De=Ht);break}s&&De&&nt.alternate===null&&o(K,De),W=v(nt,W,Ve),je===null?Ne=nt:je.sibling=nt,je=nt,De=Ht}if(Ve===Y.length)return c(K,De),_t&&xo(K,Ve),Ne;if(De===null){for(;Ve<Y.length;Ve++)De=ce(K,Y[Ve],ue),De!==null&&(W=v(De,W,Ve),je===null?Ne=De:je.sibling=De,je=De);return _t&&xo(K,Ve),Ne}for(De=f(K,De);Ve<Y.length;Ve++)Ht=ve(De,K,Ve,Y[Ve],ue),Ht!==null&&(s&&Ht.alternate!==null&&De.delete(Ht.key===null?Ve:Ht.key),W=v(Ht,W,Ve),je===null?Ne=Ht:je.sibling=Ht,je=Ht);return s&&De.forEach(function(Ei){return o(K,Ei)}),_t&&xo(K,Ve),Ne}function Ae(K,W,Y,ue){var Ne=ee(Y);if(typeof Ne!="function")throw Error(t(150));if(Y=Ne.call(Y),Y==null)throw Error(t(151));for(var je=Ne=null,De=W,Ve=W=0,Ht=null,nt=Y.next();De!==null&&!nt.done;Ve++,nt=Y.next()){De.index>Ve?(Ht=De,De=null):Ht=De.sibling;var Ei=oe(K,De,nt.value,ue);if(Ei===null){De===null&&(De=Ht);break}s&&De&&Ei.alternate===null&&o(K,De),W=v(Ei,W,Ve),je===null?Ne=Ei:je.sibling=Ei,je=Ei,De=Ht}if(nt.done)return c(K,De),_t&&xo(K,Ve),Ne;if(De===null){for(;!nt.done;Ve++,nt=Y.next())nt=ce(K,nt.value,ue),nt!==null&&(W=v(nt,W,Ve),je===null?Ne=nt:je.sibling=nt,je=nt);return _t&&xo(K,Ve),Ne}for(De=f(K,De);!nt.done;Ve++,nt=Y.next())nt=ve(De,K,Ve,nt.value,ue),nt!==null&&(s&&nt.alternate!==null&&De.delete(nt.key===null?Ve:nt.key),W=v(nt,W,Ve),je===null?Ne=nt:je.sibling=nt,je=nt);return s&&De.forEach(function(MA){return o(K,MA)}),_t&&xo(K,Ve),Ne}function Pt(K,W,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===D&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:e:{for(var Ne=Y.key,je=W;je!==null;){if(je.key===Ne){if(Ne=Y.type,Ne===D){if(je.tag===7){c(K,je.sibling),W=g(je,Y.props.children),W.return=K,K=W;break e}}else if(je.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===de&&rw(Ne)===je.type){c(K,je.sibling),W=g(je,Y.props),W.ref=Zl(K,je,Y),W.return=K,K=W;break e}c(K,je);break}else o(K,je);je=je.sibling}Y.type===D?(W=No(Y.props.children,K.mode,ue,Y.key),W.return=K,K=W):(ue=Sd(Y.type,Y.key,Y.props,null,K.mode,ue),ue.ref=Zl(K,W,Y),ue.return=K,K=ue)}return T(K);case Z:e:{for(je=Y.key;W!==null;){if(W.key===je)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){c(K,W.sibling),W=g(W,Y.children||[]),W.return=K,K=W;break e}else{c(K,W);break}else o(K,W);W=W.sibling}W=im(Y,K.mode,ue),W.return=K,K=W}return T(K);case de:return je=Y._init,Pt(K,W,je(Y._payload),ue)}if(kt(Y))return Te(K,W,Y,ue);if(ee(Y))return Ae(K,W,Y,ue);Zu(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(c(K,W.sibling),W=g(W,Y),W.return=K,K=W):(c(K,W),W=sm(Y,K.mode,ue),W.return=K,K=W),T(K)):c(K,W)}return Pt}var Aa=sw(!0),iw=sw(!1),ed=di(null),td=null,ba=null,pp=null;function mp(){pp=ba=td=null}function gp(s){var o=ed.current;wt(ed),s._currentValue=o}function yp(s,o,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===c)break;s=s.return}}function Na(s,o){td=s,pp=ba=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(In=!0),s.firstContext=null)}function er(s){var o=s._currentValue;if(pp!==s)if(s={context:s,memoizedValue:o,next:null},ba===null){if(td===null)throw Error(t(308));ba=s,td.dependencies={lanes:0,firstContext:s}}else ba=ba.next=s;return o}var Eo=null;function vp(s){Eo===null?Eo=[s]:Eo.push(s)}function ow(s,o,c,f){var g=o.interleaved;return g===null?(c.next=c,vp(o)):(c.next=g.next,g.next=c),o.interleaved=c,bs(s,f)}function bs(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var pi=!1;function wp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ns(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function mi(s,o,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(tt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,bs(s,c)}return g=f.interleaved,g===null?(o.next=o,vp(f)):(o.next=g.next,g.next=o),f.interleaved=o,bs(s,c)}function nd(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,Dl(s,c)}}function lw(s,o){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?g=v=T:v=v.next=T,c=c.next}while(c!==null);v===null?g=v=o:v=v.next=o}else g=v=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function rd(s,o,c,f){var g=s.updateQueue;pi=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,U=g.shared.pending;if(U!==null){g.shared.pending=null;var $=U,X=$.next;$.next=null,T===null?v=X:T.next=X,T=$;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,U=ae.lastBaseUpdate,U!==T&&(U===null?ae.firstBaseUpdate=X:U.next=X,ae.lastBaseUpdate=$))}if(v!==null){var ce=g.baseState;T=0,ae=X=$=null,U=v;do{var oe=U.lane,ve=U.eventTime;if((f&oe)===oe){ae!==null&&(ae=ae.next={eventTime:ve,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Te=s,Ae=U;switch(oe=o,ve=c,Ae.tag){case 1:if(Te=Ae.payload,typeof Te=="function"){ce=Te.call(ve,ce,oe);break e}ce=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ae.payload,oe=typeof Te=="function"?Te.call(ve,ce,oe):Te,oe==null)break e;ce=le({},ce,oe);break e;case 2:pi=!0}}U.callback!==null&&U.lane!==0&&(s.flags|=64,oe=g.effects,oe===null?g.effects=[U]:oe.push(U))}else ve={eventTime:ve,lane:oe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ae===null?(X=ae=ve,$=ce):ae=ae.next=ve,T|=oe;if(U=U.next,U===null){if(U=g.shared.pending,U===null)break;oe=U,U=oe.next,oe.next=null,g.lastBaseUpdate=oe,g.shared.pending=null}}while(!0);if(ae===null&&($=ce),g.baseState=$,g.firstBaseUpdate=X,g.lastBaseUpdate=ae,o=g.shared.interleaved,o!==null){g=o;do T|=g.lane,g=g.next;while(g!==o)}else v===null&&(g.shared.lanes=0);Io|=T,s.lanes=T,s.memoizedState=ce}}function cw(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var ec={},Wr=di(ec),tc=di(ec),nc=di(ec);function So(s){if(s===ec)throw Error(t(174));return s}function _p(s,o){switch(ft(nc,o),ft(tc,s),ft(Wr,ec),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Xo(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Xo(o,s)}wt(Wr),ft(Wr,o)}function ka(){wt(Wr),wt(tc),wt(nc)}function uw(s){So(nc.current);var o=So(Wr.current),c=Xo(o,s.type);o!==c&&(ft(tc,s),ft(Wr,c))}function xp(s){tc.current===s&&(wt(Wr),wt(tc))}var Et=di(0);function sd(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ep=[];function Sp(){for(var s=0;s<Ep.length;s++)Ep[s]._workInProgressVersionPrimary=null;Ep.length=0}var id=B.ReactCurrentDispatcher,Tp=B.ReactCurrentBatchConfig,To=0,St=null,Ut=null,qt=null,od=!1,rc=!1,sc=0,rA=0;function cn(){throw Error(t(321))}function Ip(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!dr(s[c],o[c]))return!1;return!0}function Cp(s,o,c,f,g,v){if(To=v,St=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,id.current=s===null||s.memoizedState===null?aA:lA,s=c(f,g),rc){v=0;do{if(rc=!1,sc=0,25<=v)throw Error(t(301));v+=1,qt=Ut=null,o.updateQueue=null,id.current=cA,s=c(f,g)}while(rc)}if(id.current=cd,o=Ut!==null&&Ut.next!==null,To=0,qt=Ut=St=null,od=!1,o)throw Error(t(300));return s}function Ap(){var s=sc!==0;return sc=0,s}function Hr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?St.memoizedState=qt=s:qt=qt.next=s,qt}function tr(){if(Ut===null){var s=St.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var o=qt===null?St.memoizedState:qt.next;if(o!==null)qt=o,Ut=s;else{if(s===null)throw Error(t(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},qt===null?St.memoizedState=qt=s:qt=qt.next=s}return qt}function ic(s,o){return typeof o=="function"?o(s):o}function bp(s){var o=tr(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=Ut,g=f.baseQueue,v=c.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}f.baseQueue=g=v,c.pending=null}if(g!==null){v=g.next,f=f.baseState;var U=T=null,$=null,X=v;do{var ae=X.lane;if((To&ae)===ae)$!==null&&($=$.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:s(f,X.action);else{var ce={lane:ae,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};$===null?(U=$=ce,T=f):$=$.next=ce,St.lanes|=ae,Io|=ae}X=X.next}while(X!==null&&X!==v);$===null?T=f:$.next=U,dr(f,o.memoizedState)||(In=!0),o.memoizedState=f,o.baseState=T,o.baseQueue=$,c.lastRenderedState=f}if(s=c.interleaved,s!==null){g=s;do v=g.lane,St.lanes|=v,Io|=v,g=g.next;while(g!==s)}else g===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Np(s){var o=tr(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=c.dispatch,g=c.pending,v=o.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do v=s(v,T.action),T=T.next;while(T!==g);dr(v,o.memoizedState)||(In=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),c.lastRenderedState=v}return[v,f]}function dw(){}function hw(s,o){var c=St,f=tr(),g=o(),v=!dr(f.memoizedState,g);if(v&&(f.memoizedState=g,In=!0),f=f.queue,kp(mw.bind(null,c,f,s),[s]),f.getSnapshot!==o||v||qt!==null&&qt.memoizedState.tag&1){if(c.flags|=2048,oc(9,pw.bind(null,c,f,g,o),void 0,null),Wt===null)throw Error(t(349));(To&30)!==0||fw(c,o,g)}return g}function fw(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=St.updateQueue,o===null?(o={lastEffect:null,stores:null},St.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function pw(s,o,c,f){o.value=c,o.getSnapshot=f,gw(o)&&yw(s)}function mw(s,o,c){return c(function(){gw(o)&&yw(s)})}function gw(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!dr(s,c)}catch{return!0}}function yw(s){var o=bs(s,1);o!==null&&gr(o,s,1,-1)}function vw(s){var o=Hr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:s},o.queue=s,s=s.dispatch=oA.bind(null,St,s),[o.memoizedState,s]}function oc(s,o,c,f){return s={tag:s,create:o,destroy:c,deps:f,next:null},o=St.updateQueue,o===null?(o={lastEffect:null,stores:null},St.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,o.lastEffect=s)),s}function ww(){return tr().memoizedState}function ad(s,o,c,f){var g=Hr();St.flags|=s,g.memoizedState=oc(1|o,c,void 0,f===void 0?null:f)}function ld(s,o,c,f){var g=tr();f=f===void 0?null:f;var v=void 0;if(Ut!==null){var T=Ut.memoizedState;if(v=T.destroy,f!==null&&Ip(f,T.deps)){g.memoizedState=oc(o,c,v,f);return}}St.flags|=s,g.memoizedState=oc(1|o,c,v,f)}function _w(s,o){return ad(8390656,8,s,o)}function kp(s,o){return ld(2048,8,s,o)}function xw(s,o){return ld(4,2,s,o)}function Ew(s,o){return ld(4,4,s,o)}function Sw(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Tw(s,o,c){return c=c!=null?c.concat([s]):null,ld(4,4,Sw.bind(null,o,s),c)}function Rp(){}function Iw(s,o){var c=tr();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Ip(o,f[1])?f[0]:(c.memoizedState=[s,o],s)}function Cw(s,o){var c=tr();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Ip(o,f[1])?f[0]:(s=s(),c.memoizedState=[s,o],s)}function Aw(s,o,c){return(To&21)===0?(s.baseState&&(s.baseState=!1,In=!0),s.memoizedState=c):(dr(c,o)||(c=Pl(),St.lanes|=c,Io|=c,s.baseState=!0),o)}function sA(s,o){var c=Ze;Ze=c!==0&&4>c?c:4,s(!0);var f=Tp.transition;Tp.transition={};try{s(!1),o()}finally{Ze=c,Tp.transition=f}}function bw(){return tr().memoizedState}function iA(s,o,c){var f=wi(s);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Nw(s))kw(o,c);else if(c=ow(s,o,c,f),c!==null){var g=wn();gr(c,s,f,g),Rw(c,o,f)}}function oA(s,o,c){var f=wi(s),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Nw(s))kw(o,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var T=o.lastRenderedState,U=v(T,c);if(g.hasEagerState=!0,g.eagerState=U,dr(U,T)){var $=o.interleaved;$===null?(g.next=g,vp(o)):(g.next=$.next,$.next=g),o.interleaved=g;return}}catch{}finally{}c=ow(s,o,g,f),c!==null&&(g=wn(),gr(c,s,f,g),Rw(c,o,f))}}function Nw(s){var o=s.alternate;return s===St||o!==null&&o===St}function kw(s,o){rc=od=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function Rw(s,o,c){if((c&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,Dl(s,c)}}var cd={readContext:er,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},aA={readContext:er,useCallback:function(s,o){return Hr().memoizedState=[s,o===void 0?null:o],s},useContext:er,useEffect:_w,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,ad(4194308,4,Sw.bind(null,o,s),c)},useLayoutEffect:function(s,o){return ad(4194308,4,s,o)},useInsertionEffect:function(s,o){return ad(4,2,s,o)},useMemo:function(s,o){var c=Hr();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var f=Hr();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=iA.bind(null,St,s),[f.memoizedState,s]},useRef:function(s){var o=Hr();return s={current:s},o.memoizedState=s},useState:vw,useDebugValue:Rp,useDeferredValue:function(s){return Hr().memoizedState=s},useTransition:function(){var s=vw(!1),o=s[0];return s=sA.bind(null,s[1]),Hr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var f=St,g=Hr();if(_t){if(c===void 0)throw Error(t(407));c=c()}else{if(c=o(),Wt===null)throw Error(t(349));(To&30)!==0||fw(f,o,c)}g.memoizedState=c;var v={value:c,getSnapshot:o};return g.queue=v,_w(mw.bind(null,f,v,s),[s]),f.flags|=2048,oc(9,pw.bind(null,f,v,c,o),void 0,null),c},useId:function(){var s=Hr(),o=Wt.identifierPrefix;if(_t){var c=As,f=Cs;c=(f&~(1<<32-Dn(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=sc++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=rA++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},lA={readContext:er,useCallback:Iw,useContext:er,useEffect:kp,useImperativeHandle:Tw,useInsertionEffect:xw,useLayoutEffect:Ew,useMemo:Cw,useReducer:bp,useRef:ww,useState:function(){return bp(ic)},useDebugValue:Rp,useDeferredValue:function(s){var o=tr();return Aw(o,Ut.memoizedState,s)},useTransition:function(){var s=bp(ic)[0],o=tr().memoizedState;return[s,o]},useMutableSource:dw,useSyncExternalStore:hw,useId:bw,unstable_isNewReconciler:!1},cA={readContext:er,useCallback:Iw,useContext:er,useEffect:kp,useImperativeHandle:Tw,useInsertionEffect:xw,useLayoutEffect:Ew,useMemo:Cw,useReducer:Np,useRef:ww,useState:function(){return Np(ic)},useDebugValue:Rp,useDeferredValue:function(s){var o=tr();return Ut===null?o.memoizedState=s:Aw(o,Ut.memoizedState,s)},useTransition:function(){var s=Np(ic)[0],o=tr().memoizedState;return[s,o]},useMutableSource:dw,useSyncExternalStore:hw,useId:bw,unstable_isNewReconciler:!1};function fr(s,o){if(s&&s.defaultProps){o=le({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}function Pp(s,o,c,f){o=s.memoizedState,c=c(f,o),c=c==null?o:le({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var ud={isMounted:function(s){return(s=s._reactInternals)?cr(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var f=wn(),g=wi(s),v=Ns(f,g);v.payload=o,c!=null&&(v.callback=c),o=mi(s,v,g),o!==null&&(gr(o,s,g,f),nd(o,s,g))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var f=wn(),g=wi(s),v=Ns(f,g);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=mi(s,v,g),o!==null&&(gr(o,s,g,f),nd(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=wn(),f=wi(s),g=Ns(c,f);g.tag=2,o!=null&&(g.callback=o),o=mi(s,g,f),o!==null&&(gr(o,s,f,c),nd(o,s,f))}};function Pw(s,o,c,f,g,v,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,T):o.prototype&&o.prototype.isPureReactComponent?!Hl(c,f)||!Hl(g,v):!0}function jw(s,o,c){var f=!1,g=hi,v=o.contextType;return typeof v=="object"&&v!==null?v=er(v):(g=Tn(o)?wo:ln.current,f=o.contextTypes,v=(f=f!=null)?Sa(s,g):hi),o=new o(c,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ud,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),o}function Dw(s,o,c,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==s&&ud.enqueueReplaceState(o,o.state,null)}function jp(s,o,c,f){var g=s.stateNode;g.props=c,g.state=s.memoizedState,g.refs={},wp(s);var v=o.contextType;typeof v=="object"&&v!==null?g.context=er(v):(v=Tn(o)?wo:ln.current,g.context=Sa(s,v)),g.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Pp(s,o,v,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&ud.enqueueReplaceState(g,g.state,null),rd(s,c,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Ra(s,o){try{var c="",f=o;do c+=ye(f),f=f.return;while(f);var g=c}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:g,digest:null}}function Dp(s,o,c){return{value:s,source:null,stack:c??null,digest:o??null}}function Mp(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var uA=typeof WeakMap=="function"?WeakMap:Map;function Mw(s,o,c){c=Ns(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){yd||(yd=!0,Yp=f),Mp(s,o)},c}function Ow(s,o,c){c=Ns(-1,c),c.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;c.payload=function(){return f(g)},c.callback=function(){Mp(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){Mp(s,o),typeof f!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),c}function Lw(s,o,c){var f=s.pingCache;if(f===null){f=s.pingCache=new uA;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(g.add(c),s=TA.bind(null,s,o,c),o.then(s,s))}function Vw(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Fw(s,o,c,f,g){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Ns(-1,1),o.tag=2,mi(c,o,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var dA=B.ReactCurrentOwner,In=!1;function vn(s,o,c,f){o.child=s===null?iw(o,null,c,f):Aa(o,s.child,c,f)}function Uw(s,o,c,f,g){c=c.render;var v=o.ref;return Na(o,g),f=Cp(s,o,c,f,v,g),c=Ap(),s!==null&&!In?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,ks(s,o,g)):(_t&&c&&cp(o),o.flags|=1,vn(s,o,f,g),o.child)}function zw(s,o,c,f,g){if(s===null){var v=c.type;return typeof v=="function"&&!rm(v)&&v.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=v,$w(s,o,v,f,g)):(s=Sd(c.type,null,f,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,(s.lanes&g)===0){var T=v.memoizedProps;if(c=c.compare,c=c!==null?c:Hl,c(T,f)&&s.ref===o.ref)return ks(s,o,g)}return o.flags|=1,s=xi(v,f),s.ref=o.ref,s.return=o,o.child=s}function $w(s,o,c,f,g){if(s!==null){var v=s.memoizedProps;if(Hl(v,f)&&s.ref===o.ref)if(In=!1,o.pendingProps=f=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(In=!0);else return o.lanes=s.lanes,ks(s,o,g)}return Op(s,o,c,f,g)}function Bw(s,o,c){var f=o.pendingProps,g=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ja,zn),zn|=c;else{if((c&1073741824)===0)return s=v!==null?v.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,ft(ja,zn),zn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:c,ft(ja,zn),zn|=f}else v!==null?(f=v.baseLanes|c,o.memoizedState=null):f=c,ft(ja,zn),zn|=f;return vn(s,o,g,c),o.child}function qw(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Op(s,o,c,f,g){var v=Tn(c)?wo:ln.current;return v=Sa(o,v),Na(o,g),c=Cp(s,o,c,f,v,g),f=Ap(),s!==null&&!In?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,ks(s,o,g)):(_t&&f&&cp(o),o.flags|=1,vn(s,o,c,g),o.child)}function Ww(s,o,c,f,g){if(Tn(c)){var v=!0;Ku(o)}else v=!1;if(Na(o,g),o.stateNode===null)hd(s,o),jw(o,c,f),jp(o,c,f,g),f=!0;else if(s===null){var T=o.stateNode,U=o.memoizedProps;T.props=U;var $=T.context,X=c.contextType;typeof X=="object"&&X!==null?X=er(X):(X=Tn(c)?wo:ln.current,X=Sa(o,X));var ae=c.getDerivedStateFromProps,ce=typeof ae=="function"||typeof T.getSnapshotBeforeUpdate=="function";ce||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U!==f||$!==X)&&Dw(o,T,f,X),pi=!1;var oe=o.memoizedState;T.state=oe,rd(o,f,T,g),$=o.memoizedState,U!==f||oe!==$||Sn.current||pi?(typeof ae=="function"&&(Pp(o,c,ae,f),$=o.memoizedState),(U=pi||Pw(o,c,U,f,oe,$,X))?(ce||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=$),T.props=f,T.state=$,T.context=X,f=U):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{T=o.stateNode,aw(s,o),U=o.memoizedProps,X=o.type===o.elementType?U:fr(o.type,U),T.props=X,ce=o.pendingProps,oe=T.context,$=c.contextType,typeof $=="object"&&$!==null?$=er($):($=Tn(c)?wo:ln.current,$=Sa(o,$));var ve=c.getDerivedStateFromProps;(ae=typeof ve=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U!==ce||oe!==$)&&Dw(o,T,f,$),pi=!1,oe=o.memoizedState,T.state=oe,rd(o,f,T,g);var Te=o.memoizedState;U!==ce||oe!==Te||Sn.current||pi?(typeof ve=="function"&&(Pp(o,c,ve,f),Te=o.memoizedState),(X=pi||Pw(o,c,X,f,oe,Te,$)||!1)?(ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,Te,$),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,Te,$)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||U===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Te),T.props=f,T.state=Te,T.context=$,f=X):(typeof T.componentDidUpdate!="function"||U===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),f=!1)}return Lp(s,o,c,f,v,g)}function Lp(s,o,c,f,g,v){qw(s,o);var T=(o.flags&128)!==0;if(!f&&!T)return g&&Yv(o,c,!1),ks(s,o,v);f=o.stateNode,dA.current=o;var U=T&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&T?(o.child=Aa(o,s.child,null,v),o.child=Aa(o,null,U,v)):vn(s,o,U,v),o.memoizedState=f.state,g&&Yv(o,c,!0),o.child}function Hw(s){var o=s.stateNode;o.pendingContext?Kv(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Kv(s,o.context,!1),_p(s,o.containerInfo)}function Gw(s,o,c,f,g){return Ca(),fp(g),o.flags|=256,vn(s,o,c,f),o.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function Fp(s){return{baseLanes:s,cachePool:null,transitions:null}}function Kw(s,o,c){var f=o.pendingProps,g=Et.current,v=!1,T=(o.flags&128)!==0,U;if((U=T)||(U=s!==null&&s.memoizedState===null?!1:(g&2)!==0),U?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),ft(Et,g&1),s===null)return hp(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=f.children,s=f.fallback,v?(f=o.mode,v=o.child,T={mode:"hidden",children:T},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Td(T,f,0,null),s=No(s,f,c,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=Fp(c),o.memoizedState=Vp,s):Up(o,T));if(g=s.memoizedState,g!==null&&(U=g.dehydrated,U!==null))return hA(s,o,T,f,U,g,c);if(v){v=f.fallback,T=o.mode,g=s.child,U=g.sibling;var $={mode:"hidden",children:f.children};return(T&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=$,o.deletions=null):(f=xi(g,$),f.subtreeFlags=g.subtreeFlags&14680064),U!==null?v=xi(U,v):(v=No(v,T,c,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,T=s.child.memoizedState,T=T===null?Fp(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=s.childLanes&~c,o.memoizedState=Vp,f}return v=s.child,s=v.sibling,f=xi(v,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=f,o.memoizedState=null,f}function Up(s,o){return o=Td({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function dd(s,o,c,f){return f!==null&&fp(f),Aa(o,s.child,null,c),s=Up(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function hA(s,o,c,f,g,v,T){if(c)return o.flags&256?(o.flags&=-257,f=Dp(Error(t(422))),dd(s,o,T,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=f.fallback,g=o.mode,f=Td({mode:"visible",children:f.children},g,0,null),v=No(v,g,T,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,(o.mode&1)!==0&&Aa(o,s.child,null,T),o.child.memoizedState=Fp(T),o.memoizedState=Vp,v);if((o.mode&1)===0)return dd(s,o,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var U=f.dgst;return f=U,v=Error(t(419)),f=Dp(v,f,void 0),dd(s,o,T,f)}if(U=(T&s.childLanes)!==0,In||U){if(f=Wt,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,bs(s,g),gr(f,s,g,-1))}return nm(),f=Dp(Error(t(421))),dd(s,o,T,f)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=IA.bind(null,s),g._reactRetry=o,null):(s=v.treeContext,Un=ui(g.nextSibling),Fn=o,_t=!0,hr=null,s!==null&&(Jn[Zn++]=Cs,Jn[Zn++]=As,Jn[Zn++]=_o,Cs=s.id,As=s.overflow,_o=o),o=Up(o,f.children),o.flags|=4096,o)}function Qw(s,o,c){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),yp(s.return,o,c)}function zp(s,o,c,f,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=c,v.tailMode=g)}function Yw(s,o,c){var f=o.pendingProps,g=f.revealOrder,v=f.tail;if(vn(s,o,f.children,c),f=Et.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Qw(s,c,o);else if(s.tag===19)Qw(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(ft(Et,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(c=o.child,g=null;c!==null;)s=c.alternate,s!==null&&sd(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),zp(o,!1,g,c,v);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&sd(s)===null){o.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}zp(o,!0,c,null,v);break;case"together":zp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hd(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ks(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Io|=o.lanes,(c&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,c=xi(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=xi(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function fA(s,o,c){switch(o.tag){case 3:Hw(o),Ca();break;case 5:uw(o);break;case 1:Tn(o.type)&&Ku(o);break;case 4:_p(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;ft(ed,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(ft(Et,Et.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Kw(s,o,c):(ft(Et,Et.current&1),s=ks(s,o,c),s!==null?s.sibling:null);ft(Et,Et.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(s.flags&128)!==0){if(f)return Yw(s,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ft(Et,Et.current),f)break;return null;case 22:case 23:return o.lanes=0,Bw(s,o,c)}return ks(s,o,c)}var Xw,$p,Jw,Zw;Xw=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},$p=function(){},Jw=function(s,o,c,f){var g=s.memoizedProps;if(g!==f){s=o.stateNode,So(Wr.current);var v=null;switch(c){case"input":g=Jt(s,g),f=Jt(s,f),v=[];break;case"select":g=le({},g,{value:void 0}),f=le({},f,{value:void 0}),v=[];break;case"textarea":g=xl(s,g),f=xl(s,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Wu)}lr(c,f);var T;c=null;for(X in g)if(!f.hasOwnProperty(X)&&g.hasOwnProperty(X)&&g[X]!=null)if(X==="style"){var U=g[X];for(T in U)U.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?v||(v=[]):(v=v||[]).push(X,null));for(X in f){var $=f[X];if(U=g!=null?g[X]:void 0,f.hasOwnProperty(X)&&$!==U&&($!=null||U!=null))if(X==="style")if(U){for(T in U)!U.hasOwnProperty(T)||$&&$.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in $)$.hasOwnProperty(T)&&U[T]!==$[T]&&(c||(c={}),c[T]=$[T])}else c||(v||(v=[]),v.push(X,c)),c=$;else X==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,U=U?U.__html:void 0,$!=null&&U!==$&&(v=v||[]).push(X,$)):X==="children"?typeof $!="string"&&typeof $!="number"||(v=v||[]).push(X,""+$):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?($!=null&&X==="onScroll"&&vt("scroll",s),v||U===$||(v=[])):(v=v||[]).push(X,$))}c&&(v=v||[]).push("style",c);var X=v;(o.updateQueue=X)&&(o.flags|=4)}},Zw=function(s,o,c,f){c!==f&&(o.flags|=4)};function ac(s,o){if(!_t)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function un(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(o)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=c,o}function pA(s,o,c){var f=o.pendingProps;switch(up(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(o),null;case 1:return Tn(o.type)&&Gu(),un(o),null;case 3:return f=o.stateNode,ka(),wt(Sn),wt(ln),Sp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ju(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hr!==null&&(Zp(hr),hr=null))),$p(s,o),un(o),null;case 5:xp(o);var g=So(nc.current);if(c=o.type,s!==null&&o.stateNode!=null)Jw(s,o,c,f,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return un(o),null}if(s=So(Wr.current),Ju(o)){f=o.stateNode,c=o.type;var v=o.memoizedProps;switch(f[qr]=o,f[Xl]=v,s=(o.mode&1)!==0,c){case"dialog":vt("cancel",f),vt("close",f);break;case"iframe":case"object":case"embed":vt("load",f);break;case"video":case"audio":for(g=0;g<Kl.length;g++)vt(Kl[g],f);break;case"source":vt("error",f);break;case"img":case"image":case"link":vt("error",f),vt("load",f);break;case"details":vt("toggle",f);break;case"input":Nr(f,v),vt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},vt("invalid",f);break;case"textarea":El(f,v),vt("invalid",f)}lr(c,v),g=null;for(var T in v)if(v.hasOwnProperty(T)){var U=v[T];T==="children"?typeof U=="string"?f.textContent!==U&&(v.suppressHydrationWarning!==!0&&qu(f.textContent,U,s),g=["children",U]):typeof U=="number"&&f.textContent!==""+U&&(v.suppressHydrationWarning!==!0&&qu(f.textContent,U,s),g=["children",""+U]):i.hasOwnProperty(T)&&U!=null&&T==="onScroll"&&vt("scroll",f)}switch(c){case"input":qe(f),no(f,v,!0);break;case"textarea":qe(f),Ks(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Wu)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Sl(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(c,{is:f.is}):(s=T.createElement(c),c==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,c),s[qr]=o,s[Xl]=f,Xw(s,o,!1,!1),o.stateNode=s;e:{switch(T=Zo(c,f),c){case"dialog":vt("cancel",s),vt("close",s),g=f;break;case"iframe":case"object":case"embed":vt("load",s),g=f;break;case"video":case"audio":for(g=0;g<Kl.length;g++)vt(Kl[g],s);g=f;break;case"source":vt("error",s),g=f;break;case"img":case"image":case"link":vt("error",s),vt("load",s),g=f;break;case"details":vt("toggle",s),g=f;break;case"input":Nr(s,f),g=Jt(s,f),vt("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=le({},f,{value:void 0}),vt("invalid",s);break;case"textarea":El(s,f),g=xl(s,f),vt("invalid",s);break;default:g=f}lr(c,g),U=g;for(v in U)if(U.hasOwnProperty(v)){var $=U[v];v==="style"?Jo(s,$):v==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&vu(s,$)):v==="children"?typeof $=="string"?(c!=="textarea"||$!=="")&&ro(s,$):typeof $=="number"&&ro(s,""+$):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?$!=null&&v==="onScroll"&&vt("scroll",s):$!=null&&P(s,v,$,T))}switch(c){case"input":qe(s),no(s,f,!1);break;case"textarea":qe(s),Ks(s);break;case"option":f.value!=null&&s.setAttribute("value",""+ge(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?ar(s,!!f.multiple,v,!1):f.defaultValue!=null&&ar(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Wu)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return un(o),null;case 6:if(s&&o.stateNode!=null)Zw(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(c=So(nc.current),So(Wr.current),Ju(o)){if(f=o.stateNode,c=o.memoizedProps,f[qr]=o,(v=f.nodeValue!==c)&&(s=Fn,s!==null))switch(s.tag){case 3:qu(f.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&qu(f.nodeValue,c,(s.mode&1)!==0)}v&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[qr]=o,o.stateNode=f}return un(o),null;case 13:if(wt(Et),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_t&&Un!==null&&(o.mode&1)!==0&&(o.flags&128)===0)nw(),Ca(),o.flags|=98560,v=!1;else if(v=Ju(o),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[qr]=o}else Ca(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;un(o),v=!1}else hr!==null&&(Zp(hr),hr=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Et.current&1)!==0?zt===0&&(zt=3):nm())),o.updateQueue!==null&&(o.flags|=4),un(o),null);case 4:return ka(),$p(s,o),s===null&&Ql(o.stateNode.containerInfo),un(o),null;case 10:return gp(o.type._context),un(o),null;case 17:return Tn(o.type)&&Gu(),un(o),null;case 19:if(wt(Et),v=o.memoizedState,v===null)return un(o),null;if(f=(o.flags&128)!==0,T=v.rendering,T===null)if(f)ac(v,!1);else{if(zt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(T=sd(s),T!==null){for(o.flags|=128,ac(v,!1),f=T.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)v=c,s=f,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,s=T.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return ft(Et,Et.current&1|2),o.child}s=s.sibling}v.tail!==null&&yt()>Da&&(o.flags|=128,f=!0,ac(v,!1),o.lanes=4194304)}else{if(!f)if(s=sd(T),s!==null){if(o.flags|=128,f=!0,c=s.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),ac(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!_t)return un(o),null}else 2*yt()-v.renderingStartTime>Da&&c!==1073741824&&(o.flags|=128,f=!0,ac(v,!1),o.lanes=4194304);v.isBackwards?(T.sibling=o.child,o.child=T):(c=v.last,c!==null?c.sibling=T:o.child=T,v.last=T)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=yt(),o.sibling=null,c=Et.current,ft(Et,f?c&1|2:c&1),o):(un(o),null);case 22:case 23:return tm(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(zn&1073741824)!==0&&(un(o),o.subtreeFlags&6&&(o.flags|=8192)):un(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function mA(s,o){switch(up(o),o.tag){case 1:return Tn(o.type)&&Gu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ka(),wt(Sn),wt(ln),Sp(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return xp(o),null;case 13:if(wt(Et),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ca()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return wt(Et),null;case 4:return ka(),null;case 10:return gp(o.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var fd=!1,dn=!1,gA=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Pa(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Nt(s,o,f)}else c.current=null}function Bp(s,o,c){try{c()}catch(f){Nt(s,o,f)}}var e_=!1;function yA(s,o){if(tp=xs,s=Pv(),Gf(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var T=0,U=-1,$=-1,X=0,ae=0,ce=s,oe=null;t:for(;;){for(var ve;ce!==c||g!==0&&ce.nodeType!==3||(U=T+g),ce!==v||f!==0&&ce.nodeType!==3||($=T+f),ce.nodeType===3&&(T+=ce.nodeValue.length),(ve=ce.firstChild)!==null;)oe=ce,ce=ve;for(;;){if(ce===s)break t;if(oe===c&&++X===g&&(U=T),oe===v&&++ae===f&&($=T),(ve=ce.nextSibling)!==null)break;ce=oe,oe=ce.parentNode}ce=ve}c=U===-1||$===-1?null:{start:U,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(np={focusedElem:s,selectionRange:c},xs=!1,Ee=o;Ee!==null;)if(o=Ee,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Ee=s;else for(;Ee!==null;){o=Ee;try{var Te=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ae=Te.memoizedProps,Pt=Te.memoizedState,K=o.stateNode,W=K.getSnapshotBeforeUpdate(o.elementType===o.type?Ae:fr(o.type,Ae),Pt);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){Nt(o,o.return,ue)}if(s=o.sibling,s!==null){s.return=o.return,Ee=s;break}Ee=o.return}return Te=e_,e_=!1,Te}function lc(s,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&Bp(o,c,v)}g=g.next}while(g!==f)}}function pd(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function qp(s){var o=s.ref;if(o!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof o=="function"?o(s):o.current=s}}function t_(s){var o=s.alternate;o!==null&&(s.alternate=null,t_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[qr],delete o[Xl],delete o[op],delete o[ZC],delete o[eA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function n_(s){return s.tag===5||s.tag===3||s.tag===4}function r_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||n_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Wp(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(s,o):c.insertBefore(s,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(s,c)):(o=c,o.appendChild(s)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Wu));else if(f!==4&&(s=s.child,s!==null))for(Wp(s,o,c),s=s.sibling;s!==null;)Wp(s,o,c),s=s.sibling}function Hp(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Hp(s,o,c),s=s.sibling;s!==null;)Hp(s,o,c),s=s.sibling}var tn=null,pr=!1;function gi(s,o,c){for(c=c.child;c!==null;)s_(s,o,c),c=c.sibling}function s_(s,o,c){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(lo,c)}catch{}switch(c.tag){case 5:dn||Pa(c,o);case 6:var f=tn,g=pr;tn=null,gi(s,o,c),tn=f,pr=g,tn!==null&&(pr?(s=tn,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):tn.removeChild(c.stateNode));break;case 18:tn!==null&&(pr?(s=tn,c=c.stateNode,s.nodeType===8?ip(s.parentNode,c):s.nodeType===1&&ip(s,c),oi(s)):ip(tn,c.stateNode));break;case 4:f=tn,g=pr,tn=c.stateNode.containerInfo,pr=!0,gi(s,o,c),tn=f,pr=g;break;case 0:case 11:case 14:case 15:if(!dn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&Bp(c,o,T),g=g.next}while(g!==f)}gi(s,o,c);break;case 1:if(!dn&&(Pa(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(U){Nt(c,o,U)}gi(s,o,c);break;case 21:gi(s,o,c);break;case 22:c.mode&1?(dn=(f=dn)||c.memoizedState!==null,gi(s,o,c),dn=f):gi(s,o,c);break;default:gi(s,o,c)}}function i_(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new gA),o.forEach(function(f){var g=CA.bind(null,s,f);c.has(f)||(c.add(f),f.then(g,g))})}}function mr(s,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var v=s,T=o,U=T;e:for(;U!==null;){switch(U.tag){case 5:tn=U.stateNode,pr=!1;break e;case 3:tn=U.stateNode.containerInfo,pr=!0;break e;case 4:tn=U.stateNode.containerInfo,pr=!0;break e}U=U.return}if(tn===null)throw Error(t(160));s_(v,T,g),tn=null,pr=!1;var $=g.alternate;$!==null&&($.return=null),g.return=null}catch(X){Nt(g,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)o_(o,s),o=o.sibling}function o_(s,o){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(mr(o,s),Gr(s),f&4){try{lc(3,s,s.return),pd(3,s)}catch(Ae){Nt(s,s.return,Ae)}try{lc(5,s,s.return)}catch(Ae){Nt(s,s.return,Ae)}}break;case 1:mr(o,s),Gr(s),f&512&&c!==null&&Pa(c,c.return);break;case 5:if(mr(o,s),Gr(s),f&512&&c!==null&&Pa(c,c.return),s.flags&32){var g=s.stateNode;try{ro(g,"")}catch(Ae){Nt(s,s.return,Ae)}}if(f&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,T=c!==null?c.memoizedProps:v,U=s.type,$=s.updateQueue;if(s.updateQueue=null,$!==null)try{U==="input"&&v.type==="radio"&&v.name!=null&&Qn(g,v),Zo(U,T);var X=Zo(U,v);for(T=0;T<$.length;T+=2){var ae=$[T],ce=$[T+1];ae==="style"?Jo(g,ce):ae==="dangerouslySetInnerHTML"?vu(g,ce):ae==="children"?ro(g,ce):P(g,ae,ce,X)}switch(U){case"input":Pn(g,v);break;case"textarea":yu(g,v);break;case"select":var oe=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var ve=v.value;ve!=null?ar(g,!!v.multiple,ve,!1):oe!==!!v.multiple&&(v.defaultValue!=null?ar(g,!!v.multiple,v.defaultValue,!0):ar(g,!!v.multiple,v.multiple?[]:"",!1))}g[Xl]=v}catch(Ae){Nt(s,s.return,Ae)}}break;case 6:if(mr(o,s),Gr(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(Ae){Nt(s,s.return,Ae)}}break;case 3:if(mr(o,s),Gr(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{oi(o.containerInfo)}catch(Ae){Nt(s,s.return,Ae)}break;case 4:mr(o,s),Gr(s);break;case 13:mr(o,s),Gr(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Qp=yt())),f&4&&i_(s);break;case 22:if(ae=c!==null&&c.memoizedState!==null,s.mode&1?(dn=(X=dn)||ae,mr(o,s),dn=X):mr(o,s),Gr(s),f&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!ae&&(s.mode&1)!==0)for(Ee=s,ae=s.child;ae!==null;){for(ce=Ee=ae;Ee!==null;){switch(oe=Ee,ve=oe.child,oe.tag){case 0:case 11:case 14:case 15:lc(4,oe,oe.return);break;case 1:Pa(oe,oe.return);var Te=oe.stateNode;if(typeof Te.componentWillUnmount=="function"){f=oe,c=oe.return;try{o=f,Te.props=o.memoizedProps,Te.state=o.memoizedState,Te.componentWillUnmount()}catch(Ae){Nt(f,c,Ae)}}break;case 5:Pa(oe,oe.return);break;case 22:if(oe.memoizedState!==null){c_(ce);continue}}ve!==null?(ve.return=oe,Ee=ve):c_(ce)}ae=ae.sibling}e:for(ae=null,ce=s;;){if(ce.tag===5){if(ae===null){ae=ce;try{g=ce.stateNode,X?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(U=ce.stateNode,$=ce.memoizedProps.style,T=$!=null&&$.hasOwnProperty("display")?$.display:null,U.style.display=Xs("display",T))}catch(Ae){Nt(s,s.return,Ae)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(Ae){Nt(s,s.return,Ae)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===s)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===s)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===s)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:mr(o,s),Gr(s),f&4&&i_(s);break;case 21:break;default:mr(o,s),Gr(s)}}function Gr(s){var o=s.flags;if(o&2){try{e:{for(var c=s.return;c!==null;){if(n_(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(ro(g,""),f.flags&=-33);var v=r_(s);Hp(s,v,g);break;case 3:case 4:var T=f.stateNode.containerInfo,U=r_(s);Wp(s,U,T);break;default:throw Error(t(161))}}catch($){Nt(s,s.return,$)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function vA(s,o,c){Ee=s,a_(s)}function a_(s,o,c){for(var f=(s.mode&1)!==0;Ee!==null;){var g=Ee,v=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||fd;if(!T){var U=g.alternate,$=U!==null&&U.memoizedState!==null||dn;U=fd;var X=dn;if(fd=T,(dn=$)&&!X)for(Ee=g;Ee!==null;)T=Ee,$=T.child,T.tag===22&&T.memoizedState!==null?u_(g):$!==null?($.return=T,Ee=$):u_(g);for(;v!==null;)Ee=v,a_(v),v=v.sibling;Ee=g,fd=U,dn=X}l_(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Ee=v):l_(s)}}function l_(s){for(;Ee!==null;){var o=Ee;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:dn||pd(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!dn)if(c===null)f.componentDidMount();else{var g=o.elementType===o.type?c.memoizedProps:fr(o.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&cw(o,v,f);break;case 3:var T=o.updateQueue;if(T!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}cw(o,T,c)}break;case 5:var U=o.stateNode;if(c===null&&o.flags&4){c=U;var $=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&c.focus();break;case"img":$.src&&(c.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var ae=X.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&oi(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}dn||o.flags&512&&qp(o)}catch(oe){Nt(o,o.return,oe)}}if(o===s){Ee=null;break}if(c=o.sibling,c!==null){c.return=o.return,Ee=c;break}Ee=o.return}}function c_(s){for(;Ee!==null;){var o=Ee;if(o===s){Ee=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Ee=c;break}Ee=o.return}}function u_(s){for(;Ee!==null;){var o=Ee;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{pd(4,o)}catch($){Nt(o,c,$)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch($){Nt(o,g,$)}}var v=o.return;try{qp(o)}catch($){Nt(o,v,$)}break;case 5:var T=o.return;try{qp(o)}catch($){Nt(o,T,$)}}}catch($){Nt(o,o.return,$)}if(o===s){Ee=null;break}var U=o.sibling;if(U!==null){U.return=o.return,Ee=U;break}Ee=o.return}}var wA=Math.ceil,md=B.ReactCurrentDispatcher,Gp=B.ReactCurrentOwner,nr=B.ReactCurrentBatchConfig,tt=0,Wt=null,Ot=null,nn=0,zn=0,ja=di(0),zt=0,cc=null,Io=0,gd=0,Kp=0,uc=null,Cn=null,Qp=0,Da=1/0,Rs=null,yd=!1,Yp=null,yi=null,vd=!1,vi=null,wd=0,dc=0,Xp=null,_d=-1,xd=0;function wn(){return(tt&6)!==0?yt():_d!==-1?_d:_d=yt()}function wi(s){return(s.mode&1)===0?1:(tt&2)!==0&&nn!==0?nn&-nn:nA.transition!==null?(xd===0&&(xd=Pl()),xd):(s=Ze,s!==0||(s=window.event,s=s===void 0?16:ca(s.type)),s)}function gr(s,o,c,f){if(50<dc)throw dc=0,Xp=null,Error(t(185));fo(s,c,f),((tt&2)===0||s!==Wt)&&(s===Wt&&((tt&2)===0&&(gd|=c),zt===4&&_i(s,nn)),An(s,f),c===1&&tt===0&&(o.mode&1)===0&&(Da=yt()+500,Qu&&fi()))}function An(s,o){var c=s.callbackNode;ho(s,o);var f=vs(s,s===Wt?nn:0);if(f===0)c!==null&&na(c),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(c!=null&&na(c),o===1)s.tag===0?tA(h_.bind(null,s)):Xv(h_.bind(null,s)),XC(function(){(tt&6)===0&&fi()}),c=null;else{switch(Dr(f)){case 1:c=ra;break;case 4:c=Nl;break;case 16:c=ao;break;case 536870912:c=sa;break;default:c=ao}c=__(c,d_.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function d_(s,o){if(_d=-1,xd=0,(tt&6)!==0)throw Error(t(327));var c=s.callbackNode;if(Ma()&&s.callbackNode!==c)return null;var f=vs(s,s===Wt?nn:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=Ed(s,f);else{o=f;var g=tt;tt|=2;var v=p_();(Wt!==s||nn!==o)&&(Rs=null,Da=yt()+500,Ao(s,o));do try{EA();break}catch(U){f_(s,U)}while(!0);mp(),md.current=v,tt=g,Ot!==null?o=0:(Wt=null,nn=0,o=zt)}if(o!==0){if(o===2&&(g=Rl(s),g!==0&&(f=g,o=Jp(s,g))),o===1)throw c=cc,Ao(s,0),_i(s,f),An(s,yt()),c;if(o===6)_i(s,f);else{if(g=s.current.alternate,(f&30)===0&&!_A(g)&&(o=Ed(s,f),o===2&&(v=Rl(s),v!==0&&(f=v,o=Jp(s,v))),o===1))throw c=cc,Ao(s,0),_i(s,f),An(s,yt()),c;switch(s.finishedWork=g,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:bo(s,Cn,Rs);break;case 3:if(_i(s,f),(f&130023424)===f&&(o=Qp+500-yt(),10<o)){if(vs(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){wn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=sp(bo.bind(null,s,Cn,Rs),o);break}bo(s,Cn,Rs);break;case 4:if(_i(s,f),(f&4194240)===f)break;for(o=s.eventTimes,g=-1;0<f;){var T=31-Dn(f);v=1<<T,T=o[T],T>g&&(g=T),f&=~v}if(f=g,f=yt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*wA(f/1960))-f,10<f){s.timeoutHandle=sp(bo.bind(null,s,Cn,Rs),f);break}bo(s,Cn,Rs);break;case 5:bo(s,Cn,Rs);break;default:throw Error(t(329))}}}return An(s,yt()),s.callbackNode===c?d_.bind(null,s):null}function Jp(s,o){var c=uc;return s.current.memoizedState.isDehydrated&&(Ao(s,o).flags|=256),s=Ed(s,o),s!==2&&(o=Cn,Cn=c,o!==null&&Zp(o)),s}function Zp(s){Cn===null?Cn=s:Cn.push.apply(Cn,s)}function _A(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],v=g.getSnapshot;g=g.value;try{if(!dr(v(),g))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _i(s,o){for(o&=~Kp,o&=~gd,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-Dn(o),f=1<<c;s[c]=-1,o&=~f}}function h_(s){if((tt&6)!==0)throw Error(t(327));Ma();var o=vs(s,0);if((o&1)===0)return An(s,yt()),null;var c=Ed(s,o);if(s.tag!==0&&c===2){var f=Rl(s);f!==0&&(o=f,c=Jp(s,f))}if(c===1)throw c=cc,Ao(s,0),_i(s,o),An(s,yt()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,bo(s,Cn,Rs),An(s,yt()),null}function em(s,o){var c=tt;tt|=1;try{return s(o)}finally{tt=c,tt===0&&(Da=yt()+500,Qu&&fi())}}function Co(s){vi!==null&&vi.tag===0&&(tt&6)===0&&Ma();var o=tt;tt|=1;var c=nr.transition,f=Ze;try{if(nr.transition=null,Ze=1,s)return s()}finally{Ze=f,nr.transition=c,tt=o,(tt&6)===0&&fi()}}function tm(){zn=ja.current,wt(ja)}function Ao(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,YC(c)),Ot!==null)for(c=Ot.return;c!==null;){var f=c;switch(up(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Gu();break;case 3:ka(),wt(Sn),wt(ln),Sp();break;case 5:xp(f);break;case 4:ka();break;case 13:wt(Et);break;case 19:wt(Et);break;case 10:gp(f.type._context);break;case 22:case 23:tm()}c=c.return}if(Wt=s,Ot=s=xi(s.current,null),nn=zn=o,zt=0,cc=null,Kp=gd=Io=0,Cn=uc=null,Eo!==null){for(o=0;o<Eo.length;o++)if(c=Eo[o],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,v=c.pending;if(v!==null){var T=v.next;v.next=g,f.next=T}c.pending=f}Eo=null}return s}function f_(s,o){do{var c=Ot;try{if(mp(),id.current=cd,od){for(var f=St.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}od=!1}if(To=0,qt=Ut=St=null,rc=!1,sc=0,Gp.current=null,c===null||c.return===null){zt=1,cc=o,Ot=null;break}e:{var v=s,T=c.return,U=c,$=o;if(o=nn,U.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var X=$,ae=U,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ve=Vw(T);if(ve!==null){ve.flags&=-257,Fw(ve,T,U,v,o),ve.mode&1&&Lw(v,X,o),o=ve,$=X;var Te=o.updateQueue;if(Te===null){var Ae=new Set;Ae.add($),o.updateQueue=Ae}else Te.add($);break e}else{if((o&1)===0){Lw(v,X,o),nm();break e}$=Error(t(426))}}else if(_t&&U.mode&1){var Pt=Vw(T);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Fw(Pt,T,U,v,o),fp(Ra($,U));break e}}v=$=Ra($,U),zt!==4&&(zt=2),uc===null?uc=[v]:uc.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var K=Mw(v,$,o);lw(v,K);break e;case 1:U=$;var W=v.type,Y=v.stateNode;if((v.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(yi===null||!yi.has(Y)))){v.flags|=65536,o&=-o,v.lanes|=o;var ue=Ow(v,U,o);lw(v,ue);break e}}v=v.return}while(v!==null)}g_(c)}catch(Ne){o=Ne,Ot===c&&c!==null&&(Ot=c=c.return);continue}break}while(!0)}function p_(){var s=md.current;return md.current=cd,s===null?cd:s}function nm(){(zt===0||zt===3||zt===2)&&(zt=4),Wt===null||(Io&268435455)===0&&(gd&268435455)===0||_i(Wt,nn)}function Ed(s,o){var c=tt;tt|=2;var f=p_();(Wt!==s||nn!==o)&&(Rs=null,Ao(s,o));do try{xA();break}catch(g){f_(s,g)}while(!0);if(mp(),tt=c,md.current=f,Ot!==null)throw Error(t(261));return Wt=null,nn=0,zt}function xA(){for(;Ot!==null;)m_(Ot)}function EA(){for(;Ot!==null&&!oo();)m_(Ot)}function m_(s){var o=w_(s.alternate,s,zn);s.memoizedProps=s.pendingProps,o===null?g_(s):Ot=o,Gp.current=null}function g_(s){var o=s;do{var c=o.alternate;if(s=o.return,(o.flags&32768)===0){if(c=pA(c,o,zn),c!==null){Ot=c;return}}else{if(c=mA(c,o),c!==null){c.flags&=32767,Ot=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{zt=6,Ot=null;return}}if(o=o.sibling,o!==null){Ot=o;return}Ot=o=s}while(o!==null);zt===0&&(zt=5)}function bo(s,o,c){var f=Ze,g=nr.transition;try{nr.transition=null,Ze=1,SA(s,o,c,f)}finally{nr.transition=g,Ze=f}return null}function SA(s,o,c,f){do Ma();while(vi!==null);if((tt&6)!==0)throw Error(t(327));c=s.finishedWork;var g=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=c.lanes|c.childLanes;if($f(s,v),s===Wt&&(Ot=Wt=null,nn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||vd||(vd=!0,__(ao,function(){return Ma(),null})),v=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||v){v=nr.transition,nr.transition=null;var T=Ze;Ze=1;var U=tt;tt|=4,Gp.current=null,yA(s,c),o_(c,s),BC(np),xs=!!tp,np=tp=null,s.current=c,vA(c),ys(),tt=U,Ze=T,nr.transition=v}else s.current=c;if(vd&&(vd=!1,vi=s,wd=g),v=s.pendingLanes,v===0&&(yi=null),Nu(c.stateNode),An(s,yt()),o!==null)for(f=s.onRecoverableError,c=0;c<o.length;c++)g=o[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(yd)throw yd=!1,s=Yp,Yp=null,s;return(wd&1)!==0&&s.tag!==0&&Ma(),v=s.pendingLanes,(v&1)!==0?s===Xp?dc++:(dc=0,Xp=s):dc=0,fi(),null}function Ma(){if(vi!==null){var s=Dr(wd),o=nr.transition,c=Ze;try{if(nr.transition=null,Ze=16>s?16:s,vi===null)var f=!1;else{if(s=vi,vi=null,wd=0,(tt&6)!==0)throw Error(t(331));var g=tt;for(tt|=4,Ee=s.current;Ee!==null;){var v=Ee,T=v.child;if((Ee.flags&16)!==0){var U=v.deletions;if(U!==null){for(var $=0;$<U.length;$++){var X=U[$];for(Ee=X;Ee!==null;){var ae=Ee;switch(ae.tag){case 0:case 11:case 15:lc(8,ae,v)}var ce=ae.child;if(ce!==null)ce.return=ae,Ee=ce;else for(;Ee!==null;){ae=Ee;var oe=ae.sibling,ve=ae.return;if(t_(ae),ae===X){Ee=null;break}if(oe!==null){oe.return=ve,Ee=oe;break}Ee=ve}}}var Te=v.alternate;if(Te!==null){var Ae=Te.child;if(Ae!==null){Te.child=null;do{var Pt=Ae.sibling;Ae.sibling=null,Ae=Pt}while(Ae!==null)}}Ee=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,Ee=T;else e:for(;Ee!==null;){if(v=Ee,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:lc(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Ee=K;break e}Ee=v.return}}var W=s.current;for(Ee=W;Ee!==null;){T=Ee;var Y=T.child;if((T.subtreeFlags&2064)!==0&&Y!==null)Y.return=T,Ee=Y;else e:for(T=W;Ee!==null;){if(U=Ee,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:pd(9,U)}}catch(Ne){Nt(U,U.return,Ne)}if(U===T){Ee=null;break e}var ue=U.sibling;if(ue!==null){ue.return=U.return,Ee=ue;break e}Ee=U.return}}if(tt=g,fi(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(lo,s)}catch{}f=!0}return f}finally{Ze=c,nr.transition=o}}return!1}function y_(s,o,c){o=Ra(c,o),o=Mw(s,o,1),s=mi(s,o,1),o=wn(),s!==null&&(fo(s,1,o),An(s,o))}function Nt(s,o,c){if(s.tag===3)y_(s,s,c);else for(;o!==null;){if(o.tag===3){y_(o,s,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(yi===null||!yi.has(f))){s=Ra(c,s),s=Ow(o,s,1),o=mi(o,s,1),s=wn(),o!==null&&(fo(o,1,s),An(o,s));break}}o=o.return}}function TA(s,o,c){var f=s.pingCache;f!==null&&f.delete(o),o=wn(),s.pingedLanes|=s.suspendedLanes&c,Wt===s&&(nn&c)===c&&(zt===4||zt===3&&(nn&130023424)===nn&&500>yt()-Qp?Ao(s,0):Kp|=c),An(s,o)}function v_(s,o){o===0&&((s.mode&1)===0?o=1:(o=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var c=wn();s=bs(s,o),s!==null&&(fo(s,o,c),An(s,c))}function IA(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),v_(s,c)}function CA(s,o){var c=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),v_(s,c)}var w_;w_=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||Sn.current)In=!0;else{if((s.lanes&c)===0&&(o.flags&128)===0)return In=!1,fA(s,o,c);In=(s.flags&131072)!==0}else In=!1,_t&&(o.flags&1048576)!==0&&Jv(o,Xu,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;hd(s,o),s=o.pendingProps;var g=Sa(o,ln.current);Na(o,c),g=Cp(null,o,f,s,g,c);var v=Ap();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tn(f)?(v=!0,Ku(o)):v=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,wp(o),g.updater=ud,o.stateNode=g,g._reactInternals=o,jp(o,f,s,c),o=Lp(null,o,f,!0,v,c)):(o.tag=0,_t&&v&&cp(o),vn(null,o,g,c),o=o.child),o;case 16:f=o.elementType;e:{switch(hd(s,o),s=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=bA(f),s=fr(f,s),g){case 0:o=Op(null,o,f,s,c);break e;case 1:o=Ww(null,o,f,s,c);break e;case 11:o=Uw(null,o,f,s,c);break e;case 14:o=zw(null,o,f,fr(f.type,s),c);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:fr(f,g),Op(s,o,f,g,c);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:fr(f,g),Ww(s,o,f,g,c);case 3:e:{if(Hw(o),s===null)throw Error(t(387));f=o.pendingProps,v=o.memoizedState,g=v.element,aw(s,o),rd(o,f,null,c);var T=o.memoizedState;if(f=T.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){g=Ra(Error(t(423)),o),o=Gw(s,o,f,c,g);break e}else if(f!==g){g=Ra(Error(t(424)),o),o=Gw(s,o,f,c,g);break e}else for(Un=ui(o.stateNode.containerInfo.firstChild),Fn=o,_t=!0,hr=null,c=iw(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ca(),f===g){o=ks(s,o,c);break e}vn(s,o,f,c)}o=o.child}return o;case 5:return uw(o),s===null&&hp(o),f=o.type,g=o.pendingProps,v=s!==null?s.memoizedProps:null,T=g.children,rp(f,g)?T=null:v!==null&&rp(f,v)&&(o.flags|=32),qw(s,o),vn(s,o,T,c),o.child;case 6:return s===null&&hp(o),null;case 13:return Kw(s,o,c);case 4:return _p(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Aa(o,null,f,c):vn(s,o,f,c),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:fr(f,g),Uw(s,o,f,g,c);case 7:return vn(s,o,o.pendingProps,c),o.child;case 8:return vn(s,o,o.pendingProps.children,c),o.child;case 12:return vn(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,v=o.memoizedProps,T=g.value,ft(ed,f._currentValue),f._currentValue=T,v!==null)if(dr(v.value,T)){if(v.children===g.children&&!Sn.current){o=ks(s,o,c);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var U=v.dependencies;if(U!==null){T=v.child;for(var $=U.firstContext;$!==null;){if($.context===f){if(v.tag===1){$=Ns(-1,c&-c),$.tag=2;var X=v.updateQueue;if(X!==null){X=X.shared;var ae=X.pending;ae===null?$.next=$:($.next=ae.next,ae.next=$),X.pending=$}}v.lanes|=c,$=v.alternate,$!==null&&($.lanes|=c),yp(v.return,c,o),U.lanes|=c;break}$=$.next}}else if(v.tag===10)T=v.type===o.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(t(341));T.lanes|=c,U=T.alternate,U!==null&&(U.lanes|=c),yp(T,c,o),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===o){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}vn(s,o,g.children,c),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Na(o,c),g=er(g),f=f(g),o.flags|=1,vn(s,o,f,c),o.child;case 14:return f=o.type,g=fr(f,o.pendingProps),g=fr(f.type,g),zw(s,o,f,g,c);case 15:return $w(s,o,o.type,o.pendingProps,c);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:fr(f,g),hd(s,o),o.tag=1,Tn(f)?(s=!0,Ku(o)):s=!1,Na(o,c),jw(o,f,g),jp(o,f,g,c),Lp(null,o,f,!0,s,c);case 19:return Yw(s,o,c);case 22:return Bw(s,o,c)}throw Error(t(156,o.tag))};function __(s,o){return bl(s,o)}function AA(s,o,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(s,o,c,f){return new AA(s,o,c,f)}function rm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bA(s){if(typeof s=="function")return rm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===V)return 11;if(s===me)return 14}return 2}function xi(s,o){var c=s.alternate;return c===null?(c=rr(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Sd(s,o,c,f,g,v){var T=2;if(f=s,typeof s=="function")rm(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case D:return No(c.children,g,v,o);case A:T=8,g|=8;break;case O:return s=rr(12,c,o,g|2),s.elementType=O,s.lanes=v,s;case M:return s=rr(13,c,o,g),s.elementType=M,s.lanes=v,s;case fe:return s=rr(19,c,o,g),s.elementType=fe,s.lanes=v,s;case _e:return Td(c,g,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:T=10;break e;case j:T=9;break e;case V:T=11;break e;case me:T=14;break e;case de:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=rr(T,c,o,g),o.elementType=s,o.type=f,o.lanes=v,o}function No(s,o,c,f){return s=rr(7,s,f,o),s.lanes=c,s}function Td(s,o,c,f){return s=rr(22,s,f,o),s.elementType=_e,s.lanes=c,s.stateNode={isHidden:!1},s}function sm(s,o,c){return s=rr(6,s,null,o),s.lanes=c,s}function im(s,o,c){return o=rr(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function NA(s,o,c,f,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function om(s,o,c,f,g,v,T,U,$){return s=new NA(s,o,c,U,$),o===1?(o=1,v===!0&&(o|=8)):o=0,v=rr(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},wp(v),s}function kA(s,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:f==null?null:""+f,children:s,containerInfo:o,implementation:c}}function x_(s){if(!s)return hi;s=s._reactInternals;e:{if(cr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(Tn(c))return Qv(s,c,o)}return o}function E_(s,o,c,f,g,v,T,U,$){return s=om(c,f,!0,s,g,v,T,U,$),s.context=x_(null),c=s.current,f=wn(),g=wi(c),v=Ns(f,g),v.callback=o??null,mi(c,v,g),s.current.lanes=g,fo(s,g,f),An(s,f),s}function Id(s,o,c,f){var g=o.current,v=wn(),T=wi(g);return c=x_(c),o.context===null?o.context=c:o.pendingContext=c,o=Ns(v,T),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=mi(g,o,T),s!==null&&(gr(s,g,T,v),nd(s,g,T)),T}function Cd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function S_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function am(s,o){S_(s,o),(s=s.alternate)&&S_(s,o)}function RA(){return null}var T_=typeof reportError=="function"?reportError:function(s){console.error(s)};function lm(s){this._internalRoot=s}Ad.prototype.render=lm.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Id(s,o,null,null)},Ad.prototype.unmount=lm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Co(function(){Id(null,s,null,null)}),o[Ts]=null}};function Ad(s){this._internalRoot=s}Ad.prototype.unstable_scheduleHydration=function(s){if(s){var o=Ll();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Mn.length&&o!==0&&o<Mn[c].priority;c++);Mn.splice(c,0,s),c===0&&aa(s)}};function cm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function I_(){}function PA(s,o,c,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var X=Cd(T);v.call(X)}}var T=E_(o,f,s,0,null,!1,!1,"",I_);return s._reactRootContainer=T,s[Ts]=T.current,Ql(s.nodeType===8?s.parentNode:s),Co(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var U=f;f=function(){var X=Cd($);U.call(X)}}var $=om(s,0,!1,null,null,!1,!1,"",I_);return s._reactRootContainer=$,s[Ts]=$.current,Ql(s.nodeType===8?s.parentNode:s),Co(function(){Id(o,$,c,f)}),$}function Nd(s,o,c,f,g){var v=c._reactRootContainer;if(v){var T=v;if(typeof g=="function"){var U=g;g=function(){var $=Cd(T);U.call($)}}Id(o,T,s,g)}else T=PA(c,o,s,g,f);return Cd(T)}Ml=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=it(o.pendingLanes);c!==0&&(Dl(o,c|1),An(o,yt()),(tt&6)===0&&(Da=yt()+500,fi()))}break;case 13:Co(function(){var f=bs(s,1);if(f!==null){var g=wn();gr(f,s,1,g)}}),am(s,1)}},ia=function(s){if(s.tag===13){var o=bs(s,134217728);if(o!==null){var c=wn();gr(o,s,134217728,c)}am(s,134217728)}},Ol=function(s){if(s.tag===13){var o=wi(s),c=bs(s,o);if(c!==null){var f=wn();gr(c,s,o,f)}am(s,o)}},Ll=function(){return Ze},Vl=function(s,o){var c=Ze;try{return Ze=s,o()}finally{Ze=c}},ps=function(s,o,c){switch(o){case"input":if(Pn(s,c),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==s&&f.form===s.form){var g=Hu(f);if(!g)throw Error(t(90));We(f),Pn(f,g)}}}break;case"textarea":yu(s,c);break;case"select":o=c.value,o!=null&&ar(s,!!c.multiple,o,!1)}},_u=em,xu=Co;var jA={usingClientEntryPoint:!1,Events:[Jl,xa,Hu,Zs,ei,em]},hc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DA={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=bu(s),s===null?null:s.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||RA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{lo=kd.inject(DA),jn=kd}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jA,bn.createPortal=function(s,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cm(o))throw Error(t(200));return kA(s,o,null,c)},bn.createRoot=function(s,o){if(!cm(s))throw Error(t(299));var c=!1,f="",g=T_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=om(s,1,!1,null,null,c,!1,f,g),s[Ts]=o.current,Ql(s.nodeType===8?s.parentNode:s),new lm(o)},bn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=bu(o),s=s===null?null:s.stateNode,s},bn.flushSync=function(s){return Co(s)},bn.hydrate=function(s,o,c){if(!bd(o))throw Error(t(200));return Nd(null,s,o,!0,c)},bn.hydrateRoot=function(s,o,c){if(!cm(s))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,g=!1,v="",T=T_;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),o=E_(o,null,s,1,c??null,g,!1,v,T),s[Ts]=o.current,Ql(s),f)for(s=0;s<f.length;s++)c=f[s],g=c._getVersion,g=g(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,g]:o.mutableSourceEagerHydrationData.push(c,g);return new Ad(o)},bn.render=function(s,o,c){if(!bd(o))throw Error(t(200));return Nd(null,s,o,!1,c)},bn.unmountComponentAtNode=function(s){if(!bd(s))throw Error(t(40));return s._reactRootContainer?(Co(function(){Nd(null,null,s,!1,function(){s._reactRootContainer=null,s[Ts]=null})}),!0):!1},bn.unstable_batchedUpdates=em,bn.unstable_renderSubtreeIntoContainer=function(s,o,c,f){if(!bd(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Nd(s,o,c,!1,f)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var j_;function sE(){if(j_)return hm.exports;j_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hm.exports=$A(),hm.exports}var D_;function BA(){if(D_)return Rd;D_=1;var n=sE();return Rd.createRoot=n.createRoot,Rd.hydrateRoot=n.hydrateRoot,Rd}var qA=BA(),S=Mg();const js=rE(S),WA=OA({__proto__:null,default:js},[S]);var HA=(n,e,t,r,i,a,l,h)=>{let p=document.documentElement,m=["light","dark"];function y(I){(Array.isArray(n)?n:[n]).forEach(k=>{let C=k==="class",b=C&&a?i.map(L=>a[L]||L):i;C?(p.classList.remove(...b),p.classList.add(a&&a[I]?a[I]:I)):p.setAttribute(k,I)}),_(I)}function _(I){h&&m.includes(I)&&(p.style.colorScheme=I)}function x(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)y(r);else try{let I=localStorage.getItem(e)||t,k=l&&I==="system"?x():I;y(k)}catch{}},M_=["light","dark"],iE="(prefers-color-scheme: dark)",GA=typeof window>"u",Og=S.createContext(void 0),KA={setTheme:n=>{},themes:[]},QA=()=>{var n;return(n=S.useContext(Og))!=null?n:KA},YA=n=>S.useContext(Og)?S.createElement(S.Fragment,null,n.children):S.createElement(JA,{...n}),XA=["light","dark"],JA=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=XA,defaultTheme:l=t?"system":"light",attribute:h="data-theme",value:p,children:m,nonce:y,scriptProps:_})=>{let[x,I]=S.useState(()=>eb(i,l)),[k,C]=S.useState(()=>x==="system"?mm():x),b=p?Object.values(p):a,L=S.useCallback(H=>{let Z=H;if(!Z)return;H==="system"&&t&&(Z=mm());let D=p?p[Z]:Z,A=e?tb(y):null,O=document.documentElement,F=j=>{j==="class"?(O.classList.remove(...b),D&&O.classList.add(D)):j.startsWith("data-")&&(D?O.setAttribute(j,D):O.removeAttribute(j))};if(Array.isArray(h)?h.forEach(F):F(h),r){let j=M_.includes(l)?l:null,V=M_.includes(Z)?Z:j;O.style.colorScheme=V}A==null||A()},[y]),N=S.useCallback(H=>{let Z=typeof H=="function"?H(x):H;I(Z);try{localStorage.setItem(i,Z)}catch{}},[x]),P=S.useCallback(H=>{let Z=mm(H);C(Z),x==="system"&&t&&!n&&L("system")},[x,n]);S.useEffect(()=>{let H=window.matchMedia(iE);return H.addListener(P),P(H),()=>H.removeListener(P)},[P]),S.useEffect(()=>{let H=Z=>{Z.key===i&&(Z.newValue?I(Z.newValue):N(l))};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[N]),S.useEffect(()=>{L(n??x)},[n,x]);let B=S.useMemo(()=>({theme:x,setTheme:N,forcedTheme:n,resolvedTheme:x==="system"?k:x,themes:t?[...a,"system"]:a,systemTheme:t?k:void 0}),[x,N,n,k,t,a]);return S.createElement(Og.Provider,{value:B},S.createElement(ZA,{forcedTheme:n,storageKey:i,attribute:h,enableSystem:t,enableColorScheme:r,defaultTheme:l,value:p,themes:a,nonce:y,scriptProps:_}),m)},ZA=S.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:l,themes:h,nonce:p,scriptProps:m})=>{let y=JSON.stringify([t,e,a,n,h,l,r,i]).slice(1,-1);return S.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(${HA.toString()})(${y})`}})}),eb=(n,e)=>{if(GA)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},tb=n=>{let e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},mm=n=>(n||(n=window.matchMedia(iE)),n.matches?"dark":"light");const nb="modulepreload",rb=function(n){return"/"+n},O_={},L_=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));i=l(t.map(m=>{if(m=rb(m),m in O_)return;O_[m]=!0;const y=m.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":nb,y||(x.as="script"),x.crossOrigin="",x.href=m,p&&x.setAttribute("nonce",p),document.head.appendChild(x),y)return new Promise((I,k)=>{x.addEventListener("load",I),x.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return i.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},sb=()=>{};var V_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ib=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],h=n[t++],p=((i&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},aE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,h=l?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,y=a>>2,_=(a&3)<<4|h>>4;let x=(h&15)<<2|m>>6,I=m&63;p||(I=64,l||(x=64)),r.push(t[y],t[_],t[x],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ib(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||h==null||m==null||_==null)throw new ob;const x=a<<2|h>>4;if(r.push(x),m!==64){const I=h<<4&240|m>>2;if(r.push(I),_!==64){const k=m<<6&192|_;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ob extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ab=function(n){const e=oE(n);return aE.encodeByteArray(e,!0)},uh=function(n){return ab(n).replace(/\./g,"")},lE=function(n){try{return aE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=()=>lb().__FIREBASE_DEFAULTS__,ub=()=>{if(typeof process>"u"||typeof V_>"u")return;const n=V_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},db=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lE(n[1]);return e&&JSON.parse(e)},zh=()=>{try{return sb()||cb()||ub()||db()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cE=n=>{var e,t;return(t=(e=zh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Lg=n=>{const e=cE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uE=()=>{var n;return(n=zh())==null?void 0:n.config},dE=n=>{var e;return(e=zh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $h(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[uh(JSON.stringify(t)),uh(JSON.stringify(l)),""].join(".")}const Sc={};function fb(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?n.emulator.push(e):n.prod.push(e);return n}function pb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let F_=!1;function Bh(n,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Sc[n]===e||Sc[n]||F_)return;Sc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=fb().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,I){x.setAttribute("width","24"),x.setAttribute("id",I),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{F_=!0,l()},x}function y(x,I){x.setAttribute("id",I),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function _(){const x=pb(r),I=t("text"),k=document.getElementById(I)||document.createElement("span"),C=t("learnmore"),b=document.getElementById(C)||document.createElement("a"),L=t("preprendIcon"),N=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;h(P),y(b,C);const B=m();p(N,L),P.append(N,k,b,B),document.body.appendChild(P)}a?(k.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function gb(){var e;const n=(e=zh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _b(){const n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xb(){return!gb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eb(){try{return typeof indexedDB=="object"}catch{return!1}}function Sb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="FirebaseError";class ls extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Tb,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?Ib(a,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new ls(i,h,r)}}function Ib(n,e){return n.replace(Cb,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Cb=/\{\$([^}]+)}/g;function Ab(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Oo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(U_(a)&&U_(l)){if(!Oo(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function U_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function yc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bb(n,e){const t=new Nb(n,e);return t.subscribe.bind(t)}class Nb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");kb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=gm),i.error===void 0&&(i.error=gm),i.complete===void 0&&(i.complete=gm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n){return n&&n._delegate?n._delegate:n}class Us{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new hb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jb(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pb(n){return n===Po?void 0:n}function jb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const Mb={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},Ob=Ye.INFO,Lb={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},Vb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Lb[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=Ob,this._logHandler=Vb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const Fb=(n,e)=>e.some(t=>n instanceof t);let z_,$_;function Ub(){return z_||(z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zb(){return $_||($_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,Bm=new WeakMap,pE=new WeakMap,ym=new WeakMap,Fg=new WeakMap;function $b(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ri(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&fE.set(t,n)}).catch(()=>{}),Fg.set(e,n),e}function Bb(n){if(Bm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Bm.set(n,e)}let qm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qb(n){qm=n(qm)}function Wb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(vm(this),e,...t);return pE.set(r,e.sort?e.sort():[e]),Ri(r)}:zb().includes(n)?function(...e){return n.apply(vm(this),e),Ri(fE.get(this))}:function(...e){return Ri(n.apply(vm(this),e))}}function Hb(n){return typeof n=="function"?Wb(n):(n instanceof IDBTransaction&&Bb(n),Fb(n,Ub())?new Proxy(n,qm):n)}function Ri(n){if(n instanceof IDBRequest)return $b(n);if(ym.has(n))return ym.get(n);const e=Hb(n);return e!==n&&(ym.set(n,e),Fg.set(e,n)),e}const vm=n=>Fg.get(n);function Gb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=Ri(l);return r&&l.addEventListener("upgradeneeded",p=>{r(Ri(l.result),p.oldVersion,p.newVersion,Ri(l.transaction),p)}),t&&l.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Kb=["get","getKey","getAll","getAllKeys","count"],Qb=["put","add","delete","clear"],wm=new Map;function B_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Qb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Kb.includes(t)))return;const a=async function(l,...h){const p=this.transaction(l,i?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),i&&p.done]))[0]};return wm.set(e,a),a}qb(n=>({...n,get:(e,t,r)=>B_(e,t)||n.get(e,t,r),has:(e,t)=>!!B_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Xb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Xb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wm="@firebase/app",q_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Vg("@firebase/app"),Jb="@firebase/app-compat",Zb="@firebase/analytics-compat",eN="@firebase/analytics",tN="@firebase/app-check-compat",nN="@firebase/app-check",rN="@firebase/auth",sN="@firebase/auth-compat",iN="@firebase/database",oN="@firebase/data-connect",aN="@firebase/database-compat",lN="@firebase/functions",cN="@firebase/functions-compat",uN="@firebase/installations",dN="@firebase/installations-compat",hN="@firebase/messaging",fN="@firebase/messaging-compat",pN="@firebase/performance",mN="@firebase/performance-compat",gN="@firebase/remote-config",yN="@firebase/remote-config-compat",vN="@firebase/storage",wN="@firebase/storage-compat",_N="@firebase/firestore",xN="@firebase/ai",EN="@firebase/firestore-compat",SN="firebase",TN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",IN={[Wm]:"fire-core",[Jb]:"fire-core-compat",[eN]:"fire-analytics",[Zb]:"fire-analytics-compat",[nN]:"fire-app-check",[tN]:"fire-app-check-compat",[rN]:"fire-auth",[sN]:"fire-auth-compat",[iN]:"fire-rtdb",[oN]:"fire-data-connect",[aN]:"fire-rtdb-compat",[lN]:"fire-fn",[cN]:"fire-fn-compat",[uN]:"fire-iid",[dN]:"fire-iid-compat",[hN]:"fire-fcm",[fN]:"fire-fcm-compat",[pN]:"fire-perf",[mN]:"fire-perf-compat",[gN]:"fire-rc",[yN]:"fire-rc-compat",[vN]:"fire-gcs",[wN]:"fire-gcs-compat",[_N]:"fire-fst",[EN]:"fire-fst-compat",[xN]:"fire-vertex","fire-js":"fire-js",[SN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,CN=new Map,Gm=new Map;function W_(n,e){try{n.container.addComponent(e)}catch(t){zs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ui(n){const e=n.name;if(Gm.has(e))return zs.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,n);for(const t of dh.values())W_(t,n);for(const t of CN.values())W_(t,n);return!0}function Jc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new Yc("app","Firebase",AN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=TN;function mE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Hm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Pi.create("bad-app-name",{appName:String(i)});if(t||(t=uE()),!t)throw Pi.create("no-options");const a=dh.get(i);if(a){if(Oo(t,a.options)&&Oo(r,a.config))return a;throw Pi.create("duplicate-app",{appName:i})}const l=new Db(i);for(const p of Gm.values())l.addComponent(p);const h=new bN(t,r,l);return dh.set(i,h),h}function qh(n=Hm){const e=dh.get(n);if(!e&&n===Hm&&uE())return mE();if(!e)throw Pi.create("no-app",{appName:n});return e}function sr(n,e,t){let r=IN[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zs.warn(l.join(" "));return}Ui(new Us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="firebase-heartbeat-database",kN=1,Rc="firebase-heartbeat-store";let _m=null;function gE(){return _m||(_m=Gb(NN,kN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Pi.create("idb-open",{originalErrorMessage:n.message})})),_m}async function RN(n){try{const t=(await gE()).transaction(Rc),r=await t.objectStore(Rc).get(yE(n));return await t.done,r}catch(e){if(e instanceof ls)zs.warn(e.message);else{const t=Pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zs.warn(t.message)}}}async function H_(n,e){try{const r=(await gE()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,yE(n)),await r.done}catch(t){if(t instanceof ls)zs.warn(t.message);else{const r=Pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zs.warn(r.message)}}}function yE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=1024,jN=30;class DN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ON(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=G_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>jN){const l=LN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=G_(),{heartbeatsToSend:r,unsentEntries:i}=MN(this._heartbeatsCache.heartbeats),a=uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zs.warn(t),""}}}function G_(){return new Date().toISOString().substring(0,10)}function MN(n,e=PN){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),K_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),K_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eb()?Sb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function K_(n){return uh(JSON.stringify({version:2,heartbeats:n})).length}function LN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(n){Ui(new Us("platform-logger",e=>new Yb(e),"PRIVATE")),Ui(new Us("heartbeat",e=>new DN(e),"PRIVATE")),sr(Wm,q_,n),sr(Wm,q_,"esm2020"),sr("fire-js","")}VN("");function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FN=vE,wE=new Yc("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Vg("@firebase/auth");function UN(n,...e){hh.logLevel<=Ye.WARN&&hh.warn(`Auth (${Ho}): ${n}`,...e)}function Xd(n,...e){hh.logLevel<=Ye.ERROR&&hh.error(`Auth (${Ho}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(n,...e){throw zg(n,...e)}function xr(n,...e){return zg(n,...e)}function Ug(n,e,t){const r={...FN(),[e]:t};return new Yc("auth","Firebase",r).create(e,{appName:n.name})}function es(n){return Ug(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _E(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gn(n,"argument-error"),Ug(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wE.create(n,...e)}function Pe(n,e,...t){if(!n)throw zg(e,...t)}function Ms(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xd(e),new Error(e)}function $s(n,e){n||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function zN(){return Q_()==="http:"||Q_()==="https:"}function Q_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zN()||vb()||"connection"in navigator)?navigator.onLine:!0}function BN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,$s(t>e,"Short delay should be less than long delay!"),this.isMobile=mb()||wb()}get(){return $N()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n,e){$s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HN=new Zc(3e4,6e4);function cs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function us(n,e,t,r,i={}){return EE(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Xc({key:n.config.apiKey,...l}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...a};return yb()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Qi(n.emulatorConfig.host)&&(m.credentials="include"),xE.fetch()(await SE(n,n.config.apiHost,t,h),m)})}async function EE(n,e,t){n._canInitEmulator=!1;const r={...qN,...e};try{const i=new KN(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Pd(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(n,"credential-already-in-use",l);if(p==="EMAIL_EXISTS")throw Pd(n,"email-already-in-use",l);if(p==="USER_DISABLED")throw Pd(n,"user-disabled",l);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Ug(n,y,m);Gn(n,y)}}catch(i){if(i instanceof ls)throw i;Gn(n,"network-request-failed",{message:String(i)})}}async function eu(n,e,t,r,i={}){const a=await us(n,e,t,r,i);return"mfaPendingCredential"in a&&Gn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function SE(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?$g(n.config,i):`${n.config.apiScheme}://${i}`;return WN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function GN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xr(this.auth,"network-request-failed")),HN.get())})}}function Pd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=xr(n,e,r);return i.customData._tokenResponse=t,i}function Y_(n){return n!==void 0&&n.enterprise!==void 0}class QN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YN(n,e){return us(n,"GET","/v2/recaptchaConfig",cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(n,e){return us(n,"POST","/v1/accounts:delete",e)}async function fh(n,e){return us(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JN(n,e=!1){const t=ut(n),r=await t.getIdToken(e),i=Bg(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Tc(xm(i.auth_time)),issuedAtTime:Tc(xm(i.iat)),expirationTime:Tc(xm(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function xm(n){return Number(n)*1e3}function Bg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const i=lE(t);return i?JSON.parse(i):(Xd("Failed to decode base64 JWT payload"),null)}catch(i){return Xd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function X_(n){const e=Bg(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ls&&ZN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ZN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(n){var _;const e=n.auth,t=await n.getIdToken(),r=await Pc(n,fh(e,{idToken:t}));Pe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=(_=i.providerUserInfo)!=null&&_.length?TE(i.providerUserInfo):[],l=nk(n.providerData,a),h=n.isAnonymous,p=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),m=h?p:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Qm(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function tk(n){const e=ut(n);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nk(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(n,e){const t=await EE(n,{},async()=>{const r=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await SE(n,i,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:r};return n.emulatorConfig&&Qi(n.emulatorConfig.host)&&(p.credentials="include"),xE.fetch()(l,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sk(n,e){return us(n,"POST","/v2/accounts:revokeToken",cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=X_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await rk(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new Wa;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Pe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class wr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JN(this,e)}reload(){return tk(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(es(this.auth));const e=await this.getIdToken();return await Pc(this,XN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:_,emailVerified:x,isAnonymous:I,providerData:k,stsTokenManager:C}=t;Pe(_&&C,e,"internal-error");const b=Wa.fromJSON(this.name,C);Pe(typeof _=="string",e,"internal-error"),Si(r,e.name),Si(i,e.name),Pe(typeof x=="boolean",e,"internal-error"),Pe(typeof I=="boolean",e,"internal-error"),Si(a,e.name),Si(l,e.name),Si(h,e.name),Si(p,e.name),Si(m,e.name),Si(y,e.name);const L=new wr({uid:_,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:b,createdAt:m,lastLoginAt:y});return k&&Array.isArray(k)&&(L.providerData=k.map(N=>({...N}))),p&&(L._redirectEventId=p),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new Wa;i.updateFromServerResponse(t);const a=new wr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ph(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?TE(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),h=new Wa;h.updateFromIdToken(r);const p=new wr({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Qm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;function Os(n){$s(n instanceof Function,"Expected a class definition");let e=J_.get(n);return e?($s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,J_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IE.type="NONE";const Z_=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Jd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Jd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fh(this.auth,{idToken:e}).catch(()=>{});return t?wr._fromGetAccountInfoResponse(this.auth,t,e):null}return wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ha(Os(Z_),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||Os(Z_);const l=Jd(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(l);if(y){let _;if(typeof y=="string"){const x=await fh(e,{idToken:y}).catch(()=>{});if(!x)break;_=await wr._fromGetAccountInfoResponse(e,x,y)}else _=wr._fromJSON(e,y);m!==a&&(h=_),a=m;break}}catch{}const p=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Ha(a,e,r):(a=p[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new Ha(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RE(e))return"Blackberry";if(PE(e))return"Webos";if(AE(e))return"Safari";if((e.includes("chrome/")||bE(e))&&!e.includes("edge/"))return"Chrome";if(kE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CE(n=yn()){return/firefox\//i.test(n)}function AE(n=yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bE(n=yn()){return/crios\//i.test(n)}function NE(n=yn()){return/iemobile/i.test(n)}function kE(n=yn()){return/android/i.test(n)}function RE(n=yn()){return/blackberry/i.test(n)}function PE(n=yn()){return/webos/i.test(n)}function qg(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ik(n=yn()){var e;return qg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function ok(){return _b()&&document.documentMode===10}function jE(n=yn()){return qg(n)||kE(n)||PE(n)||RE(n)||/windows phone/i.test(n)||NE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n,e=[]){let t;switch(n){case"Browser":t=ex(yn());break;case"Worker":t=`${ex(yn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const p=e(a);l(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(n,e={}){return us(n,"GET","/v2/passwordPolicy",cs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=6;class uk{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ck,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tx(this),this.idTokenSubscription=new tx(this),this.beforeStateQueue=new ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Os(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fh(this,{idToken:e}),r=await wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(mn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,h=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===h)&&(p!=null&&p.user)&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(es(this));const t=e?ut(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lk(this),t=new uk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Os(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[Os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{l=!0,p()}}else{const p=e.addObserver(t);return()=>{l=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&UN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function or(n){return ut(n)}class tx{constructor(e){this.auth=e,this.observer=null,this.addObserver=bb(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hk(n){Wh=n}function ME(n){return Wh.loadJS(n)}function fk(){return Wh.recaptchaEnterpriseScript}function pk(){return Wh.gapiScript}function mk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class gk{constructor(){this.enterprise=new yk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vk="recaptcha-enterprise",OE="NO_RECAPTCHA";class wk{constructor(e){this.type=vk,this.auth=or(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{YN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new QN(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(p=>{h(p)})})}function i(a,l,h){const p=window.grecaptcha;Y_(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(OE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gk().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&Y_(window.grecaptcha))i(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let p=fk();p.length!==0&&(p+=h),ME(p).then(()=>{i(h,a,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function nx(n,e,t,r=!1,i=!1){const a=new wk(n);let l;if(i)l=OE;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function mh(n,e,t,r,i){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await nx(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await nx(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n,e){const t=Jc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Oo(a,e??{}))return i;Gn(i,"already-initialized")}return t.initialize({options:e})}function xk(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ek(n,e,t){const r=or(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=LE(e),{host:l,port:h}=Sk(e),p=h===null?"":`:${h}`,m={url:`${a}//${l}${p}/`},y=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Oo(m,r.config.emulator)&&Oo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Qi(l)?($h(`${a}//${l}${p}`),Bh("Auth",!0)):Tk()}function LE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Sk(n){const e=LE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:rx(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:rx(l)}}}function rx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Tk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,t){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VE(n,e){return us(n,"POST","/v1/accounts:resetPassword",cs(n,e))}async function Ik(n,e){return us(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e){return eu(n,"POST","/v1/accounts:signInWithPassword",cs(n,e))}async function Ak(n,e){return us(n,"POST","/v1/accounts:sendOobCode",cs(n,e))}async function bk(n,e){return Ak(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(n,e){return eu(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}async function kk(n,e){return eu(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Wg{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new jc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new jc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,t,"signInWithPassword",Ck);case"emailLink":return Nk(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,r,"signUpPassword",Ik);case"emailLink":return kk(e,{idToken:t,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n,e){return eu(n,"POST","/v1/accounts:signInWithIdp",cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="http://localhost";class Lo extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new Lo(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ga(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ga(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ga(e,t)}buildRequest(){const e={requestUri:Rk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jk(n){const e=gc(yc(n)).link,t=e?gc(yc(e)).deep_link_id:null,r=gc(yc(n)).deep_link_id;return(r?gc(yc(r)).link:null)||r||t||e||n}class Hg{constructor(e){const t=gc(yc(e)),r=t.apiKey??null,i=t.oobCode??null,a=Pk(t.mode??null);Pe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=jk(e);try{return new Hg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,t){return jc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hg.parseLink(t);return Pe(r,"argument-error"),jc._fromEmailAndCode(e,r.code,r.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Hh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends tu{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lo._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ds.credential(t,r)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends tu{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends tu{constructor(){super("twitter.com")}static credential(e,t){return Lo._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bi.credential(t,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e){return eu(n,"POST","/v1/accounts:signUp",cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await wr._fromIdTokenResponse(e,r,i),l=sx(r);return new Vo({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=sx(r);return new Vo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function sx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends ls{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new gh(e,t,r,i)}}function FE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(n,a,e,r):a})}async function Mk(n,e,t=!1){const r=await Pc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(n,e,t=!1){const{auth:r}=n;if(mn(r.app))return Promise.reject(es(r));const i="reauthenticate";try{const a=await Pc(n,FE(r,i,e,n),t);Pe(a.idToken,r,"internal-error");const l=Bg(a.idToken);Pe(l,r,"internal-error");const{sub:h}=l;return Pe(n.uid===h,r,"user-mismatch"),Vo._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Gn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(n,e,t=!1){if(mn(n.app))return Promise.reject(es(n));const r="signIn",i=await FE(n,r,e),a=await Vo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function Lk(n,e){return UE(or(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Kg._fromServerResponse(e,t):"totpInfo"in t?Qg._fromServerResponse(e,t):Gn(e,"internal-error")}}class Kg extends Gg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Kg(t)}}class Qg extends Gg{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Qg(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(n){const e=or(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vk(n,e,t){const r=or(n);await mh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bk)}async function Fk(n,e,t){await VE(ut(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yg(n),r})}async function Uk(n,e){const t=ut(n),r=await VE(t,{oobCode:e}),i=r.requestType;switch(Pe(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(r.mfaInfo,t,"internal-error");default:Pe(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=Gg._fromServerResponse(or(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function zk(n,e){const{data:t}=await Uk(ut(n),e);return t.email}async function Em(n,e,t){if(mn(n.app))return Promise.reject(es(n));const r=or(n),l=await mh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Yg(n),p}),h=await Vo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function $k(n,e,t){return mn(n.app)?Promise.reject(es(n)):Lk(ut(n),al.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yg(n),r})}function Bk(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function qk(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function Wk(n,e,t,r){return ut(n).onAuthStateChanged(e,t,r)}function ko(n){return ut(n).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1e3,Gk=10;class $E extends zE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,p)=>{this.notifyListeners(l,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);ok()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Gk):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$E.type="LOCAL";const Kk=$E;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends zE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BE.type="SESSION";const qE=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async m=>m(t.origin,a)),p=await Qk(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((h,p)=>{const m=Xg("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(_){const x=_;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(x.data.response);break;default:clearTimeout(y),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function Xk(n){ts().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function Jk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function eR(){return WE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="firebaseLocalStorageDb",tR=1,vh="firebaseLocalStorage",GE="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function nR(){const n=indexedDB.deleteDatabase(HE);return new nu(n).toPromise()}function Ym(){const n=indexedDB.open(HE,tR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vh,{keyPath:GE})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await nR(),e(await Ym()))})})}async function ix(n,e,t){const r=Kh(n,!0).put({[GE]:e,value:t});return new nu(r).toPromise()}async function rR(n,e){const t=Kh(n,!1).get(e),r=await new nu(t).toPromise();return r===void 0?null:r.value}function ox(n,e){const t=Kh(n,!0).delete(e);return new nu(t).toPromise()}const sR=800,iR=3;class KE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>iR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(eR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Jk(),!this.activeServiceWorker)return;this.sender=new Yk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await ix(e,yh,"1"),await ox(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ix(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>rR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ox(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Kh(i,!1).getAll();return new nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KE.type="LOCAL";const oR=KE;new Zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n,e){return e?Os(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aR(n){return UE(n.auth,new Zg(n),n.bypassAuthState)}function lR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),Ok(t,new Zg(n),n.bypassAuthState)}async function cR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),Mk(t,new Zg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aR;case"linkViaPopup":case"linkViaRedirect":return cR;case"reauthViaPopup":case"reauthViaRedirect":return lR;default:Gn(this.auth,"internal-error")}}resolve(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Zc(2e3,1e4);async function dR(n,e,t){if(mn(n.app))return Promise.reject(xr(n,"operation-not-supported-in-this-environment"));const r=or(n);_E(n,e,Hh);const i=Jg(r,t);return new jo(r,"signInViaPopup",e,i).executeNotNull()}class jo extends QE{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){$s(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uR.get())};e()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="pendingRedirect",Zd=new Map;class fR extends QE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const r=await pR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pR(n,e){const t=XE(e),r=YE(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function mR(n,e){return YE(n)._set(XE(e),"true")}function gR(n,e){Zd.set(n._key(),e)}function YE(n){return Os(n._redirectPersistence)}function XE(n){return Jd(hR,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n,e,t){return vR(n,e,t)}async function vR(n,e,t){if(mn(n.app))return Promise.reject(es(n));const r=or(n);_E(n,e,Hh),await r._initializationPromise;const i=Jg(r,t);return await mR(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function wR(n,e){return await or(n)._initializationPromise,JE(n,e,!1)}async function JE(n,e,t=!1){if(mn(n.app))return Promise.reject(es(n));const r=or(n),i=Jg(r,e),l=await new fR(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=600*1e3;class xR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ER(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZE(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(xr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_R&&this.cachedEventUids.clear(),this.cachedEventUids.has(ax(e))}saveEventToCache(e){this.cachedEventUids.add(ax(e)),this.lastProcessedEventTime=Date.now()}}function ax(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ER(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(n,e={}){return us(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IR=/^https?/;async function CR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await SR(n);for(const t of e)try{if(AR(t))return}catch{}Gn(n,"unauthorized-domain")}function AR(n){const e=Km(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!IR.test(t))return!1;if(TR.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Zc(3e4,6e4);function lx(){const n=ts().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NR(n){return new Promise((e,t)=>{var i,a,l;function r(){lx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lx(),t(xr(n,"network-request-failed"))},timeout:bR.get()})}if((a=(i=ts().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=ts().gapi)!=null&&l.load)r();else{const h=mk("iframefcb");return ts()[h]=()=>{gapi.load?r():t(xr(n,"network-request-failed"))},ME(`${pk()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw eh=null,e})}let eh=null;function kR(n){return eh=eh||NR(n),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new Zc(5e3,15e3),PR="__/auth/iframe",jR="emulator/auth/iframe",DR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OR(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$g(e,jR):`https://${n.config.authDomain}/${PR}`,r={apiKey:e.apiKey,appName:n.name,v:Ho},i=MR.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Xc(r).slice(1)}`}async function LR(n){const e=await kR(n),t=ts().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:OR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DR,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=xr(n,"network-request-failed"),h=ts().setTimeout(()=>{a(l)},RR.get());function p(){ts().clearTimeout(h),i(r)}r.ping(p).then(p,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FR=500,UR=600,zR="_blank",$R="http://localhost";class cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BR(n,e,t,r=FR,i=UR){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p={...VR,width:r.toString(),height:i.toString(),top:a,left:l},m=yn().toLowerCase();t&&(h=bE(m)?zR:t),CE(m)&&(e=e||$R,p.scrollbars="yes");const y=Object.entries(p).reduce((x,[I,k])=>`${x}${I}=${k},`,"");if(ik(m)&&h!=="_self")return qR(e||"",h),new cx(null);const _=window.open(e||"",h,y);Pe(_,n,"popup-blocked");try{_.focus()}catch{}return new cx(_)}function qR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="__/auth/handler",HR="emulator/auth/handler",GR=encodeURIComponent("fac");async function ux(n,e,t,r,i,a){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ho,eventId:i};if(e instanceof Hh){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Ab(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))l[y]=_}if(e instanceof tu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const p=await n._getAppCheckToken(),m=p?`#${GR}=${encodeURIComponent(p)}`:"";return`${KR(n)}?${Xc(h).slice(1)}${m}`}function KR({config:n}){return n.emulator?$g(n,HR):`https://${n.authDomain}/${WR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class QR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qE,this._completeRedirectFn=JE,this._overrideRedirectResult=gR}async _openPopup(e,t,r,i){var l;$s((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await ux(e,t,r,Km(),i);return BR(e,a,Xg())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await ux(e,t,r,Km(),i);return Xk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):($s(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await LR(e),r=new xR(e);return t.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sm,{type:Sm},i=>{var l;const a=(l=i==null?void 0:i[0])==null?void 0:l[Sm];a!==void 0&&t(!!a),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jE()||AE()||qg()}}const YR=QR;var dx="@firebase/auth",hx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZR(n){Ui(new Us("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DE(n)},m=new dk(r,i,a,p);return xk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ui(new Us("auth-internal",e=>{const t=or(e.getProvider("auth").getImmediate());return(r=>new XR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(dx,hx,JR(n)),sr(dx,hx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=300,tP=dE("authIdTokenMaxAge")||eP;let fx=null;const nP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tP)return;const i=t==null?void 0:t.token;fx!==i&&(fx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rP(n=qh()){const e=Jc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_k(n,{popupRedirectResolver:YR,persistence:[oR,Kk,qE]}),r=dE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=nP(a.toString());qk(t,l,()=>l(t.currentUser)),Bk(t,h=>l(h))}}const i=cE("auth");return i&&Ek(t,`http://${i}`),t}function sP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}hk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=xr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",sP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZR("Browser");var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,eS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function O(){}O.prototype=A.prototype,D.F=A.prototype,D.prototype=new O,D.prototype.constructor=D,D.D=function(F,j,V){for(var M=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)M[fe-2]=arguments[fe];return A.prototype[j].apply(F,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,A,O){O||(O=0);const F=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)F[j]=A.charCodeAt(O++)|A.charCodeAt(O++)<<8|A.charCodeAt(O++)<<16|A.charCodeAt(O++)<<24;else for(j=0;j<16;++j)F[j]=A[O++]|A[O++]<<8|A[O++]<<16|A[O++]<<24;A=D.g[0],O=D.g[1],j=D.g[2];let V=D.g[3],M;M=A+(V^O&(j^V))+F[0]+3614090360&4294967295,A=O+(M<<7&4294967295|M>>>25),M=V+(j^A&(O^j))+F[1]+3905402710&4294967295,V=A+(M<<12&4294967295|M>>>20),M=j+(O^V&(A^O))+F[2]+606105819&4294967295,j=V+(M<<17&4294967295|M>>>15),M=O+(A^j&(V^A))+F[3]+3250441966&4294967295,O=j+(M<<22&4294967295|M>>>10),M=A+(V^O&(j^V))+F[4]+4118548399&4294967295,A=O+(M<<7&4294967295|M>>>25),M=V+(j^A&(O^j))+F[5]+1200080426&4294967295,V=A+(M<<12&4294967295|M>>>20),M=j+(O^V&(A^O))+F[6]+2821735955&4294967295,j=V+(M<<17&4294967295|M>>>15),M=O+(A^j&(V^A))+F[7]+4249261313&4294967295,O=j+(M<<22&4294967295|M>>>10),M=A+(V^O&(j^V))+F[8]+1770035416&4294967295,A=O+(M<<7&4294967295|M>>>25),M=V+(j^A&(O^j))+F[9]+2336552879&4294967295,V=A+(M<<12&4294967295|M>>>20),M=j+(O^V&(A^O))+F[10]+4294925233&4294967295,j=V+(M<<17&4294967295|M>>>15),M=O+(A^j&(V^A))+F[11]+2304563134&4294967295,O=j+(M<<22&4294967295|M>>>10),M=A+(V^O&(j^V))+F[12]+1804603682&4294967295,A=O+(M<<7&4294967295|M>>>25),M=V+(j^A&(O^j))+F[13]+4254626195&4294967295,V=A+(M<<12&4294967295|M>>>20),M=j+(O^V&(A^O))+F[14]+2792965006&4294967295,j=V+(M<<17&4294967295|M>>>15),M=O+(A^j&(V^A))+F[15]+1236535329&4294967295,O=j+(M<<22&4294967295|M>>>10),M=A+(j^V&(O^j))+F[1]+4129170786&4294967295,A=O+(M<<5&4294967295|M>>>27),M=V+(O^j&(A^O))+F[6]+3225465664&4294967295,V=A+(M<<9&4294967295|M>>>23),M=j+(A^O&(V^A))+F[11]+643717713&4294967295,j=V+(M<<14&4294967295|M>>>18),M=O+(V^A&(j^V))+F[0]+3921069994&4294967295,O=j+(M<<20&4294967295|M>>>12),M=A+(j^V&(O^j))+F[5]+3593408605&4294967295,A=O+(M<<5&4294967295|M>>>27),M=V+(O^j&(A^O))+F[10]+38016083&4294967295,V=A+(M<<9&4294967295|M>>>23),M=j+(A^O&(V^A))+F[15]+3634488961&4294967295,j=V+(M<<14&4294967295|M>>>18),M=O+(V^A&(j^V))+F[4]+3889429448&4294967295,O=j+(M<<20&4294967295|M>>>12),M=A+(j^V&(O^j))+F[9]+568446438&4294967295,A=O+(M<<5&4294967295|M>>>27),M=V+(O^j&(A^O))+F[14]+3275163606&4294967295,V=A+(M<<9&4294967295|M>>>23),M=j+(A^O&(V^A))+F[3]+4107603335&4294967295,j=V+(M<<14&4294967295|M>>>18),M=O+(V^A&(j^V))+F[8]+1163531501&4294967295,O=j+(M<<20&4294967295|M>>>12),M=A+(j^V&(O^j))+F[13]+2850285829&4294967295,A=O+(M<<5&4294967295|M>>>27),M=V+(O^j&(A^O))+F[2]+4243563512&4294967295,V=A+(M<<9&4294967295|M>>>23),M=j+(A^O&(V^A))+F[7]+1735328473&4294967295,j=V+(M<<14&4294967295|M>>>18),M=O+(V^A&(j^V))+F[12]+2368359562&4294967295,O=j+(M<<20&4294967295|M>>>12),M=A+(O^j^V)+F[5]+4294588738&4294967295,A=O+(M<<4&4294967295|M>>>28),M=V+(A^O^j)+F[8]+2272392833&4294967295,V=A+(M<<11&4294967295|M>>>21),M=j+(V^A^O)+F[11]+1839030562&4294967295,j=V+(M<<16&4294967295|M>>>16),M=O+(j^V^A)+F[14]+4259657740&4294967295,O=j+(M<<23&4294967295|M>>>9),M=A+(O^j^V)+F[1]+2763975236&4294967295,A=O+(M<<4&4294967295|M>>>28),M=V+(A^O^j)+F[4]+1272893353&4294967295,V=A+(M<<11&4294967295|M>>>21),M=j+(V^A^O)+F[7]+4139469664&4294967295,j=V+(M<<16&4294967295|M>>>16),M=O+(j^V^A)+F[10]+3200236656&4294967295,O=j+(M<<23&4294967295|M>>>9),M=A+(O^j^V)+F[13]+681279174&4294967295,A=O+(M<<4&4294967295|M>>>28),M=V+(A^O^j)+F[0]+3936430074&4294967295,V=A+(M<<11&4294967295|M>>>21),M=j+(V^A^O)+F[3]+3572445317&4294967295,j=V+(M<<16&4294967295|M>>>16),M=O+(j^V^A)+F[6]+76029189&4294967295,O=j+(M<<23&4294967295|M>>>9),M=A+(O^j^V)+F[9]+3654602809&4294967295,A=O+(M<<4&4294967295|M>>>28),M=V+(A^O^j)+F[12]+3873151461&4294967295,V=A+(M<<11&4294967295|M>>>21),M=j+(V^A^O)+F[15]+530742520&4294967295,j=V+(M<<16&4294967295|M>>>16),M=O+(j^V^A)+F[2]+3299628645&4294967295,O=j+(M<<23&4294967295|M>>>9),M=A+(j^(O|~V))+F[0]+4096336452&4294967295,A=O+(M<<6&4294967295|M>>>26),M=V+(O^(A|~j))+F[7]+1126891415&4294967295,V=A+(M<<10&4294967295|M>>>22),M=j+(A^(V|~O))+F[14]+2878612391&4294967295,j=V+(M<<15&4294967295|M>>>17),M=O+(V^(j|~A))+F[5]+4237533241&4294967295,O=j+(M<<21&4294967295|M>>>11),M=A+(j^(O|~V))+F[12]+1700485571&4294967295,A=O+(M<<6&4294967295|M>>>26),M=V+(O^(A|~j))+F[3]+2399980690&4294967295,V=A+(M<<10&4294967295|M>>>22),M=j+(A^(V|~O))+F[10]+4293915773&4294967295,j=V+(M<<15&4294967295|M>>>17),M=O+(V^(j|~A))+F[1]+2240044497&4294967295,O=j+(M<<21&4294967295|M>>>11),M=A+(j^(O|~V))+F[8]+1873313359&4294967295,A=O+(M<<6&4294967295|M>>>26),M=V+(O^(A|~j))+F[15]+4264355552&4294967295,V=A+(M<<10&4294967295|M>>>22),M=j+(A^(V|~O))+F[6]+2734768916&4294967295,j=V+(M<<15&4294967295|M>>>17),M=O+(V^(j|~A))+F[13]+1309151649&4294967295,O=j+(M<<21&4294967295|M>>>11),M=A+(j^(O|~V))+F[4]+4149444226&4294967295,A=O+(M<<6&4294967295|M>>>26),M=V+(O^(A|~j))+F[11]+3174756917&4294967295,V=A+(M<<10&4294967295|M>>>22),M=j+(A^(V|~O))+F[2]+718787259&4294967295,j=V+(M<<15&4294967295|M>>>17),M=O+(V^(j|~A))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.v=function(D,A){A===void 0&&(A=D.length);const O=A-this.blockSize,F=this.C;let j=this.h,V=0;for(;V<A;){if(j==0)for(;V<=O;)i(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<A;)if(F[j++]=D.charCodeAt(V++),j==this.blockSize){i(this,F),j=0;break}}else for(;V<A;)if(F[j++]=D[V++],j==this.blockSize){i(this,F),j=0;break}}this.h=j,this.o+=A},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var O=D.length-8;O<D.length;++O)D[O]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,O=0;O<4;++O)for(let F=0;F<32;F+=8)D[A++]=this.g[O]>>>F&255;return D};function a(D,A){var O=h;return Object.prototype.hasOwnProperty.call(O,D)?O[D]:O[D]=A(D)}function l(D,A){this.h=A;const O=[];let F=!0;for(let j=D.length-1;j>=0;j--){const V=D[j]|0;F&&V==A||(O[j]=V,F=!1)}this.g=O}var h={};function p(D){return-128<=D&&D<128?a(D,function(A){return new l([A|0],A<0?-1:0)}):new l([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return b(m(-D));const A=[];let O=1;for(let F=0;D>=O;F++)A[F]=D/O|0,O*=4294967296;return new l(A,0)}function y(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return b(y(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=m(Math.pow(A,8));let F=_;for(let V=0;V<D.length;V+=8){var j=Math.min(8,D.length-V);const M=parseInt(D.substring(V,V+j),A);j<8?(j=m(Math.pow(A,j)),F=F.j(j).add(m(M))):(F=F.j(O),F=F.add(m(M)))}return F}var _=p(0),x=p(1),I=p(16777216);n=l.prototype,n.m=function(){if(C(this))return-b(this).m();let D=0,A=1;for(let O=0;O<this.g.length;O++){const F=this.i(O);D+=(F>=0?F:4294967296+F)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(C(this))return"-"+b(this).toString(D);const A=m(Math.pow(D,6));var O=this;let F="";for(;;){const j=B(O,A).g;O=L(O,j.j(A));let V=((O.g.length>0?O.g[0]:O.h)>>>0).toString(D);if(O=j,k(O))return V+F;for(;V.length<6;)V="0"+V;F=V+F}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function C(D){return D.h==-1}n.l=function(D){return D=L(this,D),C(D)?-1:k(D)?0:1};function b(D){const A=D.g.length,O=[];for(let F=0;F<A;F++)O[F]=~D.g[F];return new l(O,~D.h).add(x)}n.abs=function(){return C(this)?b(this):this},n.add=function(D){const A=Math.max(this.g.length,D.g.length),O=[];let F=0;for(let j=0;j<=A;j++){let V=F+(this.i(j)&65535)+(D.i(j)&65535),M=(V>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);F=M>>>16,V&=65535,M&=65535,O[j]=M<<16|V}return new l(O,O[O.length-1]&-2147483648?-1:0)};function L(D,A){return D.add(b(A))}n.j=function(D){if(k(this)||k(D))return _;if(C(this))return C(D)?b(this).j(b(D)):b(b(this).j(D));if(C(D))return b(this.j(b(D)));if(this.l(I)<0&&D.l(I)<0)return m(this.m()*D.m());const A=this.g.length+D.g.length,O=[];for(var F=0;F<2*A;F++)O[F]=0;for(F=0;F<this.g.length;F++)for(let j=0;j<D.g.length;j++){const V=this.i(F)>>>16,M=this.i(F)&65535,fe=D.i(j)>>>16,me=D.i(j)&65535;O[2*F+2*j]+=M*me,N(O,2*F+2*j),O[2*F+2*j+1]+=V*me,N(O,2*F+2*j+1),O[2*F+2*j+1]+=M*fe,N(O,2*F+2*j+1),O[2*F+2*j+2]+=V*fe,N(O,2*F+2*j+2)}for(D=0;D<A;D++)O[D]=O[2*D+1]<<16|O[2*D];for(D=A;D<2*A;D++)O[D]=0;return new l(O,0)};function N(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function P(D,A){this.g=D,this.h=A}function B(D,A){if(k(A))throw Error("division by zero");if(k(D))return new P(_,_);if(C(D))return A=B(b(D),A),new P(b(A.g),b(A.h));if(C(A))return A=B(D,b(A)),new P(b(A.g),A.h);if(D.g.length>30){if(C(D)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var O=x,F=A;F.l(D)<=0;)O=H(O),F=H(F);var j=Z(O,1),V=Z(F,1);for(F=Z(F,2),O=Z(O,2);!k(F);){var M=V.add(F);M.l(D)<=0&&(j=j.add(O),V=M),F=Z(F,1),O=Z(O,1)}return A=L(D,j.j(A)),new P(j,A)}for(j=_;D.l(A)>=0;){for(O=Math.max(1,Math.floor(D.m()/A.m())),F=Math.ceil(Math.log(O)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),V=m(O),M=V.j(A);C(M)||M.l(D)>0;)O-=F,V=m(O),M=V.j(A);k(V)&&(V=x),j=j.add(V),D=L(D,M)}return new P(j,D)}n.B=function(D){return B(this,D).h},n.and=function(D){const A=Math.max(this.g.length,D.g.length),O=[];for(let F=0;F<A;F++)O[F]=this.i(F)&D.i(F);return new l(O,this.h&D.h)},n.or=function(D){const A=Math.max(this.g.length,D.g.length),O=[];for(let F=0;F<A;F++)O[F]=this.i(F)|D.i(F);return new l(O,this.h|D.h)},n.xor=function(D){const A=Math.max(this.g.length,D.g.length),O=[];for(let F=0;F<A;F++)O[F]=this.i(F)^D.i(F);return new l(O,this.h^D.h)};function H(D){const A=D.g.length+1,O=[];for(let F=0;F<A;F++)O[F]=D.i(F)<<1|D.i(F-1)>>>31;return new l(O,D.h)}function Z(D,A){const O=A>>5;A%=32;const F=D.g.length-O,j=[];for(let V=0;V<F;V++)j[V]=A>0?D.i(V+O)>>>A|D.i(V+O+1)<<32-A:D.i(V+O);return new l(j,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,eS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,ji=l}).apply(typeof px<"u"?px:typeof self<"u"?self:typeof window<"u"?window:{});var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tS,vc,nS,th,Xm,rS,sS,iS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jd=="object"&&jd];for(var w=0;w<d.length;++w){var E=d[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(d,w){if(w)e:{var E=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var Q=d[R];if(!(Q in E))break e;E=E[Q]}d=d[d.length-1],R=E[d],w=w(R),w!=R&&w!=null&&e(E,d,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(w){var E=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&E.push([R,w[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function p(d,w,E){return d.call.apply(d.bind,arguments)}function m(d,w,E){return m=p,m.apply(null,arguments)}function y(d,w){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function _(d,w){function E(){}E.prototype=w.prototype,d.Z=w.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(R,Q,J){for(var he=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)he[$e-2]=arguments[$e];return w.prototype[Q].apply(R,he)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function I(d){const w=d.length;if(w>0){const E=Array(w);for(let R=0;R<w;R++)E[R]=d[R];return E}return[]}function k(d,w){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=d.length||0;const J=Q.length||0;d.length=E+J;for(let he=0;he<J;he++)d[E+he]=Q[he]}else d.push(Q)}}class C{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function b(d){l.setTimeout(()=>{throw d},0)}function L(){var d=D;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class N{constructor(){this.h=this.g=null}add(w,E){const R=P.get();R.set(w,E),this.h?this.h.next=R:this.g=R,this.h=R}}var P=new C(()=>new B,d=>d.reset());class B{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let H,Z=!1,D=new N,A=()=>{const d=Promise.resolve(void 0);H=()=>{d.then(O)}};function O(){for(var d;d=L();){try{d.h.call(d.g)}catch(E){b(E)}var w=P;w.j(d),w.h<100&&(w.h++,d.next=w.g,w.g=d)}Z=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,w),l.removeEventListener("test",E,w)}catch{}return d})();function M(d){return/^[\s\xa0]*$/.test(d)}function fe(d,w){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,w)}_(fe,j),fe.prototype.init=function(d,w){const E=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget,w||(E=="mouseover"?w=d.fromElement:E=="mouseout"&&(w=d.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),de=0;function _e(d,w,E,R,Q){this.listener=d,this.proxy=null,this.src=w,this.type=E,this.capture=!!R,this.ha=Q,this.key=++de,this.da=this.fa=!1}function G(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ee(d,w,E){for(const R in d)w.call(E,d[R],R,d)}function le(d,w){for(const E in d)w.call(void 0,d[E],E,d)}function q(d){const w={};for(const E in d)w[E]=d[E];return w}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(d,w){let E,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(E in R)d[E]=R[E];for(let J=0;J<z.length;J++)E=z[J],Object.prototype.hasOwnProperty.call(R,E)&&(d[E]=R[E])}}function ne(d){this.src=d,this.g={},this.h=0}ne.prototype.add=function(d,w,E,R,Q){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const he=Se(d,w,R,Q);return he>-1?(w=d[he],E||(w.fa=!1)):(w=new _e(w,this.src,J,!!R,Q),w.fa=E,d.push(w)),w};function ye(d,w){const E=w.type;if(E in d.g){var R=d.g[E],Q=Array.prototype.indexOf.call(R,w,void 0),J;(J=Q>=0)&&Array.prototype.splice.call(R,Q,1),J&&(G(w),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Se(d,w,E,R){for(let Q=0;Q<d.length;++Q){const J=d[Q];if(!J.da&&J.listener==w&&J.capture==!!E&&J.ha==R)return Q}return-1}var re="closure_lm_"+(Math.random()*1e6|0),ge={};function xe(d,w,E,R,Q){if(Array.isArray(w)){for(let J=0;J<w.length;J++)xe(d,w[J],E,R,Q);return null}return E=no(E),d&&d[me]?d.J(w,E,h(R)?!!R.capture:!1,Q):be(d,w,E,!1,R,Q)}function be(d,w,E,R,Q,J){if(!w)throw Error("Invalid event type");const he=h(Q)?!!Q.capture:!!Q;let $e=Qn(d);if($e||(d[re]=$e=new ne(d)),E=$e.add(w,E,R,he,J),E.proxy)return E;if(R=qe(),E.proxy=R,R.src=d,R.listener=E,d.addEventListener)V||(Q=he),Q===void 0&&(Q=!1),d.addEventListener(w.toString(),R,Q);else if(d.attachEvent)d.attachEvent(Jt(w.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function qe(){function d(E){return w.call(d.src,d.listener,E)}const w=Nr;return d}function We(d,w,E,R,Q){if(Array.isArray(w))for(var J=0;J<w.length;J++)We(d,w[J],E,R,Q);else R=h(R)?!!R.capture:!!R,E=no(E),d&&d[me]?(d=d.i,J=String(w).toString(),J in d.g&&(w=d.g[J],E=Se(w,E,R,Q),E>-1&&(G(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete d.g[J],d.h--)))):d&&(d=Qn(d))&&(w=d.g[w.toString()],d=-1,w&&(d=Se(w,E,R,Q)),(E=d>-1?w[d]:null)&&At(E))}function At(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[me])ye(w.i,d);else{var E=d.type,R=d.proxy;w.removeEventListener?w.removeEventListener(E,R,d.capture):w.detachEvent?w.detachEvent(Jt(E),R):w.addListener&&w.removeListener&&w.removeListener(R),(E=Qn(w))?(ye(E,d),E.h==0&&(E.src=null,w[re]=null)):G(d)}}}function Jt(d){return d in ge?ge[d]:ge[d]="on"+d}function Nr(d,w){if(d.da)d=!0;else{w=new fe(w,this);const E=d.listener,R=d.ha||d.src;d.fa&&At(d),d=E.call(R,w)}return d}function Qn(d){return d=d[re],d instanceof ne?d:null}var Pn="__closure_events_fn_"+(Math.random()*1e9>>>0);function no(d){return typeof d=="function"?d:(d[Pn]||(d[Pn]=function(w){return d.handleEvent(w)}),d[Pn])}function gt(){F.call(this),this.i=new ne(this),this.M=this,this.G=null}_(gt,F),gt.prototype[me]=!0,gt.prototype.removeEventListener=function(d,w,E,R){We(this,d,w,E,R)};function kt(d,w){var E,R=d.G;if(R)for(E=[];R;R=R.G)E.push(R);if(d=d.M,R=w.type||w,typeof w=="string")w=new j(w,d);else if(w instanceof j)w.target=w.target||d;else{var Q=w;w=new j(R,d),se(w,Q)}Q=!0;let J,he;if(E)for(he=E.length-1;he>=0;he--)J=w.g=E[he],Q=ar(J,R,!0,w)&&Q;if(J=w.g=d,Q=ar(J,R,!0,w)&&Q,Q=ar(J,R,!1,w)&&Q,E)for(he=0;he<E.length;he++)J=w.g=E[he],Q=ar(J,R,!1,w)&&Q}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var d=this.i;for(const w in d.g){const E=d.g[w];for(let R=0;R<E.length;R++)G(E[R]);delete d.g[w],d.h--}}this.G=null},gt.prototype.J=function(d,w,E,R){return this.i.add(String(d),w,!1,E,R)},gt.prototype.K=function(d,w,E,R){return this.i.add(String(d),w,!0,E,R)};function ar(d,w,E,R){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();let Q=!0;for(let J=0;J<w.length;++J){const he=w[J];if(he&&!he.da&&he.capture==E){const $e=he.listener,Rt=he.ha||he.src;he.fa&&ye(d.i,he),Q=$e.call(Rt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function xl(d,w){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(d,w||0)}function El(d){d.g=xl(()=>{d.g=null,d.i&&(d.i=!1,El(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class yu extends F{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:El(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(d){F.call(this),this.h=d,this.g={}}_(Ks,F);var Sl=[];function Xo(d){ee(d.g,function(w,E){this.g.hasOwnProperty(E)&&At(w)},d),d.g={}}Ks.prototype.N=function(){Ks.Z.N.call(this),Xo(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=l.JSON.stringify,vu=l.JSON.parse,ro=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ys(){}function wu(){}var Xs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jo(){j.call(this,"d")}_(Jo,j);function Tl(){j.call(this,"c")}_(Tl,j);var lr={},Zo=null;function Js(){return Zo=Zo||new gt}lr.Ia="serverreachability";function ea(d){j.call(this,lr.Ia,d)}_(ea,j);function ps(d){const w=Js();kt(w,new ea(w))}lr.STAT_EVENT="statevent";function ms(d,w){j.call(this,lr.STAT_EVENT,d),this.stat=w}_(ms,j);function bt(d){const w=Js();kt(w,new ms(w,d))}lr.Ja="timingevent";function Il(d,w){j.call(this,lr.Ja,d),this.size=w}_(Il,j);function Zs(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},w)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function _u(d,w,E,R,Q,J){d.info(function(){if(d.g)if(J){var he="",$e=J.split("&");for(let lt=0;lt<$e.length;lt++){var Rt=$e[lt].split("=");if(Rt.length>1){const Mt=Rt[0];Rt=Rt[1];const Vn=Mt.split("_");he=Vn.length>=2&&Vn[1]=="type"?he+(Mt+"="+Rt+"&"):he+(Mt+"=redacted&")}}}else he=null;else he=J;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+w+`
`+E+`
`+he})}function xu(d,w,E,R,Q,J,he){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+w+`
`+E+`
`+J+" "+he})}function kr(d,w,E,R){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+so(d,E)+(R?" "+R:"")})}function Eu(d,w){d.info(function(){return"TIMEOUT: "+w})}ei.prototype.info=function(){};function so(d,w){if(!d.g)return w;if(!w)return null;try{const J=JSON.parse(w);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var E=J[d];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let he=1;he<R.length;he++)R[he]=""}}}}return Qs(J)}catch{return w}}var ti={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Su;function gs(){}_(gs,Ys),gs.prototype.g=function(){return new XMLHttpRequest},Su=new gs;function Rr(d){return encodeURIComponent(String(d))}function ta(d){var w=1;d=d.split(":");const E=[];for(;w>0&&d.length;)E.push(d.shift()),w--;return d.length&&E.push(d.join(":")),E}function Yn(d,w,E,R){this.j=d,this.i=w,this.l=E,this.S=R||1,this.V=new Ks(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Tu}function Tu(){this.i=null,this.g="",this.h=!1}var Iu={},Cl={};function cr(d,w,E){d.M=1,d.A=vs(Xn(w)),d.u=E,d.R=!0,Al(d,null)}function Al(d,w){d.F=Date.now(),io(d),d.B=Xn(d.A);var E=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Ll(E.i,"t",R),d.C=0,E=d.j.L,d.h=new Tu,d.g=Mu(d.j,E?w:null,!d.u),d.P>0&&(d.O=new yu(m(d.Y,d,d.g),d.P)),w=d.V,E=d.g,R=d.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Sl[0]=Q.toString()),Q=Sl);for(let J=0;J<Q.length;J++){const he=xe(E,Q[J],R||w.handleEvent,!1,w.h||w);if(!he)break;w.g[he.key]=he}w=d.J?q(d.J):{},d.u?(d.v||(d.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,w)):(d.v="GET",d.g.ea(d.B,d.v,null,w)),ps(),_u(d.i,d.v,d.B,d.l,d.S,d.u)}Yn.prototype.ba=function(d){d=d.target;const w=this.O;w&&Vr(d)==3?w.j():this.Y(d)},Yn.prototype.Y=function(d){try{if(d==this.g)e:{const $e=Vr(this.g),Rt=this.g.ya(),lt=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||ju(this.g)))){this.K||$e!=4||Rt==7||(Rt==8||lt<=0?ps(3):ps(2)),na(this);var w=this.g.ca();this.X=w;var E=Cu(this);if(this.o=w==200,xu(this.i,this.v,this.B,this.l,this.S,$e,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(R)){var J=R;break t}}J=null}if(d=J)kr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yt(this,d);else{this.o=!1,this.m=3,bt(12),ys(this),oo(this);break e}}if(this.R){d=!0;let Mt;for(;!this.K&&this.C<E.length;)if(Mt=bu(this,E),Mt==Cl){$e==4&&(this.m=4,bt(14),d=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Iu){this.m=4,bt(15),kr(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else kr(this.i,this.l,Mt,null),yt(this,Mt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||E.length!=0||this.h.h||(this.m=1,bt(16),d=!1),this.o=this.o&&d,!d)kr(this.i,this.l,E,"[Invalid Chunked Response]"),ys(this),oo(this);else if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),go(he),he.P=!0,bt(11))}}else kr(this.i,this.l,E,null),yt(this,E);$e==4&&ys(this),this.o&&!this.K&&($e==4?ha(this.j,this):(this.o=!1,io(this)))}else Fl(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),ys(this),oo(this)}}}catch{}finally{}};function Cu(d){if(!Au(d))return d.g.la();const w=ju(d.g);if(w==="")return"";let E="";const R=w.length,Q=Vr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ys(d),oo(d),"";d.h.i=new l.TextDecoder}for(let J=0;J<R;J++)d.h.h=!0,E+=d.h.i.decode(w[J],{stream:!(Q&&J==R-1)});return w.length=0,d.h.g+=E,d.C=0,d.h.g}function Au(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function bu(d,w){var E=d.C,R=w.indexOf(`
`,E);return R==-1?Cl:(E=Number(w.substring(E,R)),isNaN(E)?Iu:(R+=1,R+E>w.length?Cl:(w=w.slice(R,R+E),d.C=R+E,w)))}Yn.prototype.cancel=function(){this.K=!0,ys(this)};function io(d){d.T=Date.now()+d.H,bl(d,d.H)}function bl(d,w){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Zs(m(d.aa,d),w)}function na(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Yn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Eu(this.i,this.B),this.M!=2&&(ps(),bt(17)),ys(this),this.m=2,oo(this)):bl(this,this.T-d)};function oo(d){d.j.I==0||d.K||ha(d.j,d)}function ys(d){na(d);var w=d.O;w&&typeof w.dispose=="function"&&w.dispose(),d.O=null,Xo(d.V),d.g&&(w=d.g,d.g=null,w.abort(),w.dispose())}function yt(d,w){try{var E=d.j;if(E.I!=0&&(E.g==d||kl(E.h,d))){if(!d.L&&kl(E.h,d)&&E.I==3){try{var R=E.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)da(E),On(E);else break e;zr(E),bt(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Zs(m(E.Va,E),6e3));ao(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ln(E,11)}else if((d.L||E.g==d)&&da(E),!M(w))for(Q=E.Ba.g.parse(w),w=0;w<Q.length;w++){let lt=Q[w];const Mt=lt[0];if(!(Mt<=E.K))if(E.K=Mt,lt=lt[1],E.I==2)if(lt[0]=="c"){E.M=lt[1],E.ba=lt[2];const Vn=lt[3];Vn!=null&&(E.ka=Vn,E.j.info("VER="+E.ka));const Ss=lt[4];Ss!=null&&(E.za=Ss,E.j.info("SVER="+E.za));const $r=lt[5];$r!=null&&typeof $r=="number"&&$r>0&&(R=1.5*$r,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Br=d.g;if(Br){const ma=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var J=R.h;J.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(sa(J,J.h),J.h=null))}if(R.G){const $l=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&(R.wa=$l,it(R.J,R.G,$l))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var he=d;if(R.na=zl(R,R.L?R.ba:null,R.W),he.L){lo(R.h,he);var $e=he,Rt=R.O;Rt&&($e.H=Rt),$e.D&&(na($e),io($e)),R.g=he}else an(R);E.i.length>0&&Es(E)}else lt[0]!="stop"&&lt[0]!="close"||Ln(E,7);else E.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Ln(E,7):ca(E):lt[0]!="noop"&&E.l&&E.l.qa(lt),E.A=0)}}ps(4)}catch{}}var zf=class{constructor(d,w){this.g=d,this.map=w}};function ra(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ao(d){return d.h?1:d.g?d.g.size:0}function kl(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function sa(d,w){d.g?d.g.add(w):d.h=w}function lo(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}ra.prototype.cancel=function(){if(this.i=jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function jn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const E of d.g.values())w=w.concat(E.G);return w}return I(d.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dn(d,w){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const R=d[E].indexOf("=");let Q,J=null;R>=0?(Q=d[E].substring(0,R),J=d[E].substring(R+1)):Q=d[E],w(Q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Pr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;d instanceof Pr?(this.l=d.l,co(this,d.j),this.o=d.o,this.g=d.g,jr(this,d.u),this.h=d.h,ri(this,Vl(d.i)),this.m=d.m):d&&(w=String(d).match(Nu))?(this.l=!1,co(this,w[1]||"",!0),this.o=uo(w[2]||""),this.g=uo(w[3]||"",!0),jr(this,w[4]),this.h=uo(w[5]||"",!0),ri(this,w[6]||"",!0),this.m=uo(w[7]||"")):(this.l=!1,this.i=new Ze(null,this.l))}Pr.prototype.toString=function(){const d=[];var w=this.j;w&&d.push(ho(w,Pl,!0),":");var E=this.g;return(E||w=="file")&&(d.push("//"),(w=this.o)&&d.push(ho(w,Pl,!0),"@"),d.push(Rr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ho(E,E.charAt(0)=="/"?fo:jl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ho(E,Dl)),d.join("")},Pr.prototype.resolve=function(d){const w=Xn(this);let E=!!d.j;E?co(w,d.j):E=!!d.o,E?w.o=d.o:E=!!d.g,E?w.g=d.g:E=d.u!=null;var R=d.h;if(E)jr(w,d.u);else if(E=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=w.h.lastIndexOf("/");Q!=-1&&(R=w.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const J=[];for(let he=0;he<Q.length;){const $e=Q[he++];$e=="."?R&&he==Q.length&&J.push(""):$e==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&he==Q.length&&J.push("")):(J.push($e),R=!0)}R=J.join("/")}else R=Q}return E?w.h=R:E=d.i.toString()!=="",E?ri(w,Vl(d.i)):E=!!d.m,E&&(w.m=d.m),w};function Xn(d){return new Pr(d)}function co(d,w,E){d.j=E?uo(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function jr(d,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);d.u=w}else d.u=null}function ri(d,w,E){w instanceof Ze?(d.i=w,oa(d.i,d.l)):(E||(w=ho(w,$f)),d.i=new Ze(w,d.l))}function it(d,w,E){d.i.set(w,E)}function vs(d){return it(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function uo(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ho(d,w,E){return typeof d=="string"?(d=encodeURI(d).replace(w,Rl),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Rl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Pl=/[#\/\?@]/g,jl=/[#\?:]/g,fo=/[#\?]/g,$f=/[#\?@]/g,Dl=/#/g;function Ze(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function Dr(d){d.g||(d.g=new Map,d.h=0,d.i&&Dn(d.i,function(w,E){d.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}n=Ze.prototype,n.add=function(d,w){Dr(this),this.i=null,d=Mr(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(w),this.h+=1,this};function Ml(d,w){Dr(d),w=Mr(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function ia(d,w){return Dr(d),w=Mr(d,w),d.g.has(w)}n.forEach=function(d,w){Dr(this),this.g.forEach(function(E,R){E.forEach(function(Q){d.call(w,Q,R,this)},this)},this)};function Ol(d,w){Dr(d);let E=[];if(typeof w=="string")ia(d,w)&&(E=E.concat(d.g.get(Mr(d,w))));else for(d=Array.from(d.g.values()),w=0;w<d.length;w++)E=E.concat(d[w]);return E}n.set=function(d,w){return Dr(this),this.i=null,d=Mr(this,d),ia(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},n.get=function(d,w){return d?(d=Ol(this,d),d.length>0?String(d[0]):w):w};function Ll(d,w,E){Ml(d,w),E.length>0&&(d.i=null,d.g.set(Mr(d,w),I(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var E=w[R];const Q=Rr(E);E=Ol(this,E);for(let J=0;J<E.length;J++){let he=Q;E[J]!==""&&(he+="="+Rr(E[J])),d.push(he)}}return this.i=d.join("&")};function Vl(d){const w=new Ze;return w.i=d.i,d.g&&(w.g=new Map(d.g),w.h=d.h),w}function Mr(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function oa(d,w){w&&!d.j&&(Dr(d),d.i=null,d.g.forEach(function(E,R){const Q=R.toLowerCase();R!=Q&&(Ml(this,R),Ll(this,Q,E))},d)),d.j=w}function Or(d,w){const E=new ei;if(l.Image){const R=new Image;R.onload=y(Zt,E,"TestLoadImage: loaded",!0,w,R),R.onerror=y(Zt,E,"TestLoadImage: error",!1,w,R),R.onabort=y(Zt,E,"TestLoadImage: abort",!1,w,R),R.ontimeout=y(Zt,E,"TestLoadImage: timeout",!1,w,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else w(!1)}function Lr(d,w){const E=new ei,R=new AbortController,Q=setTimeout(()=>{R.abort(),Zt(E,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:R.signal}).then(J=>{clearTimeout(Q),J.ok?Zt(E,"TestPingServer: ok",!0,w):Zt(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),Zt(E,"TestPingServer: error",!1,w)})}function Zt(d,w,E,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(E)}catch{}}function po(){this.g=new ro}function ws(d){this.i=d.Sb||null,this.h=d.ab||!1}_(ws,Ys),ws.prototype.g=function(){return new Mn(this.i,this.h)};function Mn(d,w){gt.call(this),this.H=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Mn,gt),n=Mn.prototype,n.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=w,this.readyState=1,ur(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(w.body=d),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ku(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ku(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?si(this):ur(this),this.readyState==3&&ku(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,si(this))},n.Na=function(d){this.g&&(this.response=d,si(this))},n.ga=function(){this.g&&si(this)};function si(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ur(d)}n.setRequestHeader=function(d,w){this.A.append(d,w)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=w.next();return d.join(`\r
`)};function ur(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Mn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ru(d){let w="";return ee(d,function(E,R){w+=R,w+=":",w+=E,w+=`\r
`}),w}function aa(d,w,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Ru(E),typeof d=="string"?E!=null&&Rr(E):it(d,w,E))}function ct(d){gt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ct,gt);var Pu=/^https?$/i,Bf=["POST","PUT"];n=ct.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,w,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Su.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(J){ii(this,J);return}if(d=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)E.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())E.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),Q=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Bf,w,void 0)>=0)||R||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of E)this.g.setRequestHeader(J,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){ii(this,J)}};function ii(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.o=5,oi(d),xs(d)}function oi(d){d.A||(d.A=!0,kt(d,"complete"),kt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,kt(this,"complete"),kt(this,"abort"),xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_s(this):this.Xa())},n.Xa=function(){_s(this)};function _s(d){if(d.h&&typeof a<"u"){if(d.v&&Vr(d)==4)setTimeout(d.Ca.bind(d),0);else if(kt(d,"readystatechange"),Vr(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var R;if(R=J===0){let he=String(d.D).match(Nu)[1]||null;!he&&l.self&&l.self.location&&(he=l.self.location.protocol.slice(0,-1)),R=!Pu.test(he?he.toLowerCase():"")}E=R}if(E)kt(d,"complete"),kt(d,"success");else{d.o=6;try{var Q=Vr(d)>2?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.ca()+"]",oi(d)}}finally{xs(d)}}}}function xs(d,w){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,w||kt(d,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vr(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),vu(w)}};function ju(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Fl(d){const w={};d=(d.g&&Vr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(M(d[R]))continue;var E=ta(d[R]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=w[Q]||[];w[Q]=J,J.push(E)}le(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(d,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||w}function la(d){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fr("baseRetryDelayMs",5e3,d),this.Za=Fr("retryDelaySeedMs",1e4,d),this.Ta=Fr("forwardChannelMaxRetries",2,d),this.va=Fr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ra(d&&d.concurrentRequestLimit),this.Ba=new po,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=la.prototype,n.ka=8,n.I=1,n.connect=function(d,w,E,R){bt(0),this.W=d,this.H=w||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=zl(this,null,this.W),Es(this)};function ca(d){if(ua(d),d.I==3){var w=d.V++,E=Xn(d.J);if(it(E,"SID",d.M),it(E,"RID",w),it(E,"TYPE","terminate"),Ur(d,E),w=new Yn(d,d.j,w),w.M=2,w.A=vs(Xn(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=w.A,E=!0),E||(w.g=Mu(w.j,null),w.g.ea(w.A)),w.F=Date.now(),io(w)}yo(d)}function On(d){d.g&&(go(d),d.g.cancel(),d.g=null)}function ua(d){On(d),d.v&&(l.clearTimeout(d.v),d.v=null),da(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function Es(d){if(!Nl(d.h)&&!d.m){d.m=!0;var w=d.Ea;H||A(),Z||(H(),Z=!0),D.add(w,d),d.D=0}}function Du(d,w){return ao(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=w.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Zs(m(d.Ea,d,w),fa(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Q=new Yn(this,this.j,d);let J=this.o;if(this.U&&(J?(J=q(J),se(J,this.U)):J=this.U),this.u!==null||this.R||(Q.J=J,J=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Ul(this,Q,w),E=Xn(this.J),it(E,"RID",d),it(E,"CVER",22),this.G&&it(E,"X-HTTP-Session-Id",this.G),Ur(this,E),J&&(this.R?w="headers="+Rr(Ru(J))+"&"+w:this.u&&aa(E,this.u,J)),sa(this.h,Q),this.Ra&&it(E,"TYPE","init"),this.S?(it(E,"$req",w),it(E,"SID","null"),Q.U=!0,cr(Q,E,null)):cr(Q,E,w),this.I=2}}else this.I==3&&(d?mo(this,d):this.i.length==0||Nl(this.h)||mo(this))};function mo(d,w){var E;w?E=w.l:E=d.V++;const R=Xn(d.J);it(R,"SID",d.M),it(R,"RID",E),it(R,"AID",d.K),Ur(d,R),d.u&&d.o&&aa(R,d.u,d.o),E=new Yn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),w&&(d.i=w.G.concat(d.i)),w=Ul(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),sa(d.h,E),cr(E,R,w)}function Ur(d,w){d.H&&ee(d.H,function(E,R){it(w,R,E)}),d.l&&ee({},function(E,R){it(w,R,E)})}function Ul(d,w,E){E=Math.min(d.i.length,E);const R=d.l?m(d.l.Ka,d.l,d):null;e:{var Q=d.i;let $e=-1;for(;;){const Rt=["count="+E];$e==-1?E>0?($e=Q[0].g,Rt.push("ofs="+$e)):$e=0:Rt.push("ofs="+$e);let lt=!0;for(let Mt=0;Mt<E;Mt++){var J=Q[Mt].g;const Vn=Q[Mt].map;if(J-=$e,J<0)$e=Math.max(0,Q[Mt].g-100),lt=!1;else try{J="req"+J+"_"||"";try{var he=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Ss,$r]of he){let Br=$r;h($r)&&(Br=Qs($r)),Rt.push(J+Ss+"="+encodeURIComponent(Br))}}catch(Ss){throw Rt.push(J+"type="+encodeURIComponent("_badmap")),Ss}}catch{R&&R(Vn)}}if(lt){he=Rt.join("&");break e}}he=void 0}return d=d.i.splice(0,E),w.G=d,he}function an(d){if(!d.g&&!d.v){d.Y=1;var w=d.Da;H||A(),Z||(H(),Z=!0),D.add(w,d),d.A=0}}function zr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Zs(m(d.Da,d),fa(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,ai(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Zs(m(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),On(this),ai(this))};function go(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function ai(d){d.g=new Yn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var w=Xn(d.na);it(w,"RID","rpc"),it(w,"SID",d.M),it(w,"AID",d.K),it(w,"CI",d.F?"0":"1"),!d.F&&d.ia&&it(w,"TO",d.ia),it(w,"TYPE","xmlhttp"),Ur(d,w),d.u&&d.o&&aa(w,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=vs(Xn(w)),E.u=null,E.R=!0,Al(E,d)}n.Va=function(){this.C!=null&&(this.C=null,On(this),zr(this),bt(19))};function da(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function ha(d,w){var E=null;if(d.g==w){da(d),go(d),d.g=null;var R=2}else if(kl(d.h,w))E=w.G,lo(d.h,w),R=1;else return;if(d.I!=0){if(w.o)if(R==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var Q=d.D;R=Js(),kt(R,new Il(R,E)),Es(d)}else an(d);else if(Q=w.m,Q==3||Q==0&&w.X>0||!(R==1&&Du(d,w)||R==2&&zr(d)))switch(E&&E.length>0&&(w=d.h,w.i=w.i.concat(E)),Q){case 1:Ln(d,5);break;case 4:Ln(d,10);break;case 3:Ln(d,6);break;default:Ln(d,2)}}}function fa(d,w){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*w}function Ln(d,w){if(d.j.info("Error code "+w),w==2){var E=m(d.bb,d),R=d.Ua;const Q=!R;R=new Pr(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||co(R,"https"),vs(R),Q?Or(R.toString(),E):Lr(R.toString(),E)}else bt(2);d.I=0,d.l&&d.l.pa(w),yo(d),ua(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function yo(d){if(d.I=0,d.ja=[],d.l){const w=jn(d.h);(w.length!=0||d.i.length!=0)&&(k(d.ja,w),k(d.ja,d.i),d.h.i.length=0,I(d.i),d.i.length=0),d.l.oa()}}function zl(d,w,E){var R=E instanceof Pr?Xn(E):new Pr(E);if(R.g!="")w&&(R.g=w+"."+R.g),jr(R,R.u);else{var Q=l.location;R=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;const J=new Pr(null);R&&co(J,R),w&&(J.g=w),Q&&jr(J,Q),E&&(J.h=E),R=J}return E=d.G,w=d.wa,E&&w&&it(R,E,w),it(R,"VER",d.ka),Ur(d,R),R}function Mu(d,w,E){if(w&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Aa&&!d.ma?new ct(new ws({ab:E})):new ct(d.ma),w.Fa(d.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}n=Ou.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function pa(){}pa.prototype.g=function(d,w){return new en(d,w)};function en(d,w){gt.call(this),this.g=new la(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(d?d["X-WebChannel-Client-Profile"]=w.sa:d={"X-WebChannel-Client-Profile":w.sa}),this.g.U=d,(d=w&&w.Qb)&&!M(d)&&(this.g.u=d),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!M(w)&&(this.g.G=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new li(this)}_(en,gt),en.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){ca(this.g)},en.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Qs(d),d=E);w.i.push(new zf(w.Ya++,d)),w.I==3&&Es(w)},en.prototype.N=function(){this.g.l=null,delete this.j,ca(this.g),delete this.g,en.Z.N.call(this)};function Lu(d){Jo.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const E in w){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}_(Lu,Jo);function Vu(){Tl.call(this),this.status=1}_(Vu,Tl);function li(d){this.g=d}_(li,Ou),li.prototype.ra=function(){kt(this.g,"a")},li.prototype.qa=function(d){kt(this.g,new Lu(d))},li.prototype.pa=function(d){kt(this.g,new Vu)},li.prototype.oa=function(){kt(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,iS=function(){return new pa},sS=function(){return Js()},rS=lr,Xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ti.NO_ERROR=0,ti.TIMEOUT=8,ti.HTTP_ERROR=6,th=ti,ni.COMPLETE="complete",nS=ni,wu.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",gt.prototype.listen=gt.prototype.J,vc=wu,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,tS=ct}).apply(typeof jd<"u"?jd:typeof self<"u"?self:typeof window<"u"?window:{});const mx="@firebase/firestore",gx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Vg("@firebase/firestore");function Ua(){return Fo.logLevel}function we(n,...e){if(Fo.logLevel<=Ye.DEBUG){const t=e.map(ey);Fo.debug(`Firestore (${ll}): ${n}`,...t)}}function Bs(n,...e){if(Fo.logLevel<=Ye.ERROR){const t=e.map(ey);Fo.error(`Firestore (${ll}): ${n}`,...t)}}function Uo(n,...e){if(Fo.logLevel<=Ye.WARN){const t=e.map(ey);Fo.warn(`Firestore (${ll}): ${n}`,...t)}}function ey(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,oS(n,r,t)}function oS(n,e,t){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Bs(r),new Error(r)}function at(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||oS(e,i,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class iP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oP{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ls,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},h=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ls)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new aS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class aP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=uP(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Xe(n,e){return n<e?-1:n>e?1:0}function Jm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Tm(i)===Tm(a)?Xe(i,a):Tm(i)?1:-1}return Xe(n.length,e.length)}const dP=55296,hP=57343;function Tm(n){const e=n.charCodeAt(0);return e>=dP&&e<=hP}function Ja(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__name__";class Qr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Qr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Xe(e.length,t.length)}static compareSegments(e,t){const r=Qr.isNumericId(e),i=Qr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Qr.extractNumericId(e).compare(Qr.extractNumericId(t)):Jm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class pt extends Qr{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const fP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Qr{construct(e,t,r){return new Yt(e,t,r)}static isValidIdentifier(e){return fP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vx}static keyField(){return new Yt([vx])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(pt.fromString(e))}static fromName(e){return new Re(pt.fromString(e).popFirst(5))}static empty(){return new Re(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uS(n,e,t,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wx(n){if(!Re.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _x(n){if(Re.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yh(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pP(n,e){if(e<=0)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function ru(n,e){if(!dS(n))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new pe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=-62135596800,Ex=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ex);return new mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xx)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ex}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ru(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Ft("string",mt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new mt(0,0))}static max(){return new Ue(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function mP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new zi(i,Re.empty(),e)}function gP(n){return new zi(n.readTime,n.key,Dc)}class zi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zi(Ue.min(),Re.empty(),Dc)}static max(){return new zi(Ue.max(),Re.empty(),Dc)}}function yP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==vP)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let i=0,a=0,l=!1;e.forEach((h=>{++i,h.next((()=>{++a,l&&a===i&&t()}),(p=>r(p)))})),l=!0,a===i&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((i=>i?ie.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((y=>{l[m]=y,++h,h===a&&r(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new ie(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function _P(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=-1;function Jh(n){return n==null}function wh(n){return n===0&&1/n==-1/0}function xP(n){return typeof n=="number"&&Number.isInteger(n)&&!wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="";function EP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sx(e)),e=SP(n.get(t),e);return Sx(e)}function SP(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case hS:t+="";break;default:t+=a}}return t}function Sx(n){return n+hS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??sn.RED,this.left=i??sn.EMPTY,this.right=a??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new sn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new Bt(Yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pS("Invalid base64 string: "+a):a}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const TP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(n){if(at(!!n,39018),typeof n=="string"){let e=0;const t=TP.exec(n);if(at(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bi(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="server_timestamp",gS="__type__",yS="__previous_value__",vS="__local_write_time__";function ny(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[gS])==null?void 0:r.stringValue)===mS}function Zh(n){const e=n.mapValue.fields[yS];return ny(e)?Zh(e):e}function Mc(n){const e=$i(n.mapValue.fields[vS].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,r,i,a,l,h,p,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=y}}const _h="(default)";class Za{constructor(e,t){this.projectId=e,this.database=t||_h}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="__type__",CP="__max__",Md={mapValue:{}},_S="__vector__",xh="value";function qi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ny(n)?4:bP(n)?9007199254740991:AP(n)?10:11:Le(28295,{value:n})}function is(n,e){if(n===e)return!0;const t=qi(n);if(t!==qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mc(n).isEqual(Mc(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=$i(i.timestampValue),h=$i(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Bi(i.bytesValue).isEqual(Bi(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return jt(i.geoPointValue.latitude)===jt(a.geoPointValue.latitude)&&jt(i.geoPointValue.longitude)===jt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return jt(i.integerValue)===jt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=jt(i.doubleValue),h=jt(a.doubleValue);return l===h?wh(l)===wh(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},h=a.mapValue.fields||{};if(Tx(l)!==Tx(h))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(h[p]===void 0||!is(l[p],h[p])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function Oc(n,e){return(n.values||[]).find((t=>is(t,e)))!==void 0}function el(n,e){if(n===e)return 0;const t=qi(n),r=qi(e);if(t!==r)return Xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=jt(a.integerValue||a.doubleValue),p=jt(l.integerValue||l.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return Cx(n.timestampValue,e.timestampValue);case 4:return Cx(Mc(n),Mc(e));case 5:return Jm(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=Bi(a),p=Bi(l);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),p=l.split("/");for(let m=0;m<h.length&&m<p.length;m++){const y=Xe(h[m],p[m]);if(y!==0)return y}return Xe(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=Xe(jt(a.latitude),jt(l.latitude));return h!==0?h:Xe(jt(a.longitude),jt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ax(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var x,I,k,C;const h=a.fields||{},p=l.fields||{},m=(x=h[xh])==null?void 0:x.arrayValue,y=(I=p[xh])==null?void 0:I.arrayValue,_=Xe(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((C=y==null?void 0:y.values)==null?void 0:C.length)||0);return _!==0?_:Ax(m,y)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Md.mapValue&&l===Md.mapValue)return 0;if(a===Md.mapValue)return 1;if(l===Md.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),m=l.fields||{},y=Object.keys(m);p.sort(),y.sort();for(let _=0;_<p.length&&_<y.length;++_){const x=Jm(p[_],y[_]);if(x!==0)return x;const I=el(h[p[_]],m[y[_]]);if(I!==0)return I}return Xe(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function Cx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=$i(n),r=$i(e),i=Xe(t.seconds,r.seconds);return i!==0?i:Xe(t.nanos,r.nanos)}function Ax(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=el(t[i],r[i]);if(a)return a}return Xe(t.length,r.length)}function tl(n){return Zm(n)}function Zm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=$i(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Zm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Zm(t.fields[l])}`;return i+"}"})(n.mapValue):Le(61005,{value:n})}function nh(n){switch(qi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(n);return e?16+nh(e):16;case 5:return 2*n.stringValue.length;case 6:return Bi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+nh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Yi(r.fields,((a,l)=>{i+=a.length+nh(l)})),i})(n.mapValue);default:throw Le(13486,{value:n})}}function bx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eg(n){return!!n&&"integerValue"in n}function ry(n){return!!n&&"arrayValue"in n}function Nx(n){return!!n&&"nullValue"in n}function kx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function AP(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[wS])==null?void 0:r.stringValue)===_S}function Ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Yi(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ic(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(n.arrayValue.values[t]);return e}return{...n}}function bP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===CP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Yt.emptyPath(),r={},i=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Ic(l):i.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yi(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new kn(Ic(this.value))}}function xS(n){const e=[];return Yi(n.fields,((t,r)=>{const i=new Yt([t]);if(rh(r)){const a=xS(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new pn(e,0,Ue.min(),Ue.min(),Ue.min(),kn.empty(),0)}static newFoundDocument(e,t,r,i){return new pn(e,1,t,Ue.min(),r,i,0)}static newNoDocument(e,t){return new pn(e,2,t,Ue.min(),Ue.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Ue.min(),Ue.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function Rx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=Re.comparator(Re.fromName(l.referenceValue),t.key):r=el(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Px(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!is(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function NP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{}class Vt extends ES{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new RP(e,t,r):t==="array-contains"?new DP(e,r):t==="in"?new MP(e,r):t==="not-in"?new OP(e,r):t==="array-contains-any"?new LP(e,r):new Vt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PP(e,r):new jP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&qi(this.value)===qi(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends ES{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Tr(e,t)}matches(e){return SS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SS(n){return n.op==="and"}function TS(n){return kP(n)&&SS(n)}function kP(n){for(const e of n.filters)if(e instanceof Tr)return!1;return!0}function tg(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+tl(n.value);if(TS(n))return n.filters.map((e=>tg(e))).join(",");{const e=n.filters.map((t=>tg(t))).join(",");return`${n.op}(${e})`}}function IS(n,e){return n instanceof Vt?(function(r,i){return i instanceof Vt&&r.op===i.op&&r.field.isEqual(i.field)&&is(r.value,i.value)})(n,e):n instanceof Tr?(function(r,i){return i instanceof Tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,h)=>a&&IS(l,i.filters[h])),!0):!1})(n,e):void Le(19439)}function CS(n){return n instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`})(n):n instanceof Tr?(function(t){return t.op.toString()+" {"+t.getFilters().map(CS).join(" ,")+"}"})(n):"Filter"}class RP extends Vt{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class PP extends Vt{constructor(e,t){super(e,"in",t),this.keys=AS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jP extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=AS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function AS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Re.fromName(r.referenceValue)))}class DP extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ry(t)&&Oc(t.arrayValue,this.value)}}class MP extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oc(this.value.arrayValue,t)}}class OP extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Oc(this.value.arrayValue,t)}}class LP extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ry(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Oc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function jx(n,e=null,t=[],r=[],i=null,a=null,l=null){return new VP(n,e,t,r,i,a,l)}function sy(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>tg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Jh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>tl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>tl(r))).join(",")),e.Te=t}return e.Te}function iy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Px(n.startAt,e.startAt)&&Px(n.endAt,e.endAt)}function ng(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function FP(n,e,t,r,i,a,l,h){return new dl(n,e,t,r,i,a,l,h)}function ef(n){return new dl(n)}function Dx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bS(n){return n.collectionGroup!==null}function Cc(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Bt(Yt.comparator);return l.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Lc(a,r))})),t.has(Yt.keyField().canonicalString())||e.Ie.push(new Lc(Yt.keyField(),r))}return e.Ie}function ns(n){const e=Be(n);return e.Ee||(e.Ee=UP(e,Cc(n))),e.Ee}function UP(n,e){if(n.limitType==="F")return jx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Lc(i.field,a)}));const t=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return jx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rg(n,e){const t=n.filters.concat([e]);return new dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sh(n,e,t){return new dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tf(n,e){return iy(ns(n),ns(e))&&n.limitType===e.limitType}function NS(n){return`${sy(ns(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>CS(i))).join(", ")}]`),Jh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>tl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>tl(i))).join(",")),`Target(${r})`})(ns(n))}; limitType=${n.limitType})`}function nf(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Re.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Cc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,h,p){const m=Rx(l,h,p);return l.inclusive?m<=0:m<0})(r.startAt,Cc(r),i)||r.endAt&&!(function(l,h,p){const m=Rx(l,h,p);return l.inclusive?m>=0:m>0})(r.endAt,Cc(r),i))})(n,e)}function zP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kS(n){return(e,t)=>{let r=!1;for(const i of Cc(n)){const a=$P(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function $P(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(a,l,h){const p=l.data.field(a),m=h.data.field(a);return p!==null&&m!==null?el(p,m):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return fS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Ct(Re.comparator);function qs(){return BP}const RS=new Ct(Re.comparator);function wc(...n){let e=RS;for(const t of n)e=e.insert(t.key,t);return e}function PS(n){let e=RS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Do(){return Ac()}function jS(){return Ac()}function Ac(){return new Go((n=>n.toString()),((n,e)=>n.isEqual(e)))}const qP=new Ct(Re.comparator),WP=new Bt(Re.comparator);function Je(...n){let e=WP;for(const t of n)e=e.add(t);return e}const HP=new Bt(Xe);function GP(){return HP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function DS(n){return{integerValue:""+n}}function KP(n,e){return xP(e)?DS(e):oy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this._=void 0}}function QP(n,e,t){return n instanceof Vc?(function(i,a){const l={fields:{[gS]:{stringValue:mS},[vS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ny(a)&&(a=Zh(a)),a&&(l.fields[yS]=a),{mapValue:l}})(t,e):n instanceof Fc?OS(n,e):n instanceof Uc?LS(n,e):(function(i,a){const l=MS(i,a),h=Mx(l)+Mx(i.Ae);return eg(l)&&eg(i.Ae)?DS(h):oy(i.serializer,h)})(n,e)}function YP(n,e,t){return n instanceof Fc?OS(n,e):n instanceof Uc?LS(n,e):t}function MS(n,e){return n instanceof Th?(function(r){return eg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Vc extends rf{}class Fc extends rf{constructor(e){super(),this.elements=e}}function OS(n,e){const t=VS(e);for(const r of n.elements)t.some((i=>is(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Uc extends rf{constructor(e){super(),this.elements=e}}function LS(n,e){let t=VS(e);for(const r of n.elements)t=t.filter((i=>!is(i,r)));return{arrayValue:{values:t}}}class Th extends rf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mx(n){return jt(n.integerValue||n.doubleValue)}function VS(n){return ry(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,t){this.field=e,this.transform=t}}function JP(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Fc&&i instanceof Fc||r instanceof Uc&&i instanceof Uc?Ja(r.elements,i.elements,is):r instanceof Th&&i instanceof Th?is(r.Ae,i.Ae):r instanceof Vc&&i instanceof Vc})(n.transform,e.transform)}class ZP{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sf{}function FS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new of(n.key,xn.none()):new su(n.key,n.data,xn.none());{const t=n.data,r=kn.empty();let i=new Bt(Yt.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Xi(n.key,r,new Wn(i.toArray()),xn.none())}}function e2(n,e,t){n instanceof su?(function(i,a,l){const h=i.value.clone(),p=Lx(i.fieldTransforms,a,l.transformResults);h.setAll(p),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Xi?(function(i,a,l){if(!sh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const h=Lx(i.fieldTransforms,a,l.transformResults),p=a.data;p.setAll(US(i)),p.setAll(h),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function bc(n,e,t,r){return n instanceof su?(function(a,l,h,p){if(!sh(a.precondition,l))return h;const m=a.value.clone(),y=Vx(a.fieldTransforms,p,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Xi?(function(a,l,h,p){if(!sh(a.precondition,l))return h;const m=Vx(a.fieldTransforms,p,l),y=l.data;return y.setAll(US(a)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(a,l,h){return sh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function t2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=MS(r.transform,i||null);a!=null&&(t===null&&(t=kn.empty()),t.set(r.field,a))}return t||null}function Ox(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ja(r,i,((a,l)=>JP(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class su extends sf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xi extends sf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function US(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Lx(n,e,t){const r=new Map;at(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,YP(l,h,t[i]))}return r}function Vx(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,QP(a,l,e))}return r}class of extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n2 extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&e2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jS();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const p=FS(l,h);p!==null&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,((t,r)=>Ox(t,r)))&&Ja(this.baseMutations,e.baseMutations,((t,r)=>Ox(t,r)))}}class ay{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return qP})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new ay(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s2=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,et;function o2(n){switch(n){case te.OK:return Le(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function zS(n){if(n===void 0)return Bs("GRPC error has no .code"),te.UNKNOWN;switch(n){case Lt.OK:return te.OK;case Lt.CANCELLED:return te.CANCELLED;case Lt.UNKNOWN:return te.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return te.INTERNAL;case Lt.UNAVAILABLE:return te.UNAVAILABLE;case Lt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Lt.NOT_FOUND:return te.NOT_FOUND;case Lt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Lt.ABORTED:return te.ABORTED;case Lt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Lt.DATA_LOSS:return te.DATA_LOSS;default:return Le(39323,{code:n})}}(et=Lt||(Lt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new ji([4294967295,4294967295],0);function Fx(n){const e=a2().encode(n),t=new eS;return t.update(e),new Uint8Array(t.digest())}function Ux(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ji([t,r],0),new ji([i,a],0)]}class ly{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _c(`Invalid padding: ${t}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ji.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ji.fromNumber(r)));return i.compare(l2)===1&&(i=new ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fx(e),[r,i]=Ux(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new ly(a,i,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=Fx(e),[r,i]=Ux(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new af(Ue.min(),i,new Ct(Xe),qs(),Je())}}class iu{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new iu(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class $S{constructor(e,t){this.targetId=e,this.Ce=t}}class BS{constructor(e,t,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zx{constructor(){this.ve=0,this.Fe=$x(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Le(38017,{changeType:a})}})),new iu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=$x()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class c2{constructor(e){this.Ge=e,this.ze=new Map,this.je=qs(),this.Je=Od(),this.He=Od(),this.Ye=new Ct(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(ng(a))if(r===0){const l=new Re(a.path);this.et(t,l,pn.newNoDocument(l,Ue.min()))}else at(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),p=h?this.ct(h,e,l):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,h;try{l=Bi(r).toUint8Array()}catch(p){if(p instanceof pS)return Uo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new ly(l,i,a)}catch(p){return Uo(p instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&ng(h.target)){const p=new Re(h.target.path);this.It(p).has(l)||this.Et(l,p)||this.et(l,p,pn.newNoDocument(p,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=Je();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new af(e,t,this.Ye,this.je,r);return this.je=qs(),this.Je=Od(),this.He=Od(),this.Ye=new Ct(Xe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Od(){return new Ct(Re.comparator)}function $x(){return new Ct(Re.comparator)}const u2={asc:"ASCENDING",desc:"DESCENDING"},d2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h2={and:"AND",or:"OR"};class f2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sg(n,e){return n.useProto3Json||Jh(e)?e:{value:e}}function Ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p2(n,e){return Ih(n,e.toTimestamp())}function rs(n){return at(!!n,49232),Ue.fromTimestamp((function(t){const r=$i(t);return new mt(r.seconds,r.nanos)})(n))}function cy(n,e){return ig(n,e).canonicalString()}function ig(n,e){const t=(function(i){return new pt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function WS(n){const e=pt.fromString(n);return at(YS(e),10190,{key:e.toString()}),e}function og(n,e){return cy(n.databaseId,e.path)}function Im(n,e){const t=WS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(GS(t))}function HS(n,e){return cy(n.databaseId,e)}function m2(n){const e=WS(n);return e.length===4?pt.emptyPath():GS(e)}function ag(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GS(n){return at(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Bx(n,e,t){return{name:og(n,e),fields:t.value.mapValue.fields}}function g2(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Le(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(at(y===void 0||typeof y=="string",58123),Xt.fromBase64String(y||"")):(at(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Xt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(m){const y=m.code===void 0?te.UNKNOWN:zS(m.code);return new pe(y,m.message||"")})(l);t=new BS(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Im(n,r.document.name),a=rs(r.document.updateTime),l=r.document.createTime?rs(r.document.createTime):Ue.min(),h=new kn({mapValue:{fields:r.document.fields}}),p=pn.newFoundDocument(i,a,l,h),m=r.targetIds||[],y=r.removedTargetIds||[];t=new ih(m,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Im(n,r.document),a=r.readTime?rs(r.readTime):Ue.min(),l=pn.newNoDocument(i,a),h=r.removedTargetIds||[];t=new ih([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Im(n,r.document),a=r.removedTargetIds||[];t=new ih([],a,i,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new i2(i,a),h=r.targetId;t=new $S(h,l)}}return t}function y2(n,e){let t;if(e instanceof su)t={update:Bx(n,e.key,e.value)};else if(e instanceof of)t={delete:og(n,e.key)};else if(e instanceof Xi)t={update:Bx(n,e.key,e.data),updateMask:C2(e.fieldMask)};else{if(!(e instanceof n2))return Le(16599,{Vt:e.type});t={verify:og(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof Vc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Uc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Th)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw Le(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:p2(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Le(27497)})(n,e.precondition)),t}function v2(n,e){return n&&n.length>0?(at(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?rs(i.updateTime):rs(a);return l.isEqual(Ue.min())&&(l=rs(a)),new ZP(l,i.transformResults||[])})(t,e)))):[]}function w2(n,e){return{documents:[HS(n,e.path)]}}function _2(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HS(n,i);const a=(function(m){if(m.length!==0)return QS(Tr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:$a(x.field),direction:S2(x.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=sg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function x2(n){let e=m2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){at(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(_){const x=KS(_);return x instanceof Tr&&TS(x)?x.getFilters():[x]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((x=>(function(k){return new Lc(Ba(k.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let x;return x=typeof _=="object"?_.value:_,Jh(x)?null:x})(t.limit));let p=null;t.startAt&&(p=(function(_){const x=!!_.before,I=_.values||[];return new Eh(I,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const x=!_.before,I=_.values||[];return new Eh(I,x)})(t.endAt)),FP(e,i,l,a,h,"F",p,m)}function E2(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function KS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ba(t.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ba(t.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ba(t.unaryFilter.field);return Vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ba(t.unaryFilter.field);return Vt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vt.create(Ba(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Tr.create(t.compositeFilter.filters.map((r=>KS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function S2(n){return u2[n]}function T2(n){return d2[n]}function I2(n){return h2[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Ba(n){return Yt.fromServerFormat(n.fieldPath)}function QS(n){return n instanceof Vt?(function(t){if(t.op==="=="){if(kx(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(Nx(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kx(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(Nx(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:T2(t.op),value:t.value}}})(n):n instanceof Tr?(function(t){const r=t.getFilters().map((i=>QS(i)));return r.length===1?r[0]:{compositeFilter:{op:I2(t.op),filters:r}}})(n):Le(54877,{filter:n})}function C2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function YS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,r,i,a=Ue.min(),l=Ue.min(),h=Xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.yt=e}}function b2(n){const e=x2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.Cn=new k2}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(zi.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class k2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bt(pt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XS=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(XS,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="LruGarbageCollector",R2=1048576;function Hx([n,e],[t,r]){const i=Xe(n,t);return i===0?Xe(e,r):i}class P2{constructor(e){this.Ir=e,this.buffer=new Bt(Hx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(Wx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ul(t)?we(Wx,"Ignoring IndexedDB error during garbage collection: ",t):await cl(t)}await this.Vr(3e5)}))}}class D2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Xh.ce);const r=new P2(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(qx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,l,h,p,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,l=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,h=Date.now(),this.removeTargets(e,r,t)))).next((_=>(a=_,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(m=Date.now(),Ua()<=Ye.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-y}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_}))))}}function M2(n,e){return new D2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.changes=new Go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&bc(r.mutation,i,Wn.empty(),mt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const i=Do();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=wc();return a.forEach(((h,p)=>{l=l.insert(h,p.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Do();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,i){let a=qs();const l=Ac(),h=(function(){return Ac()})();return t.forEach(((p,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof Xi)?a=a.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),bc(y.mutation,m,y.mutation.getFieldMask(),mt.now())):l.set(m.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,y)=>l.set(m,y))),t.forEach(((m,y)=>h.set(m,new L2(y,l.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Ac();let i=new Ct(((l,h)=>l-h)),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let y=r.get(p)||Wn.empty();y=h.applyToLocalView(m,y),r.set(p,y);const _=(i.get(h.batchId)||Je()).add(p);i=i.insert(h.batchId,_)}))})).next((()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,y=p.value,_=jS();y.forEach((x=>{if(!a.has(x)){const I=FS(t.get(x),r.get(x));I!==null&&_.set(x,I),a=a.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return Re.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ie.resolve(Do());let h=Dc,p=a;return l.next((m=>ie.forEach(m,((y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(y)?ie.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{p=p.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,Je()))).next((y=>({batchId:h,changes:PS(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((r=>{let i=wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=wc();return this.indexManager.getCollectionParents(e,a).next((h=>ie.forEach(h,(p=>{const m=(function(_,x){return new dl(x,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((y=>{y.forEach(((_,x)=>{l=l.insert(_,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((p,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,pn.newInvalidDocument(y)))}));let h=wc();return l.forEach(((p,m)=>{const y=a.get(p);y!==void 0&&bc(y.mutation,m,Wn.empty(),mt.now()),nf(t,m)&&(h=h.insert(p,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:rs(i.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:b2(i.bundledQuery),readTime:rs(i.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.overlays=new Ct(Re.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Do();return ie.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=Do(),a=t.length+1,l=new Re(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ct(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=Do(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=Do(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,y)=>h.set(m,y))),!(h.size()>=i)););return ie.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new s2(t,r));let a=this.qr.get(t);a===void 0&&(a=Je(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Qr=new Bt(Qt.$r),this.Ur=new Bt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Qt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Re(new pt([])),r=new Qt(t,e),i=new Qt(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new pt([])),r=new Qt(t,e),i=new Qt(t,e+1);let a=Je();return this.Ur.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Qt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Qt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new r2(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Zr=this.Zr.add(new Qt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?ty:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qt(t,0),i=new Qt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(l=>{const h=this.Xr(l.Yr);a.push(h)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Xe);return t.forEach((i=>{const a=new Qt(i,0),l=new Qt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{r=r.add(h.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Re.isDocumentKey(a)||(a=a.child(""));const l=new Qt(new Re(a),0);let h=new Bt(Xe);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(p.Yr)),!0)}),l),ie.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){at(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(i=>{const a=new Qt(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Qt(t,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():pn.newInvalidDocument(i))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=qs();const l=t.path,h=new Re(l.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:y}}=p.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||yP(gP(y),r)<=0||(i.has(y.key)||nf(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Le(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new q2(this)}getSize(e){return ie.resolve(this.size)}}class q2 extends O2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.persistence=e,this.si=new Go((t=>sy(t)),iy),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new uy,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),ie.waitFor(a).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xh(0),this.li=!1,this.li=!0,this.hi=new z2,this.referenceDelegate=e(this),this.Pi=new W2(this),this.indexManager=new N2,this.remoteDocumentCache=(function(i){return new B2(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new A2(t),this.Ii=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new $2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){we("MemoryPersistence","Starting transaction:",e);const i=new H2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class H2 extends wP{constructor(e){super(),this.currentSequenceNumber=e}}class dy{constructor(e){this.persistence=e,this.Ri=new uy,this.Vi=null}static mi(e){return new dy(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const i=Re.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Ue.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ch{constructor(e,t){this.persistence=e,this.pi=new Go((r=>EP(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=M2(this,t)}static mi(e,t){return new Ch(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?ie.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((h=>{h||(r++,a.removeEntry(l,Ue.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nh(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Je(),i=Je();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xb()?8:_P(yn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new G2;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ua()<=Ye.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Ua()<=Ye.DEBUG&&we("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ua()<=Ye.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(t))):ie.resolve())}ys(e,t){if(Dx(t))return ie.resolve(null);let r=ns(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Sh(t,null,"F"),r=ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Je(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((p=>{const m=this.Ds(t,h);return this.Cs(t,m,l,p.readTime)?this.ys(e,Sh(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,r,i){return Dx(t)||i.isEqual(Ue.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,i)?ie.resolve(null):(Ua()<=Ye.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),za(t)),this.vs(e,l,t,mP(i,Dc)).next((h=>h)))}))}Ds(e,t){let r=new Bt(kS(e));return t.forEach(((i,a)=>{nf(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Ua()<=Ye.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",za(t)),this.ps.getDocumentsMatchingQuery(e,t,zi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="LocalStore",Q2=3e8;class Y2{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ct(Xe),this.xs=new Go((a=>sy(a)),iy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function X2(n,e,t,r){return new Y2(n,e,t,r)}async function ZS(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let p=Je();for(const m of i){l.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}for(const m of a){h.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((m=>({Ls:m,removedBatchIds:l,addedBatchIds:h})))}))}))}function J2(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,m,y){const _=m.batch,x=_.keys();let I=ie.resolve();return x.forEach((k=>{I=I.next((()=>y.getEntry(p,k))).next((C=>{const b=m.docVersions.get(k);at(b!==null,48541),C.version.compareTo(b)<0&&(_.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),y.addEntry(C)))}))})),I.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let p=Je();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function eT(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Z2(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach(((y,_)=>{const x=i.get(_);if(!x)return;h.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,_))));let I=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Xt.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),i=i.insert(_,I),(function(C,b,L){return C.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Q2?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(x,I,y)&&h.push(t.Pi.updateTargetData(a,I))}));let p=qs(),m=Je();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),h.push(ej(a,l,e.documentUpdates).next((y=>{p=y.ks,m=y.qs}))),!r.isEqual(Ue.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((_=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(y)}return ie.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Ms=i,a)))}function ej(n,e,t){let r=Je(),i=Je();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=qs();return t.forEach(((h,p)=>{const m=a.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):we(fy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)})),{ks:l,qs:i}}))}function tj(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ty),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function nj(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,ie.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new Ni(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function lg(n,e,t){const r=Be(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ul(l))throw l;we(fy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Gx(n,e,t){const r=Be(n);let i=Ue.min(),a=Je();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(p,m,y){const _=Be(p),x=_.xs.get(y);return x!==void 0?ie.resolve(_.Ms.get(x)):_.Pi.getTargetData(m,y)})(r,l,ns(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next((p=>{a=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Ue.min(),t?a:Je()))).next((h=>(rj(r,zP(e),h),{documents:h,Qs:a})))))}function rj(n,e,t){let r=n.Os.get(e)||Ue.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Kx{constructor(){this.activeTargetIds=GP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sj{constructor(){this.Mo=new Kx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="ConnectivityMonitor";class Yx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(Qx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(Qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld=null;function cg(){return Ld===null?Ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ld++,"0x"+Ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="RestConnection",oj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const l=cg(),h=this.zo(e,t.toUriEncodedString());we(Cm,`Sending RPC '${e}' ${l}:`,h,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,i,a);const{host:m}=new URL(h),y=Qi(m);return this.Jo(e,h,p,r,y).then((_=>(we(Cm,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Uo(Cm,`RPC '${e}' ${l} failed with error: `,_,"url: ",h,"request:",r),_}))}Ho(e,t,r,i,a,l){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=oj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class cj extends aj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const l=cg();return new Promise(((h,p)=>{const m=new tS;m.setWithCredentials(!0),m.listenOnce(nS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case th.NO_ERROR:const _=m.getResponseJson();we(hn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),h(_);break;case th.TIMEOUT:we(hn,`RPC '${e}' ${l} timed out`),p(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const x=m.getStatus();if(we(hn,`RPC '${e}' ${l} failed with status:`,x,"response text:",m.getResponseText()),x>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const C=(function(L){const N=L.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(N)>=0?N:te.UNKNOWN})(k.status);p(new pe(C,k.message))}else p(new pe(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{we(hn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(i);we(hn,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=cg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=iS(),h=sS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=a.join("");we(hn,`Creating RPC '${e}' stream ${i}: ${y}`,p);const _=l.createWebChannel(y,p);this.I_(_);let x=!1,I=!1;const k=new lj({Yo:b=>{I?we(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(x||(we(hn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),x=!0),we(hn,`RPC '${e}' stream ${i} sending:`,b),_.send(b))},Zo:()=>_.close()}),C=(b,L,N)=>{b.listen(L,(P=>{try{N(P)}catch(B){setTimeout((()=>{throw B}),0)}}))};return C(_,vc.EventType.OPEN,(()=>{I||(we(hn,`RPC '${e}' stream ${i} transport opened.`),k.o_())})),C(_,vc.EventType.CLOSE,(()=>{I||(I=!0,we(hn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(_))})),C(_,vc.EventType.ERROR,(b=>{I||(I=!0,Uo(hn,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),k.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),C(_,vc.EventType.MESSAGE,(b=>{var L;if(!I){const N=b.data[0];at(!!N,16349);const P=N,B=(P==null?void 0:P.error)||((L=P[0])==null?void 0:L.error);if(B){we(hn,`RPC '${e}' stream ${i} received error:`,B);const H=B.status;let Z=(function(O){const F=Lt[O];if(F!==void 0)return zS(F)})(H),D=B.message;Z===void 0&&(Z=te.INTERNAL,D="Unknown error status: "+H+" with message "+B.message),I=!0,k.a_(new pe(Z,D)),_.close()}else we(hn,`RPC '${e}' stream ${i} received:`,N),k.u_(N)}})),C(h,rS.STAT_EVENT,(b=>{b.stat===Xm.PROXY?we(hn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Xm.NOPROXY&&we(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){return new f2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="PersistentStream";class nT{constructor(e,t,r,i,a,l,h,p){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Bs(t.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Xx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(Xx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uj extends nT{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=g2(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ue.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?rs(l.readTime):Ue.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ag(this.serializer),t.addTarget=(function(a,l){let h;const p=l.target;if(h=ng(p)?{documents:w2(a,p)}:{query:_2(a,p).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=qS(a,l.resumeToken);const m=sg(a,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ue.min())>0){h.readTime=Ih(a,l.snapshotVersion.toTimestamp());const m=sg(a,l.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=E2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ag(this.serializer),t.removeTarget=e,this.q_(t)}}class dj extends nT{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=v2(e.writeResults,e.commitTime),r=rs(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ag(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>y2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{}class fj extends hj{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,ig(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(te.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,ig(t,r),i,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(te.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class pj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bs(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class mj{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Ko(this)&&(we(zo,"Restarting streams for network reachability change."),await(async function(p){const m=Be(p);m.Ea.add(4),await ou(m),m.Ra.set("Unknown"),m.Ea.delete(4),await cf(m)})(this))}))})),this.Ra=new pj(r,i)}}async function cf(n){if(Ko(n))for(const e of n.da)await e(!0)}async function ou(n){for(const e of n.da)await e(!1)}function rT(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yy(t)?gy(t):hl(t).O_()&&my(t,e))}function py(n,e){const t=Be(n),r=hl(t);t.Ia.delete(e),r.O_()&&sT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ko(t)&&t.Ra.set("Unknown"))}function my(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).Y_(e)}function sT(n,e){n.Va.Ue(e),hl(n).Z_(e)}function gy(n){n.Va=new c2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.Ra.ua()}function yy(n){return Ko(n)&&!hl(n).x_()&&n.Ia.size>0}function Ko(n){return Be(n).Ea.size===0}function iT(n){n.Va=void 0}async function gj(n){n.Ra.set("Online")}async function yj(n){n.Ia.forEach(((e,t)=>{my(n,e)}))}async function vj(n,e){iT(n),yy(n)?(n.Ra.ha(e),gy(n)):n.Ra.set("Unknown")}async function wj(n,e,t){if(n.Ra.set("Online"),e instanceof BS&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const h of a.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ia.delete(h),i.Va.removeTarget(h))})(n,e)}catch(r){we(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ah(n,r)}else if(e instanceof ih?n.Va.Ze(e):e instanceof $S?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const r=await eT(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const y=a.Ia.get(m);y&&a.Ia.set(m,y.withResumeToken(p.resumeToken,l))}})),h.targetMismatches.forEach(((p,m)=>{const y=a.Ia.get(p);if(!y)return;a.Ia.set(p,y.withResumeToken(Xt.EMPTY_BYTE_STRING,y.snapshotVersion)),sT(a,p);const _=new Ni(y.target,p,m,y.sequenceNumber);my(a,_)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){we(zo,"Failed to raise snapshot:",r),await Ah(n,r)}}async function Ah(n,e,t){if(!ul(e))throw e;n.Ea.add(1),await ou(n),n.Ra.set("Offline"),t||(t=()=>eT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cf(n)}))}function oT(n,e){return e().catch((t=>Ah(n,t,e)))}async function uf(n){const e=Be(n),t=Wi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ty;for(;_j(e);)try{const i=await tj(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,xj(e,i)}catch(i){await Ah(e,i)}aT(e)&&lT(e)}function _j(n){return Ko(n)&&n.Ta.length<10}function xj(n,e){n.Ta.push(e);const t=Wi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function aT(n){return Ko(n)&&!Wi(n).x_()&&n.Ta.length>0}function lT(n){Wi(n).start()}async function Ej(n){Wi(n).ra()}async function Sj(n){const e=Wi(n);for(const t of n.Ta)e.ea(t.mutations)}async function Tj(n,e,t){const r=n.Ta.shift(),i=ay.from(r,e,t);await oT(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await uf(n)}async function Ij(n,e){e&&Wi(n).X_&&await(async function(r,i){if((function(l){return o2(l)&&l!==te.ABORTED})(i.code)){const a=r.Ta.shift();Wi(r).B_(),await oT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await uf(r)}})(n,e),aT(n)&&lT(n)}async function Jx(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),we(zo,"RemoteStore received new credentials");const r=Ko(t);t.Ea.add(3),await ou(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cf(t)}async function Cj(n,e){const t=Be(n);e?(t.Ea.delete(2),await cf(t)):e||(t.Ea.add(2),await ou(t),t.Ra.set("Unknown"))}function hl(n){return n.ma||(n.ma=(function(t,r,i){const a=Be(t);return a.sa(),new uj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:gj.bind(null,n),t_:yj.bind(null,n),r_:vj.bind(null,n),H_:wj.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yy(n)?gy(n):n.Ra.set("Unknown")):(await n.ma.stop(),iT(n))}))),n.ma}function Wi(n){return n.fa||(n.fa=(function(t,r,i){const a=Be(t);return a.sa(),new dj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ej.bind(null,n),r_:Ij.bind(null,n),ta:Sj.bind(null,n),na:Tj.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await uf(n)):(await n.fa.stop(),n.Ta.length>0&&(we(zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new vy(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(n,e){if(Bs("AsyncQueue",`${e}: ${n}`),ul(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static emptySet(e){return new Ka(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=wc(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ka;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ga=new Ct(Re.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class rl{constructor(e,t,r,i,a,l,h,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new rl(e,t,Ka.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bj{constructor(){this.queries=e0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Be(t),a=i.queries;i.queries=e0(),a.forEach(((l,h)=>{for(const p of h.Sa)p.onError(r)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function e0(){return new Go((n=>NS(n)),tf)}async function _y(n,e){const t=Be(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Aj,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const h=wy(l,`Initialization of query '${za(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Ey(t)}async function xy(n,e){const t=Be(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Nj(n,e){const t=Be(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(i)&&(r=!0);l.wa=i}}r&&Ey(t)}function kj(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Ey(n){n.Ca.forEach((e=>{e.next()}))}var ug,t0;(t0=ug||(ug={})).Ma="default",t0.Cache="cache";class Sy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.key=e}}class uT{constructor(e){this.key=e}}class Rj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=kS(e),this.tu=new Ka(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Zx,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,_)=>{const x=i.get(y),I=nf(this.query,_)?_:null,k=!!x&&this.mutatedKeys.has(x.key),C=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let b=!1;x&&I?x.data.isEqual(I.data)?k!==C&&(r.track({type:3,doc:I}),b=!0):this.su(x,I)||(r.track({type:2,doc:I}),b=!0,(p&&this.eu(I,p)>0||m&&this.eu(I,m)<0)&&(h=!0)):!x&&I?(r.track({type:0,doc:I}),b=!0):x&&!I&&(r.track({type:1,doc:x}),b=!0,(p||m)&&(h=!0)),b&&(I?(l=l.add(I),a=C?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,_)=>(function(I,k){const C=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:b})}};return C(I)-C(k)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],p=this.Xa.size===0&&this.current&&!i?1:0,m=p!==this.Za;return this.Za=p,l.length!==0||m?{snapshot:new rl(this.query,e.tu,a,l,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new uT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new cT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ty="SyncEngine";class Pj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jj{constructor(e){this.key=e,this.hu=!1}}class Dj{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Go((h=>NS(h)),tf),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Re.comparator),this.Au=new Map,this.Ru=new uy,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Mj(n,e,t=!0){const r=gT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await dT(r,e,t,!0),i}async function Oj(n,e){const t=gT(n);await dT(t,e,!0,!1)}async function dT(n,e,t,r){const i=await nj(n.localStore,ns(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await Lj(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&rT(n.remoteStore,i),h}async function Lj(n,e,t,r,i){n.pu=(_,x,I)=>(async function(C,b,L,N){let P=b.view.ru(L);P.Cs&&(P=await Gx(C.localStore,b.query,!1).then((({documents:D})=>b.view.ru(D,P))));const B=N&&N.targetChanges.get(b.targetId),H=N&&N.targetMismatches.get(b.targetId)!=null,Z=b.view.applyChanges(P,C.isPrimaryClient,B,H);return r0(C,b.targetId,Z.au),Z.snapshot})(n,_,x,I);const a=await Gx(n.localStore,e,!0),l=new Rj(e,a.Qs),h=l.ru(a.documents),p=iu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=l.applyChanges(h,n.isPrimaryClient,p);r0(n,t,m.au);const y=new Pj(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function Vj(n,e,t){const r=Be(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!tf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&py(r.remoteStore,i.targetId),dg(r,i.targetId)})).catch(cl)):(dg(r,i.targetId),await lg(r.localStore,i.targetId,!0))}async function Fj(n,e){const t=Be(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),py(t.remoteStore,r.targetId))}async function Uj(n,e,t){const r=Gj(n);try{const i=await(function(l,h){const p=Be(l),m=mt.now(),y=h.reduce(((I,k)=>I.add(k.key)),Je());let _,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=qs(),C=Je();return p.Ns.getEntries(I,y).next((b=>{k=b,k.forEach(((L,N)=>{N.isValidDocument()||(C=C.add(L))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,k))).next((b=>{_=b;const L=[];for(const N of h){const P=t2(N,_.get(N.key).overlayedDocument);P!=null&&L.push(new Xi(N.key,P,xS(P.value.mapValue),xn.exists(!0)))}return p.mutationQueue.addMutationBatch(I,m,L,h)})).next((b=>{x=b;const L=b.applyToLocalDocumentSet(_,C);return p.documentOverlayCache.saveOverlays(I,b.batchId,L)}))})).then((()=>({batchId:x.batchId,changes:PS(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,h,p){let m=l.Vu[l.currentUser.toKey()];m||(m=new Ct(Xe)),m=m.insert(h,p),l.Vu[l.currentUser.toKey()]=m})(r,i.batchId,t),await au(r,i.changes),await uf(r.remoteStore)}catch(i){const a=wy(i,"Failed to persist write");t.reject(a)}}async function hT(n,e){const t=Be(n);try{const r=await Z2(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Au.get(a);l&&(at(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?at(l.hu,14607):i.removedDocuments.size>0&&(at(l.hu,42227),l.hu=!1))})),await au(t,r,e)}catch(r){await cl(r)}}function n0(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(l,h){const p=Be(l);p.onlineState=h;let m=!1;p.queries.forEach(((y,_)=>{for(const x of _.Sa)x.va(h)&&(m=!0)})),m&&Ey(p)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zj(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new Ct(Re.comparator);l=l.insert(a,pn.newNoDocument(a,Ue.min()));const h=Je().add(a),p=new af(Ue.min(),new Map,new Ct(Xe),l,h);await hT(r,p),r.du=r.du.remove(a),r.Au.delete(e),Iy(r)}else await lg(r.localStore,e,!1).then((()=>dg(r,e,t))).catch(cl)}async function $j(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await J2(t.localStore,e);pT(t,r,null),fT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await au(t,i)}catch(i){await cl(i)}}async function Bj(n,e,t){const r=Be(n);try{const i=await(function(l,h){const p=Be(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return p.mutationQueue.lookupMutationBatch(m,h).next((_=>(at(_!==null,37113),y=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,y,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>p.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);pT(r,e,t),fT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await au(r,i)}catch(i){await cl(i)}}function fT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function pT(n,e,t){const r=Be(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function dg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||mT(n,r)}))}function mT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(py(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Iy(n))}function r0(n,e,t){for(const r of t)r instanceof cT?(n.Ru.addReference(r.key,e),qj(n,r)):r instanceof uT?(we(Ty,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mT(n,r.key)):Le(19791,{wu:r})}function qj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(we(Ty,"New document in limbo: "+t),n.Eu.add(r),Iy(n))}function Iy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(pt.fromString(e)),r=n.fu.next();n.Au.set(r,new jj(t)),n.du=n.du.insert(t,r),rT(n.remoteStore,new Ni(ns(ef(t.path)),r,"TargetPurposeLimboResolution",Xh.ce))}}async function au(n,e,t){const r=Be(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,p)=>{l.push(r.pu(p,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const _=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){i.push(m);const _=hy.As(p.targetId,m);a.push(_)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(p,m){const y=Be(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ie.forEach(m,(x=>ie.forEach(x.Es,(I=>y.persistence.referenceDelegate.addReference(_,x.targetId,I))).next((()=>ie.forEach(x.ds,(I=>y.persistence.referenceDelegate.removeReference(_,x.targetId,I)))))))))}catch(_){if(!ul(_))throw _;we(fy,"Failed to update sequence numbers: "+_)}for(const _ of m){const x=_.targetId;if(!_.fromCache){const I=y.Ms.get(x),k=I.snapshotVersion,C=I.withLastLimboFreeSnapshotVersion(k);y.Ms=y.Ms.insert(x,C)}}})(r.localStore,a))}async function Wj(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){we(Ty,"User change. New user:",e.toKey());const r=await ZS(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((p=>{p.reject(new pe(te.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await au(t,r.Ls)}}function Hj(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const h=t.Tu.get(l);i=i.unionWith(h.view.nu)}return i}}function gT(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zj.bind(null,e),e.Pu.H_=Nj.bind(null,e.eventManager),e.Pu.yu=kj.bind(null,e.eventManager),e}function Gj(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$j.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bj.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return X2(this.persistence,new K2,e.initialUser,this.serializer)}Cu(e){return new JS(dy.mi,this.serializer)}Du(e){return new sj}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class Kj extends bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){at(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new j2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new JS((r=>Ch.mi(r,t)),this.serializer)}}class hg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wj.bind(null,this.syncEngine),await Cj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bj})()}createDatastore(e){const t=lf(e.databaseInfo.databaseId),r=(function(a){return new cj(a)})(e.databaseInfo);return(function(a,l,h,p){return new fj(a,l,h,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,h){return new mj(r,i,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>n0(this.syncEngine,t,0)),(function(){return Yx.v()?new Yx:new ij})())}createSyncEngine(e,t){return(function(i,a,l,h,p,m,y){const _=new Dj(i,a,l,h,p,m);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=Be(i);we(zo,"RemoteStore shutting down."),a.Ea.add(5),await ou(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hg.provider={build:()=>new hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="FirestoreClient";class Qj{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=Qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{we(Hi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(we(Hi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bm(n,e){n.asyncQueue.verifyOperationInProgress(),we(Hi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await ZS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function s0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Yj(n);we(Hi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Jx(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Jx(e.remoteStore,i))),n._onlineComponents=e}async function Yj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Hi,"Using user provided OfflineComponentProvider");try{await bm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await bm(n,new bh)}}else we(Hi,"Using default OfflineComponentProvider"),await bm(n,new Kj(void 0));return n._offlineComponents}async function yT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Hi,"Using user provided OnlineComponentProvider"),await s0(n,n._uninitializedComponentsProvider._online)):(we(Hi,"Using default OnlineComponentProvider"),await s0(n,new hg))),n._onlineComponents}function Xj(n){return yT(n).then((e=>e.syncEngine))}async function Nh(n){const e=await yT(n),t=e.eventManager;return t.onListen=Mj.bind(null,e.syncEngine),t.onUnlisten=Vj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Oj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Fj.bind(null,e.syncEngine),t}function Jj(n,e,t={}){const r=new Ls;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,p,m){const y=new Cy({next:x=>{y.Nu(),l.enqueueAndForget((()=>xy(a,_)));const I=x.docs.has(h);!I&&x.fromCache?m.reject(new pe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&x.fromCache&&p&&p.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),_=new Sy(ef(h.path),y,{includeMetadataChanges:!0,qa:!0});return _y(a,_)})(await Nh(n),n.asyncQueue,e,t,r))),r.promise}function Zj(n,e,t={}){const r=new Ls;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,p,m){const y=new Cy({next:x=>{y.Nu(),l.enqueueAndForget((()=>xy(a,_))),x.fromCache&&p.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),_=new Sy(h,y,{includeMetadataChanges:!0,qa:!0});return _y(a,_)})(await Nh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firestore.googleapis.com",o0=!0;class a0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wT,this.ssl=o0}else this.host=e.host,this.ssl=e.ssl??o0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R2)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lS;switch(r.type){case"firstParty":return new lP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=i0.get(t);r&&(we("ComponentProvider","Removing Datastore"),i0.delete(t),r.terminate())})(this),Promise.resolve()}}function _T(n,e,t,r={}){var m;n=gn(n,df);const i=Qi(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&($h(`https://${h}`),Bh("Firestore",!0)),a.host!==wT&&a.host!==h&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:h,ssl:i,emulatorOptions:r};if(!Oo(p,l)&&(n._setSettings(p),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=fn.MOCK_USER;else{y=hE(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(x)}n._authCredentials=new iP(new aS(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class It{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ru(t,It._jsonSchema))return new It(e,r||null,new Re(pt.fromString(t.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Ft("string",It._jsonSchemaVersion),referencePath:Ft("string")};class Vs extends ds{constructor(e,t,r){super(e,t,ef(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Re(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function rn(n,e,...t){if(n=ut(n),cS("collection","path",e),n instanceof df){const r=pt.fromString(e,...t);return _x(r),new Vs(n,null,r)}{if(!(n instanceof It||n instanceof Vs))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return _x(r),new Vs(n.firestore,null,r)}}function ot(n,e,...t){if(n=ut(n),arguments.length===1&&(e=Qh.newId()),cS("doc","path",e),n instanceof df){const r=pt.fromString(e,...t);return wx(r),new It(n,null,new Re(r))}{if(!(n instanceof It||n instanceof Vs))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return wx(r),new It(n.firestore,n instanceof Vs?n.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="AsyncQueue";class c0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tT(this,"async_queue_retry"),this._c=()=>{const r=Am();r&&we(l0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ls;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;we(l0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",u0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=vy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Le(47125,{Pc:u0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Ir extends df{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new c0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c0(e),this._firestoreClient=void 0,await e}}}function xT(n,e){const t=typeof n=="object"?n:qh(),r=typeof n=="string"?n:_h,i=Jc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Lg("firestore");a&&_T(i,...a)}return i}function fl(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eD(n),n._firestoreClient}function eD(n){var r,i,a;const e=n._freezeSettings(),t=(function(h,p,m,y){return new IP(h,p,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,vT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Qj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Xt.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ru(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Ft("string",qn._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(ru(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:Ft("string",Er._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ru(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sr(e.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Ft("string",Sr._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^__.*__$/;class nD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class ET{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ST(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class Ay{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ay({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ST(this.Ac)&&tD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lf(e)}Cc(e,t,r,i=!1){return new Ay({Ac:e,methodName:t,Dc:r,path:Yt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cu(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new rD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function by(n,e,t,r,i,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);ky("Data must be an object, but it was:",l,r);const h=CT(r,l);let p,m;if(a.merge)p=new Wn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const _ of a.mergeFields){const x=fg(e,_,t);if(!l.contains(x))throw new pe(te.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);bT(y,x)||y.push(x)}p=new Wn(y),m=l.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=l.fieldTransforms;return new nD(new kn(h),p,m)}class hf extends lu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}class Ny extends lu{_toFieldTransform(e){return new XP(e.path,new Vc)}isEqual(e){return e instanceof Ny}}function TT(n,e,t,r){const i=n.Cc(1,e,t);ky("Data must be an object, but it was:",i,r);const a=[],l=kn.empty();Yi(r,((p,m)=>{const y=Ry(e,p,t);m=ut(m);const _=i.yc(y);if(m instanceof hf)a.push(y);else{const x=uu(m,_);x!=null&&(a.push(y),l.set(y,x))}}));const h=new Wn(a);return new ET(l,h,i.fieldTransforms)}function IT(n,e,t,r,i,a){const l=n.Cc(1,e,t),h=[fg(e,r,t)],p=[i];if(a.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(fg(e,a[x])),p.push(a[x+1]);const m=[],y=kn.empty();for(let x=h.length-1;x>=0;--x)if(!bT(m,h[x])){const I=h[x];let k=p[x];k=ut(k);const C=l.yc(I);if(k instanceof hf)m.push(I);else{const b=uu(k,C);b!=null&&(m.push(I),y.set(I,b))}}const _=new Wn(m);return new ET(y,_,l.fieldTransforms)}function sD(n,e,t,r=!1){return uu(t,n.Cc(r?4:3,e))}function uu(n,e){if(AT(n=ut(n)))return ky("Unsupported field value:",e,n),CT(n,e);if(n instanceof lu)return(function(r,i){if(!ST(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const h of r){let p=uu(h,i.wc(l));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mt.fromDate(r);return{timestampValue:Ih(i.serializer,a)}}if(r instanceof mt){const a=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(i.serializer,a)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:qS(i.serializer,r._byteString)};if(r instanceof It){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sr)return(function(l,h){return{mapValue:{fields:{[wS]:{stringValue:_S},[xh]:{arrayValue:{values:l.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return oy(h.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Yh(r)}`)})(n,e)}function CT(n,e){const t={};return fS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(n,((r,i)=>{const a=uu(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function AT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof Er||n instanceof qn||n instanceof It||n instanceof lu||n instanceof Sr)}function ky(n,e,t){if(!AT(t)||!dS(t)){const r=Yh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function fg(n,e,t){if((e=ut(e))instanceof pl)return e._internalPath;if(typeof e=="string")return Ry(n,e);throw kh("Field path arguments must be of type string or ",n,!1,void 0,t)}const iD=new RegExp("[~\\*/\\[\\]]");function Ry(n,e,t){if(e.search(iD)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pl(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kh(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||l)&&(p+=" (found",a&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new pe(te.INVALID_ARGUMENT,h+n+p)}function bT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ff("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oD extends NT{data(){return super.data()}}function ff(n,e){return typeof e=="string"?Ry(n,e):e instanceof pl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class pf extends Py{}function vr(n,e,...t){let r=[];e instanceof Py&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((p=>p instanceof mf)).length,h=a.filter((p=>p instanceof du)).length;if(l>1||l>0&&h>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class du extends pf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new du(e,t,r)}_apply(e){const t=this._parse(e);return RT(e._query,t),new ds(e.firestore,e.converter,rg(e._query,t))}_parse(e){const t=cu(e.firestore);return(function(a,l,h,p,m,y,_){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){f0(_,y);const k=[];for(const C of _)k.push(h0(p,a,C));x={arrayValue:{values:k}}}else x=h0(p,a,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||f0(_,y),x=sD(h,l,_,y==="in"||y==="not-in");return Vt.create(m,y,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _n(n,e,t){const r=e,i=ff("where",n);return du._create(i,r,t)}class mf extends Py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mf(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Tr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const h=a.getFlattenedFilters();for(const p of h)RT(l,p),l=rg(l,p)})(e._query,t),new ds(e.firestore,e.converter,rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gf extends pf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gf(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(a,l)})(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new dl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function jy(n,e="asc"){const t=e,r=ff("orderBy",n);return gf._create(r,t)}class yf extends pf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yf(e,t,r)}_apply(e){return new ds(e.firestore,e.converter,Sh(e._query,this._limit,this._limitType))}}function Dy(n){return pP("limit",n),yf._create("limit",n,"F")}function h0(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&t.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!Re.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bx(n,new Re(r))}if(t instanceof It)return bx(n,t._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(t)}.`)}function f0(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(n,e){const t=(function(i,a){for(const l of i)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PT{convertValue(e,t="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yi(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,i,a;const t=(a=(i=(r=e.fields)==null?void 0:r[xh].arrayValue)==null?void 0:i.values)==null?void 0:a.map((l=>jt(l.doubleValue)));return new Sr(t)}convertGeoPoint(e){return new Er(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=$i(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);at(YS(r),9688,{name:e});const i=new Za(r.get(1),r.get(3)),a=new Re(r.popFirst(5));return i.isEqual(t)||Bs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends NT{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Di._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:Ft("string",Di._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Nc extends Di{data(e={}){return super.data(e)}}class Mi{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Nc(this._firestore,this._userDataWriter,r.key,r,new qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((h=>{const p=new Nc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new qa(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const p=new Nc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new qa(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:aD(h.type),doc:p,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n){n=gn(n,It);const e=gn(n.firestore,Ir);return Jj(fl(e),n._key).then((t=>jT(e,n,t)))}Mi._jsonSchemaVersion="firestore/querySnapshot/1.0",Mi._jsonSchema={type:Ft("string",Mi._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Oy extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function Yr(n){n=gn(n,ds);const e=gn(n.firestore,Ir),t=fl(e),r=new Oy(e);return kT(n._query),Zj(t,n._query).then((i=>new Mi(e,r,n,i)))}function Kr(n,e,t){n=gn(n,It);const r=gn(n.firestore,Ir),i=My(n.converter,e,t);return ml(r,[by(cu(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,xn.none())])}function Mo(n,e,t,...r){n=gn(n,It);const i=gn(n.firestore,Ir),a=cu(i);let l;return l=typeof(e=ut(e))=="string"||e instanceof pl?IT(a,"updateDoc",n._key,e,t,r):TT(a,"updateDoc",n._key,e),ml(i,[l.toMutation(n._key,xn.exists(!0))])}function sl(n){return ml(gn(n.firestore,Ir),[new of(n._key,xn.none())])}function il(n,e){const t=gn(n.firestore,Ir),r=ot(n),i=My(n.converter,e);return ml(t,[by(cu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then((()=>r))}function Ly(n,...e){var p,m,y;n=ut(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||d0(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(d0(e[r])){const _=e[r];e[r]=(p=_.next)==null?void 0:p.bind(_),e[r+1]=(m=_.error)==null?void 0:m.bind(_),e[r+2]=(y=_.complete)==null?void 0:y.bind(_)}let a,l,h;if(n instanceof It)l=gn(n.firestore,Ir),h=ef(n._key.path),a={next:_=>{e[r]&&e[r](jT(l,n,_))},error:e[r+1],complete:e[r+2]};else{const _=gn(n,ds);l=gn(_.firestore,Ir),h=_._query;const x=new Oy(l);a={next:I=>{e[r]&&e[r](new Mi(l,x,_,I))},error:e[r+1],complete:e[r+2]},kT(n._query)}return(function(x,I,k,C){const b=new Cy(C),L=new Sy(I,b,k);return x.asyncQueue.enqueueAndForget((async()=>_y(await Nh(x),L))),()=>{b.Nu(),x.asyncQueue.enqueueAndForget((async()=>xy(await Nh(x),L)))}})(fl(l),h,i,a)}function ml(n,e){return(function(r,i){const a=new Ls;return r.asyncQueue.enqueueAndForget((async()=>Uj(await Xj(r),i,a))),a.promise})(fl(n),e)}function jT(n,e,t){const r=t.docs.get(e._key),i=new Oy(n);return new Di(n,i,e._key,r,new qa(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cu(e)}set(e,t,r){this._verifyNotCommitted();const i=Nm(e,this._firestore),a=My(i.converter,t,r),l=by(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nm(e,this._firestore);let l;return l=typeof(t=ut(t))=="string"||t instanceof pl?IT(this._dataReader,"WriteBatch.update",a._key,t,r,i):TT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nm(e,this._firestore);return this._mutations=this._mutations.concat(new of(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nm(n,e){if((n=ut(n)).firestore!==e)throw new pe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function kc(){return new Ny("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(n){return fl(n=gn(n,Ir)),new DT(n,(e=>ml(n,e)))}(function(e,t=!0){(function(i){ll=i})(Ho),Ui(new Us("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new Ir(new oP(r.getProvider("auth-internal")),new cP(l,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(m.options.projectId,y)})(l,i),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),sr(mx,gx,e),sr(mx,gx,"esm2020")})();const lD=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:PT,Bytes:qn,CollectionReference:Vs,DocumentReference:It,DocumentSnapshot:Di,FieldPath:pl,FieldValue:lu,Firestore:Ir,FirestoreError:pe,GeoPoint:Er,Query:ds,QueryCompositeFilterConstraint:mf,QueryConstraint:pf,QueryDocumentSnapshot:Nc,QueryFieldFilterConstraint:du,QueryLimitConstraint:yf,QueryOrderByConstraint:gf,QuerySnapshot:Mi,SnapshotMetadata:qa,Timestamp:mt,VectorValue:Sr,WriteBatch:DT,_AutoId:Qh,_ByteString:Xt,_DatabaseId:Za,_DocumentKey:Re,_EmptyAuthCredentialsProvider:lS,_FieldPath:Yt,_cast:gn,_logWarn:Uo,_validateIsNotUsedTogether:uS,addDoc:il,collection:rn,connectFirestoreEmulator:_T,deleteDoc:sl,doc:ot,ensureFirestoreConfigured:fl,executeWrite:ml,getDoc:Xr,getDocs:Yr,getFirestore:xT,limit:Dy,onSnapshot:Ly,orderBy:jy,query:vr,serverTimestamp:kc,setDoc:Kr,updateDoc:Mo,where:_n,writeBatch:MT},Symbol.toStringTag,{value:"Module"}));var cD="firebase",uD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(cD,uD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="firebasestorage.googleapis.com",dD="storageBucket",hD=120*1e3,fD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends ls{constructor(e,t,r=0){super(km(e),`Firebase Storage: ${t} (${km(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return km(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var os;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(os||(os={}));function km(n){return"storage/"+n}function pD(){const n="An unknown error occurred, please check the error payload for server response.";return new hs(os.UNKNOWN,n)}function mD(){return new hs(os.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gD(){return new hs(os.CANCELED,"User canceled the upload/download.")}function yD(n){return new hs(os.INVALID_URL,"Invalid URL '"+n+"'.")}function vD(n){return new hs(os.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function p0(n){return new hs(os.INVALID_ARGUMENT,n)}function LT(){return new hs(os.APP_DELETED,"The Firebase app was deleted.")}function wD(n){return new hs(os.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_r.makeFromUrl(e,t)}catch{return new _r(e,"")}if(r.path==="")return r;throw vD(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+i+l,"i"),p={bucket:1,path:3};function m(B){B.path_=decodeURIComponent(B.path)}const y="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${y}/b/${i}/o${x}`,"i"),k={bucket:1,path:3},C=t===OT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",L=new RegExp(`^https?://${C}/${i}/${b}`,"i"),P=[{regex:h,indices:p,postModify:a},{regex:I,indices:k,postModify:m},{regex:L,indices:{bucket:1,path:2},postModify:m}];for(let B=0;B<P.length;B++){const H=P[B],Z=H.regex.exec(e);if(Z){const D=Z[H.indices.bucket];let A=Z[H.indices.path];A||(A=""),r=new _r(D,A),H.postModify(r);break}}if(r==null)throw yD(e);return r}}class _D{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function p(){return h===2}let m=!1;function y(...b){m||(m=!0,e.apply(null,b))}function _(b){i=setTimeout(()=>{i=null,n(I,p())},b)}function x(){a&&clearTimeout(a)}function I(b,...L){if(m){x();return}if(b){x(),y.call(null,b,...L);return}if(p()||l){x(),y.call(null,b,...L);return}r<64&&(r*=2);let P;h===1?(h=2,P=0):P=(r+Math.random())*1e3,_(P)}let k=!1;function C(b){k||(k=!0,x(),!m&&(i!==null?(b||(h=2),clearTimeout(i),_(0)):b||(h=1)))}return _(0),a=setTimeout(()=>{l=!0,C(!0)},t),C}function ED(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){return n!==void 0}function m0(n,e,t,r){if(r<e)throw p0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw p0(`Invalid value for '${n}'. Expected ${t} or less.`)}function TD(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Rh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Rh||(Rh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,r,i,a,l,h,p,m,y,_,x=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=_,this.retry=x,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,C)=>{this.resolve_=k,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Vd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{const p=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Rh.NO_ERROR,p=a.getStatus();if(!h||ID(p,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===Rh.ABORT;r(!1,new Vd(!1,null,y));return}const m=this.successCodes_.indexOf(p)!==-1;r(!0,new Vd(m,a))})},t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());SD(p)?a(p):a()}catch(p){l(p)}else if(h!==null){const p=pD();p.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,p)):l(p)}else if(i.canceled){const p=this.appDelete_?LT():gD();l(p)}else{const p=mD();l(p)}};this.canceled_?t(!1,new Vd(!1,null,!0)):this.backoffId_=xD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ED(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function bD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ND(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function RD(n,e,t,r,i,a,l=!0,h=!1){const p=TD(n.urlParams),m=n.url+p,y=Object.assign({},n.headers);return ND(y,e),AD(y,t),bD(y,a),kD(y,r),new CD(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function jD(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this._service=e,t instanceof _r?this._location=t:this._location=_r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ph(e,t)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jD(this._location.path)}get storage(){return this._service}get parent(){const e=PD(this._location.path);if(e===null)return null;const t=new _r(this._location.bucket,e);return new Ph(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wD(e)}}function g0(n,e){const t=e==null?void 0:e[dD];return t==null?null:_r.makeFromBucketSpec(t,n)}function DD(n,e,t,r={}){n.host=`${e}:${t}`;const i=Qi(e);i&&($h(`https://${n.host}/b`),Bh("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:hE(a,n.app.options.projectId))}class MD{constructor(e,t,r,i,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=OT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hD,this._maxUploadRetryTime=fD,this._requests=new Set,i!=null?this._bucket=_r.makeFromBucketSpec(i,this._host):this._bucket=g0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_r.makeFromBucketSpec(this._url,e):this._bucket=g0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ph(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new _D(LT());{const l=RD(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const y0="@firebase/storage",v0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="storage";function OD(n=qh(),e){n=ut(n);const r=Jc(n,VT).getImmediate({identifier:e}),i=Lg("storage");return i&&LD(r,...i),r}function LD(n,e,t,r={}){DD(n,e,t,r)}function VD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new MD(t,r,i,e,Ho)}function FD(){Ui(new Us(VT,VD,"PUBLIC").setMultipleInstances(!0)),sr(y0,v0,""),sr(y0,v0,"esm2020")}FD();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="us-central1";class zD{constructor(e,t,r,i,a=pg,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new UD(e,t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=pg}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function $D(n,e,t){const r=Qi(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&($h(n.emulatorOrigin+"/backends"),Bh("Functions",!0))}const w0="@firebase/functions",_0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="auth-internal",qD="app-check-internal",WD="messaging-internal";function HD(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider(BD),l=t.getProvider(WD),h=t.getProvider(qD);return new zD(i,a,l,h,r)};Ui(new Us(FT,e,"PUBLIC").setMultipleInstances(!0)),sr(w0,_0,n),sr(w0,_0,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(n=qh(),e=pg){const r=Jc(ut(n),FT).getImmediate({identifier:e}),i=Lg("functions");return i&&KD(r,...i),r}function KD(n,e,t){$D(ut(n),e,t)}HD();const QD={apiKey:"AIzaSyDy4jBqxKpD_B6SGAqRLyTrmGxQ9rEA0zw",authDomain:"officeofmapp.firebaseapp.com",projectId:"officeofmapp",storageBucket:"officeofmapp.firebasestorage.app",messagingSenderId:"710263745328",appId:"1:710263745328:web:a41ed7f9f6df52970db6f5"},vf=mE(QD),xt=rP(vf),Fe=xT(vf);OD(vf);GD(vf);const YD=Object.freeze(Object.defineProperty({__proto__:null,auth:xt,db:Fe},Symbol.toStringTag,{value:"Module"})),x0="reycelrcentino@gmail.com",XD="kNooCkk@0228a",Me={async signIn(n,e){const t=await $k(xt,n,e);try{if(!await this.getUserProfile(t.user.uid))throw console.error("User authenticated but no profile found:",t.user.email),await ko(xt),new Error("Account not properly set up. Please contact administrator.");return await this.updateLastLogin(t.user.uid),t}catch(r){throw console.error("Error verifying user profile after sign-in:",r),await ko(xt),r}},async signInWithGoogle(){var n;try{const e=new Ds;e.addScope("email"),e.addScope("profile"),console.log("Starting Google Sign-In...");try{console.log("Attempting popup sign-in...");const t=await dR(xt,e);return console.log("Popup sign-in successful:",t.user.email),t}catch(t){if(console.log("Popup failed, trying redirect:",t.code),t.code==="auth/popup-blocked"||t.code==="auth/popup-closed-by-user"||t.code==="auth/cancelled-popup-request"||(n=t.message)!=null&&n.includes("popup"))return console.log("Using redirect method..."),await yR(xt,e),null;throw t}}catch(e){throw console.error("Google sign-in error:",e),e}},async handleRedirectResult(){try{const n=await wR(xt);if(!n)return null;if(console.log("Google redirect sign-in completed for:",n.user.email),await this.getUserProfile(n.user.uid))return await this.updateLastLogin(n.user.uid),n;{const t=await Xr(ot(Fe,"approved_google_users",n.user.email));if(t.exists()){console.log("Pre-approved Google user found, creating profile");const r=t.data(),i={...r,uid:n.user.uid,name:n.user.displayName||r.name,lastLogin:new Date};return await Kr(ot(Fe,"users",n.user.uid),i),await sl(ot(Fe,"approved_google_users",n.user.email)),await this.updateLastLogin(n.user.uid),n}throw await ko(xt),new Error("PENDING_APPROVAL")}}catch(n){throw console.error("Google redirect result error:",n),n}},async checkExistingPendingRequest(n){const e=vr(rn(Fe,"pending_users"),_n("email","==",n),_n("status","==","pending"));return!(await Yr(e)).empty},async createGoogleUserRequest(n,e,t,r){if(await this.checkExistingPendingRequest(n))throw new Error("A request for this email is already pending approval.");const a={email:n,name:e,role:t,requestedAt:new Date,status:"pending",authProvider:"google",requestedAdminId:t==="staff"?r:void 0};return(await il(rn(Fe,"pending_users"),a)).id},async requestUserCreation(n,e,t="staff",r){if(t==="super_admin")throw new Error("Super admin accounts cannot be requested");if(await this.checkExistingPendingRequest(n))throw new Error("A request for this email is already pending approval.");const a={email:n,name:e,role:t,requestedAt:new Date,status:"pending",authProvider:"email",requestedAdminId:t==="staff"?r:void 0};return(await il(rn(Fe,"pending_users"),a)).id},async approveGoogleUser(n,e){const t=await this.getUserProfile(e);if(!t)throw new Error("Approver profile not found");if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only administrators and super administrators can approve user accounts");const r=await Xr(ot(Fe,"pending_users",n));if(!r.exists())throw new Error("Pending user not found");const i=r.data();if(i.status!=="pending")throw new Error("User request already processed");if(i.authProvider!=="google")throw new Error("This method is only for Google users");if(t.role==="admin"&&i.role!=="staff")throw new Error("Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");if((i.role==="admin"||i.role==="super_admin")&&t.role!=="super_admin")throw new Error("Only super administrators can approve administrator and super administrator accounts");const a={uid:`google_${i.email.replace(/[^a-zA-Z0-9]/g,"_")}`,email:i.email,role:i.role,name:i.name,createdAt:new Date,lastLogin:new Date,approvedBy:e,approvedAt:new Date,assignedAdminId:i.role==="staff"?i.requestedAdminId||e:void 0};await Kr(ot(Fe,"approved_google_users",i.email),a),await Mo(ot(Fe,"pending_users",n),{status:"approved",approvedBy:e,approvedAt:new Date}),console.log(`Google user approved: ${i.email} with role ${i.role} by ${t.email} (${t.role})`)},async approveUser(n,e,t){const r=await this.getUserProfile(t);if(!r)throw new Error("Approver profile not found");if(r.role!=="admin"&&r.role!=="super_admin")throw new Error("Only administrators and super administrators can approve user accounts");const i=await Xr(ot(Fe,"pending_users",n));if(!i.exists())throw new Error("Pending user not found");const a=i.data();if(a.status!=="pending")throw new Error("User request already processed");if(r.role==="admin"&&a.role!=="staff")throw new Error("Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");if((a.role==="admin"||a.role==="super_admin")&&r.role!=="super_admin")throw new Error("Only super administrators can approve administrator and super administrator accounts");const l=xt.currentUser;try{const h=await Em(xt,a.email,e),p={uid:h.user.uid,email:a.email,role:a.role,name:a.name,createdAt:new Date,lastLogin:new Date,approvedBy:t,approvedAt:new Date,assignedAdminId:a.role==="staff"?a.requestedAdminId||t:void 0};if(await Kr(ot(Fe,"users",h.user.uid),p),!(await Xr(ot(Fe,"users",h.user.uid))).exists())throw new Error("Failed to create user profile in database");return console.log("User profile created successfully for:",h.user.email),await Mo(ot(Fe,"pending_users",n),{status:"approved",approvedBy:t,approvedAt:new Date}),await ko(xt),l&&console.warn("Admin session interrupted. Please sign in again."),h}catch(h){throw h}},async updateUserRole(n,e,t){const r=await this.getUserProfile(n);if(!r)throw new Error("User not found");if(r.role==="super_admin")throw new Error("Super administrator roles cannot be modified for security reasons");if(e==="super_admin"){const i=await this.getUserProfile(t);if(!i||i.role!=="super_admin")throw new Error("Only super administrators can assign super admin roles")}if(r.role==="super_admin"&&e!=="super_admin"&&(await this.getAllUsers()).filter(l=>l.role==="super_admin").length<=1)throw new Error("Cannot remove the last super administrator");await Mo(ot(Fe,"users",n),{role:e,updatedAt:new Date,updatedBy:t}),console.log(`User role updated: ${r.email} -> ${e}`)},async deleteUser(n,e){const t=await this.getUserProfile(n);if(!t)throw new Error("User not found");if(t.role==="super_admin")throw new Error("Super administrator accounts cannot be deleted for security reasons");const r=await this.getUserProfile(e);if(!r)throw new Error("Deleter profile not found");if(t.role==="admin"&&r.role!=="super_admin")throw new Error("Only super administrators can delete administrator accounts");await sl(ot(Fe,"users",n)),console.log(`User deleted: ${t.email} by ${r.email}`)},async createUser(n,e,t,r,i){if(!xt.currentUser)throw new Error("No authenticated user. Please sign in first.");const l=await this.getUserProfile(i);if(!l)throw new Error("Creator profile not found");if(l.role!=="admin"&&l.role!=="super_admin")throw new Error("Only administrators and super administrators can create user accounts");if(l.role==="admin"&&r!=="staff")throw new Error("Administrators can only create staff accounts. Contact a super admin to create administrator accounts.");if((r==="admin"||r==="super_admin")&&l.role!=="super_admin")throw new Error("Only super administrators can create administrator and super administrator accounts");r==="super_admin"&&console.log(`Super admin account creation requested by: ${l.email}`);try{const h=await Em(xt,n,e),p={uid:h.user.uid,email:n,role:r,name:t,createdAt:new Date,lastLogin:new Date,approvedBy:i,approvedAt:new Date,assignedAdminId:r==="staff"?i:void 0};return await Kr(ot(Fe,"users",h.user.uid),p),console.log(`User account created: ${n} with role ${r} by ${l.email} (${l.role})`),await ko(xt),{...h,adminSignedOut:!0}}catch(h){throw await ko(xt).catch(()=>{}),h.code==="auth/email-already-in-use"?new Error("Email address is already in use"):h.code==="auth/invalid-email"?new Error("Invalid email address"):h.code==="auth/weak-password"?new Error("Password is too weak. Use at least 6 characters"):h.code==="auth/network-request-failed"?new Error("Network error. Check your internet connection"):h}},async rejectUser(n,e,t){await Mo(ot(Fe,"pending_users",n),{status:"rejected",rejectionReason:e,approvedBy:t,approvedAt:new Date})},async getPendingUsers(){const n=vr(rn(Fe,"pending_users"),_n("status","==","pending"));return(await Yr(n)).docs.map(t=>({id:t.id,...t.data()}))},async isAdmin(n){const e=await this.getUserProfile(n);return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="super_admin"},async getAllUsers(){return(await Yr(rn(Fe,"users"))).docs.map(e=>e.data())},async getVisibleUsers(n){const e=await this.getAllUsers();return n!=="super_admin"?e.filter(t=>t.role!=="super_admin"):e},async getAdminUsers(){const n=vr(rn(Fe,"users"),_n("role","==","admin"));return(await Yr(n)).docs.map(t=>t.data())},async getStaffForAdmin(n){const e=vr(rn(Fe,"users"),_n("role","==","staff"),_n("assignedAdminId","==",n));return(await Yr(e)).docs.map(r=>r.data())},async getPendingUsersForAdmin(n){const e=vr(rn(Fe,"pending_users"),_n("status","==","pending"),_n("requestedAdminId","==",n));return(await Yr(e)).docs.map(r=>({id:r.id,...r.data()}))},async initializeSuperAdmin(){const n=vr(rn(Fe,"users"),_n("role","==","super_admin"));if((await Yr(n)).empty){const t=await Em(xt,x0,XD),r={uid:t.user.uid,email:x0,role:"super_admin",name:"Super Administrator",createdAt:new Date,lastLogin:new Date};return await Kr(ot(Fe,"users",t.user.uid),r),t}return null},async signOut(){return ko(xt)},async getUserProfile(n){const e=ot(Fe,"users",n),t=await Xr(e);return t.exists()?t.data():null},async createUserProfile(n,e,t){const r={uid:n.uid,email:n.email,role:e,name:t,createdAt:new Date,lastLogin:new Date};return await Kr(ot(Fe,"users",n.uid),r),r},async updateLastLogin(n){await Kr(ot(Fe,"users",n),{lastLogin:new Date},{merge:!0})},async updateUserProfile(n,e){const t=["name"],r={};for(const i of t)e[i]!==void 0&&(r[i]=e[i]);if(Object.keys(r).length===0)throw new Error("No valid fields to update");return r.updatedAt=new Date,await Kr(ot(Fe,"users",n),r,{merge:!0}),console.log(`User profile updated: ${n}`,r),r},onAuthStateChange(n){return Wk(xt,n)},async sendPasswordReset(n){try{return await Vk(xt,n),{success:!0,message:"Password reset email sent successfully"}}catch(e){let t="Failed to send password reset email";throw e.code==="auth/user-not-found"?t="No account found with this email address":e.code==="auth/invalid-email"?t="Invalid email address":e.code==="auth/too-many-requests"&&(t="Too many requests. Please try again later"),new Error(t)}},async confirmPasswordReset(n,e){try{return await Fk(xt,n,e),{success:!0,message:"Password reset successfully"}}catch(t){let r="Failed to reset password";throw t.code==="auth/invalid-action-code"?r="Invalid or expired reset code":t.code==="auth/weak-password"&&(r="Password is too weak. Use at least 6 characters"),new Error(r)}},async verifyPasswordResetCode(n){try{return{success:!0,email:await zk(xt,n)}}catch(e){let t="Invalid or expired reset code";throw e.code==="auth/invalid-action-code"?t="Invalid or expired reset code":e.code==="auth/expired-action-code"&&(t="Reset code has expired. Please request a new one"),new Error(t)}},getCurrentUser(){return xt.currentUser}},UT=()=>{const[n,e]=S.useState([]),t=S.useCallback(p=>{const m=Math.random().toString(36).substr(2,9),y={id:m,duration:5e3,...p};return e(_=>[..._,y]),y.duration&&y.duration>0&&setTimeout(()=>{r(m)},y.duration),m},[]),r=S.useCallback(p=>{e(m=>m.filter(y=>y.id!==p))},[]),i=S.useCallback((p,m)=>t({type:"success",title:p,message:m}),[t]),a=S.useCallback((p,m)=>t({type:"error",title:p,message:m,duration:7e3}),[t]),l=S.useCallback((p,m)=>t({type:"warning",title:p,message:m}),[t]),h=S.useCallback((p,m)=>t({type:"info",title:p,message:m}),[t]);return{toasts:n,addToast:t,removeToast:r,success:i,error:a,warning:l,info:h}},JD=async n=>{try{const e=xt.currentUser,t=n||(e==null?void 0:e.email);if(!t){console.log("No user email provided and no current user");return}if(console.log("=== User Profile Debug ==="),console.log("Email:",t),e){console.log("Firebase Auth User:",{uid:e.uid,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName});try{const a=await Me.getUserProfile(e.uid);console.log("Firestore Profile:",a)}catch(a){console.error("Error fetching Firestore profile:",a)}}const r=vr(rn(Fe,"pending_users"),_n("email","==",t)),i=await Yr(r);i.empty?console.log("No pending user requests found"):(console.log("Pending User Requests:"),i.forEach(a=>{console.log("- ",a.id,a.data())}));try{const a=await Xr(ot(Fe,"approved_google_users",t));a.exists()?console.log("Approved Google User:",a.data()):console.log("No approved Google user record found")}catch(a){console.error("Error checking approved Google users:",a)}console.log("=== End Debug ===")}catch(e){console.error("Debug error:",e)}};typeof window<"u"&&(window.debugUserProfile=JD);const zT=S.createContext(void 0);function ZD({children:n}){const[e,t]=S.useState(null),[r,i]=S.useState(null),[a,l]=S.useState(!0),[h,p]=S.useState(null),m=UT();S.useEffect(()=>((async()=>{await(async()=>{try{console.log("Checking for Google Sign-In redirect result...");const L=await Me.handleRedirectResult();L?console.log("Google redirect sign-in completed for:",L.user.email):console.log("No redirect result found")}catch(L){console.error("Google redirect error:",L);try{await Me.signOut()}catch(N){console.error("Error signing out after redirect failure:",N)}L.message==="PENDING_APPROVAL"?(console.log("User needs approval after redirect"),p("pending_approval")):m.error("Authentication Failed",L.message||"Please try again.")}})()})(),Me.onAuthStateChange(async b=>{if(console.log("Auth state changed:",b?`${b.email} (${b.uid})`:"signed out"),t(b),b){console.log("User authenticated:",b.uid),await new Promise(L=>setTimeout(L,100));try{let L=null,N=0;const P=5;for(;!L&&N<P;)try{if(L=await Me.getUserProfile(b.uid),L){console.log("User profile found:",L);break}const B=100*Math.pow(2,N);console.log(`Profile not found, retrying in ${B}ms (attempt ${N+1}/${P})`),await new Promise(H=>setTimeout(H,B)),N++}catch(B){if(console.error(`Profile fetch attempt ${N+1} failed:`,B),N++,N<P){const H=100*Math.pow(2,N-1);await new Promise(Z=>setTimeout(Z,H))}}if(!L){if(console.log("No user profile found for UID after all retries:",b.uid),console.log("User details:",{uid:b.uid,email:b.email,displayName:b.displayName,emailVerified:b.emailVerified,providerData:b.providerData}),b.providerData.some(H=>H.providerId==="google.com")){console.log("Google user without profile detected - checking if user is pre-approved");try{const{getDoc:H,doc:Z,setDoc:D,deleteDoc:A}=await L_(async()=>{const{getDoc:j,doc:V,setDoc:M,deleteDoc:fe}=await Promise.resolve().then(()=>lD);return{getDoc:j,doc:V,setDoc:M,deleteDoc:fe}},void 0),{db:O}=await L_(async()=>{const{db:j}=await Promise.resolve().then(()=>YD);return{db:j}},void 0),F=await H(Z(O,"approved_google_users",b.email));if(F.exists()){console.log("Pre-approved Google user found in AuthContext, creating profile");const j=F.data(),V={...j,uid:b.uid,name:b.displayName||j.name,lastLogin:new Date};await D(Z(O,"users",b.uid),V),await A(Z(O,"approved_google_users",b.email)),console.log("Pre-approved user profile created successfully in AuthContext"),i(V),p(null),await Me.updateLastLogin(b.uid),console.log("User successfully authenticated with pre-approved profile:",{email:V.email,role:V.role,name:V.name}),l(!1);return}}catch(H){console.error("Error checking pre-approved users in AuthContext:",H)}try{if(await Me.checkExistingPendingRequest(b.email)){console.log("User has pending approval request - signing out and showing pending approval page"),await Me.signOut(),p("pending_approval");return}else{console.log("No pending request found - this user may need to go through role selection again"),await Me.signOut();return}}catch(H){console.error("Error checking pending requests:",H),console.log("Assuming user needs approval due to pending check failure"),await Me.signOut(),p("pending_approval");return}}console.log("Signing out user without profile"),await Me.signOut(),p("pending_approval");return}i(L),p(null),console.log("User successfully authenticated with profile:",{email:L.email,role:L.role,name:L.name})}catch(L){console.error("Error in auth state change handler:",L),console.log("Signing out user due to profile processing error");try{await Me.signOut()}catch(N){console.error("Error signing out after profile error:",N)}m.error("Authentication Error","Please try signing in again.");return}}else i(null),p(null),console.log("User signed out, cleared profile and auth errors");l(!1)})),[]);const I={user:e,userProfile:r,loading:a,authError:h,signIn:async(k,C)=>{l(!0);try{await Me.signIn(k,C)}finally{l(!1)}},signOut:async()=>{await Me.signOut(),p(null)},clearAuthError:()=>{p(null)}};return u.jsx(zT.Provider,{value:I,children:n})}function wf(){const n=S.useContext(zT);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const $T=S.createContext(void 0),eM=[{id:"1",name:"Fr. Juan Santos",email:"juan.santos@province.ph",position:"Provincial Minister",department:"Administration",phone:"+63 912 345 6789",status:"active"},{id:"2",name:"Br. Brendan",email:"brendan@province.ph",position:"Secretary",department:"Administration",phone:"+63 912 345 6790",status:"active"},{id:"3",name:"Sr. Maria Cruz",email:"maria.cruz@province.ph",position:"Finance Officer",department:"Finance",phone:"+63 912 345 6791",status:"active"},{id:"4",name:"Br. Miguel Torres",email:"miguel.torres@province.ph",position:"Community Coordinator",department:"Community Affairs",phone:"+63 912 345 6792",status:"active"}],tM=[{id:"1",name:"Admin User",email:"admin@province.ph",role:"admin",department:"Administration"},{id:"2",name:"Manager User",email:"manager@province.ph",role:"manager",department:"Finance"}];function nM({children:n}){const[e,t]=S.useState(null),[r,i]=S.useState([]),[a,l]=S.useState([]),[h,p]=S.useState([]),[m]=S.useState(eM);S.useEffect(()=>{const P=localStorage.getItem("user"),B=localStorage.getItem("tasks"),H=localStorage.getItem("receipts"),Z=localStorage.getItem("files");P&&t(JSON.parse(P)),B&&i(JSON.parse(B)),H&&l(JSON.parse(H)),Z&&p(JSON.parse(Z))},[]),S.useEffect(()=>{e&&localStorage.setItem("user",JSON.stringify(e))},[e]),S.useEffect(()=>{localStorage.setItem("tasks",JSON.stringify(r))},[r]),S.useEffect(()=>{localStorage.setItem("receipts",JSON.stringify(a))},[a]),S.useEffect(()=>{localStorage.setItem("files",JSON.stringify(h))},[h]);const y=(P,B)=>{const H=tM.find(Z=>Z.email===P);return H&&B==="password"?(t(H),!0):!1},_=()=>{t(null),localStorage.removeItem("user")},x=P=>{const B={...P,id:Date.now().toString(),createdAt:new Date().toISOString()};i([...r,B])},I=(P,B)=>{i(r.map(H=>H.id===P?{...H,...B}:H))},k=P=>{i(r.filter(B=>B.id!==P))},C=P=>{const B={...P,id:Date.now().toString(),uploadedAt:new Date().toISOString()};l([...a,B])},b=P=>{l(a.filter(B=>B.id!==P))},L=P=>{const B={...P,id:Date.now().toString(),uploadedAt:new Date().toISOString()};p([...h,B])},N=P=>{p(h.filter(B=>B.id!==P))};return u.jsx($T.Provider,{value:{user:e,tasks:r,receipts:a,files:h,employees:m,login:y,logout:_,addTask:x,updateTask:I,deleteTask:k,addReceipt:C,deleteReceipt:b,addFile:L,deleteFile:N},children:n})}function _f(){const n=S.useContext($T);if(n===void 0)throw new Error("useApp must be used within an AppProvider");return n}function BT(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=BT(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Vy(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=BT(n))&&(r&&(r+=" "),r+=e);return r}const Fy="-",rM=n=>{const e=iM(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const h=l.split(Fy);return h[0]===""&&h.length!==1&&h.shift(),qT(h,e)||sM(l)},getConflictingClassGroupIds:(l,h)=>{const p=t[l]||[];return h&&r[l]?[...p,...r[l]]:p}}},qT=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?qT(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(Fy);return(l=e.validators.find(({validator:h})=>h(a)))==null?void 0:l.classGroupId},E0=/^\[(.+)\]$/,sM=n=>{if(E0.test(n)){const e=E0.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},iM=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)mg(t[i],r,i,e);return r},mg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:S0(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(oM(i)){mg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,l])=>{mg(l,S0(e,a),t,r)})})},S0=(n,e)=>{let t=n;return e.split(Fy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},oM=n=>n.isThemeGetter,aM=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,l)=>{t.set(a,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return i(a,l),l},set(a,l){t.has(a)?t.set(a,l):i(a,l)}}},gg="!",yg=":",lM=yg.length,cM=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const a=[];let l=0,h=0,p=0,m;for(let k=0;k<i.length;k++){let C=i[k];if(l===0&&h===0){if(C===yg){a.push(i.slice(p,k)),p=k+lM;continue}if(C==="/"){m=k;continue}}C==="["?l++:C==="]"?l--:C==="("?h++:C===")"&&h--}const y=a.length===0?i:i.substring(p),_=uM(y),x=_!==y,I=m&&m>p?m-p:void 0;return{modifiers:a,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:I}};if(e){const i=e+yg,a=r;r=l=>l.startsWith(i)?a(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=a=>t({className:a,parseClassName:i})}return r},uM=n=>n.endsWith(gg)?n.substring(0,n.length-1):n.startsWith(gg)?n.substring(1):n,dM=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let a=[];return r.forEach(l=>{l[0]==="["||e[l]?(i.push(...a.sort(),l),a=[]):a.push(l)}),i.push(...a.sort()),i}},hM=n=>({cache:aM(n.cacheSize),parseClassName:cM(n),sortModifiers:dM(n),...rM(n)}),fM=/\s+/,pM=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,l=[],h=n.trim().split(fM);let p="";for(let m=h.length-1;m>=0;m-=1){const y=h[m],{isExternal:_,modifiers:x,hasImportantModifier:I,baseClassName:k,maybePostfixModifierPosition:C}=t(y);if(_){p=y+(p.length>0?" "+p:p);continue}let b=!!C,L=r(b?k.substring(0,C):k);if(!L){if(!b){p=y+(p.length>0?" "+p:p);continue}if(L=r(k),!L){p=y+(p.length>0?" "+p:p);continue}b=!1}const N=a(x).join(":"),P=I?N+gg:N,B=P+L;if(l.includes(B))continue;l.push(B);const H=i(L,b);for(let Z=0;Z<H.length;++Z){const D=H[Z];l.push(P+D)}p=y+(p.length>0?" "+p:p)}return p};function mM(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=WT(e))&&(r&&(r+=" "),r+=t);return r}const WT=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=WT(n[r]))&&(t&&(t+=" "),t+=e);return t};function gM(n,...e){let t,r,i,a=l;function l(p){const m=e.reduce((y,_)=>_(y),n());return t=hM(m),r=t.cache.get,i=t.cache.set,a=h,h(p)}function h(p){const m=r(p);if(m)return m;const y=pM(p,t);return i(p,y),y}return function(){return a(mM.apply(null,arguments))}}const $t=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},HT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,GT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yM=/^\d+\/\d+$/,vM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_M=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oa=n=>yM.test(n),He=n=>!!n&&!Number.isNaN(Number(n)),Ti=n=>!!n&&Number.isInteger(Number(n)),Rm=n=>n.endsWith("%")&&He(n.slice(0,-1)),Ps=n=>vM.test(n),SM=()=>!0,TM=n=>wM.test(n)&&!_M.test(n),KT=()=>!1,IM=n=>xM.test(n),CM=n=>EM.test(n),AM=n=>!Ie(n)&&!Ce(n),bM=n=>gl(n,XT,KT),Ie=n=>HT.test(n),Ro=n=>gl(n,JT,TM),Pm=n=>gl(n,jM,He),T0=n=>gl(n,QT,KT),NM=n=>gl(n,YT,CM),Fd=n=>gl(n,ZT,IM),Ce=n=>GT.test(n),pc=n=>yl(n,JT),kM=n=>yl(n,DM),I0=n=>yl(n,QT),RM=n=>yl(n,XT),PM=n=>yl(n,YT),Ud=n=>yl(n,ZT,!0),gl=(n,e,t)=>{const r=HT.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},yl=(n,e,t=!1)=>{const r=GT.exec(n);return r?r[1]?e(r[1]):t:!1},QT=n=>n==="position"||n==="percentage",YT=n=>n==="image"||n==="url",XT=n=>n==="length"||n==="size"||n==="bg-size",JT=n=>n==="length",jM=n=>n==="number",DM=n=>n==="family-name",ZT=n=>n==="shadow",MM=()=>{const n=$t("color"),e=$t("font"),t=$t("text"),r=$t("font-weight"),i=$t("tracking"),a=$t("leading"),l=$t("breakpoint"),h=$t("container"),p=$t("spacing"),m=$t("radius"),y=$t("shadow"),_=$t("inset-shadow"),x=$t("text-shadow"),I=$t("drop-shadow"),k=$t("blur"),C=$t("perspective"),b=$t("aspect"),L=$t("ease"),N=$t("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...B(),Ce,Ie],Z=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],A=()=>[Ce,Ie,p],O=()=>[Oa,"full","auto",...A()],F=()=>[Ti,"none","subgrid",Ce,Ie],j=()=>["auto",{span:["full",Ti,Ce,Ie]},Ti,Ce,Ie],V=()=>[Ti,"auto",Ce,Ie],M=()=>["auto","min","max","fr",Ce,Ie],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],me=()=>["start","end","center","stretch","center-safe","end-safe"],de=()=>["auto",...A()],_e=()=>[Oa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],G=()=>[n,Ce,Ie],ee=()=>[...B(),I0,T0,{position:[Ce,Ie]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",RM,bM,{size:[Ce,Ie]}],z=()=>[Rm,pc,Ro],se=()=>["","none","full",m,Ce,Ie],ne=()=>["",He,pc,Ro],ye=()=>["solid","dashed","dotted","double"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[He,Rm,I0,T0],ge=()=>["","none",k,Ce,Ie],xe=()=>["none",He,Ce,Ie],be=()=>["none",He,Ce,Ie],qe=()=>[He,Ce,Ie],We=()=>[Oa,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ps],breakpoint:[Ps],color:[SM],container:[Ps],"drop-shadow":[Ps],ease:["in","out","in-out"],font:[AM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ps],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ps],shadow:[Ps],spacing:["px",He],text:[Ps],"text-shadow":[Ps],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Oa,Ie,Ce,b]}],container:["container"],columns:[{columns:[He,Ie,Ce,h]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Ti,"auto",Ce,Ie]}],basis:[{basis:[Oa,"full","auto",h,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,Oa,"auto","initial","none",Ie]}],grow:[{grow:["",He,Ce,Ie]}],shrink:[{shrink:["",He,Ce,Ie]}],order:[{order:[Ti,"first","last","none",Ce,Ie]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...me(),"normal"]}],"justify-self":[{"justify-self":["auto",...me()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...me(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...me(),"baseline"]}],"place-self":[{"place-self":["auto",...me()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:de()}],mx:[{mx:de()}],my:[{my:de()}],ms:[{ms:de()}],me:[{me:de()}],mt:[{mt:de()}],mr:[{mr:de()}],mb:[{mb:de()}],ml:[{ml:de()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:_e()}],w:[{w:[h,"screen",..._e()]}],"min-w":[{"min-w":[h,"screen","none",..._e()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[l]},..._e()]}],h:[{h:["screen",..._e()]}],"min-h":[{"min-h":["screen","none",..._e()]}],"max-h":[{"max-h":["screen",..._e()]}],"font-size":[{text:["base",t,pc,Ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ce,Pm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Rm,Ie]}],"font-family":[{font:[kM,Ie,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ce,Ie]}],"line-clamp":[{"line-clamp":[He,"none",Ce,Pm]}],leading:[{leading:[a,...A()]}],"list-image":[{"list-image":["none",Ce,Ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,Ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",Ce,Ro]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[He,"auto",Ce,Ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ti,Ce,Ie],radial:["",Ce,Ie],conic:[Ti,Ce,Ie]},PM,NM]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ye(),"hidden","none"]}],"divide-style":[{divide:[...ye(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,Ce,Ie]}],"outline-w":[{outline:["",He,pc,Ro]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",y,Ud,Fd]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",_,Ud,Fd]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[He,Ro]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",x,Ud,Fd]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[He,Ce,Ie]}],"mix-blend":[{"mix-blend":[...Se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[Ce,Ie]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":B()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,Ie]}],filter:[{filter:["","none",Ce,Ie]}],blur:[{blur:ge()}],brightness:[{brightness:[He,Ce,Ie]}],contrast:[{contrast:[He,Ce,Ie]}],"drop-shadow":[{"drop-shadow":["","none",I,Ud,Fd]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",He,Ce,Ie]}],"hue-rotate":[{"hue-rotate":[He,Ce,Ie]}],invert:[{invert:["",He,Ce,Ie]}],saturate:[{saturate:[He,Ce,Ie]}],sepia:[{sepia:["",He,Ce,Ie]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,Ie]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[He,Ce,Ie]}],"backdrop-contrast":[{"backdrop-contrast":[He,Ce,Ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,Ce,Ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,Ce,Ie]}],"backdrop-invert":[{"backdrop-invert":["",He,Ce,Ie]}],"backdrop-opacity":[{"backdrop-opacity":[He,Ce,Ie]}],"backdrop-saturate":[{"backdrop-saturate":[He,Ce,Ie]}],"backdrop-sepia":[{"backdrop-sepia":["",He,Ce,Ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,Ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",Ce,Ie]}],ease:[{ease:["linear","initial",L,Ce,Ie]}],delay:[{delay:[He,Ce,Ie]}],animate:[{animate:["none",N,Ce,Ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,Ce,Ie]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[Ce,Ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,Ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,Ie]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[He,pc,Ro,Pm]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},e1=gM(MM);function dt(...n){return e1(Vy(n))}function rt({className:n,...e}){return u.jsx("div",{"data-slot":"card",className:dt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function Tt({className:n,...e}){return u.jsx("div",{"data-slot":"card-header",className:dt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function Dt({className:n,...e}){return u.jsx("h4",{"data-slot":"card-title",className:dt("leading-none",n),...e})}function st({className:n,...e}){return u.jsx("div",{"data-slot":"card-content",className:dt("px-6 [&:last-child]:pb-6",n),...e})}function C0(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function xf(...n){return e=>{let t=!1;const r=n.map(i=>{const a=C0(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():C0(n[i],null)}}}}function ht(...n){return S.useCallback(xf(...n),n)}var Ws=S.forwardRef((n,e)=>{const{children:t,...r}=n,i=S.Children.toArray(t),a=i.find(LM);if(a){const l=a.props.children,h=i.map(p=>p===a?S.Children.count(l)>1?S.Children.only(null):S.isValidElement(l)?l.props.children:null:p);return u.jsx(vg,{...r,ref:e,children:S.isValidElement(l)?S.cloneElement(l,void 0,h):null})}return u.jsx(vg,{...r,ref:e,children:t})});Ws.displayName="Slot";var vg=S.forwardRef((n,e)=>{const{children:t,...r}=n;if(S.isValidElement(t)){const i=FM(t),a=VM(r,t.props);return t.type!==S.Fragment&&(a.ref=e?xf(e,i):i),S.cloneElement(t,a)}return S.Children.count(t)>1?S.Children.only(null):null});vg.displayName="SlotClone";var OM=({children:n})=>u.jsx(u.Fragment,{children:n});function LM(n){return S.isValidElement(n)&&n.type===OM}function VM(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...h)=>{a(...h),i(...h)}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function FM(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const A0=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,b0=Vy,t1=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return b0(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(m=>{const y=t==null?void 0:t[m],_=a==null?void 0:a[m];if(y===null)return null;const x=A0(y)||A0(_);return i[m][x]}),h=t&&Object.entries(t).reduce((m,y)=>{let[_,x]=y;return x===void 0||(m[_]=x),m},{}),p=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,y)=>{let{class:_,className:x,...I}=y;return Object.entries(I).every(k=>{let[C,b]=k;return Array.isArray(b)?b.includes({...a,...h}[C]):{...a,...h}[C]===b})?[...m,_,x]:m},[]);return b0(n,l,p,t==null?void 0:t.class,t==null?void 0:t.className)},UM=t1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Oe=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},a)=>{const l=r?Ws:"button";return u.jsx(l,{ref:a,"data-slot":"button",className:dt(UM({variant:e,size:t,className:n})),...i})});Oe.displayName="Button";function Rn({className:n,type:e,...t}){return u.jsx("input",{type:e,"data-slot":"input",className:dt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}var hu=sE();const zM=rE(hu);var $M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qe=$M.reduce((n,e)=>{const t=S.forwardRef((r,i)=>{const{asChild:a,...l}=r,h=a?Ws:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(h,{...l,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function n1(n,e){n&&hu.flushSync(()=>n.dispatchEvent(e))}var BM="Label",r1=S.forwardRef((n,e)=>u.jsx(Qe.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r1.displayName=BM;var qM=r1;function Ge({className:n,...e}){return u.jsx(qM,{"data-slot":"label",className:dt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),N0=n=>{const e=HM(n);return e.charAt(0).toUpperCase()+e.slice(1)},s1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...h},p)=>S.createElement("svg",{ref:p,...GM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:s1("lucide",i),...h},[...l.map(([m,y])=>S.createElement(m,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=S.forwardRef(({className:r,...i},a)=>S.createElement(KM,{ref:a,iconNode:e,className:s1(`lucide-${WM(N0(n))}`,`lucide-${n}`,r),...i}));return t.displayName=N0(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wg=ze("arrow-left",QM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],XM=ze("bell",YM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ZM=ze("briefcase",JM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],i1=ze("calendar",eO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_g=ze("check",tO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],o1=ze("chevron-down",nO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sO=ze("chevron-up",rO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ki=ze("circle-alert",iO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ef=ze("circle-check-big",oO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lO=ze("circle-x",aO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],uO=ze("clock",cO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],hO=ze("dollar-sign",dO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],pO=ze("download",fO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gO=ze("eye-off",mO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xg=ze("eye",yO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],k0=ze("file-text",vO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],a1=ze("folder-open",wO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xO=ze("info",_O);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],SO=ze("layout-dashboard",EO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],l1=ze("list-checks",TO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Eg=ze("loader-circle",IO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],AO=ze("log-out",CO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Uy=ze("mail",bO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],kO=ze("menu",NO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],c1=ze("message-circle",RO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],jO=ze("moon",PO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],oh=ze("pen-line",DO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],OO=ze("pen",MO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],VO=ze("phone",LO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zy=ze("plus",FO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],u1=ze("receipt",UO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$O=ze("refresh-cw",zO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qO=ze("save",BO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],HO=ze("send",WO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$y=ze("settings",GO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qa=ze("shield",KO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],YO=ze("square-pen",QO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],JO=ze("sun",XO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],e4=ze("tag",ZO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sf=ze("trash-2",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],d1=ze("triangle-alert",n4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],h1=ze("upload",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tf=ze("user",s4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],By=ze("users",i4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$o=ze("x",o4),a4=({isOpen:n,userEmail:e,userName:t,onRoleSelect:r,onCancel:i,loading:a=!1})=>{var L;const[l,h]=S.useState("staff"),[p,m]=S.useState(""),[y,_]=S.useState([]),[x,I]=S.useState(!1);S.useEffect(()=>{n&&k()},[n]);const k=async()=>{I(!0);try{const N=await Me.getAdminUsers();_(N),N.length>0&&m(N[0].uid)}catch(N){console.error("Error loading admin users:",N)}finally{I(!1)}};if(!n)return null;const C=[{value:"staff",label:"Staff Member",description:"Basic access to tasks, receipts, and files. Will be assigned to a specific administrator.",icon:Tf,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{value:"admin",label:"Administrator",description:"Full access including user management and system settings",icon:$y,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"}],b=()=>{r(l,l==="staff"?p:void 0)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"relative",children:[u.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:a,children:u.jsx($o,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx(Ef,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx(Dt,{className:"text-lg",children:"Google Sign-In Successful"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Choose your requested role"})]})]}),u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:t}),u.jsx("p",{className:"text-xs text-gray-500",children:e})]})]}),u.jsxs(st,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Ge,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select the role you're requesting:"}),u.jsx("div",{className:"space-y-3",children:C.map(N=>{const P=N.icon,B=l===N.value;return u.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 p-4 transition-all ${B?`${N.borderColor} ${N.bgColor}`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>h(N.value),children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${B?N.bgColor:"bg-gray-50"}`,children:u.jsx(P,{className:`w-5 h-5 ${B?N.color:"text-gray-600"}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:`font-medium ${B?N.color:"text-gray-900"}`,children:N.label}),B&&u.jsx("div",{className:`w-2 h-2 rounded-full ${N.color.replace("text-","bg-")}`})]}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description})]})]}),u.jsx("input",{type:"radio",name:"role",value:N.value,checked:B,onChange:()=>h(N.value),className:"absolute top-4 right-4 w-4 h-4 text-blue-600"})]},N.value)})})]}),l==="staff"&&u.jsxs("div",{children:[u.jsx(Ge,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select the administrator you'd like to work under:"}),x?u.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading administrators..."}):y.length===0?u.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsx("p",{className:"text-sm text-yellow-800",children:"No administrators available. Your request will be assigned to the approving administrator."})}):u.jsx("div",{className:"space-y-2",children:y.map(N=>u.jsx("div",{className:`relative cursor-pointer rounded-lg border-2 p-3 transition-all ${p===N.uid?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>m(N.uid),children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${p===N.uid?"bg-blue-100":"bg-gray-50"}`,children:u.jsx(By,{className:`w-4 h-4 ${p===N.uid?"text-blue-600":"text-gray-600"}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:`font-medium ${p===N.uid?"text-blue-900":"text-gray-900"}`,children:N.name}),u.jsx("p",{className:"text-sm text-gray-600",children:N.email})]}),u.jsx("input",{type:"radio",name:"admin",value:N.uid,checked:p===N.uid,onChange:()=>m(N.uid),className:"w-4 h-4 text-blue-600"})]})},N.uid))})]}),u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Note:"})," Your request will be reviewed by an administrator.",l==="staff"&&p&&u.jsxs("span",{children:[" You will be assigned to ",(L=y.find(N=>N.uid===p))==null?void 0:L.name,"."]}),l==="admin"&&u.jsx("span",{children:" Administrator requests require additional approval."})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx(Oe,{onClick:b,disabled:a,className:"flex-1",children:a?"Submitting...":"Submit Request"}),u.jsx(Oe,{onClick:i,variant:"outline",disabled:a,className:"flex-1",children:"Cancel"})]})]})]})})},f1=({onSuccess:n,onError:e})=>{const[t,r]=S.useState(!1),[i,a]=S.useState(!1),[l,h]=S.useState(null),p=async()=>{r(!0);try{console.log("Starting Google Sign-In..."),a(!1),h(null);const _=await Me.signInWithGoogle();if(_){console.log("Google Sign-In popup completed, checking user profile...");try{if(await new Promise(I=>setTimeout(I,100)),await Me.getUserProfile(_.user.uid)){console.log("Existing user signed in successfully"),await Me.updateLastLogin(_.user.uid),n==null||n();return}else{console.log("No profile found, checking if user is pre-approved...");try{const I=await Xr(ot(Fe,"approved_google_users",_.user.email));if(I.exists()){console.log("Pre-approved Google user found, creating profile");const k=I.data(),C={...k,uid:_.user.uid,name:_.user.displayName||k.name,lastLogin:new Date};await Kr(ot(Fe,"users",_.user.uid),C),await sl(ot(Fe,"approved_google_users",_.user.email)),console.log("Pre-approved user profile created successfully"),await Me.updateLastLogin(_.user.uid),n==null||n();return}}catch(I){console.error("Error checking pre-approved users:",I)}console.log("New user detected, checking for existing requests..."),await Me.signOut();try{if(await Me.checkExistingPendingRequest(_.user.email)){console.log("User already has pending request"),e==null||e("Your access request is already pending approval. Please wait for admin approval.");return}}catch(I){console.error("Error checking pending requests:",I)}console.log("Showing role selection modal for new user"),h({email:_.user.email,name:_.user.displayName||_.user.email.split("@")[0]}),a(!0);return}}catch(x){console.error("Error checking user profile:",x),await Me.signOut(),console.log("Profile check failed, checking if user is pre-approved...");try{if((await Xr(ot(Fe,"approved_google_users",_.user.email))).exists()){console.log("Pre-approved Google user found after profile error"),e==null||e("Authentication error occurred. Please try signing in again.");return}}catch(I){console.error("Error checking pre-approved users after profile error:",I)}try{if(await Me.checkExistingPendingRequest(_.user.email)){e==null||e("Your access request is already pending approval. Please wait for admin approval.");return}}catch(I){console.error("Error checking pending requests:",I)}h({email:_.user.email,name:_.user.displayName||_.user.email.split("@")[0]}),a(!0);return}}console.log("Google Sign-In using redirect method, will be handled on page reload")}catch(_){console.error("Google Sign-In error:",_);let x="Google Sign-In failed";if(_.code==="auth/popup-blocked")x="Popup was blocked. Please allow popups for this site and try again.";else if(_.code==="auth/popup-closed-by-user")x="Sign-in was cancelled. Please try again.";else if(_.code==="auth/unauthorized-domain")x="This domain is not authorized for Google Sign-In. Please contact support.";else if(_.code==="auth/operation-not-allowed")x="Google Sign-In is not enabled. Please contact support.";else if(_.code==="auth/network-request-failed")x="Network error. Please check your connection and try again.";else if(_.message==="PENDING_APPROVAL"){console.log("User needs approval, will be handled by AuthContext");return}else _.message&&(x=_.message);e==null||e(x)}finally{r(!1)}},m=async(_,x)=>{if(l){r(!0);try{console.log(`Creating Google user request for ${l.email} with role ${_}${x?` assigned to admin ${x}`:""}`),await Me.createGoogleUserRequest(l.email,l.name,_,x),console.log("Google user request created successfully"),a(!1),h(null),console.log("Role selection complete, triggering success callback"),n==null||n()}catch(I){console.error("Error creating Google user request:",I),e==null||e(I.message||"Failed to submit request")}finally{r(!1)}}},y=()=>{a(!1),h(null),r(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:p,disabled:t,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Signing in...":"Continue with Google"]}),u.jsx(a4,{isOpen:i,userEmail:(l==null?void 0:l.email)||"",userName:(l==null?void 0:l.name)||"",onRoleSelect:m,onCancel:y,loading:t})]})},qy="/assets/bb626b016a1517c6cfff6c8c45abb0b9ac8e523c-CvVptfcF.png";function l4(){const[n,e]=S.useState(""),[t,r]=S.useState(""),[i,a]=S.useState(!1),[l,h]=S.useState(""),[p,m]=S.useState(!1),[y,_]=S.useState(!1),[x,I]=S.useState(""),[k,C]=S.useState(null),[b,L]=S.useState(""),[N,P]=S.useState(""),B=V=>{const M=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return V?M.test(V)?(L(""),!0):(L("Please enter a valid email address"),!1):(L("Email is required"),!1)},H=V=>V?V.length<6?(P("Password must be at least 6 characters"),!1):(P(""),!0):(P("Password is required"),!1);S.useEffect(()=>{const V=Me.getCurrentUser();C(V),typeof window<"u"&&(window.forceSignOut=async()=>{try{await Me.signOut(),localStorage.clear(),sessionStorage.clear(),window.location.reload()}catch(M){console.error("Error signing out:",M)}},window.debugAuth=()=>{const M=Me.getCurrentUser();return console.log("Current user:",M),M})},[]);const Z=async()=>{try{await Me.signOut(),C(null),h(""),I("Signed out successfully. You can now sign in as a different user.")}catch(V){console.error("Sign out error:",V),h("Error signing out. Please try again.")}},D=async V=>{V.preventDefault(),h("");const M=B(n),fe=H(t);if(!(!M||!fe)){m(!0);try{const me=await Me.signIn(n,t);console.log("Sign in successful:",me.user.uid)}catch(me){console.error("Sign in error:",me);let de="An error occurred during sign in";me.code==="auth/invalid-credential"?de="Invalid email or password. Please check your credentials and try again.":me.code==="auth/user-not-found"?de="No account found with this email address.":me.code==="auth/wrong-password"?de="Incorrect password. Please try again.":me.code==="auth/invalid-email"?de="Please enter a valid email address.":me.code==="auth/user-disabled"?de="This account has been disabled. Contact administrator.":me.code==="auth/too-many-requests"?de="Too many failed attempts. Please try again later or reset your password.":me.code==="auth/network-request-failed"?de="Network error. Please check your internet connection.":me.message&&(de=me.message),h(de)}finally{m(!1)}}},A=async V=>{if(V.preventDefault(),!B(n)){h("Please enter a valid email address first");return}m(!0),h(""),I("");try{await Me.sendPasswordReset(n),I("Password reset email sent! Check your inbox and spam folder."),_(!1)}catch(M){let fe="Failed to send password reset email";M.code==="auth/user-not-found"?fe="No account found with this email address":M.code==="auth/too-many-requests"?fe="Too many requests. Please try again later":M.message&&(fe=M.message),h(fe)}finally{m(!1)}},O=()=>{console.log("Google Sign-In success callback triggered")},F=V=>{console.error("Google Sign-In error:",V),h(V)},j=()=>{a(!i)};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"space-y-4 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("img",{src:qy,alt:"Province Logo",className:"h-24 w-24 object-contain"})}),u.jsx(Dt,{className:"text-2xl font-bold",children:"Province of San Antonio de Padua"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Office Management System"})]}),u.jsxs(st,{children:[k&&u.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm text-yellow-800",children:["Already signed in as: ",u.jsx("strong",{children:k.email})]}),u.jsx("p",{className:"text-xs text-yellow-600",children:"Sign out to login as a different user"})]}),u.jsx(Oe,{type:"button",variant:"outline",size:"sm",onClick:Z,disabled:p,children:"Sign Out"})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(f1,{onSuccess:O,onError:F}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),u.jsxs("form",{onSubmit:D,className:"space-y-4",noValidate:!0,children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"email",children:"Email Address"}),u.jsxs("div",{className:"relative",children:[u.jsx(Rn,{id:"email",type:"email",placeholder:"your.email@province.ph",value:n,onChange:V=>{e(V.target.value),b&&B(V.target.value)},onBlur:()=>B(n),className:b?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"email"}),b&&u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u.jsx(ki,{className:"h-4 w-4 text-red-500"})})]}),b&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(ki,{className:"h-3 w-3"}),b]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"password",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Rn,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:t,onChange:V=>{r(V.target.value),N&&H(V.target.value)},onBlur:()=>H(t),className:N?"border-red-500 focus:border-red-500 pr-10":"pr-10",required:!0,autoComplete:"current-password"}),u.jsx("button",{type:"button",onClick:j,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:-1,children:i?u.jsx(gO,{className:"h-4 w-4"}):u.jsx(xg,{className:"h-4 w-4"})})]}),N&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(ki,{className:"h-3 w-3"}),N]})]}),l&&u.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:u.jsxs("p",{className:"text-sm text-red-700 flex items-center gap-2",children:[u.jsx(ki,{className:"h-4 w-4"}),l]})}),x&&u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:u.jsxs("p",{className:"text-sm text-green-700 flex items-center gap-2",children:[u.jsx(Ef,{className:"h-4 w-4"}),x]})}),u.jsx(Oe,{type:"submit",className:"w-full",disabled:p,children:p?u.jsxs(u.Fragment,{children:[u.jsx(Eg,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):"Sign In"}),u.jsx("div",{className:"flex items-center justify-between",children:u.jsx(Oe,{type:"button",variant:"link",className:"text-sm p-0 h-auto",onClick:()=>_(!y),children:"Forgot Password?"})}),y&&u.jsxs("div",{className:"p-4 border rounded-md bg-gray-50",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enter your email address and we'll send you a password reset link."}),u.jsx(Oe,{type:"button",onClick:A,disabled:p||!n||!!b,className:"w-full",children:p?u.jsxs(u.Fragment,{children:[u.jsx(Eg,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Email"})]}),u.jsx(Oe,{type:"button",variant:"outline",className:"w-full",onClick:()=>window.location.href="/register",children:"Request Account Access"}),u.jsx("div",{className:"text-xs text-muted-foreground text-center mt-4",children:"Contact administrator for account access"})]})]})]})]})})}const c4=()=>{const[n,e]=S.useState({email:"",name:"",role:"staff"}),[t,r]=S.useState(!1),[i,a]=S.useState(!1),[l,h]=S.useState(""),[p,m]=S.useState({email:"",name:""}),y=L=>{const N=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return L?N.test(L)?"":"Please enter a valid email address":"Email is required"},_=L=>L.trim()?L.trim().length<2?"Name must be at least 2 characters":/^[a-zA-Z\s]+$/.test(L.trim())?"":"Name can only contain letters and spaces":"Full name is required",x=(L,N)=>{e({...n,[L]:N}),p[L]&&m({...p,[L]:""}),l&&h("")},I=()=>{const L=y(n.email),N=_(n.name);return m({email:L,name:N}),!L&&!N},k=async L=>{var N,P;if(L.preventDefault(),h(""),!!I()){r(!0);try{console.log("Submitting registration request:",n),await Me.requestUserCreation(n.email,n.name,n.role),a(!0)}catch(B){console.error("Error submitting request:",B);let H="Error submitting request. Please try again.";B.code==="permission-denied"?H="Permission denied. Please try again or contact support.":(N=B.message)!=null&&N.includes("already pending")?H="A request for this email is already pending approval.":(P=B.message)!=null&&P.includes("already exists")?H="An account with this email already exists.":B.message&&(H=B.message),h(H)}finally{r(!1)}}},C=()=>{a(!0)},b=L=>{h(L)};return i?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"text-center",children:[u.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:u.jsx(Ef,{className:"w-6 h-6 text-green-600"})}),u.jsx(Dt,{className:"text-xl text-green-800",children:"Request Submitted Successfully"})]}),u.jsxs(st,{className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:u.jsx("p",{className:"text-green-700 text-sm text-center",children:"Your account request has been submitted for approval. You will be notified via email once it's processed by an administrator."})}),u.jsx("div",{className:"text-center text-sm text-muted-foreground",children:u.jsx("p",{children:"Please check your email for updates on your request status."})}),u.jsxs(Oe,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",children:[u.jsx(wg,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]})]})}):u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"text-center",children:[u.jsx(Dt,{className:"text-2xl font-bold",children:"Create Account"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Request access to the Office Management System"})]}),u.jsxs(st,{className:"space-y-4",children:[l&&u.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:u.jsxs("p",{className:"text-red-700 text-sm flex items-center gap-2",children:[u.jsx(ki,{className:"h-4 w-4"}),l]})}),u.jsx("div",{children:u.jsx(f1,{onSuccess:C,onError:b})}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or register with email"})})]}),u.jsxs("form",{onSubmit:k,className:"space-y-4",noValidate:!0,children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs(Ge,{htmlFor:"name",className:"flex items-center gap-2",children:[u.jsx(Tf,{className:"h-4 w-4"}),"Full Name"]}),u.jsx(Rn,{id:"name",type:"text",placeholder:"Enter your full name",value:n.name,onChange:L=>x("name",L.target.value),onBlur:()=>{const L=_(n.name);m({...p,name:L})},className:p.name?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"name"}),p.name&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(ki,{className:"h-3 w-3"}),p.name]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(Ge,{htmlFor:"email",className:"flex items-center gap-2",children:[u.jsx(Uy,{className:"h-4 w-4"}),"Email Address"]}),u.jsx(Rn,{id:"email",type:"email",placeholder:"Enter your email",value:n.email,onChange:L=>x("email",L.target.value),onBlur:()=>{const L=y(n.email);m({...p,email:L})},className:p.email?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"email"}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(ki,{className:"h-3 w-3"}),p.email]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(Ge,{htmlFor:"role",className:"flex items-center gap-2",children:[u.jsx(Qa,{className:"h-4 w-4"}),"Requested Role"]}),u.jsxs("select",{id:"role",value:n.role,onChange:L=>x("role",L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"staff",children:"Staff Member"}),u.jsx("option",{value:"admin",children:"Administrator"})]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator requests require additional approval"})]}),u.jsx(Oe,{type:"submit",className:"w-full",disabled:t||!!p.email||!!p.name,children:t?u.jsxs(u.Fragment,{children:[u.jsx(Eg,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting Request..."]}):"Submit Request"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(Oe,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",disabled:t,children:[u.jsx(wg,{className:"mr-2 h-4 w-4"}),"Back to Login"]}),u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Note:"})," All account requests must be approved by an administrator before access is granted. You will receive an email notification once your request is processed."]})})]})]})]})})},u4=({userEmail:n,onRetry:e,onSignOut:t})=>u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"text-center space-y-4",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("img",{src:qy,alt:"Province Logo",className:"h-20 w-20 object-contain"})}),u.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:u.jsx(uO,{className:"w-8 h-8 text-yellow-600"})}),u.jsx(Dt,{className:"text-xl text-yellow-800",children:"Waiting for Admin Approval"})]}),u.jsxs(st,{className:"space-y-6",children:[u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("p",{className:"text-gray-700",children:"Your account request is currently being reviewed by an administrator."}),n&&u.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700",children:[u.jsx(Uy,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm font-medium",children:n})]})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx(Qa,{className:"w-5 h-5 text-gray-600 mt-0.5"}),u.jsxs("div",{className:"text-sm text-gray-700",children:[u.jsx("p",{className:"font-medium mb-1",children:"What happens next?"}),u.jsxs("ul",{className:"space-y-1 text-xs",children:[u.jsx("li",{children:" An administrator will review your request"}),u.jsx("li",{children:" You'll receive an email notification when approved"}),u.jsx("li",{children:" Once approved, you can sign in normally"})]})]})]}),u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Need immediate access?"})," Contact your administrator directly."]})})]}),u.jsxs("div",{className:"space-y-3",children:[e&&u.jsxs(Oe,{onClick:e,variant:"outline",className:"w-full",children:[u.jsx($O,{className:"mr-2 h-4 w-4"}),"Check Again"]}),u.jsxs(Oe,{onClick:t||(()=>window.location.href="/"),variant:"outline",className:"w-full",children:[u.jsx(wg,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"This page will automatically refresh when your account is approved."})})]})]})}),d4=({toast:n,onRemove:e})=>{const t=()=>{switch(n.type){case"success":return u.jsx(Ef,{className:"w-5 h-5 text-green-600"});case"error":return u.jsx(lO,{className:"w-5 h-5 text-red-600"});case"warning":return u.jsx(d1,{className:"w-5 h-5 text-yellow-600"});case"info":return u.jsx(xO,{className:"w-5 h-5 text-blue-600"})}},r=()=>{switch(n.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}},i=()=>{switch(n.type){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800"}};return u.jsx("div",{className:`max-w-sm w-full ${r()} border rounded-lg shadow-lg p-4 mb-3 animate-in slide-in-from-right duration-300`,children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0",children:t()}),u.jsxs("div",{className:"ml-3 w-0 flex-1",children:[u.jsx("p",{className:`text-sm font-medium ${i()}`,children:n.title}),n.message&&u.jsx("p",{className:`mt-1 text-sm ${i()} opacity-90`,children:n.message})]}),u.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:u.jsxs("button",{className:`inline-flex ${i()} hover:opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current rounded`,onClick:()=>e(n.id),children:[u.jsx("span",{className:"sr-only",children:"Close"}),u.jsx($o,{className:"w-4 h-4"})]})})]})})},zd=({toasts:n,onRemove:e})=>n.length===0?null:u.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(t=>u.jsx(d4,{toast:t,onRemove:e},t.id))});function h4(n,e){const t=S.createContext(e),r=a=>{const{children:l,...h}=a,p=S.useMemo(()=>h,Object.values(h));return u.jsx(t.Provider,{value:p,children:l})};r.displayName=n+"Provider";function i(a){const l=S.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,i]}function Ji(n,e=[]){let t=[];function r(a,l){const h=S.createContext(l),p=t.length;t=[...t,l];const m=_=>{var L;const{scope:x,children:I,...k}=_,C=((L=x==null?void 0:x[n])==null?void 0:L[p])||h,b=S.useMemo(()=>k,Object.values(k));return u.jsx(C.Provider,{value:b,children:I})};m.displayName=a+"Provider";function y(_,x){var C;const I=((C=x==null?void 0:x[n])==null?void 0:C[p])||h,k=S.useContext(I);if(k)return k;if(l!==void 0)return l;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[m,y]}const i=()=>{const a=t.map(l=>S.createContext(l));return function(h){const p=(h==null?void 0:h[n])||a;return S.useMemo(()=>({[`__scope${n}`]:{...h,[n]:p}}),[h,p])}};return i.scopeName=n,[r,f4(i,...e)]}function f4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=r.reduce((h,{useScope:p,scopeName:m})=>{const _=p(a)[`__scope${m}`];return{...h,..._}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function Kn(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}var on=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Wy="Avatar",[p4]=Ji(Wy),[m4,p1]=p4(Wy),m1=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,a]=S.useState("idle");return u.jsx(m4,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:u.jsx(Qe.span,{...r,ref:e})})});m1.displayName=Wy;var g1="AvatarImage",g4=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...a}=n,l=p1(g1,t),h=y4(r,a.referrerPolicy),p=Kn(m=>{i(m),l.onImageLoadingStatusChange(m)});return on(()=>{h!=="idle"&&p(h)},[h,p]),h==="loaded"?u.jsx(Qe.img,{...a,ref:e,src:r}):null});g4.displayName=g1;var y1="AvatarFallback",v1=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,a=p1(y1,t),[l,h]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const p=window.setTimeout(()=>h(!0),r);return()=>window.clearTimeout(p)}},[r]),l&&a.imageLoadingStatus!=="loaded"?u.jsx(Qe.span,{...i,ref:e}):null});v1.displayName=y1;function y4(n,e){const[t,r]=S.useState("idle");return on(()=>{if(!n){r("error");return}let i=!0;const a=new window.Image,l=h=>()=>{i&&r(h)};return r("loading"),a.onload=l("loaded"),a.onerror=l("error"),a.src=n,e&&(a.referrerPolicy=e),()=>{i=!1}},[n,e]),t}var v4=m1,w4=v1;function w1({className:n,...e}){return u.jsx(v4,{"data-slot":"avatar",className:dt("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function _1({className:n,...e}){return u.jsx(w4,{"data-slot":"avatar-fallback",className:dt("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}function ke(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function zc({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=_4({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r,h=Kn(t),p=S.useCallback(m=>{if(a){const _=typeof m=="function"?m(n):m;_!==n&&h(_)}else i(m)},[a,n,i,h]);return[l,p]}function _4({defaultProp:n,onChange:e}){const t=S.useState(n),[r]=t,i=S.useRef(r),a=Kn(e);return S.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),t}function Hy(n){const e=n+"CollectionProvider",[t,r]=Ji(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=I=>{const{scope:k,children:C}=I,b=js.useRef(null),L=js.useRef(new Map).current;return u.jsx(i,{scope:k,itemMap:L,collectionRef:b,children:C})};l.displayName=e;const h=n+"CollectionSlot",p=js.forwardRef((I,k)=>{const{scope:C,children:b}=I,L=a(h,C),N=ht(k,L.collectionRef);return u.jsx(Ws,{ref:N,children:b})});p.displayName=h;const m=n+"CollectionItemSlot",y="data-radix-collection-item",_=js.forwardRef((I,k)=>{const{scope:C,children:b,...L}=I,N=js.useRef(null),P=ht(k,N),B=a(m,C);return js.useEffect(()=>(B.itemMap.set(N,{ref:N,...L}),()=>void B.itemMap.delete(N))),u.jsx(Ws,{[y]:"",ref:P,children:b})});_.displayName=m;function x(I){const k=a(n+"CollectionConsumer",I);return js.useCallback(()=>{const b=k.collectionRef.current;if(!b)return[];const L=Array.from(b.querySelectorAll(`[${y}]`));return Array.from(k.itemMap.values()).sort((B,H)=>L.indexOf(B.ref.current)-L.indexOf(H.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:l,Slot:p,ItemSlot:_},x,r]}var x4=S.createContext(void 0);function Gy(n){const e=S.useContext(x4);return n||e||"ltr"}function E4(n,e=globalThis==null?void 0:globalThis.document){const t=Kn(n);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var S4="DismissableLayer",Sg="dismissableLayer.update",T4="dismissableLayer.pointerDownOutside",I4="dismissableLayer.focusOutside",R0,x1=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),If=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:h,...p}=n,m=S.useContext(x1),[y,_]=S.useState(null),x=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=S.useState({}),k=ht(e,D=>_(D)),C=Array.from(m.layers),[b]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),L=C.indexOf(b),N=y?C.indexOf(y):-1,P=m.layersWithOutsidePointerEventsDisabled.size>0,B=N>=L,H=b4(D=>{const A=D.target,O=[...m.branches].some(F=>F.contains(A));!B||O||(i==null||i(D),l==null||l(D),D.defaultPrevented||h==null||h())},x),Z=N4(D=>{const A=D.target;[...m.branches].some(F=>F.contains(A))||(a==null||a(D),l==null||l(D),D.defaultPrevented||h==null||h())},x);return E4(D=>{N===m.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&h&&(D.preventDefault(),h()))},x),S.useEffect(()=>{if(y)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(R0=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(y)),m.layers.add(y),P0(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=R0)}},[y,x,t,m]),S.useEffect(()=>()=>{y&&(m.layers.delete(y),m.layersWithOutsidePointerEventsDisabled.delete(y),P0())},[y,m]),S.useEffect(()=>{const D=()=>I({});return document.addEventListener(Sg,D),()=>document.removeEventListener(Sg,D)},[]),u.jsx(Qe.div,{...p,ref:k,style:{pointerEvents:P?B?"auto":"none":void 0,...n.style},onFocusCapture:ke(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:ke(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:ke(n.onPointerDownCapture,H.onPointerDownCapture)})});If.displayName=S4;var C4="DismissableLayerBranch",A4=S.forwardRef((n,e)=>{const t=S.useContext(x1),r=S.useRef(null),i=ht(e,r);return S.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),u.jsx(Qe.div,{...n,ref:i})});A4.displayName=C4;function b4(n,e=globalThis==null?void 0:globalThis.document){const t=Kn(n),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const a=h=>{if(h.target&&!r.current){let p=function(){E1(T4,t,m,{discrete:!0})};const m={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=p,e.addEventListener("click",i.current,{once:!0})):p()}else e.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function N4(n,e=globalThis==null?void 0:globalThis.document){const t=Kn(n),r=S.useRef(!1);return S.useEffect(()=>{const i=a=>{a.target&&!r.current&&E1(I4,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function P0(){const n=new CustomEvent(Sg);document.dispatchEvent(n)}function E1(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?n1(i,a):i.dispatchEvent(a)}var jm=0;function Ky(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??j0()),document.body.insertAdjacentElement("beforeend",n[1]??j0()),jm++,()=>{jm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jm--}},[])}function j0(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Dm="focusScope.autoFocusOnMount",Mm="focusScope.autoFocusOnUnmount",D0={bubbles:!1,cancelable:!0},k4="FocusScope",Cf=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=n,[h,p]=S.useState(null),m=Kn(i),y=Kn(a),_=S.useRef(null),x=ht(e,C=>p(C)),I=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let C=function(P){if(I.paused||!h)return;const B=P.target;h.contains(B)?_.current=B:Ii(_.current,{select:!0})},b=function(P){if(I.paused||!h)return;const B=P.relatedTarget;B!==null&&(h.contains(B)||Ii(_.current,{select:!0}))},L=function(P){if(document.activeElement===document.body)for(const H of P)H.removedNodes.length>0&&Ii(h)};document.addEventListener("focusin",C),document.addEventListener("focusout",b);const N=new MutationObserver(L);return h&&N.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",b),N.disconnect()}}},[r,h,I.paused]),S.useEffect(()=>{if(h){O0.add(I);const C=document.activeElement;if(!h.contains(C)){const L=new CustomEvent(Dm,D0);h.addEventListener(Dm,m),h.dispatchEvent(L),L.defaultPrevented||(R4(O4(S1(h)),{select:!0}),document.activeElement===C&&Ii(h))}return()=>{h.removeEventListener(Dm,m),setTimeout(()=>{const L=new CustomEvent(Mm,D0);h.addEventListener(Mm,y),h.dispatchEvent(L),L.defaultPrevented||Ii(C??document.body,{select:!0}),h.removeEventListener(Mm,y),O0.remove(I)},0)}}},[h,m,y,I]);const k=S.useCallback(C=>{if(!t&&!r||I.paused)return;const b=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,L=document.activeElement;if(b&&L){const N=C.currentTarget,[P,B]=P4(N);P&&B?!C.shiftKey&&L===B?(C.preventDefault(),t&&Ii(P,{select:!0})):C.shiftKey&&L===P&&(C.preventDefault(),t&&Ii(B,{select:!0})):L===N&&C.preventDefault()}},[t,r,I.paused]);return u.jsx(Qe.div,{tabIndex:-1,...l,ref:x,onKeyDown:k})});Cf.displayName=k4;function R4(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Ii(r,{select:e}),document.activeElement!==t)return}function P4(n){const e=S1(n),t=M0(e,n),r=M0(e.reverse(),n);return[t,r]}function S1(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function M0(n,e){for(const t of n)if(!j4(t,{upTo:e}))return t}function j4(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function D4(n){return n instanceof HTMLInputElement&&"select"in n}function Ii(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&D4(n)&&e&&n.select()}}var O0=M4();function M4(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=L0(n,e),n.unshift(e)},remove(e){var t;n=L0(n,e),(t=n[0])==null||t.resume()}}}function L0(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function O4(n){return n.filter(e=>e.tagName!=="A")}var L4=WA.useId||(()=>{}),V4=0;function Fs(n){const[e,t]=S.useState(L4());return on(()=>{t(r=>r??String(V4++))},[n]),n||(e?`radix-${e}`:"")}const F4=["top","right","bottom","left"],Gi=Math.min,Bn=Math.max,jh=Math.round,$d=Math.floor,ss=n=>({x:n,y:n}),U4={left:"right",right:"left",bottom:"top",top:"bottom"},z4={start:"end",end:"start"};function Tg(n,e,t){return Bn(n,Gi(e,t))}function Hs(n,e){return typeof n=="function"?n(e):n}function Gs(n){return n.split("-")[0]}function vl(n){return n.split("-")[1]}function Qy(n){return n==="x"?"y":"x"}function Yy(n){return n==="y"?"height":"width"}const $4=new Set(["top","bottom"]);function Zr(n){return $4.has(Gs(n))?"y":"x"}function Xy(n){return Qy(Zr(n))}function B4(n,e,t){t===void 0&&(t=!1);const r=vl(n),i=Xy(n),a=Yy(i);let l=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Dh(l)),[l,Dh(l)]}function q4(n){const e=Dh(n);return[Ig(n),e,Ig(e)]}function Ig(n){return n.replace(/start|end/g,e=>z4[e])}const V0=["left","right"],F0=["right","left"],W4=["top","bottom"],H4=["bottom","top"];function G4(n,e,t){switch(n){case"top":case"bottom":return t?e?F0:V0:e?V0:F0;case"left":case"right":return e?W4:H4;default:return[]}}function K4(n,e,t,r){const i=vl(n);let a=G4(Gs(n),t==="start",r);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(Ig)))),a}function Dh(n){return n.replace(/left|right|bottom|top/g,e=>U4[e])}function Q4(n){return{top:0,right:0,bottom:0,left:0,...n}}function T1(n){return typeof n!="number"?Q4(n):{top:n,right:n,bottom:n,left:n}}function Mh(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function U0(n,e,t){let{reference:r,floating:i}=n;const a=Zr(e),l=Xy(e),h=Yy(l),p=Gs(e),m=a==="y",y=r.x+r.width/2-i.width/2,_=r.y+r.height/2-i.height/2,x=r[h]/2-i[h]/2;let I;switch(p){case"top":I={x:y,y:r.y-i.height};break;case"bottom":I={x:y,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:_};break;case"left":I={x:r.x-i.width,y:_};break;default:I={x:r.x,y:r.y}}switch(vl(e)){case"start":I[l]-=x*(t&&m?-1:1);break;case"end":I[l]+=x*(t&&m?-1:1);break}return I}const Y4=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:l}=t,h=a.filter(Boolean),p=await(l.isRTL==null?void 0:l.isRTL(e));let m=await l.getElementRects({reference:n,floating:e,strategy:i}),{x:y,y:_}=U0(m,r,p),x=r,I={},k=0;for(let C=0;C<h.length;C++){const{name:b,fn:L}=h[C],{x:N,y:P,data:B,reset:H}=await L({x:y,y:_,initialPlacement:r,placement:x,strategy:i,middlewareData:I,rects:m,platform:l,elements:{reference:n,floating:e}});y=N??y,_=P??_,I={...I,[b]:{...I[b],...B}},H&&k<=50&&(k++,typeof H=="object"&&(H.placement&&(x=H.placement),H.rects&&(m=H.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:i}):H.rects),{x:y,y:_}=U0(m,x,p)),C=-1)}return{x:y,y:_,placement:x,strategy:i,middlewareData:I}};async function $c(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:l,elements:h,strategy:p}=n,{boundary:m="clippingAncestors",rootBoundary:y="viewport",elementContext:_="floating",altBoundary:x=!1,padding:I=0}=Hs(e,n),k=T1(I),b=h[x?_==="floating"?"reference":"floating":_],L=Mh(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(b)))==null||t?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(h.floating)),boundary:m,rootBoundary:y,strategy:p})),N=_==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h.floating)),B=await(a.isElement==null?void 0:a.isElement(P))?await(a.getScale==null?void 0:a.getScale(P))||{x:1,y:1}:{x:1,y:1},H=Mh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:N,offsetParent:P,strategy:p}):N);return{top:(L.top-H.top+k.top)/B.y,bottom:(H.bottom-L.bottom+k.bottom)/B.y,left:(L.left-H.left+k.left)/B.x,right:(H.right-L.right+k.right)/B.x}}const X4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:l,elements:h,middlewareData:p}=e,{element:m,padding:y=0}=Hs(n,e)||{};if(m==null)return{};const _=T1(y),x={x:t,y:r},I=Xy(i),k=Yy(I),C=await l.getDimensions(m),b=I==="y",L=b?"top":"left",N=b?"bottom":"right",P=b?"clientHeight":"clientWidth",B=a.reference[k]+a.reference[I]-x[I]-a.floating[k],H=x[I]-a.reference[I],Z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let D=Z?Z[P]:0;(!D||!await(l.isElement==null?void 0:l.isElement(Z)))&&(D=h.floating[P]||a.floating[k]);const A=B/2-H/2,O=D/2-C[k]/2-1,F=Gi(_[L],O),j=Gi(_[N],O),V=F,M=D-C[k]-j,fe=D/2-C[k]/2+A,me=Tg(V,fe,M),de=!p.arrow&&vl(i)!=null&&fe!==me&&a.reference[k]/2-(fe<V?F:j)-C[k]/2<0,_e=de?fe<V?fe-V:fe-M:0;return{[I]:x[I]+_e,data:{[I]:me,centerOffset:fe-me-_e,...de&&{alignmentOffset:_e}},reset:de}}}),J4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:l,initialPlacement:h,platform:p,elements:m}=e,{mainAxis:y=!0,crossAxis:_=!0,fallbackPlacements:x,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:C=!0,...b}=Hs(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const L=Gs(i),N=Zr(h),P=Gs(h)===h,B=await(p.isRTL==null?void 0:p.isRTL(m.floating)),H=x||(P||!C?[Dh(h)]:q4(h)),Z=k!=="none";!x&&Z&&H.push(...K4(h,C,k,B));const D=[h,...H],A=await $c(e,b),O=[];let F=((r=a.flip)==null?void 0:r.overflows)||[];if(y&&O.push(A[L]),_){const fe=B4(i,l,B);O.push(A[fe[0]],A[fe[1]])}if(F=[...F,{placement:i,overflows:O}],!O.every(fe=>fe<=0)){var j,V;const fe=(((j=a.flip)==null?void 0:j.index)||0)+1,me=D[fe];if(me&&(!(_==="alignment"?N!==Zr(me):!1)||F.every(G=>Zr(G.placement)===N?G.overflows[0]>0:!0)))return{data:{index:fe,overflows:F},reset:{placement:me}};let de=(V=F.filter(_e=>_e.overflows[0]<=0).sort((_e,G)=>_e.overflows[1]-G.overflows[1])[0])==null?void 0:V.placement;if(!de)switch(I){case"bestFit":{var M;const _e=(M=F.filter(G=>{if(Z){const ee=Zr(G.placement);return ee===N||ee==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(ee=>ee>0).reduce((ee,le)=>ee+le,0)]).sort((G,ee)=>G[1]-ee[1])[0])==null?void 0:M[0];_e&&(de=_e);break}case"initialPlacement":de=h;break}if(i!==de)return{reset:{placement:de}}}return{}}}};function z0(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function $0(n){return F4.some(e=>n[e]>=0)}const Z4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Hs(n,e);switch(r){case"referenceHidden":{const a=await $c(e,{...i,elementContext:"reference"}),l=z0(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:$0(l)}}}case"escaped":{const a=await $c(e,{...i,altBoundary:!0}),l=z0(a,t.floating);return{data:{escapedOffsets:l,escaped:$0(l)}}}default:return{}}}}},I1=new Set(["left","top"]);async function eL(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=Gs(t),h=vl(t),p=Zr(t)==="y",m=I1.has(l)?-1:1,y=a&&p?-1:1,_=Hs(e,n);let{mainAxis:x,crossAxis:I,alignmentAxis:k}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return h&&typeof k=="number"&&(I=h==="end"?k*-1:k),p?{x:I*y,y:x*m}:{x:x*m,y:I*y}}const tL=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:l,middlewareData:h}=e,p=await eL(e,n);return l===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:a+p.y,data:{...p,placement:l}}}}},nL=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:h={fn:b=>{let{x:L,y:N}=b;return{x:L,y:N}}},...p}=Hs(n,e),m={x:t,y:r},y=await $c(e,p),_=Zr(Gs(i)),x=Qy(_);let I=m[x],k=m[_];if(a){const b=x==="y"?"top":"left",L=x==="y"?"bottom":"right",N=I+y[b],P=I-y[L];I=Tg(N,I,P)}if(l){const b=_==="y"?"top":"left",L=_==="y"?"bottom":"right",N=k+y[b],P=k-y[L];k=Tg(N,k,P)}const C=h.fn({...e,[x]:I,[_]:k});return{...C,data:{x:C.x-t,y:C.y-r,enabled:{[x]:a,[_]:l}}}}}},rL=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:l}=e,{offset:h=0,mainAxis:p=!0,crossAxis:m=!0}=Hs(n,e),y={x:t,y:r},_=Zr(i),x=Qy(_);let I=y[x],k=y[_];const C=Hs(h,e),b=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(p){const P=x==="y"?"height":"width",B=a.reference[x]-a.floating[P]+b.mainAxis,H=a.reference[x]+a.reference[P]-b.mainAxis;I<B?I=B:I>H&&(I=H)}if(m){var L,N;const P=x==="y"?"width":"height",B=I1.has(Gs(i)),H=a.reference[_]-a.floating[P]+(B&&((L=l.offset)==null?void 0:L[_])||0)+(B?0:b.crossAxis),Z=a.reference[_]+a.reference[P]+(B?0:((N=l.offset)==null?void 0:N[_])||0)-(B?b.crossAxis:0);k<H?k=H:k>Z&&(k=Z)}return{[x]:I,[_]:k}}}},sL=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:l,elements:h}=e,{apply:p=()=>{},...m}=Hs(n,e),y=await $c(e,m),_=Gs(i),x=vl(i),I=Zr(i)==="y",{width:k,height:C}=a.floating;let b,L;_==="top"||_==="bottom"?(b=_,L=x===(await(l.isRTL==null?void 0:l.isRTL(h.floating))?"start":"end")?"left":"right"):(L=_,b=x==="end"?"top":"bottom");const N=C-y.top-y.bottom,P=k-y.left-y.right,B=Gi(C-y[b],N),H=Gi(k-y[L],P),Z=!e.middlewareData.shift;let D=B,A=H;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=P),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=N),Z&&!x){const F=Bn(y.left,0),j=Bn(y.right,0),V=Bn(y.top,0),M=Bn(y.bottom,0);I?A=k-2*(F!==0||j!==0?F+j:Bn(y.left,y.right)):D=C-2*(V!==0||M!==0?V+M:Bn(y.top,y.bottom))}await p({...e,availableWidth:A,availableHeight:D});const O=await l.getDimensions(h.floating);return k!==O.width||C!==O.height?{reset:{rects:!0}}:{}}}};function Af(){return typeof window<"u"}function wl(n){return C1(n)?(n.nodeName||"").toLowerCase():"#document"}function Hn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function fs(n){var e;return(e=(C1(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function C1(n){return Af()?n instanceof Node||n instanceof Hn(n).Node:!1}function Cr(n){return Af()?n instanceof Element||n instanceof Hn(n).Element:!1}function as(n){return Af()?n instanceof HTMLElement||n instanceof Hn(n).HTMLElement:!1}function B0(n){return!Af()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Hn(n).ShadowRoot}const iL=new Set(["inline","contents"]);function fu(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ar(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!iL.has(i)}const oL=new Set(["table","td","th"]);function aL(n){return oL.has(wl(n))}const lL=[":popover-open",":modal"];function bf(n){return lL.some(e=>{try{return n.matches(e)}catch{return!1}})}const cL=["transform","translate","scale","rotate","perspective"],uL=["transform","translate","scale","rotate","perspective","filter"],dL=["paint","layout","strict","content"];function Jy(n){const e=Zy(),t=Cr(n)?Ar(n):n;return cL.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||uL.some(r=>(t.willChange||"").includes(r))||dL.some(r=>(t.contain||"").includes(r))}function hL(n){let e=Ki(n);for(;as(e)&&!ol(e);){if(Jy(e))return e;if(bf(e))return null;e=Ki(e)}return null}function Zy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fL=new Set(["html","body","#document"]);function ol(n){return fL.has(wl(n))}function Ar(n){return Hn(n).getComputedStyle(n)}function Nf(n){return Cr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ki(n){if(wl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||B0(n)&&n.host||fs(n);return B0(e)?e.host:e}function A1(n){const e=Ki(n);return ol(e)?n.ownerDocument?n.ownerDocument.body:n.body:as(e)&&fu(e)?e:A1(e)}function Bc(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=A1(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),l=Hn(i);if(a){const h=Cg(l);return e.concat(l,l.visualViewport||[],fu(i)?i:[],h&&t?Bc(h):[])}return e.concat(i,Bc(i,[],t))}function Cg(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function b1(n){const e=Ar(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=as(n),a=i?n.offsetWidth:t,l=i?n.offsetHeight:r,h=jh(t)!==a||jh(r)!==l;return h&&(t=a,r=l),{width:t,height:r,$:h}}function ev(n){return Cr(n)?n:n.contextElement}function Ya(n){const e=ev(n);if(!as(e))return ss(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=b1(e);let l=(a?jh(t.width):t.width)/r,h=(a?jh(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!h||!Number.isFinite(h))&&(h=1),{x:l,y:h}}const pL=ss(0);function N1(n){const e=Hn(n);return!Zy()||!e.visualViewport?pL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mL(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Hn(n)?!1:e}function Bo(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=ev(n);let l=ss(1);e&&(r?Cr(r)&&(l=Ya(r)):l=Ya(n));const h=mL(a,t,r)?N1(a):ss(0);let p=(i.left+h.x)/l.x,m=(i.top+h.y)/l.y,y=i.width/l.x,_=i.height/l.y;if(a){const x=Hn(a),I=r&&Cr(r)?Hn(r):r;let k=x,C=Cg(k);for(;C&&r&&I!==k;){const b=Ya(C),L=C.getBoundingClientRect(),N=Ar(C),P=L.left+(C.clientLeft+parseFloat(N.paddingLeft))*b.x,B=L.top+(C.clientTop+parseFloat(N.paddingTop))*b.y;p*=b.x,m*=b.y,y*=b.x,_*=b.y,p+=P,m+=B,k=Hn(C),C=Cg(k)}}return Mh({width:y,height:_,x:p,y:m})}function kf(n,e){const t=Nf(n).scrollLeft;return e?e.left+t:Bo(fs(n)).left+t}function k1(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-kf(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function gL(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",l=fs(r),h=e?bf(e.floating):!1;if(r===l||h&&a)return t;let p={scrollLeft:0,scrollTop:0},m=ss(1);const y=ss(0),_=as(r);if((_||!_&&!a)&&((wl(r)!=="body"||fu(l))&&(p=Nf(r)),as(r))){const I=Bo(r);m=Ya(r),y.x=I.x+r.clientLeft,y.y=I.y+r.clientTop}const x=l&&!_&&!a?k1(l,p):ss(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-p.scrollLeft*m.x+y.x+x.x,y:t.y*m.y-p.scrollTop*m.y+y.y+x.y}}function yL(n){return Array.from(n.getClientRects())}function vL(n){const e=fs(n),t=Nf(n),r=n.ownerDocument.body,i=Bn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Bn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+kf(n);const h=-t.scrollTop;return Ar(r).direction==="rtl"&&(l+=Bn(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:l,y:h}}const q0=25;function wL(n,e){const t=Hn(n),r=fs(n),i=t.visualViewport;let a=r.clientWidth,l=r.clientHeight,h=0,p=0;if(i){a=i.width,l=i.height;const y=Zy();(!y||y&&e==="fixed")&&(h=i.offsetLeft,p=i.offsetTop)}const m=kf(r);if(m<=0){const y=r.ownerDocument,_=y.body,x=getComputedStyle(_),I=y.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,k=Math.abs(r.clientWidth-_.clientWidth-I);k<=q0&&(a-=k)}else m<=q0&&(a+=m);return{width:a,height:l,x:h,y:p}}const _L=new Set(["absolute","fixed"]);function xL(n,e){const t=Bo(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=as(n)?Ya(n):ss(1),l=n.clientWidth*a.x,h=n.clientHeight*a.y,p=i*a.x,m=r*a.y;return{width:l,height:h,x:p,y:m}}function W0(n,e,t){let r;if(e==="viewport")r=wL(n,t);else if(e==="document")r=vL(fs(n));else if(Cr(e))r=xL(e,t);else{const i=N1(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Mh(r)}function R1(n,e){const t=Ki(n);return t===e||!Cr(t)||ol(t)?!1:Ar(t).position==="fixed"||R1(t,e)}function EL(n,e){const t=e.get(n);if(t)return t;let r=Bc(n,[],!1).filter(h=>Cr(h)&&wl(h)!=="body"),i=null;const a=Ar(n).position==="fixed";let l=a?Ki(n):n;for(;Cr(l)&&!ol(l);){const h=Ar(l),p=Jy(l);!p&&h.position==="fixed"&&(i=null),(a?!p&&!i:!p&&h.position==="static"&&!!i&&_L.has(i.position)||fu(l)&&!p&&R1(n,l))?r=r.filter(y=>y!==l):i=h,l=Ki(l)}return e.set(n,r),r}function SL(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const l=[...t==="clippingAncestors"?bf(e)?[]:EL(e,this._c):[].concat(t),r],h=l[0],p=l.reduce((m,y)=>{const _=W0(e,y,i);return m.top=Bn(_.top,m.top),m.right=Gi(_.right,m.right),m.bottom=Gi(_.bottom,m.bottom),m.left=Bn(_.left,m.left),m},W0(e,h,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function TL(n){const{width:e,height:t}=b1(n);return{width:e,height:t}}function IL(n,e,t){const r=as(e),i=fs(e),a=t==="fixed",l=Bo(n,!0,a,e);let h={scrollLeft:0,scrollTop:0};const p=ss(0);function m(){p.x=kf(i)}if(r||!r&&!a)if((wl(e)!=="body"||fu(i))&&(h=Nf(e)),r){const I=Bo(e,!0,a,e);p.x=I.x+e.clientLeft,p.y=I.y+e.clientTop}else i&&m();a&&!r&&i&&m();const y=i&&!r&&!a?k1(i,h):ss(0),_=l.left+h.scrollLeft-p.x-y.x,x=l.top+h.scrollTop-p.y-y.y;return{x:_,y:x,width:l.width,height:l.height}}function Om(n){return Ar(n).position==="static"}function H0(n,e){if(!as(n)||Ar(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return fs(n)===t&&(t=t.ownerDocument.body),t}function P1(n,e){const t=Hn(n);if(bf(n))return t;if(!as(n)){let i=Ki(n);for(;i&&!ol(i);){if(Cr(i)&&!Om(i))return i;i=Ki(i)}return t}let r=H0(n,e);for(;r&&aL(r)&&Om(r);)r=H0(r,e);return r&&ol(r)&&Om(r)&&!Jy(r)?t:r||hL(n)||t}const CL=async function(n){const e=this.getOffsetParent||P1,t=this.getDimensions,r=await t(n.floating);return{reference:IL(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function AL(n){return Ar(n).direction==="rtl"}const bL={convertOffsetParentRelativeRectToViewportRelativeRect:gL,getDocumentElement:fs,getClippingRect:SL,getOffsetParent:P1,getElementRects:CL,getClientRects:yL,getDimensions:TL,getScale:Ya,isElement:Cr,isRTL:AL};function j1(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function NL(n,e){let t=null,r;const i=fs(n);function a(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function l(h,p){h===void 0&&(h=!1),p===void 0&&(p=1),a();const m=n.getBoundingClientRect(),{left:y,top:_,width:x,height:I}=m;if(h||e(),!x||!I)return;const k=$d(_),C=$d(i.clientWidth-(y+x)),b=$d(i.clientHeight-(_+I)),L=$d(y),P={rootMargin:-k+"px "+-C+"px "+-b+"px "+-L+"px",threshold:Bn(0,Gi(1,p))||1};let B=!0;function H(Z){const D=Z[0].intersectionRatio;if(D!==p){if(!B)return l();D?l(!1,D):r=setTimeout(()=>{l(!1,1e-7)},1e3)}D===1&&!j1(m,n.getBoundingClientRect())&&l(),B=!1}try{t=new IntersectionObserver(H,{...P,root:i.ownerDocument})}catch{t=new IntersectionObserver(H,P)}t.observe(n)}return l(!0),a}function kL(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,m=ev(n),y=i||a?[...m?Bc(m):[],...Bc(e)]:[];y.forEach(L=>{i&&L.addEventListener("scroll",t,{passive:!0}),a&&L.addEventListener("resize",t)});const _=m&&h?NL(m,t):null;let x=-1,I=null;l&&(I=new ResizeObserver(L=>{let[N]=L;N&&N.target===m&&I&&(I.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var P;(P=I)==null||P.observe(e)})),t()}),m&&!p&&I.observe(m),I.observe(e));let k,C=p?Bo(n):null;p&&b();function b(){const L=Bo(n);C&&!j1(C,L)&&t(),C=L,k=requestAnimationFrame(b)}return t(),()=>{var L;y.forEach(N=>{i&&N.removeEventListener("scroll",t),a&&N.removeEventListener("resize",t)}),_==null||_(),(L=I)==null||L.disconnect(),I=null,p&&cancelAnimationFrame(k)}}const RL=tL,PL=nL,jL=J4,DL=sL,ML=Z4,G0=X4,OL=rL,LL=(n,e,t)=>{const r=new Map,i={platform:bL,...t},a={...i.platform,_c:r};return Y4(n,e,{...i,platform:a})};var VL=typeof document<"u",FL=function(){},ah=VL?S.useLayoutEffect:FL;function Oh(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Oh(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!Oh(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function D1(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function K0(n,e){const t=D1(n);return Math.round(e*t)/t}function Lm(n){const e=S.useRef(n);return ah(()=>{e.current=n}),e}function UL(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:l}={},transform:h=!0,whileElementsMounted:p,open:m}=n,[y,_]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[x,I]=S.useState(r);Oh(x,r)||I(r);const[k,C]=S.useState(null),[b,L]=S.useState(null),N=S.useCallback(G=>{G!==Z.current&&(Z.current=G,C(G))},[]),P=S.useCallback(G=>{G!==D.current&&(D.current=G,L(G))},[]),B=a||k,H=l||b,Z=S.useRef(null),D=S.useRef(null),A=S.useRef(y),O=p!=null,F=Lm(p),j=Lm(i),V=Lm(m),M=S.useCallback(()=>{if(!Z.current||!D.current)return;const G={placement:e,strategy:t,middleware:x};j.current&&(G.platform=j.current),LL(Z.current,D.current,G).then(ee=>{const le={...ee,isPositioned:V.current!==!1};fe.current&&!Oh(A.current,le)&&(A.current=le,hu.flushSync(()=>{_(le)}))})},[x,e,t,j,V]);ah(()=>{m===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,_(G=>({...G,isPositioned:!1})))},[m]);const fe=S.useRef(!1);ah(()=>(fe.current=!0,()=>{fe.current=!1}),[]),ah(()=>{if(B&&(Z.current=B),H&&(D.current=H),B&&H){if(F.current)return F.current(B,H,M);M()}},[B,H,M,F,O]);const me=S.useMemo(()=>({reference:Z,floating:D,setReference:N,setFloating:P}),[N,P]),de=S.useMemo(()=>({reference:B,floating:H}),[B,H]),_e=S.useMemo(()=>{const G={position:t,left:0,top:0};if(!de.floating)return G;const ee=K0(de.floating,y.x),le=K0(de.floating,y.y);return h?{...G,transform:"translate("+ee+"px, "+le+"px)",...D1(de.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:le}},[t,h,de.floating,y.x,y.y]);return S.useMemo(()=>({...y,update:M,refs:me,elements:de,floatingStyles:_e}),[y,M,me,de,_e])}const zL=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?G0({element:r.current,padding:i}).fn(t):{}:r?G0({element:r,padding:i}).fn(t):{}}}},$L=(n,e)=>({...RL(n),options:[n,e]}),BL=(n,e)=>({...PL(n),options:[n,e]}),qL=(n,e)=>({...OL(n),options:[n,e]}),WL=(n,e)=>({...jL(n),options:[n,e]}),HL=(n,e)=>({...DL(n),options:[n,e]}),GL=(n,e)=>({...ML(n),options:[n,e]}),KL=(n,e)=>({...zL(n),options:[n,e]});var QL="Arrow",M1=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return u.jsx(Qe.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});M1.displayName=QL;var YL=M1;function XL(n){const[e,t]=S.useState(void 0);return on(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,h;if("borderBoxSize"in a){const p=a.borderBoxSize,m=Array.isArray(p)?p[0]:p;l=m.inlineSize,h=m.blockSize}else l=n.offsetWidth,h=n.offsetHeight;t({width:l,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var tv="Popper",[O1,Rf]=Ji(tv),[JL,L1]=O1(tv),V1=n=>{const{__scopePopper:e,children:t}=n,[r,i]=S.useState(null);return u.jsx(JL,{scope:e,anchor:r,onAnchorChange:i,children:t})};V1.displayName=tv;var F1="PopperAnchor",U1=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=L1(F1,t),l=S.useRef(null),h=ht(e,l);return S.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:u.jsx(Qe.div,{...i,ref:h})});U1.displayName=F1;var nv="PopperContent",[ZL,eV]=O1(nv),z1=S.forwardRef((n,e)=>{var re,ge,xe,be,qe,We;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:h=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:y=0,sticky:_="partial",hideWhenDetached:x=!1,updatePositionStrategy:I="optimized",onPlaced:k,...C}=n,b=L1(nv,t),[L,N]=S.useState(null),P=ht(e,At=>N(At)),[B,H]=S.useState(null),Z=XL(B),D=(Z==null?void 0:Z.width)??0,A=(Z==null?void 0:Z.height)??0,O=r+(a!=="center"?"-"+a:""),F=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},j=Array.isArray(m)?m:[m],V=j.length>0,M={padding:F,boundary:j.filter(nV),altBoundary:V},{refs:fe,floatingStyles:me,placement:de,isPositioned:_e,middlewareData:G}=UL({strategy:"fixed",placement:O,whileElementsMounted:(...At)=>kL(...At,{animationFrame:I==="always"}),elements:{reference:b.anchor},middleware:[$L({mainAxis:i+A,alignmentAxis:l}),p&&BL({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?qL():void 0,...M}),p&&WL({...M}),HL({...M,apply:({elements:At,rects:Jt,availableWidth:Nr,availableHeight:Qn})=>{const{width:Pn,height:no}=Jt.reference,gt=At.floating.style;gt.setProperty("--radix-popper-available-width",`${Nr}px`),gt.setProperty("--radix-popper-available-height",`${Qn}px`),gt.setProperty("--radix-popper-anchor-width",`${Pn}px`),gt.setProperty("--radix-popper-anchor-height",`${no}px`)}}),B&&KL({element:B,padding:h}),rV({arrowWidth:D,arrowHeight:A}),x&&GL({strategy:"referenceHidden",...M})]}),[ee,le]=q1(de),q=Kn(k);on(()=>{_e&&(q==null||q())},[_e,q]);const z=(re=G.arrow)==null?void 0:re.x,se=(ge=G.arrow)==null?void 0:ge.y,ne=((xe=G.arrow)==null?void 0:xe.centerOffset)!==0,[ye,Se]=S.useState();return on(()=>{L&&Se(window.getComputedStyle(L).zIndex)},[L]),u.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:_e?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[(be=G.transformOrigin)==null?void 0:be.x,(qe=G.transformOrigin)==null?void 0:qe.y].join(" "),...((We=G.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:u.jsx(ZL,{scope:t,placedSide:ee,onArrowChange:H,arrowX:z,arrowY:se,shouldHideArrow:ne,children:u.jsx(Qe.div,{"data-side":ee,"data-align":le,...C,ref:P,style:{...C.style,animation:_e?void 0:"none"}})})})});z1.displayName=nv;var $1="PopperArrow",tV={top:"bottom",right:"left",bottom:"top",left:"right"},B1=S.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=eV($1,r),l=tV[a.placedSide];return u.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:u.jsx(YL,{...i,ref:t,style:{...i.style,display:"block"}})})});B1.displayName=$1;function nV(n){return n!==null}var rV=n=>({name:"transformOrigin",options:n,fn(e){var b,L,N;const{placement:t,rects:r,middlewareData:i}=e,l=((b=i.arrow)==null?void 0:b.centerOffset)!==0,h=l?0:n.arrowWidth,p=l?0:n.arrowHeight,[m,y]=q1(t),_={start:"0%",center:"50%",end:"100%"}[y],x=(((L=i.arrow)==null?void 0:L.x)??0)+h/2,I=(((N=i.arrow)==null?void 0:N.y)??0)+p/2;let k="",C="";return m==="bottom"?(k=l?_:`${x}px`,C=`${-p}px`):m==="top"?(k=l?_:`${x}px`,C=`${r.floating.height+p}px`):m==="right"?(k=`${-p}px`,C=l?_:`${I}px`):m==="left"&&(k=`${r.floating.width+p}px`,C=l?_:`${I}px`),{data:{x:k,y:C}}}});function q1(n){const[e,t="center"]=n.split("-");return[e,t]}var W1=V1,H1=U1,G1=z1,K1=B1,sV="Portal",Pf=S.forwardRef((n,e)=>{var h;const{container:t,...r}=n,[i,a]=S.useState(!1);on(()=>a(!0),[]);const l=t||i&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return l?zM.createPortal(u.jsx(Qe.div,{...r,ref:e}),l):null});Pf.displayName=sV;function iV(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var Zi=n=>{const{present:e,children:t}=n,r=oV(e),i=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),a=ht(r.ref,aV(i));return typeof t=="function"||r.isPresent?S.cloneElement(i,{ref:a}):null};Zi.displayName="Presence";function oV(n){const[e,t]=S.useState(),r=S.useRef({}),i=S.useRef(n),a=S.useRef("none"),l=n?"mounted":"unmounted",[h,p]=iV(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const m=Bd(r.current);a.current=h==="mounted"?m:"none"},[h]),on(()=>{const m=r.current,y=i.current;if(y!==n){const x=a.current,I=Bd(m);n?p("MOUNT"):I==="none"||(m==null?void 0:m.display)==="none"?p("UNMOUNT"):p(y&&x!==I?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,p]),on(()=>{if(e){let m;const y=e.ownerDocument.defaultView??window,_=I=>{const C=Bd(r.current).includes(I.animationName);if(I.target===e&&C&&(p("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",m=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},x=I=>{I.target===e&&(a.current=Bd(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{y.clearTimeout(m),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else p("ANIMATION_END")},[e,p]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:S.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Bd(n){return(n==null?void 0:n.animationName)||"none"}function aV(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Vm="rovingFocusGroup.onEntryFocus",lV={bubbles:!1,cancelable:!0},jf="RovingFocusGroup",[Ag,Q1,cV]=Hy(jf),[uV,Y1]=Ji(jf,[cV]),[dV,hV]=uV(jf),X1=S.forwardRef((n,e)=>u.jsx(Ag.Provider,{scope:n.__scopeRovingFocusGroup,children:u.jsx(Ag.Slot,{scope:n.__scopeRovingFocusGroup,children:u.jsx(fV,{...n,ref:e})})}));X1.displayName=jf;var fV=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:y=!1,..._}=n,x=S.useRef(null),I=ht(e,x),k=Gy(a),[C=null,b]=zc({prop:l,defaultProp:h,onChange:p}),[L,N]=S.useState(!1),P=Kn(m),B=Q1(t),H=S.useRef(!1),[Z,D]=S.useState(0);return S.useEffect(()=>{const A=x.current;if(A)return A.addEventListener(Vm,P),()=>A.removeEventListener(Vm,P)},[P]),u.jsx(dV,{scope:t,orientation:r,dir:k,loop:i,currentTabStopId:C,onItemFocus:S.useCallback(A=>b(A),[b]),onItemShiftTab:S.useCallback(()=>N(!0),[]),onFocusableItemAdd:S.useCallback(()=>D(A=>A+1),[]),onFocusableItemRemove:S.useCallback(()=>D(A=>A-1),[]),children:u.jsx(Qe.div,{tabIndex:L||Z===0?-1:0,"data-orientation":r,..._,ref:I,style:{outline:"none",...n.style},onMouseDown:ke(n.onMouseDown,()=>{H.current=!0}),onFocus:ke(n.onFocus,A=>{const O=!H.current;if(A.target===A.currentTarget&&O&&!L){const F=new CustomEvent(Vm,lV);if(A.currentTarget.dispatchEvent(F),!F.defaultPrevented){const j=B().filter(de=>de.focusable),V=j.find(de=>de.active),M=j.find(de=>de.id===C),me=[V,M,...j].filter(Boolean).map(de=>de.ref.current);eI(me,y)}}H.current=!1}),onBlur:ke(n.onBlur,()=>N(!1))})})}),J1="RovingFocusGroupItem",Z1=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,...l}=n,h=Fs(),p=a||h,m=hV(J1,t),y=m.currentTabStopId===p,_=Q1(t),{onFocusableItemAdd:x,onFocusableItemRemove:I}=m;return S.useEffect(()=>{if(r)return x(),()=>I()},[r,x,I]),u.jsx(Ag.ItemSlot,{scope:t,id:p,focusable:r,active:i,children:u.jsx(Qe.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...l,ref:e,onMouseDown:ke(n.onMouseDown,k=>{r?m.onItemFocus(p):k.preventDefault()}),onFocus:ke(n.onFocus,()=>m.onItemFocus(p)),onKeyDown:ke(n.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){m.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const C=gV(k,m.orientation,m.dir);if(C!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let L=_().filter(N=>N.focusable).map(N=>N.ref.current);if(C==="last")L.reverse();else if(C==="prev"||C==="next"){C==="prev"&&L.reverse();const N=L.indexOf(k.currentTarget);L=m.loop?yV(L,N+1):L.slice(N+1)}setTimeout(()=>eI(L))}})})})});Z1.displayName=J1;var pV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mV(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function gV(n,e,t){const r=mV(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return pV[r]}function eI(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function yV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var vV=X1,wV=Z1,_V=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},La=new WeakMap,qd=new WeakMap,Wd={},Fm=0,tI=function(n){return n&&(n.host||tI(n.parentNode))},xV=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=tI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},EV=function(n,e,t,r){var i=xV(e,Array.isArray(n)?n:[n]);Wd[t]||(Wd[t]=new WeakMap);var a=Wd[t],l=[],h=new Set,p=new Set(i),m=function(_){!_||h.has(_)||(h.add(_),m(_.parentNode))};i.forEach(m);var y=function(_){!_||p.has(_)||Array.prototype.forEach.call(_.children,function(x){if(h.has(x))y(x);else try{var I=x.getAttribute(r),k=I!==null&&I!=="false",C=(La.get(x)||0)+1,b=(a.get(x)||0)+1;La.set(x,C),a.set(x,b),l.push(x),C===1&&k&&qd.set(x,!0),b===1&&x.setAttribute(t,"true"),k||x.setAttribute(r,"true")}catch(L){console.error("aria-hidden: cannot operate on ",x,L)}})};return y(e),h.clear(),Fm++,function(){l.forEach(function(_){var x=La.get(_)-1,I=a.get(_)-1;La.set(_,x),a.set(_,I),x||(qd.has(_)||_.removeAttribute(r),qd.delete(_)),I||_.removeAttribute(t)}),Fm--,Fm||(La=new WeakMap,La=new WeakMap,qd=new WeakMap,Wd={})}},rv=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=_V(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),EV(r,i,t,"aria-hidden")):function(){return null}},Jr=function(){return Jr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jr.apply(this,arguments)};function nI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function SV(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}var lh="right-scroll-bar-position",ch="width-before-scroll-bar",TV="with-scroll-bars-hidden",IV="--removed-body-scroll-bar-size";function Um(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function CV(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var AV=typeof window<"u"?S.useLayoutEffect:S.useEffect,Q0=new WeakMap;function bV(n,e){var t=CV(null,function(r){return n.forEach(function(i){return Um(i,r)})});return AV(function(){var r=Q0.get(t);if(r){var i=new Set(r),a=new Set(n),l=t.current;i.forEach(function(h){a.has(h)||Um(h,null)}),a.forEach(function(h){i.has(h)||Um(h,l)})}Q0.set(t,n)},[n]),t}function NV(n){return n}function kV(n,e){e===void 0&&(e=NV);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var l=e(a,r);return t.push(l),function(){t=t.filter(function(h){return h!==l})}},assignSyncMedium:function(a){for(r=!0;t.length;){var l=t;t=[],l.forEach(a)}t={push:function(h){return a(h)},filter:function(){return t}}},assignMedium:function(a){r=!0;var l=[];if(t.length){var h=t;t=[],h.forEach(a),l=t}var p=function(){var y=l;l=[],y.forEach(a)},m=function(){return Promise.resolve().then(p)};m(),t={push:function(y){l.push(y),m()},filter:function(y){return l=l.filter(y),t}}}};return i}function RV(n){n===void 0&&(n={});var e=kV(null);return e.options=Jr({async:!0,ssr:!1},n),e}var rI=function(n){var e=n.sideCar,t=nI(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Jr({},t))};rI.isSideCarExport=!0;function PV(n,e){return n.useMedium(e),rI}var sI=RV(),zm=function(){},Df=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:zm,onWheelCapture:zm,onTouchMoveCapture:zm}),i=r[0],a=r[1],l=n.forwardProps,h=n.children,p=n.className,m=n.removeScrollBar,y=n.enabled,_=n.shards,x=n.sideCar,I=n.noRelative,k=n.noIsolation,C=n.inert,b=n.allowPinchZoom,L=n.as,N=L===void 0?"div":L,P=n.gapMode,B=nI(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=x,Z=bV([t,e]),D=Jr(Jr({},B),i);return S.createElement(S.Fragment,null,y&&S.createElement(H,{sideCar:sI,removeScrollBar:m,shards:_,noRelative:I,noIsolation:k,inert:C,setCallbacks:a,allowPinchZoom:!!b,lockRef:t,gapMode:P}),l?S.cloneElement(S.Children.only(h),Jr(Jr({},D),{ref:Z})):S.createElement(N,Jr({},D,{className:p,ref:Z}),h))});Df.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Df.classNames={fullWidth:ch,zeroRight:lh};var jV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function DV(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=jV();return e&&n.setAttribute("nonce",e),n}function MV(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function OV(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var LV=function(){var n=0,e=null;return{add:function(t){n==0&&(e=DV())&&(MV(e,t),OV(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},VV=function(){var n=LV();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},iI=function(){var n=VV(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},FV={left:0,top:0,right:0,gap:0},$m=function(n){return parseInt(n||"",10)||0},UV=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[$m(t),$m(r),$m(i)]},zV=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return FV;var e=UV(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},$V=iI(),Xa="data-scroll-locked",BV=function(n,e,t,r){var i=n.left,a=n.top,l=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(TV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(Xa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lh,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(ch,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(lh," .").concat(lh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ch," .").concat(ch,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xa,`] {
    `).concat(IV,": ").concat(h,`px;
  }
`)},Y0=function(){var n=parseInt(document.body.getAttribute(Xa)||"0",10);return isFinite(n)?n:0},qV=function(){S.useEffect(function(){return document.body.setAttribute(Xa,(Y0()+1).toString()),function(){var n=Y0()-1;n<=0?document.body.removeAttribute(Xa):document.body.setAttribute(Xa,n.toString())}},[])},WV=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;qV();var a=S.useMemo(function(){return zV(i)},[i]);return S.createElement($V,{styles:BV(a,!e,i,t?"":"!important")})},bg=!1;if(typeof window<"u")try{var Hd=Object.defineProperty({},"passive",{get:function(){return bg=!0,!0}});window.addEventListener("test",Hd,Hd),window.removeEventListener("test",Hd,Hd)}catch{bg=!1}var Va=bg?{passive:!1}:!1,HV=function(n){return n.tagName==="TEXTAREA"},oI=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!HV(n)&&t[e]==="visible")},GV=function(n){return oI(n,"overflowY")},KV=function(n){return oI(n,"overflowX")},X0=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=aI(n,r);if(i){var a=lI(n,r),l=a[1],h=a[2];if(l>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},QV=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},YV=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},aI=function(n,e){return n==="v"?GV(e):KV(e)},lI=function(n,e){return n==="v"?QV(e):YV(e)},XV=function(n,e){return n==="h"&&e==="rtl"?-1:1},JV=function(n,e,t,r,i){var a=XV(n,window.getComputedStyle(e).direction),l=a*r,h=t.target,p=e.contains(h),m=!1,y=l>0,_=0,x=0;do{if(!h)break;var I=lI(n,h),k=I[0],C=I[1],b=I[2],L=C-b-a*k;(k||L)&&aI(n,h)&&(_+=L,x+=k);var N=h.parentNode;h=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!p&&h!==document.body||p&&(e.contains(h)||e===h));return(y&&Math.abs(_)<1||!y&&Math.abs(x)<1)&&(m=!0),m},Gd=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},J0=function(n){return[n.deltaX,n.deltaY]},Z0=function(n){return n&&"current"in n?n.current:n},ZV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},e3=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},t3=0,Fa=[];function n3(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),i=S.useState(t3++)[0],a=S.useState(iI)[0],l=S.useRef(n);S.useEffect(function(){l.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var C=SV([n.lockRef.current],(n.shards||[]).map(Z0),!0).filter(Boolean);return C.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),C.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=S.useCallback(function(C,b){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!l.current.allowPinchZoom;var L=Gd(C),N=t.current,P="deltaX"in C?C.deltaX:N[0]-L[0],B="deltaY"in C?C.deltaY:N[1]-L[1],H,Z=C.target,D=Math.abs(P)>Math.abs(B)?"h":"v";if("touches"in C&&D==="h"&&Z.type==="range")return!1;var A=window.getSelection(),O=A&&A.anchorNode,F=O?O===Z||O.contains(Z):!1;if(F)return!1;var j=X0(D,Z);if(!j)return!0;if(j?H=D:(H=D==="v"?"h":"v",j=X0(D,Z)),!j)return!1;if(!r.current&&"changedTouches"in C&&(P||B)&&(r.current=H),!H)return!0;var V=r.current||H;return JV(V,b,C,V==="h"?P:B)},[]),p=S.useCallback(function(C){var b=C;if(!(!Fa.length||Fa[Fa.length-1]!==a)){var L="deltaY"in b?J0(b):Gd(b),N=e.current.filter(function(H){return H.name===b.type&&(H.target===b.target||b.target===H.shadowParent)&&ZV(H.delta,L)})[0];if(N&&N.should){b.cancelable&&b.preventDefault();return}if(!N){var P=(l.current.shards||[]).map(Z0).filter(Boolean).filter(function(H){return H.contains(b.target)}),B=P.length>0?h(b,P[0]):!l.current.noIsolation;B&&b.cancelable&&b.preventDefault()}}},[]),m=S.useCallback(function(C,b,L,N){var P={name:C,delta:b,target:L,should:N,shadowParent:r3(L)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function(B){return B!==P})},1)},[]),y=S.useCallback(function(C){t.current=Gd(C),r.current=void 0},[]),_=S.useCallback(function(C){m(C.type,J0(C),C.target,h(C,n.lockRef.current))},[]),x=S.useCallback(function(C){m(C.type,Gd(C),C.target,h(C,n.lockRef.current))},[]);S.useEffect(function(){return Fa.push(a),n.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:x}),document.addEventListener("wheel",p,Va),document.addEventListener("touchmove",p,Va),document.addEventListener("touchstart",y,Va),function(){Fa=Fa.filter(function(C){return C!==a}),document.removeEventListener("wheel",p,Va),document.removeEventListener("touchmove",p,Va),document.removeEventListener("touchstart",y,Va)}},[]);var I=n.removeScrollBar,k=n.inert;return S.createElement(S.Fragment,null,k?S.createElement(a,{styles:e3(i)}):null,I?S.createElement(WV,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function r3(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const s3=PV(sI,n3);var Mf=S.forwardRef(function(n,e){return S.createElement(Df,Jr({},n,{ref:e,sideCar:s3}))});Mf.classNames=Df.classNames;var Ng=["Enter"," "],i3=["ArrowDown","PageUp","Home"],cI=["ArrowUp","PageDown","End"],o3=[...i3,...cI],a3={ltr:[...Ng,"ArrowRight"],rtl:[...Ng,"ArrowLeft"]},l3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pu="Menu",[qc,c3,u3]=Hy(pu),[Qo,uI]=Ji(pu,[u3,Rf,Y1]),Of=Rf(),dI=Y1(),[d3,Yo]=Qo(pu),[h3,mu]=Qo(pu),hI=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:a,modal:l=!0}=n,h=Of(e),[p,m]=S.useState(null),y=S.useRef(!1),_=Kn(a),x=Gy(i);return S.useEffect(()=>{const I=()=>{y.current=!0,document.addEventListener("pointerdown",k,{capture:!0,once:!0}),document.addEventListener("pointermove",k,{capture:!0,once:!0})},k=()=>y.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",k,{capture:!0}),document.removeEventListener("pointermove",k,{capture:!0})}},[]),u.jsx(W1,{...h,children:u.jsx(d3,{scope:e,open:t,onOpenChange:_,content:p,onContentChange:m,children:u.jsx(h3,{scope:e,onClose:S.useCallback(()=>_(!1),[_]),isUsingKeyboardRef:y,dir:x,modal:l,children:r})})})};hI.displayName=pu;var f3="MenuAnchor",sv=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Of(t);return u.jsx(H1,{...i,...r,ref:e})});sv.displayName=f3;var iv="MenuPortal",[p3,fI]=Qo(iv,{forceMount:void 0}),pI=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,a=Yo(iv,e);return u.jsx(p3,{scope:e,forceMount:t,children:u.jsx(Zi,{present:t||a.open,children:u.jsx(Pf,{asChild:!0,container:i,children:r})})})};pI.displayName=iv;var ir="MenuContent",[m3,ov]=Qo(ir),mI=S.forwardRef((n,e)=>{const t=fI(ir,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=Yo(ir,n.__scopeMenu),l=mu(ir,n.__scopeMenu);return u.jsx(qc.Provider,{scope:n.__scopeMenu,children:u.jsx(Zi,{present:r||a.open,children:u.jsx(qc.Slot,{scope:n.__scopeMenu,children:l.modal?u.jsx(g3,{...i,ref:e}):u.jsx(y3,{...i,ref:e})})})})}),g3=S.forwardRef((n,e)=>{const t=Yo(ir,n.__scopeMenu),r=S.useRef(null),i=ht(e,r);return S.useEffect(()=>{const a=r.current;if(a)return rv(a)},[]),u.jsx(av,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ke(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),y3=S.forwardRef((n,e)=>{const t=Yo(ir,n.__scopeMenu);return u.jsx(av,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),av=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:h,onEntryFocus:p,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:_,onInteractOutside:x,onDismiss:I,disableOutsideScroll:k,...C}=n,b=Yo(ir,t),L=mu(ir,t),N=Of(t),P=dI(t),B=c3(t),[H,Z]=S.useState(null),D=S.useRef(null),A=ht(e,D,b.onContentChange),O=S.useRef(0),F=S.useRef(""),j=S.useRef(0),V=S.useRef(null),M=S.useRef("right"),fe=S.useRef(0),me=k?Mf:S.Fragment,de=k?{as:Ws,allowPinchZoom:!0}:void 0,_e=ee=>{var re,ge;const le=F.current+ee,q=B().filter(xe=>!xe.disabled),z=document.activeElement,se=(re=q.find(xe=>xe.ref.current===z))==null?void 0:re.textValue,ne=q.map(xe=>xe.textValue),ye=N3(ne,le,se),Se=(ge=q.find(xe=>xe.textValue===ye))==null?void 0:ge.ref.current;(function xe(be){F.current=be,window.clearTimeout(O.current),be!==""&&(O.current=window.setTimeout(()=>xe(""),1e3))})(le),Se&&setTimeout(()=>Se.focus())};S.useEffect(()=>()=>window.clearTimeout(O.current),[]),Ky();const G=S.useCallback(ee=>{var q,z;return M.current===((q=V.current)==null?void 0:q.side)&&R3(ee,(z=V.current)==null?void 0:z.area)},[]);return u.jsx(m3,{scope:t,searchRef:F,onItemEnter:S.useCallback(ee=>{G(ee)&&ee.preventDefault()},[G]),onItemLeave:S.useCallback(ee=>{var le;G(ee)||((le=D.current)==null||le.focus(),Z(null))},[G]),onTriggerLeave:S.useCallback(ee=>{G(ee)&&ee.preventDefault()},[G]),pointerGraceTimerRef:j,onPointerGraceIntentChange:S.useCallback(ee=>{V.current=ee},[]),children:u.jsx(me,{...de,children:u.jsx(Cf,{asChild:!0,trapped:i,onMountAutoFocus:ke(a,ee=>{var le;ee.preventDefault(),(le=D.current)==null||le.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:u.jsx(If,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:_,onInteractOutside:x,onDismiss:I,children:u.jsx(vV,{asChild:!0,...P,dir:L.dir,orientation:"vertical",loop:r,currentTabStopId:H,onCurrentTabStopIdChange:Z,onEntryFocus:ke(p,ee=>{L.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(G1,{role:"menu","aria-orientation":"vertical","data-state":RI(b.open),"data-radix-menu-content":"",dir:L.dir,...N,...C,ref:A,style:{outline:"none",...C.style},onKeyDown:ke(C.onKeyDown,ee=>{const q=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,z=ee.ctrlKey||ee.altKey||ee.metaKey,se=ee.key.length===1;q&&(ee.key==="Tab"&&ee.preventDefault(),!z&&se&&_e(ee.key));const ne=D.current;if(ee.target!==ne||!o3.includes(ee.key))return;ee.preventDefault();const Se=B().filter(re=>!re.disabled).map(re=>re.ref.current);cI.includes(ee.key)&&Se.reverse(),A3(Se)}),onBlur:ke(n.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(O.current),F.current="")}),onPointerMove:ke(n.onPointerMove,Wc(ee=>{const le=ee.target,q=fe.current!==ee.clientX;if(ee.currentTarget.contains(le)&&q){const z=ee.clientX>fe.current?"right":"left";M.current=z,fe.current=ee.clientX}}))})})})})})})});mI.displayName=ir;var v3="MenuGroup",lv=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return u.jsx(Qe.div,{role:"group",...r,ref:e})});lv.displayName=v3;var w3="MenuLabel",gI=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return u.jsx(Qe.div,{...r,ref:e})});gI.displayName=w3;var Lh="MenuItem",eE="menu.itemSelect",Lf=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,a=S.useRef(null),l=mu(Lh,n.__scopeMenu),h=ov(Lh,n.__scopeMenu),p=ht(e,a),m=S.useRef(!1),y=()=>{const _=a.current;if(!t&&_){const x=new CustomEvent(eE,{bubbles:!0,cancelable:!0});_.addEventListener(eE,I=>r==null?void 0:r(I),{once:!0}),n1(_,x),x.defaultPrevented?m.current=!1:l.onClose()}};return u.jsx(yI,{...i,ref:p,disabled:t,onClick:ke(n.onClick,y),onPointerDown:_=>{var x;(x=n.onPointerDown)==null||x.call(n,_),m.current=!0},onPointerUp:ke(n.onPointerUp,_=>{var x;m.current||(x=_.currentTarget)==null||x.click()}),onKeyDown:ke(n.onKeyDown,_=>{const x=h.searchRef.current!=="";t||x&&_.key===" "||Ng.includes(_.key)&&(_.currentTarget.click(),_.preventDefault())})})});Lf.displayName=Lh;var yI=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...a}=n,l=ov(Lh,t),h=dI(t),p=S.useRef(null),m=ht(e,p),[y,_]=S.useState(!1),[x,I]=S.useState("");return S.useEffect(()=>{const k=p.current;k&&I((k.textContent??"").trim())},[a.children]),u.jsx(qc.ItemSlot,{scope:t,disabled:r,textValue:i??x,children:u.jsx(wV,{asChild:!0,...h,focusable:!r,children:u.jsx(Qe.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:m,onPointerMove:ke(n.onPointerMove,Wc(k=>{r?l.onItemLeave(k):(l.onItemEnter(k),k.defaultPrevented||k.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(n.onPointerLeave,Wc(k=>l.onItemLeave(k))),onFocus:ke(n.onFocus,()=>_(!0)),onBlur:ke(n.onBlur,()=>_(!1))})})})}),_3="MenuCheckboxItem",vI=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return u.jsx(SI,{scope:n.__scopeMenu,checked:t,children:u.jsx(Lf,{role:"menuitemcheckbox","aria-checked":Vh(t)?"mixed":t,...i,ref:e,"data-state":uv(t),onSelect:ke(i.onSelect,()=>r==null?void 0:r(Vh(t)?!0:!t),{checkForDefaultPrevented:!1})})})});vI.displayName=_3;var wI="MenuRadioGroup",[x3,E3]=Qo(wI,{value:void 0,onValueChange:()=>{}}),_I=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,a=Kn(r);return u.jsx(x3,{scope:n.__scopeMenu,value:t,onValueChange:a,children:u.jsx(lv,{...i,ref:e})})});_I.displayName=wI;var xI="MenuRadioItem",EI=S.forwardRef((n,e)=>{const{value:t,...r}=n,i=E3(xI,n.__scopeMenu),a=t===i.value;return u.jsx(SI,{scope:n.__scopeMenu,checked:a,children:u.jsx(Lf,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":uv(a),onSelect:ke(r.onSelect,()=>{var l;return(l=i.onValueChange)==null?void 0:l.call(i,t)},{checkForDefaultPrevented:!1})})})});EI.displayName=xI;var cv="MenuItemIndicator",[SI,S3]=Qo(cv,{checked:!1}),TI=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,a=S3(cv,t);return u.jsx(Zi,{present:r||Vh(a.checked)||a.checked===!0,children:u.jsx(Qe.span,{...i,ref:e,"data-state":uv(a.checked)})})});TI.displayName=cv;var T3="MenuSeparator",II=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return u.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});II.displayName=T3;var I3="MenuArrow",CI=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Of(t);return u.jsx(K1,{...i,...r,ref:e})});CI.displayName=I3;var C3="MenuSub",[X6,AI]=Qo(C3),xc="MenuSubTrigger",bI=S.forwardRef((n,e)=>{const t=Yo(xc,n.__scopeMenu),r=mu(xc,n.__scopeMenu),i=AI(xc,n.__scopeMenu),a=ov(xc,n.__scopeMenu),l=S.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:p}=a,m={__scopeMenu:n.__scopeMenu},y=S.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return S.useEffect(()=>y,[y]),S.useEffect(()=>{const _=h.current;return()=>{window.clearTimeout(_),p(null)}},[h,p]),u.jsx(sv,{asChild:!0,...m,children:u.jsx(yI,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":RI(t.open),...n,ref:xf(e,i.onTriggerChange),onClick:_=>{var x;(x=n.onClick)==null||x.call(n,_),!(n.disabled||_.defaultPrevented)&&(_.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ke(n.onPointerMove,Wc(_=>{a.onItemEnter(_),!_.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),y()},100))})),onPointerLeave:ke(n.onPointerLeave,Wc(_=>{var I,k;y();const x=(I=t.content)==null?void 0:I.getBoundingClientRect();if(x){const C=(k=t.content)==null?void 0:k.dataset.side,b=C==="right",L=b?-5:5,N=x[b?"left":"right"],P=x[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:_.clientX+L,y:_.clientY},{x:N,y:x.top},{x:P,y:x.top},{x:P,y:x.bottom},{x:N,y:x.bottom}],side:C}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(_),_.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ke(n.onKeyDown,_=>{var I;const x=a.searchRef.current!=="";n.disabled||x&&_.key===" "||a3[r.dir].includes(_.key)&&(t.onOpenChange(!0),(I=t.content)==null||I.focus(),_.preventDefault())})})})});bI.displayName=xc;var NI="MenuSubContent",kI=S.forwardRef((n,e)=>{const t=fI(ir,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=Yo(ir,n.__scopeMenu),l=mu(ir,n.__scopeMenu),h=AI(NI,n.__scopeMenu),p=S.useRef(null),m=ht(e,p);return u.jsx(qc.Provider,{scope:n.__scopeMenu,children:u.jsx(Zi,{present:r||a.open,children:u.jsx(qc.Slot,{scope:n.__scopeMenu,children:u.jsx(av,{id:h.contentId,"aria-labelledby":h.triggerId,...i,ref:m,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{var _;l.isUsingKeyboardRef.current&&((_=p.current)==null||_.focus()),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:ke(n.onFocusOutside,y=>{y.target!==h.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ke(n.onEscapeKeyDown,y=>{l.onClose(),y.preventDefault()}),onKeyDown:ke(n.onKeyDown,y=>{var I;const _=y.currentTarget.contains(y.target),x=l3[l.dir].includes(y.key);_&&x&&(a.onOpenChange(!1),(I=h.trigger)==null||I.focus(),y.preventDefault())})})})})})});kI.displayName=NI;function RI(n){return n?"open":"closed"}function Vh(n){return n==="indeterminate"}function uv(n){return Vh(n)?"indeterminate":n?"checked":"unchecked"}function A3(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function b3(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function N3(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=b3(n,Math.max(a,0));i.length===1&&(l=l.filter(m=>m!==t));const p=l.find(m=>m.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function k3(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const h=e[a].x,p=e[a].y,m=e[l].x,y=e[l].y;p>r!=y>r&&t<(m-h)*(r-p)/(y-p)+h&&(i=!i)}return i}function R3(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return k3(t,e)}function Wc(n){return e=>e.pointerType==="mouse"?n(e):void 0}var P3=hI,j3=sv,D3=pI,M3=mI,O3=lv,L3=gI,V3=Lf,F3=vI,U3=_I,z3=EI,$3=TI,B3=II,q3=CI,W3=bI,H3=kI,dv="DropdownMenu",[G3]=Ji(dv,[uI]),En=uI(),[K3,PI]=G3(dv),jI=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:a,onOpenChange:l,modal:h=!0}=n,p=En(e),m=S.useRef(null),[y=!1,_]=zc({prop:i,defaultProp:a,onChange:l});return u.jsx(K3,{scope:e,triggerId:Fs(),triggerRef:m,contentId:Fs(),open:y,onOpenChange:_,onOpenToggle:S.useCallback(()=>_(x=>!x),[_]),modal:h,children:u.jsx(P3,{...p,open:y,onOpenChange:_,dir:r,modal:h,children:t})})};jI.displayName=dv;var DI="DropdownMenuTrigger",MI=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,a=PI(DI,t),l=En(t);return u.jsx(j3,{asChild:!0,...l,children:u.jsx(Qe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:xf(e,a.triggerRef),onPointerDown:ke(n.onPointerDown,h=>{!r&&h.button===0&&h.ctrlKey===!1&&(a.onOpenToggle(),a.open||h.preventDefault())}),onKeyDown:ke(n.onKeyDown,h=>{r||(["Enter"," "].includes(h.key)&&a.onOpenToggle(),h.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault())})})})});MI.displayName=DI;var Q3="DropdownMenuPortal",OI=n=>{const{__scopeDropdownMenu:e,...t}=n,r=En(e);return u.jsx(D3,{...r,...t})};OI.displayName=Q3;var LI="DropdownMenuContent",VI=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=PI(LI,t),a=En(t),l=S.useRef(!1);return u.jsx(M3,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:ke(n.onCloseAutoFocus,h=>{var p;l.current||(p=i.triggerRef.current)==null||p.focus(),l.current=!1,h.preventDefault()}),onInteractOutside:ke(n.onInteractOutside,h=>{const p=h.detail.originalEvent,m=p.button===0&&p.ctrlKey===!0,y=p.button===2||m;(!i.modal||y)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VI.displayName=LI;var Y3="DropdownMenuGroup",X3=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(O3,{...i,...r,ref:e})});X3.displayName=Y3;var J3="DropdownMenuLabel",FI=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(L3,{...i,...r,ref:e})});FI.displayName=J3;var Z3="DropdownMenuItem",UI=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(V3,{...i,...r,ref:e})});UI.displayName=Z3;var eF="DropdownMenuCheckboxItem",tF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(F3,{...i,...r,ref:e})});tF.displayName=eF;var nF="DropdownMenuRadioGroup",rF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(U3,{...i,...r,ref:e})});rF.displayName=nF;var sF="DropdownMenuRadioItem",iF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(z3,{...i,...r,ref:e})});iF.displayName=sF;var oF="DropdownMenuItemIndicator",aF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx($3,{...i,...r,ref:e})});aF.displayName=oF;var lF="DropdownMenuSeparator",zI=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(B3,{...i,...r,ref:e})});zI.displayName=lF;var cF="DropdownMenuArrow",uF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(q3,{...i,...r,ref:e})});uF.displayName=cF;var dF="DropdownMenuSubTrigger",hF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(W3,{...i,...r,ref:e})});hF.displayName=dF;var fF="DropdownMenuSubContent",pF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=En(t);return u.jsx(H3,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pF.displayName=fF;var mF=jI,gF=MI,yF=OI,vF=VI,wF=FI,_F=UI,xF=zI;function EF({...n}){return u.jsx(mF,{"data-slot":"dropdown-menu",...n})}function SF({...n}){return u.jsx(gF,{"data-slot":"dropdown-menu-trigger",...n})}function TF({className:n,sideOffset:e=4,...t}){return u.jsx(yF,{children:u.jsx(vF,{"data-slot":"dropdown-menu-content",sideOffset:e,className:dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function IF({className:n,inset:e,variant:t="default",...r}){return u.jsx(_F,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:dt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function CF({className:n,inset:e,...t}){return u.jsx(wF,{"data-slot":"dropdown-menu-label","data-inset":e,className:dt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",n),...t})}function AF({className:n,...e}){return u.jsx(xF,{"data-slot":"dropdown-menu-separator",className:dt("bg-border -mx-1 my-1 h-px",n),...e})}function bF({onMenuClick:n}){const{userProfile:e}=wf(),{theme:t,setTheme:r}=QA(),i=l=>l?l.split(" ").map(h=>h[0]).join("").toUpperCase():"U",a=async()=>{try{await Me.signOut()}catch(l){console.error("Logout error:",l)}};return e?u.jsx("header",{className:"sticky top-0 z-40 border-b bg-background",children:u.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:[u.jsx(Oe,{variant:"ghost",size:"icon",className:"md:hidden",onClick:n,children:u.jsx(kO,{className:"h-5 w-5"})}),u.jsx("div",{className:"flex-1",children:u.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Province of San Antonio de Padua"})}),u.jsxs(Oe,{variant:"ghost",size:"icon",onClick:()=>r(t==="dark"?"light":"dark"),children:[u.jsx(JO,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),u.jsx(jO,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),u.jsxs(EF,{children:[u.jsx(SF,{asChild:!0,children:u.jsx(Oe,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:u.jsx(w1,{children:u.jsx(_1,{children:e?i(e.name):"U"})})})}),u.jsxs(TF,{align:"end",className:"w-56",children:[u.jsx(CF,{children:u.jsxs("div",{className:"flex flex-col space-y-1",children:[u.jsx("p",{className:"text-sm font-medium leading-none",children:e==null?void 0:e.name}),u.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e==null?void 0:e.email}),u.jsx("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:e==null?void 0:e.role})]})}),u.jsx(AF,{}),u.jsxs(IF,{onClick:a,children:[u.jsx(AO,{className:"mr-2 h-4 w-4"}),u.jsx("span",{children:"Log out"})]})]})]})]})}):u.jsx("header",{className:"sticky top-0 z-40 border-b bg-background",children:u.jsx("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:u.jsx("div",{className:"flex-1",children:u.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Province of San Antonio de Padua"})})})})}const NF=[{name:"Dashboard",view:"dashboard",icon:SO},{name:"Tasks",view:"tasks",icon:l1},{name:"Receipts",view:"receipts",icon:u1},{name:"Files",view:"files",icon:a1},{name:"Employees",view:"employees",icon:By},{name:"Messages",view:"messaging",icon:c1}];function kF({currentView:n,onViewChange:e,isOpen:t,onClose:r}){return u.jsxs(u.Fragment,{children:[t&&u.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:r}),u.jsx("aside",{className:dt("fixed top-0 left-0 z-50 h-screen w-64 border-r bg-background transition-transform duration-300 md:relative md:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:u.jsxs("div",{className:"flex h-full flex-col",children:[u.jsxs("div",{className:"flex h-16 items-center gap-3 border-b px-6",children:[u.jsx("img",{src:qy,alt:"Province Logo",className:"h-10 w-10 object-contain"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-sm font-semibold",children:"San Antonio"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"de Padua"})]})]}),u.jsx("nav",{className:"flex-1 space-y-1 p-4",children:NF.map(i=>{const a=i.icon,l=n===i.view;return u.jsxs(Oe,{variant:l?"secondary":"ghost",className:dt("w-full justify-start",l&&"bg-secondary"),onClick:()=>{e(i.view),r()},children:[u.jsx(a,{className:"mr-3 h-5 w-5"}),i.name]},i.view)})}),u.jsx("div",{className:"border-t p-4",children:u.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Philippines Province"})})]})})]})}function RF(...n){return e1(Vy(n))}function $n({className:n,...e}){return u.jsx("div",{className:RF("animate-pulse rounded-md bg-muted",n),...e})}const PF=t1("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Gt({className:n,variant:e,asChild:t=!1,...r}){const i=t?Ws:"span";return u.jsx(i,{"data-slot":"badge",className:dt(PF({variant:e}),n),...r})}const jF=({isOpen:n,user:e,currentUserRole:t,onRoleUpdate:r,onClose:i,loading:a=!1})=>{const[l,h]=S.useState(e.role),[p,m]=S.useState(!1);if(!n)return null;const y=[{value:"staff",label:"Staff Member",description:"Basic access to tasks, receipts, and files",icon:Tf,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",canAssign:!0},{value:"admin",label:"Administrator",description:"Full access including user management and system settings",icon:$y,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",canAssign:!0},{value:"super_admin",label:"Super Administrator",description:"Complete system control and user management",icon:Qa,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",canAssign:t==="super_admin"}],_=async()=>{if(l===e.role){i();return}m(!0);try{await r(e.uid,l),i()}catch(C){console.error("Error updating user role:",C)}finally{m(!1)}},x=e.role==="super_admin"&&t==="super_admin",I=l!==e.role;return e.role==="super_admin"?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"relative",children:[u.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",children:u.jsx($o,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:u.jsx(Qa,{className:"w-5 h-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx(Dt,{className:"text-lg",children:"Super Administrator"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Role cannot be modified"})]})]}),u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.name}),u.jsx("p",{className:"text-xs text-gray-500",children:e.email}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"Role:"}),u.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-700",children:"Super Administrator"})]})]})]}),u.jsxs(st,{className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Qa,{className:"w-5 h-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Role Protected"}),u.jsx("p",{className:"text-sm text-red-700",children:"Super administrator roles cannot be modified for security reasons. This ensures system integrity and prevents accidental privilege escalation."})]})]})}),u.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Security Best Practice:"})," Super admin privileges are permanent and cannot be changed through the user interface."]})}),u.jsx(Oe,{onClick:i,className:"w-full",children:"Close"})]})]})}):u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"relative",children:[u.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:a||p,children:u.jsx($o,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(oh,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx(Dt,{className:"text-lg",children:"Edit User Role"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Change user permissions"})]})]}),u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.name}),u.jsx("p",{className:"text-xs text-gray-500",children:e.email}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"Current role:"}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.role==="super_admin"?"bg-red-100 text-red-700":e.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:e.role==="super_admin"?"Super Admin":e.role==="admin"?"Administrator":"Staff Member"})]})]})]}),u.jsxs(st,{className:"space-y-4",children:[x&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(d1,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Warning:"})," You are editing your own super admin role. Be careful not to remove your own access."]})]})}),u.jsxs("div",{children:[u.jsx(Ge,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select new role:"}),u.jsx("div",{className:"space-y-3",children:y.map(C=>{const b=C.icon,L=l===C.value,N=!C.canAssign;return u.jsxs("div",{className:`relative rounded-lg border-2 p-4 transition-all ${N?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":L?`${C.borderColor} ${C.bgColor} cursor-pointer`:"border-gray-200 hover:border-gray-300 cursor-pointer"}`,onClick:()=>!N&&h(C.value),children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${N?"bg-gray-100":L?C.bgColor:"bg-gray-50"}`,children:u.jsx(b,{className:`w-5 h-5 ${N?"text-gray-400":L?C.color:"text-gray-600"}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:`font-medium ${N?"text-gray-400":L?C.color:"text-gray-900"}`,children:C.label}),L&&!N&&u.jsx("div",{className:`w-2 h-2 rounded-full ${C.color.replace("text-","bg-")}`}),N&&u.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Restricted"})]}),u.jsx("p",{className:`text-sm mt-1 ${N?"text-gray-400":"text-gray-600"}`,children:C.description})]})]}),!N&&u.jsx("input",{type:"radio",name:"role",value:C.value,checked:L,onChange:()=>h(C.value),className:"absolute top-4 right-4 w-4 h-4 text-blue-600"})]},C.value)})})]}),t!=="super_admin"&&u.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Note:"})," Only super administrators can assign super admin roles."]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx(Oe,{onClick:_,disabled:a||p||!I,className:"flex-1",children:p?"Updating...":I?"Update Role":"No Changes"}),u.jsx(Oe,{onClick:i,variant:"outline",disabled:a||p,className:"flex-1",children:"Cancel"})]})]})]})})},DF=({isOpen:n,userProfile:e,onProfileUpdate:t,onClose:r})=>{const[i,a]=S.useState(e.name),[l,h]=S.useState(!1),[p,m]=S.useState(null);if(!n)return null;const y=async I=>{I.preventDefault(),h(!0),m(null);try{if(!i.trim())throw new Error("Name cannot be empty");if(i.trim().length<2)throw new Error("Name must be at least 2 characters long");if(i.trim().length>50)throw new Error("Name cannot exceed 50 characters");await Me.updateUserProfile(e.uid,{name:i.trim()});const k={...e,name:i.trim(),updatedAt:new Date};t(k),r()}catch(k){console.error("Error updating profile:",k),m(k instanceof Error?k.message:"Failed to update profile")}finally{h(!1)}},_=()=>{a(e.name),m(null),r()},x=i.trim()!==e.name;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(rt,{className:"w-full max-w-md shadow-xl",children:[u.jsxs(Tt,{className:"relative",children:[u.jsx("button",{onClick:_,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:l,children:u.jsx($o,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(Tf,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx(Dt,{className:"text-lg",children:"Edit Profile"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Update your personal information"})]})]}),u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.email}),u.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.role==="super_admin"?"Super Administrator":e.role==="admin"?"Administrator":"Staff Member"})]})]}),u.jsx(st,{children:u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p&&u.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[u.jsx(ki,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),u.jsx("p",{className:"text-sm text-red-700",children:p})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Full Name"}),u.jsx(Rn,{id:"name",type:"text",value:i,onChange:I=>a(I.target.value),placeholder:"Enter your full name",disabled:l,className:"w-full",maxLength:50,required:!0}),u.jsx("p",{className:"text-xs text-gray-500",children:"This name will be displayed throughout the application"})]}),u.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:u.jsx("span",{className:"text-blue-600 text-xs",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Profile Information"}),u.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Your email address and role cannot be changed. Contact a super administrator if you need to modify these details."})]})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsxs(Oe,{type:"submit",disabled:l||!x,className:"flex-1 flex items-center gap-2",children:[u.jsx(qO,{className:"w-4 h-4"}),l?"Saving...":"Save Changes"]}),u.jsx(Oe,{type:"button",variant:"outline",onClick:_,disabled:l,className:"flex-1",children:"Cancel"})]}),x&&u.jsx("p",{className:"text-xs text-amber-600 text-center",children:"You have unsaved changes"})]})})]})})},MF=async()=>{const n=xt.currentUser;if(console.log("Current user:",n==null?void 0:n.uid,n==null?void 0:n.email),n)try{const e=await Xr(ot(Fe,"users",n.uid));console.log("User profile exists:",e.exists()),e.exists()&&console.log("User profile data:",e.data())}catch(e){console.error("Error fetching user profile:",e)}},OF=({currentUserUid:n,userRole:e})=>{const[t,r]=S.useState("users"),[i,a]=S.useState([]),[l,h]=S.useState([]),[p,m]=S.useState([]),[y,_]=S.useState(null),[x,I]=S.useState(!0),[k,C]=S.useState(!1),[b,L]=S.useState({email:"",name:"",password:"",role:"staff"}),[N,P]=S.useState(!1),[B,H]=S.useState(null),[Z,D]=S.useState(!1),[A,O]=S.useState(!1);S.useEffect(()=>{F()},[]);const F=async()=>{try{if(await MF(),!e||e!=="admin"&&e!=="super_admin"){console.error("Insufficient privileges for admin panel");return}const z=Me.getCurrentUser();if(!z){console.error("No authenticated user found");return}const se=await Me.getUserProfile(z.uid);if(!se){console.error("User profile not found in Firestore"),alert("User profile not found. Please contact administrator.");return}if(console.log("User profile verified:",se.role),_(se),e==="super_admin"){const[ne,ye,Se]=await Promise.all([Me.getPendingUsers().catch(re=>(console.error("Error loading pending users:",re),[])),Me.getVisibleUsers(e).catch(re=>(console.error("Error loading visible users:",re),[])),Me.getAdminUsers().catch(re=>(console.error("Error loading admin users:",re),[]))]);a(ne),h(ye),m(Se)}else{const[ne,ye,Se,re]=await Promise.all([Me.getPendingUsersForAdmin(z.uid).catch(be=>(console.error("Error loading pending users for admin:",be),[])),Me.getStaffForAdmin(z.uid).catch(be=>(console.error("Error loading staff for admin:",be),[])),Me.getVisibleUsers(e).catch(be=>(console.error("Error loading visible users:",be),[])),Me.getAdminUsers().catch(be=>(console.error("Error loading admin users:",be),[]))]);a(ne);const ge=Se.filter(be=>be.role==="admin"),xe=[...ye,...ge];h(xe),m(re)}}catch(z){console.error("Error loading admin data:",z)}finally{I(!1)}},j=async z=>{if(e!=="admin"&&e!=="super_admin"){alert("Error: Only administrators and super administrators can approve user accounts");return}const se=i.find(ne=>ne.id===z);if(se){if(e==="admin"&&se.role!=="staff"){alert("Error: Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");return}try{if(se.authProvider==="google"){await Me.approveGoogleUser(z,n);const ne=se.role==="super_admin"?"Super Administrator":se.role==="admin"?"Administrator":"Staff Member";alert(`Google ${ne} approved successfully. They can now sign in with their Google account.`)}else{const ne=prompt("Enter password for new user:");if(!ne)return;await Me.approveUser(z,ne,n);const ye=se.role==="super_admin"?"Super Administrator":se.role==="admin"?"Administrator":"Staff Member";alert(`${ye} approved successfully. They can now sign in with their email and the password you set.`)}await F()}catch(ne){console.error("Error approving user:",ne);const ye=ne instanceof Error?ne.message:"Unknown error occurred";alert(`Error approving user: ${ye}`)}}},V=async z=>{const se=prompt("Enter rejection reason (optional):");try{await Me.rejectUser(z,se||"Request denied",n),alert("User request rejected"),await F()}catch(ne){console.error("Error rejecting user:",ne),alert("Error rejecting user")}},M=async z=>{z.preventDefault(),P(!0);try{if(e!=="admin"&&e!=="super_admin")throw new Error("Only administrators and super administrators can create user accounts");if(e==="admin"&&b.role!=="staff")throw new Error("Administrators can only create staff accounts. Contact a super admin to create administrator accounts.");const se=Me.getCurrentUser();if(!se)throw new Error("No authenticated user found. Please sign in again.");await Me.createUser(b.email,b.password,b.name,b.role,se.uid),L({email:"",name:"",password:"",role:"staff"}),C(!1);const ne=b.role==="super_admin"?"Super Administrator":b.role==="admin"?"Administrator":"Staff Member";alert(`${ne} account created successfully. Admin needs to sign in again.`),await F()}catch(se){console.error("Error creating user:",se);const ne=se instanceof Error?se.message:"Unknown error occurred";alert(`Error creating user: ${ne}`)}finally{P(!1)}},fe=async z=>{const se=l.find(ne=>ne.uid===z);if((se==null?void 0:se.role)==="super_admin"&&e!=="super_admin"){alert("Error: Insufficient privileges to delete super administrator accounts");return}if(confirm("Are you sure you want to delete this user?"))try{const ne=Me.getCurrentUser();if(!ne)throw new Error("No authenticated user found. Please sign in again.");await Me.deleteUser(z,ne.uid),alert("User deleted successfully"),await F()}catch(ne){console.error("Error deleting user:",ne),alert("Error deleting user")}},me=z=>{if(!(e==="super_admin"||e==="admin"&&(z.role==="staff"||z.uid===n))){alert("Error: You can only edit staff profiles and your own profile.");return}H(z),D(!0)},de=async(z,se)=>{try{const ne=Me.getCurrentUser();if(!ne)throw new Error("No authenticated user found. Please sign in again.");const ye=l.find(Se=>Se.uid===z);if((ye==null?void 0:ye.role)==="super_admin"&&e!=="super_admin")throw new Error("Insufficient privileges to modify super administrator accounts");await Me.updateUserRole(z,se,ne.uid),await F()}catch(ne){throw console.error("Error updating user role:",ne),ne}},_e=()=>{D(!1),H(null)},G=z=>{_(z),F()},ee=()=>{O(!0)},le=()=>{O(!1)};if(x||!y)return u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})});const q=()=>t==="users"?u.jsxs("div",{className:"space-y-6",children:[u.jsxs(rt,{children:[u.jsxs(Tt,{children:[u.jsxs(Dt,{children:["Pending User Approvals (",i.length,")"]}),e==="admin"&&u.jsx("p",{className:"text-sm text-muted-foreground",children:"As an admin, you can approve staff requests. Super admin requests require super admin approval."})]}),u.jsx(st,{children:e!=="admin"&&e!=="super_admin"?u.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-blue-600 text-sm",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Admin Required"}),u.jsx("p",{className:"text-sm text-blue-700",children:"User approval requires administrator privileges. Contact an admin to approve pending requests."}),i.length>0&&u.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[u.jsx("strong",{children:i.length})," user",i.length!==1?"s":""," waiting for approval."]})]})]})}):i.length===0?u.jsx("p",{className:"text-muted-foreground",children:"No pending user requests"}):u.jsx("div",{className:"space-y-4",children:i.map((z,se)=>{const ne=e==="super_admin"||e==="admin"&&z.role==="staff",ye=z.role==="staff"&&z.requestedAdminId?p.find(re=>re.uid===z.requestedAdminId):null,Se=z.role==="staff"&&z.requestedAdminId===n;return u.jsxs("div",{className:`flex items-center justify-between p-4 border rounded transition-all ${Se?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"font-medium",children:z.name}),Se&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:" For You"})]}),u.jsx("div",{className:"text-sm text-muted-foreground",children:z.email}),u.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[u.jsx(Gt,{variant:z.role==="super_admin"?"destructive":z.role==="admin"?"default":"secondary",children:z.role==="super_admin"?"Super Admin":z.role==="admin"?"Admin":"Staff Member"}),z.authProvider&&u.jsx(Gt,{variant:"secondary",children:z.authProvider==="google"?" Google":" Email"}),z.role==="staff"&&ye&&u.jsxs(Gt,{variant:"outline",className:"text-xs",children:[" Wants to work under: ",ye.name]}),z.role==="staff"&&!ye&&z.requestedAdminId&&u.jsx(Gt,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-700",children:" Admin not found"}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:["Requested: ",new Date(z.requestedAt).toLocaleDateString()]}),!ne&&u.jsx(Gt,{variant:"outline",className:"text-xs",children:"Requires Super Admin"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{size:"sm",onClick:()=>j(z.id),disabled:!ne,title:ne?"":"Only super admins can approve admin/super admin requests",children:"Approve"}),u.jsx(Oe,{size:"sm",variant:"destructive",onClick:()=>V(z.id),children:"Reject"})]})]},z.id||`pending-user-${se}-${z.email}`)})})})]}),e==="super_admin"&&u.jsxs(rt,{children:[u.jsxs(Tt,{children:[u.jsx(Dt,{children:"Staff Assignment Overview"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Overview of staff assignments across all administrators"})]}),u.jsx(st,{children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.map(z=>{const se=l.filter(ne=>ne.role==="staff"&&ne.assignedAdminId===z.uid);return u.jsxs("div",{className:"p-4 border rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-blue-600 text-sm",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium",children:z.name}),u.jsx("p",{className:"text-xs text-muted-foreground",children:z.email})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Assigned Staff:"}),u.jsx(Gt,{variant:"outline",children:se.length})]}),se.length>0&&u.jsxs("div",{className:"text-xs text-gray-500",children:[se.slice(0,3).map(ne=>ne.name).join(", "),se.length>3&&` +${se.length-3} more`]})]})]},z.uid)}),(()=>{const z=l.filter(se=>se.role==="staff"&&!se.assignedAdminId);return z.length>0&&u.jsxs("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-yellow-600 text-sm",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-yellow-800",children:"Unassigned Staff"}),u.jsx("p",{className:"text-xs text-yellow-600",children:"Need admin assignment"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-yellow-700",children:"Count:"}),u.jsx(Gt,{variant:"outline",className:"border-yellow-300",children:z.length})]}),z.length>0&&u.jsxs("div",{className:"text-xs text-yellow-600",children:[z.slice(0,3).map(se=>se.name).join(", "),z.length>3&&` +${z.length-3} more`]})]})]})})()]})})]}),u.jsxs(rt,{children:[u.jsxs(Tt,{children:[u.jsxs(Dt,{children:["All Users (",l.length,")"]}),e==="admin"&&u.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.jsx("p",{children:"You can see your assigned staff and other administrators."}),u.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-200 rounded"}),"Your Staff (",l.filter(z=>z.role==="staff"&&z.assignedAdminId===n).length,")"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-3 h-3 bg-yellow-100 border border-yellow-200 rounded"}),"Unassigned Staff (",l.filter(z=>z.role==="staff"&&!z.assignedAdminId).length,")"]})]})]})]}),u.jsx(st,{children:u.jsx("div",{className:"space-y-4",children:l.map((z,se)=>{const ne=e==="super_admin"||e==="admin"&&(z.role==="staff"||z.uid===n),ye=e==="super_admin"||e==="admin"&&z.role==="staff"&&z.uid!==n,Se=z.role==="staff"&&z.assignedAdminId?p.find(xe=>xe.uid===z.assignedAdminId):null,re=z.role==="staff"&&z.assignedAdminId===n,ge=z.role==="staff"&&!z.assignedAdminId;return u.jsxs("div",{className:`flex items-center justify-between p-4 border rounded transition-all ${re?"border-green-200 bg-green-50":ge?"border-yellow-200 bg-yellow-50":"border-gray-200"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"font-medium",children:[z.name,z.uid===n&&u.jsx("span",{className:"text-xs text-blue-600 ml-2",children:"(You)"})]}),re&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Your Staff"}),ge&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" Unassigned"})]}),u.jsx("div",{className:"text-sm text-muted-foreground",children:z.email}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx(Gt,{variant:z.role==="super_admin"?"destructive":z.role==="admin"?"default":"secondary",children:z.role==="super_admin"?"Super Admin":z.role==="admin"?"Administrator":"Staff Member"}),z.role==="staff"&&Se&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-xs text-gray-500",children:""}),u.jsxs(Gt,{variant:"outline",className:"text-xs",children:[" Reports to: ",Se.name]})]}),ge&&u.jsx(Gt,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-700",children:" Needs Assignment"}),z.role==="admin"&&u.jsxs(Gt,{variant:"outline",className:"text-xs",children:[" ",l.filter(xe=>xe.role==="staff"&&xe.assignedAdminId===z.uid).length," Staff"]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[ne&&z.role!=="super_admin"&&u.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>me(z),children:[u.jsx(oh,{className:"h-4 w-4 mr-1"}),"Edit Role"]}),z.role==="super_admin"&&u.jsxs(Oe,{variant:"outline",size:"sm",disabled:!0,title:"Super admin roles cannot be modified for security reasons",children:[u.jsx(oh,{className:"h-4 w-4 mr-1"}),"Protected"]}),!ne&&z.role!=="super_admin"&&u.jsxs(Oe,{variant:"outline",size:"sm",disabled:!0,title:e==="admin"?"You can only edit staff profiles and your own profile":"Insufficient privileges",children:[u.jsx(oh,{className:"h-4 w-4 mr-1"}),"Restricted"]}),ye&&u.jsx(Oe,{variant:"destructive",size:"sm",onClick:()=>fe(z.uid),children:"Delete"}),!ye&&z.role!=="super_admin"&&z.uid!==n&&u.jsx(Oe,{variant:"destructive",size:"sm",disabled:!0,title:e==="admin"?"You can only delete staff accounts":"Insufficient privileges",children:"Delete"})]})]},z.uid||`user-${se}-${z.email}`)})})})]})]}):t==="create"?e!=="admin"&&e!=="super_admin"?u.jsx("div",{children:u.jsxs(rt,{children:[u.jsx(Tt,{children:u.jsx(Dt,{children:"Access Restricted"})}),u.jsx(st,{children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-red-600 text-sm",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Admin Privileges Required"}),u.jsx("p",{className:"text-sm text-red-700",children:"Only administrators and super administrators can create user accounts."})]})]})}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"If you need to create a user account, please contact an administrator."})]})})]})}):u.jsx("div",{children:u.jsxs(rt,{children:[u.jsxs(Tt,{children:[u.jsx(Dt,{children:"Create New User"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:e==="super_admin"?"Super Admin Privilege - Create accounts with any role":"Admin Privilege - Create staff accounts"})]}),u.jsx(st,{children:k?u.jsxs("form",{onSubmit:M,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),u.jsx("input",{type:"text",required:!0,value:b.name,onChange:z=>L({...b,name:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),u.jsx("input",{type:"email",required:!0,value:b.email,onChange:z=>L({...b,email:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium",children:"Password"}),u.jsx("input",{type:"password",required:!0,value:b.password,onChange:z=>L({...b,password:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password",minLength:6})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium",children:"Role"}),u.jsxs("select",{value:b.role,onChange:z=>L({...b,role:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"staff",children:"Staff Member"}),e==="super_admin"&&u.jsxs(u.Fragment,{children:[u.jsx("option",{value:"admin",children:"Administrator"}),u.jsx("option",{value:"super_admin",children:"Super Administrator"})]})]}),e==="admin"&&u.jsx("p",{className:"text-xs text-muted-foreground",children:"As an admin, you can only create staff accounts. Contact a super admin to create administrator accounts."})]})]}),b.role==="super_admin"&&u.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-yellow-600 text-xs",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-yellow-800 mb-1",children:"Creating Super Administrator"}),u.jsx("p",{className:"text-sm text-yellow-700",children:"You are creating another super administrator account. This user will have complete system access including the ability to manage other super admins."})]})]})}),b.role==="admin"&&u.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-purple-600 text-xs",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-purple-800 mb-1",children:"Creating Administrator"}),u.jsx("p",{className:"text-sm text-purple-700",children:"You are creating an administrator account. This user will be able to manage staff accounts and create new staff members."})]})]})}),u.jsxs("div",{className:"flex gap-2 pt-4",children:[u.jsx(Oe,{type:"submit",disabled:N,children:N?"Creating...":"Create User"}),u.jsx(Oe,{type:"button",variant:"outline",onClick:()=>{C(!1),L({email:"",name:"",password:"",role:"staff"})},children:"Cancel"})]})]}):u.jsxs("div",{className:"space-y-4",children:[e==="super_admin"?u.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-blue-600 text-sm",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Super Admin Privileges"}),u.jsx("p",{className:"text-sm text-blue-700",children:"As a super administrator, you can create accounts with any role including other super admins and administrators."})]})]})}):u.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-green-600 text-sm",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-green-800 mb-1",children:"Admin Privileges"}),u.jsx("p",{className:"text-sm text-green-700",children:"As an administrator, you can create staff member accounts. Contact a super admin to create administrator accounts."})]})]})}),u.jsx("p",{className:"text-muted-foreground",children:"Create a new user account with email and password authentication."}),u.jsx(Oe,{onClick:()=>C(!0),children:"Create New User"})]})})]})}):null;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold",children:[e==="super_admin"?"Super Admin Panel":"Admin Panel",y&&u.jsxs("span",{className:"text-lg font-medium text-gray-600 ml-2",children:["- ",y.name]})]}),u.jsx("p",{className:"text-muted-foreground",children:y?u.jsxs(u.Fragment,{children:["Welcome back, ",u.jsx("span",{className:"font-medium",children:y.name})," (",y.email,")  Manage users and system settings"]}):"Manage users and system settings"})]}),y&&u.jsxs(Oe,{variant:"outline",size:"sm",onClick:ee,className:"flex items-center gap-2",children:[u.jsx($y,{className:"w-4 h-4"}),"Edit Profile"]})]}),u.jsx("div",{className:"flex space-x-4 border-b",children:[{id:"users",label:"User Management"},...e==="admin"||e==="super_admin"?[{id:"create",label:"Create User"}]:[]].map(z=>u.jsx("button",{onClick:()=>r(z.id),className:`px-4 py-2 ${t===z.id?"border-b-2 border-blue-500":""}`,children:z.label},z.id))}),q(),B&&u.jsx(jF,{isOpen:Z,user:B,currentUserRole:e,onRoleUpdate:de,onClose:_e}),y&&u.jsx(DF,{isOpen:A,userProfile:y,onProfileUpdate:G,onClose:le})]})};function tE({onNavigate:n}){const{userProfile:e}=wf();if(!e)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx($n,{className:"h-9 w-48"}),u.jsx($n,{className:"h-5 w-64 mt-2"})]}),u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((r,i)=>u.jsxs(rt,{children:[u.jsxs(Tt,{className:"flex flex-row items-center justify-between pb-2",children:[u.jsx($n,{className:"h-4 w-20"}),u.jsx($n,{className:"h-9 w-9 rounded-lg"})]}),u.jsx(st,{children:u.jsx($n,{className:"h-8 w-12"})})]},i))}),u.jsxs(rt,{children:[u.jsx(Tt,{children:u.jsx($n,{className:"h-6 w-32"})}),u.jsx(st,{children:u.jsx($n,{className:"h-4 w-full"})})]})]});if(e.role==="admin"||e.role==="super_admin")return u.jsx(OF,{currentUserUid:e.uid,userRole:e.role});const t=[{title:"My Tasks",value:0,icon:l1,onClick:()=>n("tasks")},{title:"My Receipts",value:0,icon:u1,onClick:()=>n("receipts")},{title:"Files",value:0,icon:a1,onClick:()=>n("files")},{title:"Directory",value:0,icon:By,onClick:()=>n("employees")}];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),u.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e==null?void 0:e.name,"!",u.jsxs("span",{className:"ml-2 inline-flex items-center gap-1",children:[u.jsx(Qa,{className:"h-4 w-4"}),e==null?void 0:e.role]})]})]}),u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.map(r=>{const i=r.icon;return u.jsxs(rt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:r.onClick,children:[u.jsxs(Tt,{className:"flex flex-row items-center justify-between pb-2",children:[u.jsx(Dt,{className:"text-sm font-medium",children:r.title}),u.jsx("div",{className:"p-2 rounded-lg bg-gray-50 dark:bg-gray-950",children:u.jsx(i,{className:"h-5 w-5"})})]}),u.jsx(st,{children:u.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title)})}),u.jsxs(rt,{children:[u.jsx(Tt,{children:u.jsx(Dt,{children:"Getting Started"})}),u.jsx(st,{children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to the Office Management System. Use the navigation menu to access your tasks, receipts, and files."})})]})]})}function LF({className:n,...e}){return u.jsx("textarea",{"data-slot":"textarea",className:dt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var hv="Dialog",[$I]=Ji(hv),[VF,br]=$I(hv),BI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:a,modal:l=!0}=n,h=S.useRef(null),p=S.useRef(null),[m=!1,y]=zc({prop:r,defaultProp:i,onChange:a});return u.jsx(VF,{scope:e,triggerRef:h,contentRef:p,contentId:Fs(),titleId:Fs(),descriptionId:Fs(),open:m,onOpenChange:y,onOpenToggle:S.useCallback(()=>y(_=>!_),[y]),modal:l,children:t})};BI.displayName=hv;var qI="DialogTrigger",WI=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=br(qI,t),a=ht(e,i.triggerRef);return u.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":mv(i.open),...r,ref:a,onClick:ke(n.onClick,i.onOpenToggle)})});WI.displayName=qI;var fv="DialogPortal",[FF,HI]=$I(fv,{forceMount:void 0}),GI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,a=br(fv,e);return u.jsx(FF,{scope:e,forceMount:t,children:S.Children.map(r,l=>u.jsx(Zi,{present:t||a.open,children:u.jsx(Pf,{asChild:!0,container:i,children:l})}))})};GI.displayName=fv;var Fh="DialogOverlay",KI=S.forwardRef((n,e)=>{const t=HI(Fh,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=br(Fh,n.__scopeDialog);return a.modal?u.jsx(Zi,{present:r||a.open,children:u.jsx(UF,{...i,ref:e})}):null});KI.displayName=Fh;var UF=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=br(Fh,t);return u.jsx(Mf,{as:Ws,allowPinchZoom:!0,shards:[i.contentRef],children:u.jsx(Qe.div,{"data-state":mv(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),qo="DialogContent",QI=S.forwardRef((n,e)=>{const t=HI(qo,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=br(qo,n.__scopeDialog);return u.jsx(Zi,{present:r||a.open,children:a.modal?u.jsx(zF,{...i,ref:e}):u.jsx($F,{...i,ref:e})})});QI.displayName=qo;var zF=S.forwardRef((n,e)=>{const t=br(qo,n.__scopeDialog),r=S.useRef(null),i=ht(e,t.contentRef,r);return S.useEffect(()=>{const a=r.current;if(a)return rv(a)},[]),u.jsx(YI,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(n.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ke(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,h=l.button===0&&l.ctrlKey===!0;(l.button===2||h)&&a.preventDefault()}),onFocusOutside:ke(n.onFocusOutside,a=>a.preventDefault())})}),$F=S.forwardRef((n,e)=>{const t=br(qo,n.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return u.jsx(YI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,h;(l=n.onCloseAutoFocus)==null||l.call(n,a),a.defaultPrevented||(r.current||(h=t.triggerRef.current)==null||h.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var p,m;(p=n.onInteractOutside)==null||p.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),YI=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=n,h=br(qo,t),p=S.useRef(null),m=ht(e,p);return Ky(),u.jsxs(u.Fragment,{children:[u.jsx(Cf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:u.jsx(If,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":mv(h.open),...l,ref:m,onDismiss:()=>h.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(qF,{titleId:h.titleId}),u.jsx(HF,{contentRef:p,descriptionId:h.descriptionId})]})]})}),pv="DialogTitle",XI=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=br(pv,t);return u.jsx(Qe.h2,{id:i.titleId,...r,ref:e})});XI.displayName=pv;var JI="DialogDescription",BF=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=br(JI,t);return u.jsx(Qe.p,{id:i.descriptionId,...r,ref:e})});BF.displayName=JI;var ZI="DialogClose",eC=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=br(ZI,t);return u.jsx(Qe.button,{type:"button",...r,ref:e,onClick:ke(n.onClick,()=>i.onOpenChange(!1))})});eC.displayName=ZI;function mv(n){return n?"open":"closed"}var tC="DialogTitleWarning",[J6,nC]=h4(tC,{contentName:qo,titleName:pv,docsSlug:"dialog"}),qF=({titleId:n})=>{const e=nC(tC),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},WF="DialogDescriptionWarning",HF=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nC(WF).contentName}}.`;return S.useEffect(()=>{var a;const i=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},GF=BI,KF=WI,QF=GI,YF=KI,XF=QI,JF=XI,ZF=eC;function Hc({...n}){return u.jsx(GF,{"data-slot":"dialog",...n})}function gv({...n}){return u.jsx(KF,{"data-slot":"dialog-trigger",...n})}function e6({...n}){return u.jsx(QF,{"data-slot":"dialog-portal",...n})}function t6({className:n,...e}){return u.jsx(YF,{"data-slot":"dialog-overlay",className:dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function Gc({className:n,children:e,...t}){return u.jsxs(e6,{"data-slot":"dialog-portal",children:[u.jsx(t6,{}),u.jsxs(XF,{"data-slot":"dialog-content",className:dt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,u.jsxs(ZF,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[u.jsx($o,{}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Kc({className:n,...e}){return u.jsx("div",{"data-slot":"dialog-header",className:dt("flex flex-col gap-2 text-center sm:text-left",n),...e})}function Qc({className:n,...e}){return u.jsx(JF,{"data-slot":"dialog-title",className:dt("text-lg leading-none font-semibold",n),...e})}function nE(n,[e,t]){return Math.min(t,Math.max(e,n))}function n6(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var r6="VisuallyHidden",rC=S.forwardRef((n,e)=>u.jsx(Qe.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));rC.displayName=r6;var s6=[" ","Enter","ArrowUp","ArrowDown"],i6=[" ","Enter"],gu="Select",[Vf,Ff,o6]=Hy(gu),[_l]=Ji(gu,[o6,Rf]),Uf=Rf(),[a6,eo]=_l(gu),[l6,c6]=_l(gu),sC=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:a,value:l,defaultValue:h,onValueChange:p,dir:m,name:y,autoComplete:_,disabled:x,required:I,form:k}=n,C=Uf(e),[b,L]=S.useState(null),[N,P]=S.useState(null),[B,H]=S.useState(!1),Z=Gy(m),[D=!1,A]=zc({prop:r,defaultProp:i,onChange:a}),[O,F]=zc({prop:l,defaultProp:h,onChange:p}),j=S.useRef(null),V=b?k||!!b.closest("form"):!0,[M,fe]=S.useState(new Set),me=Array.from(M).map(de=>de.props.value).join(";");return u.jsx(W1,{...C,children:u.jsxs(a6,{required:I,scope:e,trigger:b,onTriggerChange:L,valueNode:N,onValueNodeChange:P,valueNodeHasChildren:B,onValueNodeHasChildrenChange:H,contentId:Fs(),value:O,onValueChange:F,open:D,onOpenChange:A,dir:Z,triggerPointerDownPosRef:j,disabled:x,children:[u.jsx(Vf.Provider,{scope:e,children:u.jsx(l6,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(de=>{fe(_e=>new Set(_e).add(de))},[]),onNativeOptionRemove:S.useCallback(de=>{fe(_e=>{const G=new Set(_e);return G.delete(de),G})},[]),children:t})}),V?u.jsxs(AC,{"aria-hidden":!0,required:I,tabIndex:-1,name:y,autoComplete:_,value:O,onChange:de=>F(de.target.value),disabled:x,form:k,children:[O===void 0?u.jsx("option",{value:""}):null,Array.from(M)]},me):null]})})};sC.displayName=gu;var iC="SelectTrigger",oC=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,a=Uf(t),l=eo(iC,t),h=l.disabled||r,p=ht(e,l.onTriggerChange),m=Ff(t),y=S.useRef("touch"),[_,x,I]=bC(C=>{const b=m().filter(P=>!P.disabled),L=b.find(P=>P.value===l.value),N=NC(b,C,L);N!==void 0&&l.onValueChange(N.value)}),k=C=>{h||(l.onOpenChange(!0),I()),C&&(l.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return u.jsx(H1,{asChild:!0,...a,children:u.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":CC(l.value)?"":void 0,...i,ref:p,onClick:ke(i.onClick,C=>{C.currentTarget.focus(),y.current!=="mouse"&&k(C)}),onPointerDown:ke(i.onPointerDown,C=>{y.current=C.pointerType;const b=C.target;b.hasPointerCapture(C.pointerId)&&b.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(k(C),C.preventDefault())}),onKeyDown:ke(i.onKeyDown,C=>{const b=_.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&x(C.key),!(b&&C.key===" ")&&s6.includes(C.key)&&(k(),C.preventDefault())})})})});oC.displayName=iC;var aC="SelectValue",lC=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:a,placeholder:l="",...h}=n,p=eo(aC,t),{onValueNodeHasChildrenChange:m}=p,y=a!==void 0,_=ht(e,p.onValueNodeChange);return on(()=>{m(y)},[m,y]),u.jsx(Qe.span,{...h,ref:_,style:{pointerEvents:"none"},children:CC(p.value)?u.jsx(u.Fragment,{children:l}):a})});lC.displayName=aC;var u6="SelectIcon",cC=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return u.jsx(Qe.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});cC.displayName=u6;var d6="SelectPortal",uC=n=>u.jsx(Pf,{asChild:!0,...n});uC.displayName=d6;var Wo="SelectContent",dC=S.forwardRef((n,e)=>{const t=eo(Wo,n.__scopeSelect),[r,i]=S.useState();if(on(()=>{i(new DocumentFragment)},[]),!t.open){const a=r;return a?hu.createPortal(u.jsx(hC,{scope:n.__scopeSelect,children:u.jsx(Vf.Slot,{scope:n.__scopeSelect,children:u.jsx("div",{children:n.children})})}),a):null}return u.jsx(fC,{...n,ref:e})});dC.displayName=Wo;var yr=10,[hC,to]=_l(Wo),h6="SelectContentImpl",fC=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:h,sideOffset:p,align:m,alignOffset:y,arrowPadding:_,collisionBoundary:x,collisionPadding:I,sticky:k,hideWhenDetached:C,avoidCollisions:b,...L}=n,N=eo(Wo,t),[P,B]=S.useState(null),[H,Z]=S.useState(null),D=ht(e,re=>B(re)),[A,O]=S.useState(null),[F,j]=S.useState(null),V=Ff(t),[M,fe]=S.useState(!1),me=S.useRef(!1);S.useEffect(()=>{if(P)return rv(P)},[P]),Ky();const de=S.useCallback(re=>{const[ge,...xe]=V().map(We=>We.ref.current),[be]=xe.slice(-1),qe=document.activeElement;for(const We of re)if(We===qe||(We==null||We.scrollIntoView({block:"nearest"}),We===ge&&H&&(H.scrollTop=0),We===be&&H&&(H.scrollTop=H.scrollHeight),We==null||We.focus(),document.activeElement!==qe))return},[V,H]),_e=S.useCallback(()=>de([A,P]),[de,A,P]);S.useEffect(()=>{M&&_e()},[M,_e]);const{onOpenChange:G,triggerPointerDownPosRef:ee}=N;S.useEffect(()=>{if(P){let re={x:0,y:0};const ge=be=>{var qe,We;re={x:Math.abs(Math.round(be.pageX)-(((qe=ee.current)==null?void 0:qe.x)??0)),y:Math.abs(Math.round(be.pageY)-(((We=ee.current)==null?void 0:We.y)??0))}},xe=be=>{re.x<=10&&re.y<=10?be.preventDefault():P.contains(be.target)||G(!1),document.removeEventListener("pointermove",ge),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",xe,{capture:!0})}}},[P,G,ee]),S.useEffect(()=>{const re=()=>G(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[G]);const[le,q]=bC(re=>{const ge=V().filter(qe=>!qe.disabled),xe=ge.find(qe=>qe.ref.current===document.activeElement),be=NC(ge,re,xe);be&&setTimeout(()=>be.ref.current.focus())}),z=S.useCallback((re,ge,xe)=>{const be=!me.current&&!xe;(N.value!==void 0&&N.value===ge||be)&&(O(re),be&&(me.current=!0))},[N.value]),se=S.useCallback(()=>P==null?void 0:P.focus(),[P]),ne=S.useCallback((re,ge,xe)=>{const be=!me.current&&!xe;(N.value!==void 0&&N.value===ge||be)&&j(re)},[N.value]),ye=r==="popper"?kg:pC,Se=ye===kg?{side:h,sideOffset:p,align:m,alignOffset:y,arrowPadding:_,collisionBoundary:x,collisionPadding:I,sticky:k,hideWhenDetached:C,avoidCollisions:b}:{};return u.jsx(hC,{scope:t,content:P,viewport:H,onViewportChange:Z,itemRefCallback:z,selectedItem:A,onItemLeave:se,itemTextRefCallback:ne,focusSelectedItem:_e,selectedItemText:F,position:r,isPositioned:M,searchRef:le,children:u.jsx(Mf,{as:Ws,allowPinchZoom:!0,children:u.jsx(Cf,{asChild:!0,trapped:N.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:ke(i,re=>{var ge;(ge=N.trigger)==null||ge.focus({preventScroll:!0}),re.preventDefault()}),children:u.jsx(If,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:u.jsx(ye,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:re=>re.preventDefault(),...L,...Se,onPlaced:()=>fe(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:ke(L.onKeyDown,re=>{const ge=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!ge&&re.key.length===1&&q(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let be=V().filter(qe=>!qe.disabled).map(qe=>qe.ref.current);if(["ArrowUp","End"].includes(re.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const qe=re.target,We=be.indexOf(qe);be=be.slice(We+1)}setTimeout(()=>de(be)),re.preventDefault()}})})})})})})});fC.displayName=h6;var f6="SelectItemAlignedPosition",pC=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,a=eo(Wo,t),l=to(Wo,t),[h,p]=S.useState(null),[m,y]=S.useState(null),_=ht(e,D=>y(D)),x=Ff(t),I=S.useRef(!1),k=S.useRef(!0),{viewport:C,selectedItem:b,selectedItemText:L,focusSelectedItem:N}=l,P=S.useCallback(()=>{if(a.trigger&&a.valueNode&&h&&m&&C&&b&&L){const D=a.trigger.getBoundingClientRect(),A=m.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),F=L.getBoundingClientRect();if(a.dir!=="rtl"){const qe=F.left-A.left,We=O.left-qe,At=D.left-We,Jt=D.width+At,Nr=Math.max(Jt,A.width),Qn=window.innerWidth-yr,Pn=nE(We,[yr,Math.max(yr,Qn-Nr)]);h.style.minWidth=Jt+"px",h.style.left=Pn+"px"}else{const qe=A.right-F.right,We=window.innerWidth-O.right-qe,At=window.innerWidth-D.right-We,Jt=D.width+At,Nr=Math.max(Jt,A.width),Qn=window.innerWidth-yr,Pn=nE(We,[yr,Math.max(yr,Qn-Nr)]);h.style.minWidth=Jt+"px",h.style.right=Pn+"px"}const j=x(),V=window.innerHeight-yr*2,M=C.scrollHeight,fe=window.getComputedStyle(m),me=parseInt(fe.borderTopWidth,10),de=parseInt(fe.paddingTop,10),_e=parseInt(fe.borderBottomWidth,10),G=parseInt(fe.paddingBottom,10),ee=me+de+M+G+_e,le=Math.min(b.offsetHeight*5,ee),q=window.getComputedStyle(C),z=parseInt(q.paddingTop,10),se=parseInt(q.paddingBottom,10),ne=D.top+D.height/2-yr,ye=V-ne,Se=b.offsetHeight/2,re=b.offsetTop+Se,ge=me+de+re,xe=ee-ge;if(ge<=ne){const qe=j.length>0&&b===j[j.length-1].ref.current;h.style.bottom="0px";const We=m.clientHeight-C.offsetTop-C.offsetHeight,At=Math.max(ye,Se+(qe?se:0)+We+_e),Jt=ge+At;h.style.height=Jt+"px"}else{const qe=j.length>0&&b===j[0].ref.current;h.style.top="0px";const At=Math.max(ne,me+C.offsetTop+(qe?z:0)+Se)+xe;h.style.height=At+"px",C.scrollTop=ge-ne+C.offsetTop}h.style.margin=`${yr}px 0`,h.style.minHeight=le+"px",h.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>I.current=!0)}},[x,a.trigger,a.valueNode,h,m,C,b,L,a.dir,r]);on(()=>P(),[P]);const[B,H]=S.useState();on(()=>{m&&H(window.getComputedStyle(m).zIndex)},[m]);const Z=S.useCallback(D=>{D&&k.current===!0&&(P(),N==null||N(),k.current=!1)},[P,N]);return u.jsx(m6,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:I,onScrollButtonChange:Z,children:u.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:u.jsx(Qe.div,{...i,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});pC.displayName=f6;var p6="SelectPopperPosition",kg=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=yr,...a}=n,l=Uf(t);return u.jsx(G1,{...l,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kg.displayName=p6;var[m6,yv]=_l(Wo,{}),Rg="SelectViewport",mC=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,a=to(Rg,t),l=yv(Rg,t),h=ht(e,a.onViewportChange),p=S.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(Vf.Slot,{scope:t,children:u.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ke(i.onScroll,m=>{const y=m.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&_){const I=Math.abs(p.current-y.scrollTop);if(I>0){const k=window.innerHeight-yr*2,C=parseFloat(_.style.minHeight),b=parseFloat(_.style.height),L=Math.max(C,b);if(L<k){const N=L+I,P=Math.min(k,N),B=N-P;_.style.height=P+"px",_.style.bottom==="0px"&&(y.scrollTop=B>0?B:0,_.style.justifyContent="flex-end")}}}p.current=y.scrollTop})})})]})});mC.displayName=Rg;var gC="SelectGroup",[g6,y6]=_l(gC),v6=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Fs();return u.jsx(g6,{scope:t,id:i,children:u.jsx(Qe.div,{role:"group","aria-labelledby":i,...r,ref:e})})});v6.displayName=gC;var yC="SelectLabel",w6=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=y6(yC,t);return u.jsx(Qe.div,{id:i.id,...r,ref:e})});w6.displayName=yC;var Uh="SelectItem",[_6,vC]=_l(Uh),wC=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:a,...l}=n,h=eo(Uh,t),p=to(Uh,t),m=h.value===r,[y,_]=S.useState(a??""),[x,I]=S.useState(!1),k=ht(e,N=>{var P;return(P=p.itemRefCallback)==null?void 0:P.call(p,N,r,i)}),C=Fs(),b=S.useRef("touch"),L=()=>{i||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(_6,{scope:t,value:r,disabled:i,textId:C,isSelected:m,onItemTextChange:S.useCallback(N=>{_(P=>P||((N==null?void 0:N.textContent)??"").trim())},[]),children:u.jsx(Vf.ItemSlot,{scope:t,value:r,disabled:i,textValue:y,children:u.jsx(Qe.div,{role:"option","aria-labelledby":C,"data-highlighted":x?"":void 0,"aria-selected":m&&x,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:k,onFocus:ke(l.onFocus,()=>I(!0)),onBlur:ke(l.onBlur,()=>I(!1)),onClick:ke(l.onClick,()=>{b.current!=="mouse"&&L()}),onPointerUp:ke(l.onPointerUp,()=>{b.current==="mouse"&&L()}),onPointerDown:ke(l.onPointerDown,N=>{b.current=N.pointerType}),onPointerMove:ke(l.onPointerMove,N=>{var P;b.current=N.pointerType,i?(P=p.onItemLeave)==null||P.call(p):b.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(l.onPointerLeave,N=>{var P;N.currentTarget===document.activeElement&&((P=p.onItemLeave)==null||P.call(p))}),onKeyDown:ke(l.onKeyDown,N=>{var B;((B=p.searchRef)==null?void 0:B.current)!==""&&N.key===" "||(i6.includes(N.key)&&L(),N.key===" "&&N.preventDefault())})})})})});wC.displayName=Uh;var Ec="SelectItemText",_C=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...a}=n,l=eo(Ec,t),h=to(Ec,t),p=vC(Ec,t),m=c6(Ec,t),[y,_]=S.useState(null),x=ht(e,L=>_(L),p.onItemTextChange,L=>{var N;return(N=h.itemTextRefCallback)==null?void 0:N.call(h,L,p.value,p.disabled)}),I=y==null?void 0:y.textContent,k=S.useMemo(()=>u.jsx("option",{value:p.value,disabled:p.disabled,children:I},p.value),[p.disabled,p.value,I]),{onNativeOptionAdd:C,onNativeOptionRemove:b}=m;return on(()=>(C(k),()=>b(k)),[C,b,k]),u.jsxs(u.Fragment,{children:[u.jsx(Qe.span,{id:p.textId,...a,ref:x}),p.isSelected&&l.valueNode&&!l.valueNodeHasChildren?hu.createPortal(a.children,l.valueNode):null]})});_C.displayName=Ec;var xC="SelectItemIndicator",EC=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return vC(xC,t).isSelected?u.jsx(Qe.span,{"aria-hidden":!0,...r,ref:e}):null});EC.displayName=xC;var Pg="SelectScrollUpButton",SC=S.forwardRef((n,e)=>{const t=to(Pg,n.__scopeSelect),r=yv(Pg,n.__scopeSelect),[i,a]=S.useState(!1),l=ht(e,r.onScrollButtonChange);return on(()=>{if(t.viewport&&t.isPositioned){let h=function(){const m=p.scrollTop>0;a(m)};const p=t.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?u.jsx(IC,{...n,ref:l,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=t;h&&p&&(h.scrollTop=h.scrollTop-p.offsetHeight)}}):null});SC.displayName=Pg;var jg="SelectScrollDownButton",TC=S.forwardRef((n,e)=>{const t=to(jg,n.__scopeSelect),r=yv(jg,n.__scopeSelect),[i,a]=S.useState(!1),l=ht(e,r.onScrollButtonChange);return on(()=>{if(t.viewport&&t.isPositioned){let h=function(){const m=p.scrollHeight-p.clientHeight,y=Math.ceil(p.scrollTop)<m;a(y)};const p=t.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?u.jsx(IC,{...n,ref:l,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=t;h&&p&&(h.scrollTop=h.scrollTop+p.offsetHeight)}}):null});TC.displayName=jg;var IC=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,a=to("SelectScrollButton",t),l=S.useRef(null),h=Ff(t),p=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>p(),[p]),on(()=>{var y;const m=h().find(_=>_.ref.current===document.activeElement);(y=m==null?void 0:m.ref.current)==null||y.scrollIntoView({block:"nearest"})},[h]),u.jsx(Qe.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ke(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:ke(i.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:ke(i.onPointerLeave,()=>{p()})})}),x6="SelectSeparator",E6=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return u.jsx(Qe.div,{"aria-hidden":!0,...r,ref:e})});E6.displayName=x6;var Dg="SelectArrow",S6=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Uf(t),a=eo(Dg,t),l=to(Dg,t);return a.open&&l.position==="popper"?u.jsx(K1,{...i,...r,ref:e}):null});S6.displayName=Dg;function CC(n){return n===""||n===void 0}var AC=S.forwardRef((n,e)=>{const{value:t,...r}=n,i=S.useRef(null),a=ht(e,i),l=n6(t);return S.useEffect(()=>{const h=i.current,p=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(p,"value").set;if(l!==t&&y){const _=new Event("change",{bubbles:!0});y.call(h,t),h.dispatchEvent(_)}},[l,t]),u.jsx(rC,{asChild:!0,children:u.jsx("select",{...r,ref:a,defaultValue:t})})});AC.displayName="BubbleSelect";function bC(n){const e=Kn(n),t=S.useRef(""),r=S.useRef(0),i=S.useCallback(l=>{const h=t.current+l;e(h),(function p(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>p(""),1e3))})(h)},[e]),a=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,a]}function NC(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=T6(n,Math.max(a,0));i.length===1&&(l=l.filter(m=>m!==t));const p=l.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function T6(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var I6=sC,C6=oC,A6=lC,b6=cC,N6=uC,k6=dC,R6=mC,P6=wC,j6=_C,D6=EC,M6=SC,O6=TC;function Oi({...n}){return u.jsx(I6,{"data-slot":"select",...n})}function Li({...n}){return u.jsx(A6,{"data-slot":"select-value",...n})}function Vi({className:n,size:e="default",children:t,...r}){return u.jsxs(C6,{"data-slot":"select-trigger","data-size":e,className:dt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,u.jsx(b6,{asChild:!0,children:u.jsx(o1,{className:"size-4 opacity-50"})})]})}function Fi({className:n,children:e,position:t="popper",...r}){return u.jsx(N6,{children:u.jsxs(k6,{"data-slot":"select-content",className:dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[u.jsx(L6,{}),u.jsx(R6,{className:dt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),u.jsx(V6,{})]})})}function Kt({className:n,children:e,...t}){return u.jsxs(P6,{"data-slot":"select-item",className:dt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[u.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:u.jsx(D6,{children:u.jsx(_g,{className:"size-4"})})}),u.jsx(j6,{children:e})]})}function L6({className:n,...e}){return u.jsx(M6,{"data-slot":"select-scroll-up-button",className:dt("flex cursor-default items-center justify-center py-1",n),...e,children:u.jsx(sO,{className:"size-4"})})}function V6({className:n,...e}){return u.jsx(O6,{"data-slot":"select-scroll-down-button",className:dt("flex cursor-default items-center justify-center py-1",n),...e,children:u.jsx(o1,{className:"size-4"})})}function F6(){const{tasks:n,addTask:e,updateTask:t,deleteTask:r}=_f(),[i,a]=S.useState(!1),[l,h]=S.useState(null),[p,m]=S.useState("all"),[y,_]=S.useState({title:"",description:"",status:"pending",priority:"medium",assignee:"",dueDate:new Date().toISOString().split("T")[0]}),x=()=>{_({title:"",description:"",status:"pending",priority:"medium",assignee:"",dueDate:new Date().toISOString().split("T")[0]}),h(null)},I=P=>{P.preventDefault(),l?t(l.id,y):e(y),a(!1),x()},k=P=>{h(P),_({title:P.title,description:P.description,status:P.status,priority:P.priority,assignee:P.assignee,dueDate:P.dueDate}),a(!0)},C=P=>{confirm("Are you sure you want to delete this task?")&&r(P)},b=p==="all"?n:n.filter(P=>P.status===p),L=P=>{switch(P){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"in-progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}},N=P=>{switch(P){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Task Manager"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage and track your tasks"})]}),u.jsxs(Hc,{open:i,onOpenChange:P=>{a(P),P||x()},children:[u.jsx(gv,{asChild:!0,children:u.jsxs(Oe,{children:[u.jsx(zy,{className:"mr-2 h-4 w-4"}),"Add Task"]})}),u.jsxs(Gc,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsx(Kc,{children:u.jsx(Qc,{children:l?"Edit Task":"Create New Task"})}),u.jsxs("form",{onSubmit:I,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"title",children:"Title"}),u.jsx(Rn,{id:"title",value:y.title,onChange:P=>_({...y,title:P.target.value}),required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"description",children:"Description"}),u.jsx(LF,{id:"description",value:y.description,onChange:P=>_({...y,description:P.target.value}),rows:4})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"status",children:"Status"}),u.jsxs(Oi,{value:y.status,onValueChange:P=>_({...y,status:P}),children:[u.jsx(Vi,{children:u.jsx(Li,{})}),u.jsxs(Fi,{children:[u.jsx(Kt,{value:"pending",children:"Pending"}),u.jsx(Kt,{value:"in-progress",children:"In Progress"}),u.jsx(Kt,{value:"completed",children:"Completed"})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"priority",children:"Priority"}),u.jsxs(Oi,{value:y.priority,onValueChange:P=>_({...y,priority:P}),children:[u.jsx(Vi,{children:u.jsx(Li,{})}),u.jsxs(Fi,{children:[u.jsx(Kt,{value:"low",children:"Low"}),u.jsx(Kt,{value:"medium",children:"Medium"}),u.jsx(Kt,{value:"high",children:"High"})]})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"assignee",children:"Assignee"}),u.jsx(Rn,{id:"assignee",value:y.assignee,onChange:P=>_({...y,assignee:P.target.value}),required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"dueDate",children:"Due Date"}),u.jsx(Rn,{id:"dueDate",type:"date",value:y.dueDate,onChange:P=>_({...y,dueDate:P.target.value}),required:!0})]}),u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx(Oe,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),u.jsxs(Oe,{type:"submit",children:[l?"Update":"Create"," Task"]})]})]})]})]})]}),u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ge,{children:"Filter by Status:"}),u.jsxs(Oi,{value:p,onValueChange:m,children:[u.jsx(Vi,{className:"w-48",children:u.jsx(Li,{})}),u.jsxs(Fi,{children:[u.jsx(Kt,{value:"all",children:"All Tasks"}),u.jsx(Kt,{value:"pending",children:"Pending"}),u.jsx(Kt,{value:"in-progress",children:"In Progress"}),u.jsx(Kt,{value:"completed",children:"Completed"})]})]})]})})}),u.jsx("div",{className:"grid gap-4",children:b.length===0?u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsx("p",{className:"text-center text-muted-foreground",children:"No tasks found. Create your first task to get started!"})})}):b.map(P=>u.jsxs(rt,{className:"hover:shadow-md transition-shadow",children:[u.jsx(Tt,{children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx(Dt,{className:"text-lg",children:P.title}),u.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:P.description})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>k(P),children:u.jsx(YO,{className:"h-4 w-4"})}),u.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>C(P.id),children:u.jsx(Sf,{className:"h-4 w-4 text-destructive"})})]})]})}),u.jsx(st,{children:u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[u.jsx(Gt,{className:L(P.status),children:P.status}),u.jsxs(Gt,{className:N(P.priority),children:[P.priority," priority"]}),u.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[u.jsx(i1,{className:"h-3 w-3"}),new Date(P.dueDate).toLocaleDateString()]}),u.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assigned to: ",P.assignee]})]})})]},P.id))})]})}const Kd=["Office Supplies","Transportation","Utilities","Meals & Entertainment","Equipment","Services","Other"];function U6(){const{receipts:n,addReceipt:e,deleteReceipt:t,user:r}=_f(),[i,a]=S.useState(!1),[l,h]=S.useState(null),[p,m]=S.useState("all"),[y,_]=S.useState({title:"",amount:"",category:Kd[0],date:new Date().toISOString().split("T")[0],tags:"",imageUrl:""}),x=()=>{_({title:"",amount:"",category:Kd[0],date:new Date().toISOString().split("T")[0],tags:"",imageUrl:""})},I=N=>{var B;const P=(B=N.target.files)==null?void 0:B[0];if(P){const H=new FileReader;H.onloadend=()=>{_({...y,imageUrl:H.result})},H.readAsDataURL(P)}},k=N=>{N.preventDefault();const P=y.tags.split(",").map(B=>B.trim()).filter(B=>B);e({title:y.title,amount:parseFloat(y.amount),category:y.category,date:y.date,tags:P,imageUrl:y.imageUrl||"https://images.unsplash.com/photo-1554224311-beee4ece8c35?w=400",uploadedBy:(r==null?void 0:r.name)||"Unknown"}),a(!1),x()},C=N=>{confirm("Are you sure you want to delete this receipt?")&&(t(N),(l==null?void 0:l.id)===N&&h(null))},b=p==="all"?n:n.filter(N=>N.category===p),L=b.reduce((N,P)=>N+P.amount,0);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Receipt Manager"}),u.jsx("p",{className:"text-muted-foreground",children:"Upload and manage financial receipts"})]}),u.jsxs(Hc,{open:i,onOpenChange:N=>{a(N),N||x()},children:[u.jsx(gv,{asChild:!0,children:u.jsxs(Oe,{children:[u.jsx(zy,{className:"mr-2 h-4 w-4"}),"Add Receipt"]})}),u.jsxs(Gc,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsx(Kc,{children:u.jsx(Qc,{children:"Upload New Receipt"})}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"receipt-image",children:"Receipt Image"}),u.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:y.imageUrl?u.jsxs("div",{className:"space-y-2",children:[u.jsx("img",{src:y.imageUrl,alt:"Receipt preview",className:"max-h-48 mx-auto rounded"}),u.jsx(Oe,{type:"button",variant:"outline",size:"sm",onClick:()=>_({...y,imageUrl:""}),children:"Remove Image"})]}):u.jsxs("div",{children:[u.jsx(h1,{className:"mx-auto h-12 w-12 text-muted-foreground"}),u.jsxs("div",{className:"mt-2",children:[u.jsxs("label",{htmlFor:"receipt-image",className:"cursor-pointer",children:[u.jsx("span",{className:"text-primary hover:underline",children:"Upload a file"}),u.jsx("input",{id:"receipt-image",type:"file",className:"hidden",accept:"image/*",onChange:I})]}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG up to 10MB"})]})]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"title",children:"Title/Description"}),u.jsx(Rn,{id:"title",value:y.title,onChange:N=>_({...y,title:N.target.value}),placeholder:"e.g., Office supplies purchase",required:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"amount",children:"Amount ()"}),u.jsx(Rn,{id:"amount",type:"number",step:"0.01",value:y.amount,onChange:N=>_({...y,amount:N.target.value}),placeholder:"0.00",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"date",children:"Date"}),u.jsx(Rn,{id:"date",type:"date",value:y.date,onChange:N=>_({...y,date:N.target.value}),required:!0})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"category",children:"Category"}),u.jsxs(Oi,{value:y.category,onValueChange:N=>_({...y,category:N}),children:[u.jsx(Vi,{children:u.jsx(Li,{})}),u.jsx(Fi,{children:Kd.map(N=>u.jsx(Kt,{value:N,children:N},N))})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"tags",children:"Tags (comma separated)"}),u.jsx(Rn,{id:"tags",value:y.tags,onChange:N=>_({...y,tags:N.target.value}),placeholder:"e.g., urgent, reimbursable"})]}),u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx(Oe,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),u.jsx(Oe,{type:"submit",children:"Upload Receipt"})]})]})]})]})]}),u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ge,{children:"Filter by Category:"}),u.jsxs(Oi,{value:p,onValueChange:m,children:[u.jsx(Vi,{className:"w-48",children:u.jsx(Li,{})}),u.jsxs(Fi,{children:[u.jsx(Kt,{value:"all",children:"All Categories"}),Kd.map(N=>u.jsx(Kt,{value:N,children:N},N))]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[u.jsx(hO,{className:"h-5 w-5"}),"Total: ",L.toLocaleString()]})]})})}),b.length===0?u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsx("p",{className:"text-center text-muted-foreground",children:"No receipts found. Upload your first receipt to get started!"})})}):u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:b.map(N=>u.jsxs(rt,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>h(N),children:[u.jsx("div",{className:"aspect-video relative overflow-hidden rounded-t-lg bg-muted",children:u.jsx("img",{src:N.imageUrl,alt:N.title,className:"object-cover w-full h-full"})}),u.jsx(Tt,{children:u.jsx(Dt,{className:"text-base line-clamp-2",children:N.title})}),u.jsx(st,{children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-2xl font-bold",children:["",N.amount.toLocaleString()]}),u.jsx(Oe,{variant:"ghost",size:"icon",onClick:P=>{P.stopPropagation(),C(N.id)},children:u.jsx(Sf,{className:"h-4 w-4 text-destructive"})})]}),u.jsx(Gt,{variant:"secondary",children:N.category}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[u.jsx(i1,{className:"h-3 w-3"}),new Date(N.date).toLocaleDateString()]}),N.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1",children:N.tags.map(P=>u.jsxs(Gt,{variant:"outline",className:"text-xs",children:[u.jsx(e4,{className:"h-2 w-2 mr-1"}),P]},P))})]})})]},N.id))}),l&&u.jsx(Hc,{open:!!l,onOpenChange:()=>h(null),children:u.jsxs(Gc,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[u.jsx(Kc,{children:u.jsx(Qc,{children:l.title})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("img",{src:l.imageUrl,alt:l.title,className:"w-full rounded-lg"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ge,{children:"Amount"}),u.jsxs("p",{className:"text-2xl font-bold",children:["",l.amount.toLocaleString()]})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Date"}),u.jsx("p",{children:new Date(l.date).toLocaleDateString()})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Category"}),u.jsx("p",{children:l.category})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Uploaded By"}),u.jsx("p",{children:l.uploadedBy})]})]}),l.tags.length>0&&u.jsxs("div",{children:[u.jsx(Ge,{children:"Tags"}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.tags.map(N=>u.jsx(Gt,{variant:"outline",children:N},N))})]})]})]})})]})}const Qd=["Documents","Reports","Forms","Policies","Minutes","Correspondence","Other"];function z6(){const{files:n,addFile:e,deleteFile:t,user:r}=_f(),[i,a]=S.useState(!1),[l,h]=S.useState(null),[p,m]=S.useState("all"),[y,_]=S.useState({name:"",category:Qd[0],type:"pdf",url:""}),x=()=>{_({name:"",category:Qd[0],type:"pdf",url:""})},I=P=>{var H;const B=(H=P.target.files)==null?void 0:H[0];B&&_({...y,name:B.name,type:B.type,url:URL.createObjectURL(B)})},k=P=>{P.preventDefault(),e({name:y.name,type:y.type,size:Math.floor(Math.random()*5e6),url:y.url||"https://example.com/file.pdf",uploadedBy:(r==null?void 0:r.name)||"Unknown",category:y.category}),a(!1),x()},C=P=>{confirm("Are you sure you want to delete this file?")&&(t(P),(l==null?void 0:l.id)===P&&h(null))},b=p==="all"?n:n.filter(P=>P.category===p),L=P=>{if(P===0)return"0 Bytes";const B=1024,H=["Bytes","KB","MB","GB"],Z=Math.floor(Math.log(P)/Math.log(B));return Math.round(P/Math.pow(B,Z)*100)/100+" "+H[Z]},N=P=>u.jsx(k0,{className:"h-8 w-8"});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"File Manager"}),u.jsx("p",{className:"text-muted-foreground",children:"Store and organize documents"})]}),u.jsxs(Hc,{open:i,onOpenChange:P=>{a(P),P||x()},children:[u.jsx(gv,{asChild:!0,children:u.jsxs(Oe,{children:[u.jsx(zy,{className:"mr-2 h-4 w-4"}),"Upload File"]})}),u.jsxs(Gc,{className:"max-w-2xl",children:[u.jsx(Kc,{children:u.jsx(Qc,{children:"Upload New File"})}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"file-upload",children:"Select File"}),u.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:y.name?u.jsxs("div",{className:"space-y-2",children:[u.jsx(k0,{className:"mx-auto h-12 w-12 text-primary"}),u.jsx("p",{className:"font-medium",children:y.name}),u.jsx(Oe,{type:"button",variant:"outline",size:"sm",onClick:()=>_({...y,name:"",url:""}),children:"Remove File"})]}):u.jsxs("div",{children:[u.jsx(h1,{className:"mx-auto h-12 w-12 text-muted-foreground"}),u.jsxs("div",{className:"mt-2",children:[u.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[u.jsx("span",{className:"text-primary hover:underline",children:"Upload a file"}),u.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:I})]}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF, DOC, DOCX, XLS, XLSX up to 50MB"})]})]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"file-name",children:"File Name"}),u.jsx(Rn,{id:"file-name",value:y.name,onChange:P=>_({...y,name:P.target.value}),placeholder:"Document name",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"category",children:"Category"}),u.jsxs(Oi,{value:y.category,onValueChange:P=>_({...y,category:P}),children:[u.jsx(Vi,{children:u.jsx(Li,{})}),u.jsx(Fi,{children:Qd.map(P=>u.jsx(Kt,{value:P,children:P},P))})]})]}),u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx(Oe,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),u.jsx(Oe,{type:"submit",children:"Upload File"})]})]})]})]})]}),u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ge,{children:"Filter by Category:"}),u.jsxs(Oi,{value:p,onValueChange:m,children:[u.jsx(Vi,{className:"w-48",children:u.jsx(Li,{})}),u.jsxs(Fi,{children:[u.jsx(Kt,{value:"all",children:"All Categories"}),Qd.map(P=>u.jsx(Kt,{value:P,children:P},P))]})]})]})})}),b.length===0?u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsx("p",{className:"text-center text-muted-foreground",children:"No files found. Upload your first file to get started!"})})}):u.jsx("div",{className:"grid gap-4",children:b.map(P=>u.jsx(rt,{className:"hover:shadow-md transition-shadow",children:u.jsx(st,{className:"pt-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 rounded-lg bg-muted",children:N(P.type)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-lg truncate",children:P.name}),u.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[u.jsx(Gt,{variant:"secondary",children:P.category}),u.jsx("span",{className:"text-sm text-muted-foreground",children:L(P.size)}),u.jsxs("span",{className:"text-sm text-muted-foreground",children:["Uploaded by ",P.uploadedBy]}),u.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(P.uploadedAt).toLocaleDateString()})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>h(P),children:u.jsx(xg,{className:"h-4 w-4"})}),u.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>C(P.id),children:u.jsx(Sf,{className:"h-4 w-4 text-destructive"})})]})]})})},P.id))}),l&&u.jsx(Hc,{open:!!l,onOpenChange:()=>h(null),children:u.jsxs(Gc,{className:"max-w-3xl",children:[u.jsx(Kc,{children:u.jsx(Qc,{children:l.name})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Ge,{children:"Category"}),u.jsx("p",{children:l.category})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Size"}),u.jsx("p",{children:L(l.size)})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Type"}),u.jsx("p",{children:l.type})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Uploaded By"}),u.jsx("p",{children:l.uploadedBy})]}),u.jsxs("div",{children:[u.jsx(Ge,{children:"Uploaded At"}),u.jsx("p",{children:new Date(l.uploadedAt).toLocaleString()})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Oe,{className:"flex-1",children:[u.jsx(pO,{className:"mr-2 h-4 w-4"}),"Download"]}),u.jsxs(Oe,{variant:"outline",className:"flex-1",children:[u.jsx(xg,{className:"mr-2 h-4 w-4"}),"Open"]})]})]})]})})]})}function $6(){const{employees:n}=_f(),[e,t]=S.useState(""),[r,i]=S.useState("all"),a=Array.from(new Set(n.map(m=>m.department))),l=n.filter(m=>{const y=m.name.toLowerCase().includes(e.toLowerCase())||m.email.toLowerCase().includes(e.toLowerCase())||m.position.toLowerCase().includes(e.toLowerCase()),_=r==="all"||m.department===r;return y&&_}),h=m=>m.split(" ").map(y=>y[0]).join("").toUpperCase(),p=m=>m==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Employee Directory"}),u.jsx("p",{className:"text-muted-foreground",children:"Browse and search staff members"})]}),u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{htmlFor:"search",children:"Search"}),u.jsx(Rn,{id:"search",placeholder:"Search by name, email, or position...",value:e,onChange:m=>t(m.target.value)})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ge,{children:"Filter by Department"}),u.jsxs(Oi,{value:r,onValueChange:i,children:[u.jsx(Vi,{children:u.jsx(Li,{})}),u.jsxs(Fi,{children:[u.jsx(Kt,{value:"all",children:"All Departments"}),a.map(m=>u.jsx(Kt,{value:m,children:m},m))]})]})]})]})})}),l.length===0?u.jsx(rt,{children:u.jsx(st,{className:"pt-6",children:u.jsx("p",{className:"text-center text-muted-foreground",children:"No employees found matching your criteria."})})}):u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(m=>u.jsxs(rt,{className:"hover:shadow-md transition-shadow",children:[u.jsx(Tt,{children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(w1,{className:"h-16 w-16",children:u.jsx(_1,{className:"text-lg",children:h(m.name)})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx(Dt,{className:"text-lg truncate",children:m.name}),u.jsx("p",{className:"text-sm text-muted-foreground truncate",children:m.position}),u.jsx(Gt,{className:`mt-2 ${p(m.status)}`,children:m.status})]})]})}),u.jsx(st,{children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(ZM,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"truncate",children:m.department})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(Uy,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"truncate",children:m.email})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(VO,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{children:m.phone})]})]})})]},m.id))}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsxs(rt,{children:[u.jsx(Tt,{children:u.jsx(Dt,{className:"text-sm",children:"Total Employees"})}),u.jsx(st,{children:u.jsx("p",{className:"text-3xl font-bold",children:n.length})})]}),u.jsxs(rt,{children:[u.jsx(Tt,{children:u.jsx(Dt,{className:"text-sm",children:"Active Staff"})}),u.jsx(st,{children:u.jsx("p",{className:"text-3xl font-bold",children:n.filter(m=>m.status==="active").length})})]}),u.jsxs(rt,{children:[u.jsx(Tt,{children:u.jsx(Dt,{className:"text-sm",children:"Departments"})}),u.jsx(st,{children:u.jsx("p",{className:"text-3xl font-bold",children:a.length})})]})]})]})}class Yd{static async sendMessage(e,t,r,i,a="text",l,h){try{const p={content:e,senderId:t,senderName:r,organizationId:i,timestamp:kc(),type:a,...l&&{fileUrl:l},...h&&{fileName:h},edited:!1},m=await il(rn(Fe,"messages"),p);return await this.createMessageNotification(t,r,e,i),m.id}catch(p){throw console.error("Error sending message:",p),p}}static subscribeToMessages(e,t){const r=vr(rn(Fe,"messages"),_n("organizationId","==",e),jy("timestamp","desc"),Dy(50));return Ly(r,i=>{const a=[];i.forEach(l=>{var p;const h=l.data();a.push({id:l.id,...h,timestamp:((p=h.timestamp)==null?void 0:p.toDate())||new Date})}),t(a.reverse())})}static async editMessage(e,t){try{await Mo(ot(Fe,"messages",e),{content:t,edited:!0,editedAt:kc()})}catch(r){throw console.error("Error editing message:",r),r}}static async deleteMessage(e){try{await sl(ot(Fe,"messages",e))}catch(t){throw console.error("Error deleting message:",t),t}}static async createMessageNotification(e,t,r,i){try{const a={title:`New message from ${t}`,message:r.length>50?r.substring(0,50)+"...":r,type:"message",read:!1,createdAt:kc(),metadata:{senderId:e,organizationId:i}};await il(rn(Fe,"notifications"),a)}catch(a){console.error("Error creating message notification:",a)}}}class mc{static async createNotification(e,t,r,i="info",a,l){try{const h={userId:e,title:t,message:r,type:i,read:!1,createdAt:kc(),...a&&{actionUrl:a},...l&&{metadata:l}};return(await il(rn(Fe,"notifications"),h)).id}catch(h){throw console.error("Error creating notification:",h),h}}static subscribeToNotifications(e,t){const r=vr(rn(Fe,"notifications"),_n("userId","==",e),jy("createdAt","desc"),Dy(20));return Ly(r,i=>{const a=[];i.forEach(l=>{var p;const h=l.data();a.push({id:l.id,...h,createdAt:((p=h.createdAt)==null?void 0:p.toDate())||new Date})}),t(a)})}static async markAsRead(e){try{await Mo(ot(Fe,"notifications",e),{read:!0})}catch(t){throw console.error("Error marking notification as read:",t),t}}static async markAllAsRead(e){try{const t=vr(rn(Fe,"notifications"),_n("userId","==",e),_n("read","==",!1)),r=await Yr(t),i=MT(Fe);r.forEach(a=>{i.update(a.ref,{read:!0})}),await i.commit()}catch(t){throw console.error("Error marking all notifications as read:",t),t}}static async deleteNotification(e){try{await sl(ot(Fe,"notifications",e))}catch(t){throw console.error("Error deleting notification:",t),t}}}const B6=n=>{const[e,t]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{if(!n){i(!1);return}i(!0);const p=Yd.subscribeToMessages(n,m=>{t(m),i(!1)});return()=>p()},[n]);const a=S.useCallback(async(p,m,y,_="text",x,I)=>{try{await Yd.sendMessage(p,m,y,n,_,x,I)}catch(k){throw console.error("Failed to send message:",k),k}},[n]),l=S.useCallback(async(p,m)=>{try{await Yd.editMessage(p,m)}catch(y){throw console.error("Failed to edit message:",y),y}},[]),h=S.useCallback(async p=>{try{await Yd.deleteMessage(p)}catch(m){throw console.error("Failed to delete message:",m),m}},[]);return{messages:e,loading:r,sendMessage:a,editMessage:l,deleteMessage:h}},q6=n=>{const[e,t]=S.useState([]),[r,i]=S.useState(0),[a,l]=S.useState(!0);S.useEffect(()=>{if(!n){l(!1);return}l(!0);const _=mc.subscribeToNotifications(n,x=>{t(x),i(x.filter(I=>!I.read).length),l(!1)});return()=>_()},[n]);const h=S.useCallback(async _=>{try{await mc.markAsRead(_)}catch(x){throw console.error("Failed to mark notification as read:",x),x}},[]),p=S.useCallback(async()=>{try{await mc.markAllAsRead(n)}catch(_){throw console.error("Failed to mark all notifications as read:",_),_}},[n]),m=S.useCallback(async _=>{try{await mc.deleteNotification(_)}catch(x){throw console.error("Failed to delete notification:",x),x}},[]),y=S.useCallback(async(_,x,I="info",k,C)=>{try{await mc.createNotification(n,_,x,I,k,C)}catch(b){throw console.error("Failed to create notification:",b),b}},[n]);return{notifications:e,unreadCount:r,loading:a,markAsRead:h,markAllAsRead:p,deleteNotification:m,createNotification:y}},W6=({organizationId:n})=>{const{user:e}=wf(),{messages:t,loading:r,sendMessage:i,editMessage:a,deleteMessage:l}=B6(n),{notifications:h,unreadCount:p,loading:m,markAsRead:y,markAllAsRead:_,deleteNotification:x}=q6((e==null?void 0:e.uid)||""),[I,k]=S.useState("chat"),[C,b]=S.useState(""),[L,N]=S.useState(null),[P,B]=S.useState(""),H=async j=>{if(j.preventDefault(),!(!C.trim()||!e))try{await i(C,e.uid,e.displayName||e.email||"Unknown"),b("")}catch(V){console.error("Failed to send message:",V)}},Z=async j=>{if(P.trim())try{await a(j,P),N(null),B("")}catch(V){console.error("Failed to edit message:",V)}},D=async j=>{if(confirm("Delete this message?"))try{await l(j)}catch(V){console.error("Failed to delete message:",V)}},A=async j=>{j.read||await y(j.id),j.actionUrl&&(window.location.href=j.actionUrl)},O=j=>{const M=new Date().getTime()-j.getTime(),fe=Math.floor(M/6e4),me=Math.floor(M/36e5),de=Math.floor(M/864e5);return fe<1?"Just now":fe<60?`${fe}m ago`:me<24?`${me}h ago`:`${de}d ago`},F=j=>{switch(j){case"success":return"";case"warning":return"";case"error":return"";case"message":return"";default:return""}};return u.jsxs("div",{className:"h-full bg-white rounded-lg shadow-md flex flex-col",children:[u.jsx("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Messages & Notifications"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs("button",{onClick:()=>k("chat"),className:`flex items-center space-x-2 px-3 py-1 rounded ${I==="chat"?"bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:[u.jsx(c1,{size:16}),u.jsx("span",{children:"Chat"})]}),u.jsxs("button",{onClick:()=>k("notifications"),className:`flex items-center space-x-2 px-3 py-1 rounded relative ${I==="notifications"?"bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:[u.jsx(XM,{size:16}),u.jsx("span",{children:"Notifications"}),p>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:p>9?"9+":p})]})]})]})}),u.jsx("div",{className:"flex-1 flex flex-col",children:I==="chat"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r?u.jsx("div",{className:"flex items-center justify-center h-32",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.length===0?u.jsx("div",{className:"text-center text-gray-500 py-8",children:"No messages yet. Start the conversation!"}):t.map(j=>u.jsx("div",{className:`flex ${j.senderId===(e==null?void 0:e.uid)?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${j.senderId===(e==null?void 0:e.uid)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[j.senderId!==(e==null?void 0:e.uid)&&u.jsx("div",{className:"text-xs font-semibold mb-1",children:j.senderName}),L===j.id?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:P,onChange:V=>B(V.target.value),className:"w-full px-2 py-1 text-sm border rounded text-gray-800",onKeyPress:V=>V.key==="Enter"&&Z(j.id)}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs("button",{onClick:()=>Z(j.id),className:"text-xs bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1",children:[u.jsx(_g,{size:12}),u.jsx("span",{children:"Save"})]}),u.jsx("button",{onClick:()=>N(null),className:"text-xs bg-gray-500 text-white px-2 py-1 rounded",children:"Cancel"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-sm",children:j.content}),j.edited&&u.jsx("div",{className:"text-xs opacity-75 mt-1",children:"(edited)"})]}),u.jsxs("div",{className:"flex items-center justify-between mt-1",children:[u.jsx("div",{className:"text-xs opacity-75",children:O(j.timestamp)}),j.senderId===(e==null?void 0:e.uid)&&L!==j.id&&u.jsxs("div",{className:"flex space-x-1 ml-2",children:[u.jsx("button",{onClick:()=>{N(j.id),B(j.content)},className:"text-xs opacity-75 hover:opacity-100",children:u.jsx(OO,{size:12})}),u.jsx("button",{onClick:()=>D(j.id),className:"text-xs opacity-75 hover:opacity-100",children:u.jsx(Sf,{size:12})})]})]})]})},j.id))}),u.jsx("form",{onSubmit:H,className:"p-4 border-t",children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("input",{type:"text",value:C,onChange:j=>b(j.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsxs("button",{type:"submit",disabled:!C.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[u.jsx(HO,{size:16}),u.jsx("span",{children:"Send"})]})]})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your Notifications"}),p>0&&u.jsxs("button",{onClick:_,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[u.jsx(_g,{size:16}),u.jsx("span",{children:"Mark all read"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:m?u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):h.length===0?u.jsx("div",{className:"text-center text-gray-500 py-8",children:"No notifications yet"}):h.map(j=>u.jsx("div",{className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${j.read?"":"bg-blue-50"}`,onClick:()=>A(j),children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"flex-shrink-0 text-lg",children:F(j.type)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:`text-sm font-medium ${j.read?"text-gray-600":"text-gray-900"}`,children:j.title}),u.jsx("button",{onClick:V=>{V.stopPropagation(),x(j.id)},className:"text-gray-400 hover:text-gray-600 ml-2",children:u.jsx($o,{size:16})})]}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:j.message}),u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:O(j.createdAt)})]}),!j.read&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},j.id))})]})})]})};function H6(){const{user:n,userProfile:e,loading:t,authError:r,signOut:i,clearAuthError:a}=wf(),[l,h]=S.useState("dashboard"),[p,m]=S.useState(!1),[y,_]=S.useState(window.location.pathname),x=UT();if(js.useEffect(()=>{const k=()=>{_(window.location.pathname)};return window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)},[]),t)return u.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[u.jsxs("div",{className:"w-64 border-r bg-card",children:[u.jsx("div",{className:"p-4",children:u.jsx($n,{className:"h-8 w-32"})}),u.jsx("div",{className:"space-y-2 p-4",children:Array.from({length:6}).map((k,C)=>u.jsx($n,{className:"h-10 w-full"},C))})]}),u.jsxs("div",{className:"flex flex-col flex-1",children:[u.jsx("div",{className:"border-b p-4",children:u.jsx($n,{className:"h-10 w-full"})}),u.jsx("div",{className:"flex-1 p-6",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx($n,{className:"h-9 w-48"}),u.jsx($n,{className:"h-5 w-64 mt-2"})]}),u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((k,C)=>u.jsx($n,{className:"h-32 w-full"},C))})]})})]})]});if(y==="/register")return u.jsxs(u.Fragment,{children:[u.jsx(c4,{}),u.jsx(zd,{toasts:x.toasts,onRemove:x.removeToast})]});if(r==="pending_approval")return u.jsxs(u.Fragment,{children:[u.jsx(u4,{userEmail:(n==null?void 0:n.email)||void 0,onRetry:a,onSignOut:i}),u.jsx(zd,{toasts:x.toasts,onRemove:x.removeToast})]});if(!n||!e)return u.jsxs(u.Fragment,{children:[u.jsx(l4,{}),u.jsx(zd,{toasts:x.toasts,onRemove:x.removeToast})]});const I=()=>{switch(l){case"dashboard":return u.jsx(tE,{onNavigate:h});case"tasks":return u.jsx(F6,{});case"receipts":return u.jsx(U6,{});case"files":return u.jsx(z6,{});case"employees":return u.jsx($6,{});case"messaging":return u.jsx(W6,{organizationId:e.organizationId||"default-org"});default:return u.jsx(tE,{onNavigate:h})}};return u.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[u.jsx(kF,{currentView:l,onViewChange:h,isOpen:p,onClose:()=>m(!1)}),u.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[u.jsx(bF,{onMenuClick:()=>m(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:I()})})]}),u.jsx(zd,{toasts:x.toasts,onRemove:x.removeToast})]})}function G6(){return u.jsx(YA,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:u.jsx(ZD,{children:u.jsx(nM,{children:u.jsx(H6,{})})})})}qA.createRoot(document.getElementById("root")).render(u.jsx(G6,{}));
