function DN(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function RE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Em={exports:{}},Ac={},Tm={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function MN(){if(X_)return Qe;X_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=w&&q[w]||q["@@iterator"],typeof q=="function"?q:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function S(q,z,ie){this.props=q,this.context=z,this.refs=A,this.updater=ie||I}S.prototype.isReactComponent={},S.prototype.setState=function(q,z){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,z,"setState")},S.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function V(){}V.prototype=S.prototype;function M(q,z,ie){this.props=q,this.context=z,this.refs=A,this.updater=ie||I}var P=M.prototype=new V;P.constructor=M,C(P,S.prototype),P.isPureReactComponent=!0;var $=Array.isArray,G=Object.prototype.hasOwnProperty,ee={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function N(q,z,ie){var re,ve={},Te=null,se=null;if(z!=null)for(re in z.ref!==void 0&&(se=z.ref),z.key!==void 0&&(Te=""+z.key),z)G.call(z,re)&&!j.hasOwnProperty(re)&&(ve[re]=z[re]);var we=arguments.length-2;if(we===1)ve.children=ie;else if(1<we){for(var Ee=Array(we),X=0;X<we;X++)Ee[X]=arguments[X+2];ve.children=Ee}if(q&&q.defaultProps)for(re in we=q.defaultProps,we)ve[re]===void 0&&(ve[re]=we[re]);return{$$typeof:n,type:q,key:Te,ref:se,props:ve,_owner:ee.current}}function O(q,z){return{$$typeof:n,type:q.type,key:z,ref:q.ref,props:q.props,_owner:q._owner}}function L(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function R(q){var z={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ie){return z[ie]})}var F=/\/+/g;function D(q,z){return typeof q=="object"&&q!==null&&q.key!=null?R(""+q.key):z.toString(36)}function fe(q,z,ie,re,ve){var Te=typeof q;(Te==="undefined"||Te==="boolean")&&(q=null);var se=!1;if(q===null)se=!0;else switch(Te){case"string":case"number":se=!0;break;case"object":switch(q.$$typeof){case n:case e:se=!0}}if(se)return se=q,ve=ve(se),q=re===""?"."+D(se,0):re,$(ve)?(ie="",q!=null&&(ie=q.replace(F,"$&/")+"/"),fe(ve,z,ie,"",function(X){return X})):ve!=null&&(L(ve)&&(ve=O(ve,ie+(!ve.key||se&&se.key===ve.key?"":(""+ve.key).replace(F,"$&/")+"/")+q)),z.push(ve)),1;if(se=0,re=re===""?".":re+":",$(q))for(var we=0;we<q.length;we++){Te=q[we];var Ee=re+D(Te,we);se+=fe(Te,z,ie,Ee,ve)}else if(Ee=x(q),typeof Ee=="function")for(q=Ee.call(q),we=0;!(Te=q.next()).done;)Te=Te.value,Ee=re+D(Te,we++),se+=fe(Te,z,ie,Ee,ve);else if(Te==="object")throw z=String(q),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return se}function ye(q,z,ie){if(q==null)return q;var re=[],ve=0;return fe(q,re,"","",function(Te){return z.call(ie,Te,ve++)}),re}function de(q){if(q._status===-1){var z=q._result;z=z(),z.then(function(ie){(q._status===0||q._status===-1)&&(q._status=1,q._result=ie)},function(ie){(q._status===0||q._status===-1)&&(q._status=2,q._result=ie)}),q._status===-1&&(q._status=0,q._result=z)}if(q._status===1)return q._result.default;throw q._result}var _e={current:null},H={transition:null},te={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:H,ReactCurrentOwner:ee};function le(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:ye,forEach:function(q,z,ie){ye(q,function(){z.apply(this,arguments)},ie)},count:function(q){var z=0;return ye(q,function(){z++}),z},toArray:function(q){return ye(q,function(z){return z})||[]},only:function(q){if(!L(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Qe.Component=S,Qe.Fragment=t,Qe.Profiler=i,Qe.PureComponent=M,Qe.StrictMode=r,Qe.Suspense=p,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Qe.act=le,Qe.cloneElement=function(q,z,ie){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var re=C({},q.props),ve=q.key,Te=q.ref,se=q._owner;if(z!=null){if(z.ref!==void 0&&(Te=z.ref,se=ee.current),z.key!==void 0&&(ve=""+z.key),q.type&&q.type.defaultProps)var we=q.type.defaultProps;for(Ee in z)G.call(z,Ee)&&!j.hasOwnProperty(Ee)&&(re[Ee]=z[Ee]===void 0&&we!==void 0?we[Ee]:z[Ee])}var Ee=arguments.length-2;if(Ee===1)re.children=ie;else if(1<Ee){we=Array(Ee);for(var X=0;X<Ee;X++)we[X]=arguments[X+2];re.children=we}return{$$typeof:n,type:q.type,key:ve,ref:Te,props:re,_owner:se}},Qe.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:a,_context:q},q.Consumer=q},Qe.createElement=N,Qe.createFactory=function(q){var z=N.bind(null,q);return z.type=q,z},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(q){return{$$typeof:h,render:q}},Qe.isValidElement=L,Qe.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:de}},Qe.memo=function(q,z){return{$$typeof:m,type:q,compare:z===void 0?null:z}},Qe.startTransition=function(q){var z=H.transition;H.transition={};try{q()}finally{H.transition=z}},Qe.unstable_act=le,Qe.useCallback=function(q,z){return _e.current.useCallback(q,z)},Qe.useContext=function(q){return _e.current.useContext(q)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(q){return _e.current.useDeferredValue(q)},Qe.useEffect=function(q,z){return _e.current.useEffect(q,z)},Qe.useId=function(){return _e.current.useId()},Qe.useImperativeHandle=function(q,z,ie){return _e.current.useImperativeHandle(q,z,ie)},Qe.useInsertionEffect=function(q,z){return _e.current.useInsertionEffect(q,z)},Qe.useLayoutEffect=function(q,z){return _e.current.useLayoutEffect(q,z)},Qe.useMemo=function(q,z){return _e.current.useMemo(q,z)},Qe.useReducer=function(q,z,ie){return _e.current.useReducer(q,z,ie)},Qe.useRef=function(q){return _e.current.useRef(q)},Qe.useState=function(q){return _e.current.useState(q)},Qe.useSyncExternalStore=function(q,z,ie){return _e.current.useSyncExternalStore(q,z,ie)},Qe.useTransition=function(){return _e.current.useTransition()},Qe.version="18.3.1",Qe}var J_;function Jg(){return J_||(J_=1,Tm.exports=MN()),Tm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function ON(){if(Z_)return Ac;Z_=1;var n=Jg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,p,m){var y,w={},x=null,I=null;m!==void 0&&(x=""+m),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(I=p.ref);for(y in p)r.call(p,y)&&!a.hasOwnProperty(y)&&(w[y]=p[y]);if(h&&h.defaultProps)for(y in p=h.defaultProps,p)w[y]===void 0&&(w[y]=p[y]);return{$$typeof:e,type:h,key:x,ref:I,props:w,_owner:i.current}}return Ac.Fragment=t,Ac.jsx=l,Ac.jsxs=l,Ac}var ex;function LN(){return ex||(ex=1,Em.exports=ON()),Em.exports}var c=LN(),Bd={},Sm={exports:{}},Dn={},Im={exports:{}},bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function VN(){return tx||(tx=1,(function(n){function e(H,te){var le=H.length;H.push(te);e:for(;0<le;){var q=le-1>>>1,z=H[q];if(0<i(z,te))H[q]=te,H[le]=z,le=q;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var te=H[0],le=H.pop();if(le!==te){H[0]=le;e:for(var q=0,z=H.length,ie=z>>>1;q<ie;){var re=2*(q+1)-1,ve=H[re],Te=re+1,se=H[Te];if(0>i(ve,le))Te<z&&0>i(se,ve)?(H[q]=se,H[Te]=le,q=Te):(H[q]=ve,H[re]=le,q=re);else if(Te<z&&0>i(se,le))H[q]=se,H[Te]=le,q=Te;else break e}}return te}function i(H,te){var le=H.sortIndex-te.sortIndex;return le!==0?le:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var p=[],m=[],y=1,w=null,x=3,I=!1,C=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(H){for(var te=t(m);te!==null;){if(te.callback===null)r(m);else if(te.startTime<=H)r(m),te.sortIndex=te.expirationTime,e(p,te);else break;te=t(m)}}function $(H){if(A=!1,P(H),!C)if(t(p)!==null)C=!0,de(G);else{var te=t(m);te!==null&&_e($,te.startTime-H)}}function G(H,te){C=!1,A&&(A=!1,V(N),N=-1),I=!0;var le=x;try{for(P(te),w=t(p);w!==null&&(!(w.expirationTime>te)||H&&!R());){var q=w.callback;if(typeof q=="function"){w.callback=null,x=w.priorityLevel;var z=q(w.expirationTime<=te);te=n.unstable_now(),typeof z=="function"?w.callback=z:w===t(p)&&r(p),P(te)}else r(p);w=t(p)}if(w!==null)var ie=!0;else{var re=t(m);re!==null&&_e($,re.startTime-te),ie=!1}return ie}finally{w=null,x=le,I=!1}}var ee=!1,j=null,N=-1,O=5,L=-1;function R(){return!(n.unstable_now()-L<O)}function F(){if(j!==null){var H=n.unstable_now();L=H;var te=!0;try{te=j(!0,H)}finally{te?D():(ee=!1,j=null)}}else ee=!1}var D;if(typeof M=="function")D=function(){M(F)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ye=fe.port2;fe.port1.onmessage=F,D=function(){ye.postMessage(null)}}else D=function(){S(F,0)};function de(H){j=H,ee||(ee=!0,D())}function _e(H,te){N=S(function(){H(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){C||I||(C=!0,de(G))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(H){switch(x){case 1:case 2:case 3:var te=3;break;default:te=x}var le=x;x=te;try{return H()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=x;x=H;try{return te()}finally{x=le}},n.unstable_scheduleCallback=function(H,te,le){var q=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?q+le:q):le=q,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=le+z,H={id:y++,callback:te,priorityLevel:H,startTime:le,expirationTime:z,sortIndex:-1},le>q?(H.sortIndex=le,e(m,H),t(p)===null&&H===t(m)&&(A?(V(N),N=-1):A=!0,_e($,le-q))):(H.sortIndex=z,e(p,H),C||I||(C=!0,de(G))),H},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(H){var te=x;return function(){var le=x;x=te;try{return H.apply(this,arguments)}finally{x=le}}}})(bm)),bm}var nx;function FN(){return nx||(nx=1,Im.exports=VN()),Im.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function UN(){if(rx)return Dn;rx=1;var n=Jg(),e=FN();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function x(s){return p.call(w,s)?!0:p.call(y,s)?!1:m.test(s)?w[s]=!0:(y[s]=!0,!1)}function I(s,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function C(s,o,u,f){if(o===null||typeof o>"u"||I(s,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function A(s,o,u,f,g,v,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=b}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new A(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];S[o]=new A(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new A(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new A(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new A(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new A(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new A(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new A(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new A(s,5,!1,s.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(V,M);S[o]=new A(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(V,M);S[o]=new A(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(V,M);S[o]=new A(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new A(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new A(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,o,u,f){var g=S.hasOwnProperty(o)?S[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,u,g,f)&&(u=null),f||g===null?x(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?s.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?s.setAttributeNS(f,o,u):s.setAttribute(o,u))))}var $=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),ee=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),H=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var le=Object.assign,q;function z(s){if(q===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);q=o&&o[1]||""}return`
`+q+s}var ie=!1;function re(s,o){if(!s||ie)return"";ie=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(J){var f=J}Reflect.construct(s,[],o)}else{try{o.call()}catch(J){f=J}s.call(o.prototype)}else{try{throw Error()}catch(J){f=J}s()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var g=J.stack.split(`
`),v=f.stack.split(`
`),b=g.length-1,U=v.length-1;1<=b&&0<=U&&g[b]!==v[U];)U--;for(;1<=b&&0<=U;b--,U--)if(g[b]!==v[U]){if(b!==1||U!==1)do if(b--,U--,0>U||g[b]!==v[U]){var B=`
`+g[b].replace(" at new "," at ");return s.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",s.displayName)),B}while(1<=b&&0<=U);break}}}finally{ie=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?z(s):""}function ve(s){switch(s.tag){case 5:return z(s.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return s=re(s.type,!1),s;case 11:return s=re(s.type.render,!1),s;case 1:return s=re(s.type,!0),s;default:return""}}function Te(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case ee:return"Portal";case O:return"Profiler";case N:return"StrictMode";case D:return"Suspense";case fe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case R:return(s.displayName||"Context")+".Consumer";case L:return(s._context.displayName||"Context")+".Provider";case F:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ye:return o=s.displayName||null,o!==null?o:Te(s.type)||"Memo";case de:o=s._payload,s=s._init;try{return Te(s(o))}catch{}}return null}function se(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(o);case 8:return o===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function we(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ee(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function X(s){var o=Ee(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(b){f=""+b,v.call(this,b)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(b){f=""+b},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function me(s){s._valueTracker||(s._valueTracker=X(s))}function Fe(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return s&&(f=Ee(s)?s.checked?"true":"false":s.value),s=f,s!==u?(o.setValue(s),!0):!1}function lt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function qt(s,o){var u=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function dn(s,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=we(o.value!=null?o.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function nr(s,o){o=o.checked,o!=null&&P(s,"checked",o,!1)}function Vn(s,o){nr(s,o);var u=we(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?yt(s,o.type,u):o.hasOwnProperty("defaultValue")&&yt(s,o.type,we(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function co(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function yt(s,o,u){(o!=="number"||lt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Dt=Array.isArray;function mr(s,o,u,f){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&f&&(s[u].defaultSelected=!0)}else{for(u=""+we(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function Ml(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ol(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Dt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:we(u)}}function Nu(s,o){var u=we(o.value),f=we(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function ni(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function Ll(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?Ll(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ri,Cu=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return s(o,u,f,g)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(ri=ri||document.createElement("div"),ri.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ri.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function uo(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ru=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(s){Ru.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),si[o]=si[s]})});function ii(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||si.hasOwnProperty(s)&&si[s]?(""+o).trim():o+"px"}function ua(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=ii(u,o[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,g):s[u]=g}}var Vl=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gr(s,o){if(o){if(Vl[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function da(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi=null;function ha(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var _s=null,xs=null,Rt=null;function Fl(s){if(s=hc(s)){if(typeof _s!="function")throw Error(t(280));var o=s.stateNode;o&&(o=rd(o),_s(s.stateNode,s.type,o))}}function ai(s){xs?Rt?Rt.push(s):Rt=[s]:xs=s}function li(){if(xs){var s=xs,o=Rt;if(Rt=xs=null,Fl(s),o)for(s=0;s<o.length;s++)Fl(o[s])}}function ku(s,o){return s(o)}function Pu(){}var Or=!1;function ju(s,o,u){if(Or)return s(o,u);Or=!0;try{return ku(s,o,u)}finally{Or=!1,(xs!==null||Rt!==null)&&(Pu(),li())}}function ho(s,o){var u=s.stateNode;if(u===null)return null;var f=rd(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var ci=!1;if(h)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){ci=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{ci=!1}function Du(s,o,u,f,g,v,b,U,B){var J=Array.prototype.slice.call(arguments,3);try{o.apply(u,J)}catch(ce){this.onError(ce)}}var Es=!1,Lr=null,fa=!1,rr=null,Mu={onError:function(s){Es=!0,Lr=s}};function Ou(s,o,u,f,g,v,b,U,B){Es=!1,Lr=null,Du.apply(Mu,arguments)}function Ul(s,o,u,f,g,v,b,U,B){if(Ou.apply(this,arguments),Es){if(Es){var J=Lr;Es=!1,Lr=null}else throw Error(t(198));fa||(fa=!0,rr=J)}}function yr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function zl(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Lu(s){if(yr(s)!==s)throw Error(t(188))}function Vu(s){var o=s.alternate;if(!o){if(o=yr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,f=o;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Lu(g),s;if(v===f)return Lu(g),o;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=v;else{for(var b=!1,U=g.child;U;){if(U===u){b=!0,u=g,f=v;break}if(U===f){b=!0,f=g,u=v;break}U=U.sibling}if(!b){for(U=v.child;U;){if(U===u){b=!0,u=v,f=g;break}if(U===f){b=!0,f=v,u=g;break}U=U.sibling}if(!b)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Fu(s){return s=Vu(s),s!==null?fo(s):null}function fo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=fo(s);if(o!==null)return o;s=s.sibling}return null}var Bl=e.unstable_scheduleCallback,pa=e.unstable_cancelCallback,po=e.unstable_shouldYield,Ts=e.unstable_requestPaint,vt=e.unstable_now,Zf=e.unstable_getCurrentPriorityLevel,ma=e.unstable_ImmediatePriority,$l=e.unstable_UserBlockingPriority,mo=e.unstable_NormalPriority,ql=e.unstable_LowPriority,ga=e.unstable_IdlePriority,go=null,Fn=null;function Uu(s){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(go,s,void 0,(s.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:yo,Vr=Math.log,sr=Math.LN2;function yo(s){return s>>>=0,s===0?32:31-(Vr(s)/sr|0)|0}var Fr=64,di=4194304;function ot(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ss(s,o){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,v=s.pingedLanes,b=u&268435455;if(b!==0){var U=b&~g;U!==0?f=ot(U):(v&=b,v!==0&&(f=ot(v)))}else b=u&~g,b!==0?f=ot(b):v!==0&&(f=ot(v));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,v=o&-o,g>=v||g===16&&(v&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)u=31-Un(o),g=1<<u,f|=s[u],o&=~g;return f}function vo(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(s,o){for(var u=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var b=31-Un(v),U=1<<b,B=g[b];B===-1?((U&u)===0||(U&f)!==0)&&(g[b]=vo(U,o)):B<=o&&(s.expiredLanes|=U),v&=~U}}function Wl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Hl(){var s=Fr;return Fr<<=1,(Fr&4194240)===0&&(Fr=64),s}function Gl(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function _o(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Un(o),s[o]=u}function ep(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-Un(u),v=1<<g;o[g]=0,f[g]=-1,s[g]=-1,u&=~v}}function Kl(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var f=31-Un(u),g=1<<f;g&o|s[f]&o&&(s[f]|=o),u&=~g}}var et=0;function Ur(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Ql,ya,Yl,Xl,Jl,zr=!1,va=[],Br=null,$r=null,rn=null,xo=new Map,Is=new Map,zn=[],zu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hi(s,o){switch(s){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":xo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(o.pointerId)}}function vr(s,o,u,f,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},o!==null&&(o=hc(o),o!==null&&ya(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function Bu(s,o,u,f,g){switch(o){case"focusin":return Br=vr(Br,s,o,u,f,g),!0;case"dragenter":return $r=vr($r,s,o,u,f,g),!0;case"mouseover":return rn=vr(rn,s,o,u,f,g),!0;case"pointerover":var v=g.pointerId;return xo.set(v,vr(xo.get(v)||null,s,o,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Is.set(v,vr(Is.get(v)||null,s,o,u,f,g)),!0}return!1}function wa(s){var o=Io(s.target);if(o!==null){var u=yr(o);if(u!==null){if(o=u.tag,o===13){if(o=zl(u),o!==null){s.blockedOn=o,Jl(s.priority,function(){Yl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ht(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=_a(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);oi=f,u.target.dispatchEvent(f),oi=null}else return o=hc(u),o!==null&&ya(o),s.blockedOn=u,!1;o.shift()}return!0}function $u(s,o,u){ht(s)&&u.delete(o)}function tp(){zr=!1,Br!==null&&ht(Br)&&(Br=null),$r!==null&&ht($r)&&($r=null),rn!==null&&ht(rn)&&(rn=null),xo.forEach($u),Is.forEach($u)}function fi(s,o){s.blockedOn===o&&(s.blockedOn=null,zr||(zr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tp)))}function pi(s){function o(g){return fi(g,s)}if(0<va.length){fi(va[0],s);for(var u=1;u<va.length;u++){var f=va[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Br!==null&&fi(Br,s),$r!==null&&fi($r,s),rn!==null&&fi(rn,s),xo.forEach(o),Is.forEach(o),u=0;u<zn.length;u++)f=zn[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<zn.length&&(u=zn[0],u.blockedOn===null);)wa(u),u.blockedOn===null&&zn.shift()}var bs=$.ReactCurrentBatchConfig,As=!0;function qr(s,o,u,f){var g=et,v=bs.transition;bs.transition=null;try{et=1,Zl(s,o,u,f)}finally{et=g,bs.transition=v}}function qu(s,o,u,f){var g=et,v=bs.transition;bs.transition=null;try{et=4,Zl(s,o,u,f)}finally{et=g,bs.transition=v}}function Zl(s,o,u,f){if(As){var g=_a(s,o,u,f);if(g===null)hp(s,o,f,Wr,u),hi(s,f);else if(Bu(g,s,o,u,f))f.stopPropagation();else if(hi(s,f),o&4&&-1<zu.indexOf(s)){for(;g!==null;){var v=hc(g);if(v!==null&&Ql(v),v=_a(s,o,u,f),v===null&&hp(s,o,f,Wr,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else hp(s,o,f,null,u)}}var Wr=null;function _a(s,o,u,f){if(Wr=null,s=ha(f),s=Io(s),s!==null)if(o=yr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=zl(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Wr=s,null}function xa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zf()){case ma:return 1;case $l:return 4;case mo:case ql:return 16;case ga:return 536870912;default:return 16}default:return 16}}var Bn=null,Ea=null,Ns=null;function Wu(){if(Ns)return Ns;var s,o=Ea,u=o.length,f,g="value"in Bn?Bn.value:Bn.textContent,v=g.length;for(s=0;s<u&&o[s]===g[s];s++);var b=u-s;for(f=1;f<=b&&o[u-f]===g[v-f];f++);return Ns=g.slice(s,1<f?1-f:void 0)}function Eo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Hr(){return!0}function ec(){return!1}function hn(s){function o(u,f,g,v,b){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(u=s[U],this[U]=u?u(v):v[U]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Hr:ec,this.isPropagationStopped=ec,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),o}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},To=hn(Gr),mi=le({},Gr,{view:0,detail:0}),Ta=hn(mi),Sa,Ia,$n,So=le({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:We,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==$n&&($n&&s.type==="mousemove"?(Sa=s.screenX-$n.screenX,Ia=s.screenY-$n.screenY):Ia=Sa=0,$n=s),Sa)},movementY:function(s){return"movementY"in s?s.movementY:Ia}}),tc=hn(So),Hu=le({},So,{dataTransfer:0}),Gu=hn(Hu),ba=le({},mi,{relatedTarget:0}),sn=hn(ba),Ku=le({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=hn(Ku),gi=le({},Gr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=hn(gi),_=le({},Gr,{data:0}),T=hn(_),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Z[s])?!!o[s]:!1}function We(){return pe}var Mt=le({},mi,{key:function(s){if(s.key){var o=k[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Eo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Q[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:We,charCode:function(s){return s.type==="keypress"?Eo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Eo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),dt=hn(Mt),Ft=le({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qn=hn(Ft),Cs=le({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:We}),Kr=hn(Cs),Qr=le({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aa=hn(Qr),nc=le({},So,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),NA=hn(nc),CA=[9,13,27,32],np=h&&"CompositionEvent"in window,rc=null;h&&"documentMode"in document&&(rc=document.documentMode);var RA=h&&"TextEvent"in window&&!rc,$v=h&&(!np||rc&&8<rc&&11>=rc),qv=" ",Wv=!1;function Hv(s,o){switch(s){case"keyup":return CA.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Na=!1;function kA(s,o){switch(s){case"compositionend":return Gv(o);case"keypress":return o.which!==32?null:(Wv=!0,qv);case"textInput":return s=o.data,s===qv&&Wv?null:s;default:return null}}function PA(s,o){if(Na)return s==="compositionend"||!np&&Hv(s,o)?(s=Wu(),Ns=Ea=Bn=null,Na=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $v&&o.locale!=="ko"?null:o.data;default:return null}}var jA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!jA[s.type]:o==="textarea"}function Qv(s,o,u,f){ai(f),o=ed(o,"onChange"),0<o.length&&(u=new To("onChange","change",null,u,f),s.push({event:u,listeners:o}))}var sc=null,ic=null;function DA(s){fw(s,0)}function Yu(s){var o=ja(s);if(Fe(o))return s}function MA(s,o){if(s==="change")return o}var Yv=!1;if(h){var rp;if(h){var sp="oninput"in document;if(!sp){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),sp=typeof Xv.oninput=="function"}rp=sp}else rp=!1;Yv=rp&&(!document.documentMode||9<document.documentMode)}function Jv(){sc&&(sc.detachEvent("onpropertychange",Zv),ic=sc=null)}function Zv(s){if(s.propertyName==="value"&&Yu(ic)){var o=[];Qv(o,ic,s,ha(s)),ju(DA,o)}}function OA(s,o,u){s==="focusin"?(Jv(),sc=o,ic=u,sc.attachEvent("onpropertychange",Zv)):s==="focusout"&&Jv()}function LA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yu(ic)}function VA(s,o){if(s==="click")return Yu(o)}function FA(s,o){if(s==="input"||s==="change")return Yu(o)}function UA(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var wr=typeof Object.is=="function"?Object.is:UA;function oc(s,o){if(wr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!p.call(o,g)||!wr(s[g],o[g]))return!1}return!0}function ew(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tw(s,o){var u=ew(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=o&&f>=o)return{node:u,offset:o-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ew(u)}}function nw(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?nw(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function rw(){for(var s=window,o=lt();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=lt(s.document)}return o}function ip(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function zA(s){var o=rw(),u=s.focusedElem,f=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&nw(u.ownerDocument.documentElement,u)){if(f!==null&&ip(u)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!s.extend&&v>f&&(g=f,f=v,v=g),g=tw(u,v);var b=tw(u,f);g&&b&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),v>f?(s.addRange(o),s.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var BA=h&&"documentMode"in document&&11>=document.documentMode,Ca=null,op=null,ac=null,ap=!1;function sw(s,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ap||Ca==null||Ca!==lt(f)||(f=Ca,"selectionStart"in f&&ip(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ac&&oc(ac,f)||(ac=f,f=ed(op,"onSelect"),0<f.length&&(o=new To("onSelect","select",null,o,u),s.push({event:o,listeners:f}),o.target=Ca)))}function Xu(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Ra={animationend:Xu("Animation","AnimationEnd"),animationiteration:Xu("Animation","AnimationIteration"),animationstart:Xu("Animation","AnimationStart"),transitionend:Xu("Transition","TransitionEnd")},lp={},iw={};h&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Ju(s){if(lp[s])return lp[s];if(!Ra[s])return s;var o=Ra[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in iw)return lp[s]=o[u];return s}var ow=Ju("animationend"),aw=Ju("animationiteration"),lw=Ju("animationstart"),cw=Ju("transitionend"),uw=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(s,o){uw.set(s,o),a(o,[s])}for(var cp=0;cp<dw.length;cp++){var up=dw[cp],$A=up.toLowerCase(),qA=up[0].toUpperCase()+up.slice(1);yi($A,"on"+qA)}yi(ow,"onAnimationEnd"),yi(aw,"onAnimationIteration"),yi(lw,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(cw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WA=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function hw(s,o,u){var f=s.type||"unknown-event";s.currentTarget=u,Ul(f,o,void 0,s),s.currentTarget=null}function fw(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],g=f.event;f=f.listeners;e:{var v=void 0;if(o)for(var b=f.length-1;0<=b;b--){var U=f[b],B=U.instance,J=U.currentTarget;if(U=U.listener,B!==v&&g.isPropagationStopped())break e;hw(g,U,J),v=B}else for(b=0;b<f.length;b++){if(U=f[b],B=U.instance,J=U.currentTarget,U=U.listener,B!==v&&g.isPropagationStopped())break e;hw(g,U,J),v=B}}}if(fa)throw s=rr,fa=!1,rr=null,s}function wt(s,o){var u=o[vp];u===void 0&&(u=o[vp]=new Set);var f=s+"__bubble";u.has(f)||(pw(o,s,2,!1),u.add(f))}function dp(s,o,u){var f=0;o&&(f|=4),pw(u,s,f,o)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function cc(s){if(!s[Zu]){s[Zu]=!0,r.forEach(function(u){u!=="selectionchange"&&(WA.has(u)||dp(u,!1,s),dp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Zu]||(o[Zu]=!0,dp("selectionchange",!1,o))}}function pw(s,o,u,f){switch(xa(o)){case 1:var g=qr;break;case 4:g=qu;break;default:g=Zl}u=g.bind(null,o,u,s),g=void 0,!ci||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function hp(s,o,u,f,g){var v=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var U=f.stateNode.containerInfo;if(U===g||U.nodeType===8&&U.parentNode===g)break;if(b===4)for(b=f.return;b!==null;){var B=b.tag;if((B===3||B===4)&&(B=b.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;b=b.return}for(;U!==null;){if(b=Io(U),b===null)return;if(B=b.tag,B===5||B===6){f=v=b;continue e}U=U.parentNode}}f=f.return}ju(function(){var J=v,ce=ha(u),ue=[];e:{var ae=uw.get(s);if(ae!==void 0){var xe=To,be=s;switch(s){case"keypress":if(Eo(u)===0)break e;case"keydown":case"keyup":xe=dt;break;case"focusin":be="focus",xe=sn;break;case"focusout":be="blur",xe=sn;break;case"beforeblur":case"afterblur":xe=sn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Kr;break;case ow:case aw:case lw:xe=Qu;break;case cw:xe=Aa;break;case"scroll":xe=Ta;break;case"wheel":xe=NA;break;case"copy":case"cut":case"paste":xe=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=qn}var Ce=(o&4)!==0,Ot=!Ce&&s==="scroll",K=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var W=J,Y;W!==null;){Y=W;var he=Y.stateNode;if(Y.tag===5&&he!==null&&(Y=he,K!==null&&(he=ho(W,K),he!=null&&Ce.push(uc(W,he,Y)))),Ot)break;W=W.return}0<Ce.length&&(ae=new xe(ae,be,null,u,ce),ue.push({event:ae,listeners:Ce}))}}if((o&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",ae&&u!==oi&&(be=u.relatedTarget||u.fromElement)&&(Io(be)||be[Rs]))break e;if((xe||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,xe?(be=u.relatedTarget||u.toElement,xe=J,be=be?Io(be):null,be!==null&&(Ot=yr(be),be!==Ot||be.tag!==5&&be.tag!==6)&&(be=null)):(xe=null,be=J),xe!==be)){if(Ce=tc,he="onMouseLeave",K="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=qn,he="onPointerLeave",K="onPointerEnter",W="pointer"),Ot=xe==null?ae:ja(xe),Y=be==null?ae:ja(be),ae=new Ce(he,W+"leave",xe,u,ce),ae.target=Ot,ae.relatedTarget=Y,he=null,Io(ce)===J&&(Ce=new Ce(K,W+"enter",be,u,ce),Ce.target=Y,Ce.relatedTarget=Ot,he=Ce),Ot=he,xe&&be)t:{for(Ce=xe,K=be,W=0,Y=Ce;Y;Y=ka(Y))W++;for(Y=0,he=K;he;he=ka(he))Y++;for(;0<W-Y;)Ce=ka(Ce),W--;for(;0<Y-W;)K=ka(K),Y--;for(;W--;){if(Ce===K||K!==null&&Ce===K.alternate)break t;Ce=ka(Ce),K=ka(K)}Ce=null}else Ce=null;xe!==null&&mw(ue,ae,xe,Ce,!1),be!==null&&Ot!==null&&mw(ue,Ot,be,Ce,!0)}}e:{if(ae=J?ja(J):window,xe=ae.nodeName&&ae.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ae.type==="file")var ke=MA;else if(Kv(ae))if(Yv)ke=FA;else{ke=LA;var Le=OA}else(xe=ae.nodeName)&&xe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(ke=VA);if(ke&&(ke=ke(s,J))){Qv(ue,ke,u,ce);break e}Le&&Le(s,ae,J),s==="focusout"&&(Le=ae._wrapperState)&&Le.controlled&&ae.type==="number"&&yt(ae,"number",ae.value)}switch(Le=J?ja(J):window,s){case"focusin":(Kv(Le)||Le.contentEditable==="true")&&(Ca=Le,op=J,ac=null);break;case"focusout":ac=op=Ca=null;break;case"mousedown":ap=!0;break;case"contextmenu":case"mouseup":case"dragend":ap=!1,sw(ue,u,ce);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":sw(ue,u,ce)}var Ve;if(np)e:{switch(s){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Na?Hv(s,u)&&(Be="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Be="onCompositionStart");Be&&($v&&u.locale!=="ko"&&(Na||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Na&&(Ve=Wu()):(Bn=ce,Ea="value"in Bn?Bn.value:Bn.textContent,Na=!0)),Le=ed(J,Be),0<Le.length&&(Be=new T(Be,s,null,u,ce),ue.push({event:Be,listeners:Le}),Ve?Be.data=Ve:(Ve=Gv(u),Ve!==null&&(Be.data=Ve)))),(Ve=RA?kA(s,u):PA(s,u))&&(J=ed(J,"onBeforeInput"),0<J.length&&(ce=new T("onBeforeInput","beforeinput",null,u,ce),ue.push({event:ce,listeners:J}),ce.data=Ve))}fw(ue,o)})}function uc(s,o,u){return{instance:s,listener:o,currentTarget:u}}function ed(s,o){for(var u=o+"Capture",f=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=ho(s,u),v!=null&&f.unshift(uc(s,v,g)),v=ho(s,o),v!=null&&f.push(uc(s,v,g))),s=s.return}return f}function ka(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function mw(s,o,u,f,g){for(var v=o._reactName,b=[];u!==null&&u!==f;){var U=u,B=U.alternate,J=U.stateNode;if(B!==null&&B===f)break;U.tag===5&&J!==null&&(U=J,g?(B=ho(u,v),B!=null&&b.unshift(uc(u,B,U))):g||(B=ho(u,v),B!=null&&b.push(uc(u,B,U)))),u=u.return}b.length!==0&&s.push({event:o,listeners:b})}var HA=/\r\n?/g,GA=/\u0000|\uFFFD/g;function gw(s){return(typeof s=="string"?s:""+s).replace(HA,`
`).replace(GA,"")}function td(s,o,u){if(o=gw(o),gw(s)!==o&&u)throw Error(t(425))}function nd(){}var fp=null,pp=null;function mp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gp=typeof setTimeout=="function"?setTimeout:void 0,KA=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(s){return yw.resolve(null).then(s).catch(YA)}:gp;function YA(s){setTimeout(function(){throw s})}function yp(s,o){var u=o,f=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){s.removeChild(g),pi(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);pi(o)}function vi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function vw(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Pa,dc="__reactProps$"+Pa,Rs="__reactContainer$"+Pa,vp="__reactEvents$"+Pa,XA="__reactListeners$"+Pa,JA="__reactHandles$"+Pa;function Io(s){var o=s[Yr];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Rs]||u[Yr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=vw(s);s!==null;){if(u=s[Yr])return u;s=vw(s)}return o}s=u,u=s.parentNode}return null}function hc(s){return s=s[Yr]||s[Rs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ja(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function rd(s){return s[dc]||null}var wp=[],Da=-1;function wi(s){return{current:s}}function _t(s){0>Da||(s.current=wp[Da],wp[Da]=null,Da--)}function pt(s,o){Da++,wp[Da]=s.current,s.current=o}var _i={},fn=wi(_i),Cn=wi(!1),bo=_i;function Ma(s,o){var u=s.type.contextTypes;if(!u)return _i;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=o[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function Rn(s){return s=s.childContextTypes,s!=null}function sd(){_t(Cn),_t(fn)}function ww(s,o,u){if(fn.current!==_i)throw Error(t(168));pt(fn,o),pt(Cn,u)}function _w(s,o,u){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,se(s)||"Unknown",g));return le({},u,f)}function id(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||_i,bo=fn.current,pt(fn,s),pt(Cn,Cn.current),!0}function xw(s,o,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=_w(s,o,bo),f.__reactInternalMemoizedMergedChildContext=s,_t(Cn),_t(fn),pt(fn,s)):_t(Cn),pt(Cn,u)}var ks=null,od=!1,_p=!1;function Ew(s){ks===null?ks=[s]:ks.push(s)}function ZA(s){od=!0,Ew(s)}function xi(){if(!_p&&ks!==null){_p=!0;var s=0,o=et;try{var u=ks;for(et=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}ks=null,od=!1}catch(g){throw ks!==null&&(ks=ks.slice(s+1)),Bl(ma,xi),g}finally{et=o,_p=!1}}return null}var Oa=[],La=0,ad=null,ld=0,ir=[],or=0,Ao=null,Ps=1,js="";function No(s,o){Oa[La++]=ld,Oa[La++]=ad,ad=s,ld=o}function Tw(s,o,u){ir[or++]=Ps,ir[or++]=js,ir[or++]=Ao,Ao=s;var f=Ps;s=js;var g=32-Un(f)-1;f&=~(1<<g),u+=1;var v=32-Un(o)+g;if(30<v){var b=g-g%5;v=(f&(1<<b)-1).toString(32),f>>=b,g-=b,Ps=1<<32-Un(o)+g|u<<g|f,js=v+s}else Ps=1<<v|u<<g|f,js=s}function xp(s){s.return!==null&&(No(s,1),Tw(s,1,0))}function Ep(s){for(;s===ad;)ad=Oa[--La],Oa[La]=null,ld=Oa[--La],Oa[La]=null;for(;s===Ao;)Ao=ir[--or],ir[or]=null,js=ir[--or],ir[or]=null,Ps=ir[--or],ir[or]=null}var Wn=null,Hn=null,xt=!1,_r=null;function Sw(s,o){var u=ur(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function Iw(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Wn=s,Hn=vi(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Wn=s,Hn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Ao!==null?{id:Ps,overflow:js}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=ur(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,Wn=s,Hn=null,!0):!1;default:return!1}}function Tp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Sp(s){if(xt){var o=Hn;if(o){var u=o;if(!Iw(s,o)){if(Tp(s))throw Error(t(418));o=vi(u.nextSibling);var f=Wn;o&&Iw(s,o)?Sw(f,u):(s.flags=s.flags&-4097|2,xt=!1,Wn=s)}}else{if(Tp(s))throw Error(t(418));s.flags=s.flags&-4097|2,xt=!1,Wn=s}}}function bw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Wn=s}function cd(s){if(s!==Wn)return!1;if(!xt)return bw(s),xt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!mp(s.type,s.memoizedProps)),o&&(o=Hn)){if(Tp(s))throw Aw(),Error(t(418));for(;o;)Sw(s,o),o=vi(o.nextSibling)}if(bw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Hn=vi(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Hn=null}}else Hn=Wn?vi(s.stateNode.nextSibling):null;return!0}function Aw(){for(var s=Hn;s;)s=vi(s.nextSibling)}function Va(){Hn=Wn=null,xt=!1}function Ip(s){_r===null?_r=[s]:_r.push(s)}var eN=$.ReactCurrentBatchConfig;function fc(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var g=f,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(b){var U=g.refs;b===null?delete U[v]:U[v]=b},o._stringRef=v,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function ud(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Nw(s){var o=s._init;return o(s._payload)}function Cw(s){function o(K,W){if(s){var Y=K.deletions;Y===null?(K.deletions=[W],K.flags|=16):Y.push(W)}}function u(K,W){if(!s)return null;for(;W!==null;)o(K,W),W=W.sibling;return null}function f(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function g(K,W){return K=Ci(K,W),K.index=0,K.sibling=null,K}function v(K,W,Y){return K.index=Y,s?(Y=K.alternate,Y!==null?(Y=Y.index,Y<W?(K.flags|=2,W):Y):(K.flags|=2,W)):(K.flags|=1048576,W)}function b(K){return s&&K.alternate===null&&(K.flags|=2),K}function U(K,W,Y,he){return W===null||W.tag!==6?(W=gm(Y,K.mode,he),W.return=K,W):(W=g(W,Y),W.return=K,W)}function B(K,W,Y,he){var ke=Y.type;return ke===j?ce(K,W,Y.props.children,he,Y.key):W!==null&&(W.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===de&&Nw(ke)===W.type)?(he=g(W,Y.props),he.ref=fc(K,W,Y),he.return=K,he):(he=Dd(Y.type,Y.key,Y.props,null,K.mode,he),he.ref=fc(K,W,Y),he.return=K,he)}function J(K,W,Y,he){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=ym(Y,K.mode,he),W.return=K,W):(W=g(W,Y.children||[]),W.return=K,W)}function ce(K,W,Y,he,ke){return W===null||W.tag!==7?(W=Oo(Y,K.mode,he,ke),W.return=K,W):(W=g(W,Y),W.return=K,W)}function ue(K,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=gm(""+W,K.mode,Y),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case G:return Y=Dd(W.type,W.key,W.props,null,K.mode,Y),Y.ref=fc(K,null,W),Y.return=K,Y;case ee:return W=ym(W,K.mode,Y),W.return=K,W;case de:var he=W._init;return ue(K,he(W._payload),Y)}if(Dt(W)||te(W))return W=Oo(W,K.mode,Y,null),W.return=K,W;ud(K,W)}return null}function ae(K,W,Y,he){var ke=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ke!==null?null:U(K,W,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:return Y.key===ke?B(K,W,Y,he):null;case ee:return Y.key===ke?J(K,W,Y,he):null;case de:return ke=Y._init,ae(K,W,ke(Y._payload),he)}if(Dt(Y)||te(Y))return ke!==null?null:ce(K,W,Y,he,null);ud(K,Y)}return null}function xe(K,W,Y,he,ke){if(typeof he=="string"&&he!==""||typeof he=="number")return K=K.get(Y)||null,U(W,K,""+he,ke);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case G:return K=K.get(he.key===null?Y:he.key)||null,B(W,K,he,ke);case ee:return K=K.get(he.key===null?Y:he.key)||null,J(W,K,he,ke);case de:var Le=he._init;return xe(K,W,Y,Le(he._payload),ke)}if(Dt(he)||te(he))return K=K.get(Y)||null,ce(W,K,he,ke,null);ud(W,he)}return null}function be(K,W,Y,he){for(var ke=null,Le=null,Ve=W,Be=W=0,Xt=null;Ve!==null&&Be<Y.length;Be++){Ve.index>Be?(Xt=Ve,Ve=null):Xt=Ve.sibling;var it=ae(K,Ve,Y[Be],he);if(it===null){Ve===null&&(Ve=Xt);break}s&&Ve&&it.alternate===null&&o(K,Ve),W=v(it,W,Be),Le===null?ke=it:Le.sibling=it,Le=it,Ve=Xt}if(Be===Y.length)return u(K,Ve),xt&&No(K,Be),ke;if(Ve===null){for(;Be<Y.length;Be++)Ve=ue(K,Y[Be],he),Ve!==null&&(W=v(Ve,W,Be),Le===null?ke=Ve:Le.sibling=Ve,Le=Ve);return xt&&No(K,Be),ke}for(Ve=f(K,Ve);Be<Y.length;Be++)Xt=xe(Ve,K,Be,Y[Be],he),Xt!==null&&(s&&Xt.alternate!==null&&Ve.delete(Xt.key===null?Be:Xt.key),W=v(Xt,W,Be),Le===null?ke=Xt:Le.sibling=Xt,Le=Xt);return s&&Ve.forEach(function(Ri){return o(K,Ri)}),xt&&No(K,Be),ke}function Ce(K,W,Y,he){var ke=te(Y);if(typeof ke!="function")throw Error(t(150));if(Y=ke.call(Y),Y==null)throw Error(t(151));for(var Le=ke=null,Ve=W,Be=W=0,Xt=null,it=Y.next();Ve!==null&&!it.done;Be++,it=Y.next()){Ve.index>Be?(Xt=Ve,Ve=null):Xt=Ve.sibling;var Ri=ae(K,Ve,it.value,he);if(Ri===null){Ve===null&&(Ve=Xt);break}s&&Ve&&Ri.alternate===null&&o(K,Ve),W=v(Ri,W,Be),Le===null?ke=Ri:Le.sibling=Ri,Le=Ri,Ve=Xt}if(it.done)return u(K,Ve),xt&&No(K,Be),ke;if(Ve===null){for(;!it.done;Be++,it=Y.next())it=ue(K,it.value,he),it!==null&&(W=v(it,W,Be),Le===null?ke=it:Le.sibling=it,Le=it);return xt&&No(K,Be),ke}for(Ve=f(K,Ve);!it.done;Be++,it=Y.next())it=xe(Ve,K,Be,it.value,he),it!==null&&(s&&it.alternate!==null&&Ve.delete(it.key===null?Be:it.key),W=v(it,W,Be),Le===null?ke=it:Le.sibling=it,Le=it);return s&&Ve.forEach(function(jN){return o(K,jN)}),xt&&No(K,Be),ke}function Ot(K,W,Y,he){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:e:{for(var ke=Y.key,Le=W;Le!==null;){if(Le.key===ke){if(ke=Y.type,ke===j){if(Le.tag===7){u(K,Le.sibling),W=g(Le,Y.props.children),W.return=K,K=W;break e}}else if(Le.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===de&&Nw(ke)===Le.type){u(K,Le.sibling),W=g(Le,Y.props),W.ref=fc(K,Le,Y),W.return=K,K=W;break e}u(K,Le);break}else o(K,Le);Le=Le.sibling}Y.type===j?(W=Oo(Y.props.children,K.mode,he,Y.key),W.return=K,K=W):(he=Dd(Y.type,Y.key,Y.props,null,K.mode,he),he.ref=fc(K,W,Y),he.return=K,K=he)}return b(K);case ee:e:{for(Le=Y.key;W!==null;){if(W.key===Le)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){u(K,W.sibling),W=g(W,Y.children||[]),W.return=K,K=W;break e}else{u(K,W);break}else o(K,W);W=W.sibling}W=ym(Y,K.mode,he),W.return=K,K=W}return b(K);case de:return Le=Y._init,Ot(K,W,Le(Y._payload),he)}if(Dt(Y))return be(K,W,Y,he);if(te(Y))return Ce(K,W,Y,he);ud(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(u(K,W.sibling),W=g(W,Y),W.return=K,K=W):(u(K,W),W=gm(Y,K.mode,he),W.return=K,K=W),b(K)):u(K,W)}return Ot}var Fa=Cw(!0),Rw=Cw(!1),dd=wi(null),hd=null,Ua=null,bp=null;function Ap(){bp=Ua=hd=null}function Np(s){var o=dd.current;_t(dd),s._currentValue=o}function Cp(s,o,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===u)break;s=s.return}}function za(s,o){hd=s,bp=Ua=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(kn=!0),s.firstContext=null)}function ar(s){var o=s._currentValue;if(bp!==s)if(s={context:s,memoizedValue:o,next:null},Ua===null){if(hd===null)throw Error(t(308));Ua=s,hd.dependencies={lanes:0,firstContext:s}}else Ua=Ua.next=s;return o}var Co=null;function Rp(s){Co===null?Co=[s]:Co.push(s)}function kw(s,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Rp(o)):(u.next=g.next,g.next=u),o.interleaved=u,Ds(s,f)}function Ds(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ei=!1;function kp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ms(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Ti(s,o,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(st&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Ds(s,u)}return g=f.interleaved,g===null?(o.next=o,Rp(f)):(o.next=g.next,g.next=o),f.interleaved=o,Ds(s,u)}function fd(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,Kl(s,u)}}function jw(s,o){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var b={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=b:v=v.next=b,u=u.next}while(u!==null);v===null?g=v=o:v=v.next=o}else g=v=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function pd(s,o,u,f){var g=s.updateQueue;Ei=!1;var v=g.firstBaseUpdate,b=g.lastBaseUpdate,U=g.shared.pending;if(U!==null){g.shared.pending=null;var B=U,J=B.next;B.next=null,b===null?v=J:b.next=J,b=B;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,U=ce.lastBaseUpdate,U!==b&&(U===null?ce.firstBaseUpdate=J:U.next=J,ce.lastBaseUpdate=B))}if(v!==null){var ue=g.baseState;b=0,ce=J=B=null,U=v;do{var ae=U.lane,xe=U.eventTime;if((f&ae)===ae){ce!==null&&(ce=ce.next={eventTime:xe,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var be=s,Ce=U;switch(ae=o,xe=u,Ce.tag){case 1:if(be=Ce.payload,typeof be=="function"){ue=be.call(xe,ue,ae);break e}ue=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ce.payload,ae=typeof be=="function"?be.call(xe,ue,ae):be,ae==null)break e;ue=le({},ue,ae);break e;case 2:Ei=!0}}U.callback!==null&&U.lane!==0&&(s.flags|=64,ae=g.effects,ae===null?g.effects=[U]:ae.push(U))}else xe={eventTime:xe,lane:ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ce===null?(J=ce=xe,B=ue):ce=ce.next=xe,b|=ae;if(U=U.next,U===null){if(U=g.shared.pending,U===null)break;ae=U,U=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(ce===null&&(B=ue),g.baseState=B,g.firstBaseUpdate=J,g.lastBaseUpdate=ce,o=g.shared.interleaved,o!==null){g=o;do b|=g.lane,g=g.next;while(g!==o)}else v===null&&(g.shared.lanes=0);Po|=b,s.lanes=b,s.memoizedState=ue}}function Dw(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var pc={},Xr=wi(pc),mc=wi(pc),gc=wi(pc);function Ro(s){if(s===pc)throw Error(t(174));return s}function Pp(s,o){switch(pt(gc,o),pt(mc,s),pt(Xr,pc),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ca(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ca(o,s)}_t(Xr),pt(Xr,o)}function Ba(){_t(Xr),_t(mc),_t(gc)}function Mw(s){Ro(gc.current);var o=Ro(Xr.current),u=ca(o,s.type);o!==u&&(pt(mc,s),pt(Xr,u))}function jp(s){mc.current===s&&(_t(Xr),_t(mc))}var St=wi(0);function md(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Dp=[];function Mp(){for(var s=0;s<Dp.length;s++)Dp[s]._workInProgressVersionPrimary=null;Dp.length=0}var gd=$.ReactCurrentDispatcher,Op=$.ReactCurrentBatchConfig,ko=0,It=null,Wt=null,Qt=null,yd=!1,yc=!1,vc=0,tN=0;function pn(){throw Error(t(321))}function Lp(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!wr(s[u],o[u]))return!1;return!0}function Vp(s,o,u,f,g,v){if(ko=v,It=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,gd.current=s===null||s.memoizedState===null?iN:oN,s=u(f,g),yc){v=0;do{if(yc=!1,vc=0,25<=v)throw Error(t(301));v+=1,Qt=Wt=null,o.updateQueue=null,gd.current=aN,s=u(f,g)}while(yc)}if(gd.current=_d,o=Wt!==null&&Wt.next!==null,ko=0,Qt=Wt=It=null,yd=!1,o)throw Error(t(300));return s}function Fp(){var s=vc!==0;return vc=0,s}function Jr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?It.memoizedState=Qt=s:Qt=Qt.next=s,Qt}function lr(){if(Wt===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=Wt.next;var o=Qt===null?It.memoizedState:Qt.next;if(o!==null)Qt=o,Wt=s;else{if(s===null)throw Error(t(310));Wt=s,s={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Qt===null?It.memoizedState=Qt=s:Qt=Qt.next=s}return Qt}function wc(s,o){return typeof o=="function"?o(s):o}function Up(s){var o=lr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=Wt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var b=g.next;g.next=v.next,v.next=b}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var U=b=null,B=null,J=v;do{var ce=J.lane;if((ko&ce)===ce)B!==null&&(B=B.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),f=J.hasEagerState?J.eagerState:s(f,J.action);else{var ue={lane:ce,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};B===null?(U=B=ue,b=f):B=B.next=ue,It.lanes|=ce,Po|=ce}J=J.next}while(J!==null&&J!==v);B===null?b=f:B.next=U,wr(f,o.memoizedState)||(kn=!0),o.memoizedState=f,o.baseState=b,o.baseQueue=B,u.lastRenderedState=f}if(s=u.interleaved,s!==null){g=s;do v=g.lane,It.lanes|=v,Po|=v,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function zp(s){var o=lr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,g=u.pending,v=o.memoizedState;if(g!==null){u.pending=null;var b=g=g.next;do v=s(v,b.action),b=b.next;while(b!==g);wr(v,o.memoizedState)||(kn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,f]}function Ow(){}function Lw(s,o){var u=It,f=lr(),g=o(),v=!wr(f.memoizedState,g);if(v&&(f.memoizedState=g,kn=!0),f=f.queue,Bp(Uw.bind(null,u,f,s),[s]),f.getSnapshot!==o||v||Qt!==null&&Qt.memoizedState.tag&1){if(u.flags|=2048,_c(9,Fw.bind(null,u,f,g,o),void 0,null),Yt===null)throw Error(t(349));(ko&30)!==0||Vw(u,o,g)}return g}function Vw(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=It.updateQueue,o===null?(o={lastEffect:null,stores:null},It.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Fw(s,o,u,f){o.value=u,o.getSnapshot=f,zw(o)&&Bw(s)}function Uw(s,o,u){return u(function(){zw(o)&&Bw(s)})}function zw(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!wr(s,u)}catch{return!0}}function Bw(s){var o=Ds(s,1);o!==null&&Sr(o,s,1,-1)}function $w(s){var o=Jr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:s},o.queue=s,s=s.dispatch=sN.bind(null,It,s),[o.memoizedState,s]}function _c(s,o,u,f){return s={tag:s,create:o,destroy:u,deps:f,next:null},o=It.updateQueue,o===null?(o={lastEffect:null,stores:null},It.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,o.lastEffect=s)),s}function qw(){return lr().memoizedState}function vd(s,o,u,f){var g=Jr();It.flags|=s,g.memoizedState=_c(1|o,u,void 0,f===void 0?null:f)}function wd(s,o,u,f){var g=lr();f=f===void 0?null:f;var v=void 0;if(Wt!==null){var b=Wt.memoizedState;if(v=b.destroy,f!==null&&Lp(f,b.deps)){g.memoizedState=_c(o,u,v,f);return}}It.flags|=s,g.memoizedState=_c(1|o,u,v,f)}function Ww(s,o){return vd(8390656,8,s,o)}function Bp(s,o){return wd(2048,8,s,o)}function Hw(s,o){return wd(4,2,s,o)}function Gw(s,o){return wd(4,4,s,o)}function Kw(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Qw(s,o,u){return u=u!=null?u.concat([s]):null,wd(4,4,Kw.bind(null,o,s),u)}function $p(){}function Yw(s,o){var u=lr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Lp(o,f[1])?f[0]:(u.memoizedState=[s,o],s)}function Xw(s,o){var u=lr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Lp(o,f[1])?f[0]:(s=s(),u.memoizedState=[s,o],s)}function Jw(s,o,u){return(ko&21)===0?(s.baseState&&(s.baseState=!1,kn=!0),s.memoizedState=u):(wr(u,o)||(u=Hl(),It.lanes|=u,Po|=u,s.baseState=!0),o)}function nN(s,o){var u=et;et=u!==0&&4>u?u:4,s(!0);var f=Op.transition;Op.transition={};try{s(!1),o()}finally{et=u,Op.transition=f}}function Zw(){return lr().memoizedState}function rN(s,o,u){var f=Ai(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},e_(s))t_(o,u);else if(u=kw(s,o,u,f),u!==null){var g=Sn();Sr(u,s,f,g),n_(u,o,f)}}function sN(s,o,u){var f=Ai(s),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(e_(s))t_(o,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var b=o.lastRenderedState,U=v(b,u);if(g.hasEagerState=!0,g.eagerState=U,wr(U,b)){var B=o.interleaved;B===null?(g.next=g,Rp(o)):(g.next=B.next,B.next=g),o.interleaved=g;return}}catch{}finally{}u=kw(s,o,g,f),u!==null&&(g=Sn(),Sr(u,s,f,g),n_(u,o,f))}}function e_(s){var o=s.alternate;return s===It||o!==null&&o===It}function t_(s,o){yc=yd=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function n_(s,o,u){if((u&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,Kl(s,u)}}var _d={readContext:ar,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},iN={readContext:ar,useCallback:function(s,o){return Jr().memoizedState=[s,o===void 0?null:o],s},useContext:ar,useEffect:Ww,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,vd(4194308,4,Kw.bind(null,o,s),u)},useLayoutEffect:function(s,o){return vd(4194308,4,s,o)},useInsertionEffect:function(s,o){return vd(4,2,s,o)},useMemo:function(s,o){var u=Jr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var f=Jr();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=rN.bind(null,It,s),[f.memoizedState,s]},useRef:function(s){var o=Jr();return s={current:s},o.memoizedState=s},useState:$w,useDebugValue:$p,useDeferredValue:function(s){return Jr().memoizedState=s},useTransition:function(){var s=$w(!1),o=s[0];return s=nN.bind(null,s[1]),Jr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var f=It,g=Jr();if(xt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Yt===null)throw Error(t(349));(ko&30)!==0||Vw(f,o,u)}g.memoizedState=u;var v={value:u,getSnapshot:o};return g.queue=v,Ww(Uw.bind(null,f,v,s),[s]),f.flags|=2048,_c(9,Fw.bind(null,f,v,u,o),void 0,null),u},useId:function(){var s=Jr(),o=Yt.identifierPrefix;if(xt){var u=js,f=Ps;u=(f&~(1<<32-Un(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=vc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=tN++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},oN={readContext:ar,useCallback:Yw,useContext:ar,useEffect:Bp,useImperativeHandle:Qw,useInsertionEffect:Hw,useLayoutEffect:Gw,useMemo:Xw,useReducer:Up,useRef:qw,useState:function(){return Up(wc)},useDebugValue:$p,useDeferredValue:function(s){var o=lr();return Jw(o,Wt.memoizedState,s)},useTransition:function(){var s=Up(wc)[0],o=lr().memoizedState;return[s,o]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Zw,unstable_isNewReconciler:!1},aN={readContext:ar,useCallback:Yw,useContext:ar,useEffect:Bp,useImperativeHandle:Qw,useInsertionEffect:Hw,useLayoutEffect:Gw,useMemo:Xw,useReducer:zp,useRef:qw,useState:function(){return zp(wc)},useDebugValue:$p,useDeferredValue:function(s){var o=lr();return Wt===null?o.memoizedState=s:Jw(o,Wt.memoizedState,s)},useTransition:function(){var s=zp(wc)[0],o=lr().memoizedState;return[s,o]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Zw,unstable_isNewReconciler:!1};function xr(s,o){if(s&&s.defaultProps){o=le({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function qp(s,o,u,f){o=s.memoizedState,u=u(f,o),u=u==null?o:le({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var xd={isMounted:function(s){return(s=s._reactInternals)?yr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var f=Sn(),g=Ai(s),v=Ms(f,g);v.payload=o,u!=null&&(v.callback=u),o=Ti(s,v,g),o!==null&&(Sr(o,s,g,f),fd(o,s,g))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var f=Sn(),g=Ai(s),v=Ms(f,g);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Ti(s,v,g),o!==null&&(Sr(o,s,g,f),fd(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Sn(),f=Ai(s),g=Ms(u,f);g.tag=2,o!=null&&(g.callback=o),o=Ti(s,g,f),o!==null&&(Sr(o,s,f,u),fd(o,s,f))}};function r_(s,o,u,f,g,v,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,b):o.prototype&&o.prototype.isPureReactComponent?!oc(u,f)||!oc(g,v):!0}function s_(s,o,u){var f=!1,g=_i,v=o.contextType;return typeof v=="object"&&v!==null?v=ar(v):(g=Rn(o)?bo:fn.current,f=o.contextTypes,v=(f=f!=null)?Ma(s,g):_i),o=new o(u,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=xd,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),o}function i_(s,o,u,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==s&&xd.enqueueReplaceState(o,o.state,null)}function Wp(s,o,u,f){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},kp(s);var v=o.contextType;typeof v=="object"&&v!==null?g.context=ar(v):(v=Rn(o)?bo:fn.current,g.context=Ma(s,v)),g.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(qp(s,o,v,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&xd.enqueueReplaceState(g,g.state,null),pd(s,u,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function $a(s,o){try{var u="",f=o;do u+=ve(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:g,digest:null}}function Hp(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Gp(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var lN=typeof WeakMap=="function"?WeakMap:Map;function o_(s,o,u){u=Ms(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Nd||(Nd=!0,lm=f),Gp(s,o)},u}function a_(s,o,u){u=Ms(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Gp(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Gp(s,o),typeof f!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),u}function l_(s,o,u){var f=s.pingCache;if(f===null){f=s.pingCache=new lN;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),s=EN.bind(null,s,o,u),o.then(s,s))}function c_(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function u_(s,o,u,f,g){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ms(-1,1),o.tag=2,Ti(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var cN=$.ReactCurrentOwner,kn=!1;function Tn(s,o,u,f){o.child=s===null?Rw(o,null,u,f):Fa(o,s.child,u,f)}function d_(s,o,u,f,g){u=u.render;var v=o.ref;return za(o,g),f=Vp(s,o,u,f,v,g),u=Fp(),s!==null&&!kn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Os(s,o,g)):(xt&&u&&xp(o),o.flags|=1,Tn(s,o,f,g),o.child)}function h_(s,o,u,f,g){if(s===null){var v=u.type;return typeof v=="function"&&!mm(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,f_(s,o,v,f,g)):(s=Dd(u.type,null,f,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,(s.lanes&g)===0){var b=v.memoizedProps;if(u=u.compare,u=u!==null?u:oc,u(b,f)&&s.ref===o.ref)return Os(s,o,g)}return o.flags|=1,s=Ci(v,f),s.ref=o.ref,s.return=o,o.child=s}function f_(s,o,u,f,g){if(s!==null){var v=s.memoizedProps;if(oc(v,f)&&s.ref===o.ref)if(kn=!1,o.pendingProps=f=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(kn=!0);else return o.lanes=s.lanes,Os(s,o,g)}return Kp(s,o,u,f,g)}function p_(s,o,u){var f=o.pendingProps,g=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Wa,Gn),Gn|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,pt(Wa,Gn),Gn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,pt(Wa,Gn),Gn|=f}else v!==null?(f=v.baseLanes|u,o.memoizedState=null):f=u,pt(Wa,Gn),Gn|=f;return Tn(s,o,g,u),o.child}function m_(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Kp(s,o,u,f,g){var v=Rn(u)?bo:fn.current;return v=Ma(o,v),za(o,g),u=Vp(s,o,u,f,v,g),f=Fp(),s!==null&&!kn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Os(s,o,g)):(xt&&f&&xp(o),o.flags|=1,Tn(s,o,u,g),o.child)}function g_(s,o,u,f,g){if(Rn(u)){var v=!0;id(o)}else v=!1;if(za(o,g),o.stateNode===null)Td(s,o),s_(o,u,f),Wp(o,u,f,g),f=!0;else if(s===null){var b=o.stateNode,U=o.memoizedProps;b.props=U;var B=b.context,J=u.contextType;typeof J=="object"&&J!==null?J=ar(J):(J=Rn(u)?bo:fn.current,J=Ma(o,J));var ce=u.getDerivedStateFromProps,ue=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function";ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U!==f||B!==J)&&i_(o,b,f,J),Ei=!1;var ae=o.memoizedState;b.state=ae,pd(o,f,b,g),B=o.memoizedState,U!==f||ae!==B||Cn.current||Ei?(typeof ce=="function"&&(qp(o,u,ce,f),B=o.memoizedState),(U=Ei||r_(o,u,U,f,ae,B,J))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=B),b.props=f,b.state=B,b.context=J,f=U):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,Pw(s,o),U=o.memoizedProps,J=o.type===o.elementType?U:xr(o.type,U),b.props=J,ue=o.pendingProps,ae=b.context,B=u.contextType,typeof B=="object"&&B!==null?B=ar(B):(B=Rn(u)?bo:fn.current,B=Ma(o,B));var xe=u.getDerivedStateFromProps;(ce=typeof xe=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U!==ue||ae!==B)&&i_(o,b,f,B),Ei=!1,ae=o.memoizedState,b.state=ae,pd(o,f,b,g);var be=o.memoizedState;U!==ue||ae!==be||Cn.current||Ei?(typeof xe=="function"&&(qp(o,u,xe,f),be=o.memoizedState),(J=Ei||r_(o,u,J,f,ae,be,B)||!1)?(ce||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,be,B),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,be,B)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||U===s.memoizedProps&&ae===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&ae===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=be),b.props=f,b.state=be,b.context=B,f=J):(typeof b.componentDidUpdate!="function"||U===s.memoizedProps&&ae===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&ae===s.memoizedState||(o.flags|=1024),f=!1)}return Qp(s,o,u,f,v,g)}function Qp(s,o,u,f,g,v){m_(s,o);var b=(o.flags&128)!==0;if(!f&&!b)return g&&xw(o,u,!1),Os(s,o,v);f=o.stateNode,cN.current=o;var U=b&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&b?(o.child=Fa(o,s.child,null,v),o.child=Fa(o,null,U,v)):Tn(s,o,U,v),o.memoizedState=f.state,g&&xw(o,u,!0),o.child}function y_(s){var o=s.stateNode;o.pendingContext?ww(s,o.pendingContext,o.pendingContext!==o.context):o.context&&ww(s,o.context,!1),Pp(s,o.containerInfo)}function v_(s,o,u,f,g){return Va(),Ip(g),o.flags|=256,Tn(s,o,u,f),o.child}var Yp={dehydrated:null,treeContext:null,retryLane:0};function Xp(s){return{baseLanes:s,cachePool:null,transitions:null}}function w_(s,o,u){var f=o.pendingProps,g=St.current,v=!1,b=(o.flags&128)!==0,U;if((U=b)||(U=s!==null&&s.memoizedState===null?!1:(g&2)!==0),U?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),pt(St,g&1),s===null)return Sp(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(b=f.children,s=f.fallback,v?(f=o.mode,v=o.child,b={mode:"hidden",children:b},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=b):v=Md(b,f,0,null),s=Oo(s,f,u,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=Xp(u),o.memoizedState=Yp,s):Jp(o,b));if(g=s.memoizedState,g!==null&&(U=g.dehydrated,U!==null))return uN(s,o,b,f,U,g,u);if(v){v=f.fallback,b=o.mode,g=s.child,U=g.sibling;var B={mode:"hidden",children:f.children};return(b&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=B,o.deletions=null):(f=Ci(g,B),f.subtreeFlags=g.subtreeFlags&14680064),U!==null?v=Ci(U,v):(v=Oo(v,b,u,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,b=s.child.memoizedState,b=b===null?Xp(u):{baseLanes:b.baseLanes|u,cachePool:null,transitions:b.transitions},v.memoizedState=b,v.childLanes=s.childLanes&~u,o.memoizedState=Yp,f}return v=s.child,s=v.sibling,f=Ci(v,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=f,o.memoizedState=null,f}function Jp(s,o){return o=Md({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Ed(s,o,u,f){return f!==null&&Ip(f),Fa(o,s.child,null,u),s=Jp(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function uN(s,o,u,f,g,v,b){if(u)return o.flags&256?(o.flags&=-257,f=Hp(Error(t(422))),Ed(s,o,b,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=f.fallback,g=o.mode,f=Md({mode:"visible",children:f.children},g,0,null),v=Oo(v,g,b,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,(o.mode&1)!==0&&Fa(o,s.child,null,b),o.child.memoizedState=Xp(b),o.memoizedState=Yp,v);if((o.mode&1)===0)return Ed(s,o,b,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var U=f.dgst;return f=U,v=Error(t(419)),f=Hp(v,f,void 0),Ed(s,o,b,f)}if(U=(b&s.childLanes)!==0,kn||U){if(f=Yt,f!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|b))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Ds(s,g),Sr(f,s,g,-1))}return pm(),f=Hp(Error(t(421))),Ed(s,o,b,f)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=TN.bind(null,s),g._reactRetry=o,null):(s=v.treeContext,Hn=vi(g.nextSibling),Wn=o,xt=!0,_r=null,s!==null&&(ir[or++]=Ps,ir[or++]=js,ir[or++]=Ao,Ps=s.id,js=s.overflow,Ao=o),o=Jp(o,f.children),o.flags|=4096,o)}function __(s,o,u){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),Cp(s.return,o,u)}function Zp(s,o,u,f,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function x_(s,o,u){var f=o.pendingProps,g=f.revealOrder,v=f.tail;if(Tn(s,o,f.children,u),f=St.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&__(s,u,o);else if(s.tag===19)__(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(pt(St,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&md(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Zp(o,!1,g,u,v);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&md(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Zp(o,!0,u,null,v);break;case"together":Zp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Td(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Os(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Po|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=Ci(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Ci(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function dN(s,o,u){switch(o.tag){case 3:y_(o),Va();break;case 5:Mw(o);break;case 1:Rn(o.type)&&id(o);break;case 4:Pp(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;pt(dd,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(pt(St,St.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?w_(s,o,u):(pt(St,St.current&1),s=Os(s,o,u),s!==null?s.sibling:null);pt(St,St.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(s.flags&128)!==0){if(f)return x_(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),pt(St,St.current),f)break;return null;case 22:case 23:return o.lanes=0,p_(s,o,u)}return Os(s,o,u)}var E_,em,T_,S_;E_=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},em=function(){},T_=function(s,o,u,f){var g=s.memoizedProps;if(g!==f){s=o.stateNode,Ro(Xr.current);var v=null;switch(u){case"input":g=qt(s,g),f=qt(s,f),v=[];break;case"select":g=le({},g,{value:void 0}),f=le({},f,{value:void 0}),v=[];break;case"textarea":g=Ml(s,g),f=Ml(s,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=nd)}gr(u,f);var b;u=null;for(J in g)if(!f.hasOwnProperty(J)&&g.hasOwnProperty(J)&&g[J]!=null)if(J==="style"){var U=g[J];for(b in U)U.hasOwnProperty(b)&&(u||(u={}),u[b]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?v||(v=[]):(v=v||[]).push(J,null));for(J in f){var B=f[J];if(U=g!=null?g[J]:void 0,f.hasOwnProperty(J)&&B!==U&&(B!=null||U!=null))if(J==="style")if(U){for(b in U)!U.hasOwnProperty(b)||B&&B.hasOwnProperty(b)||(u||(u={}),u[b]="");for(b in B)B.hasOwnProperty(b)&&U[b]!==B[b]&&(u||(u={}),u[b]=B[b])}else u||(v||(v=[]),v.push(J,u)),u=B;else J==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,U=U?U.__html:void 0,B!=null&&U!==B&&(v=v||[]).push(J,B)):J==="children"?typeof B!="string"&&typeof B!="number"||(v=v||[]).push(J,""+B):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(B!=null&&J==="onScroll"&&wt("scroll",s),v||U===B||(v=[])):(v=v||[]).push(J,B))}u&&(v=v||[]).push("style",u);var J=v;(o.updateQueue=J)&&(o.flags|=4)}},S_=function(s,o,u,f){u!==f&&(o.flags|=4)};function xc(s,o){if(!xt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function mn(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=u,o}function hN(s,o,u){var f=o.pendingProps;switch(Ep(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(o),null;case 1:return Rn(o.type)&&sd(),mn(o),null;case 3:return f=o.stateNode,Ba(),_t(Cn),_t(fn),Mp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(cd(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,_r!==null&&(dm(_r),_r=null))),em(s,o),mn(o),null;case 5:jp(o);var g=Ro(gc.current);if(u=o.type,s!==null&&o.stateNode!=null)T_(s,o,u,f,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return mn(o),null}if(s=Ro(Xr.current),cd(o)){f=o.stateNode,u=o.type;var v=o.memoizedProps;switch(f[Yr]=o,f[dc]=v,s=(o.mode&1)!==0,u){case"dialog":wt("cancel",f),wt("close",f);break;case"iframe":case"object":case"embed":wt("load",f);break;case"video":case"audio":for(g=0;g<lc.length;g++)wt(lc[g],f);break;case"source":wt("error",f);break;case"img":case"image":case"link":wt("error",f),wt("load",f);break;case"details":wt("toggle",f);break;case"input":dn(f,v),wt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},wt("invalid",f);break;case"textarea":Ol(f,v),wt("invalid",f)}gr(u,v),g=null;for(var b in v)if(v.hasOwnProperty(b)){var U=v[b];b==="children"?typeof U=="string"?f.textContent!==U&&(v.suppressHydrationWarning!==!0&&td(f.textContent,U,s),g=["children",U]):typeof U=="number"&&f.textContent!==""+U&&(v.suppressHydrationWarning!==!0&&td(f.textContent,U,s),g=["children",""+U]):i.hasOwnProperty(b)&&U!=null&&b==="onScroll"&&wt("scroll",f)}switch(u){case"input":me(f),co(f,v,!0);break;case"textarea":me(f),ni(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=nd)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ll(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=b.createElement(u,{is:f.is}):(s=b.createElement(u),u==="select"&&(b=s,f.multiple?b.multiple=!0:f.size&&(b.size=f.size))):s=b.createElementNS(s,u),s[Yr]=o,s[dc]=f,E_(s,o,!1,!1),o.stateNode=s;e:{switch(b=da(u,f),u){case"dialog":wt("cancel",s),wt("close",s),g=f;break;case"iframe":case"object":case"embed":wt("load",s),g=f;break;case"video":case"audio":for(g=0;g<lc.length;g++)wt(lc[g],s);g=f;break;case"source":wt("error",s),g=f;break;case"img":case"image":case"link":wt("error",s),wt("load",s),g=f;break;case"details":wt("toggle",s),g=f;break;case"input":dn(s,f),g=qt(s,f),wt("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=le({},f,{value:void 0}),wt("invalid",s);break;case"textarea":Ol(s,f),g=Ml(s,f),wt("invalid",s);break;default:g=f}gr(u,g),U=g;for(v in U)if(U.hasOwnProperty(v)){var B=U[v];v==="style"?ua(s,B):v==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Cu(s,B)):v==="children"?typeof B=="string"?(u!=="textarea"||B!=="")&&uo(s,B):typeof B=="number"&&uo(s,""+B):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?B!=null&&v==="onScroll"&&wt("scroll",s):B!=null&&P(s,v,B,b))}switch(u){case"input":me(s),co(s,f,!1);break;case"textarea":me(s),ni(s);break;case"option":f.value!=null&&s.setAttribute("value",""+we(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?mr(s,!!f.multiple,v,!1):f.defaultValue!=null&&mr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=nd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return mn(o),null;case 6:if(s&&o.stateNode!=null)S_(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=Ro(gc.current),Ro(Xr.current),cd(o)){if(f=o.stateNode,u=o.memoizedProps,f[Yr]=o,(v=f.nodeValue!==u)&&(s=Wn,s!==null))switch(s.tag){case 3:td(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&td(f.nodeValue,u,(s.mode&1)!==0)}v&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Yr]=o,o.stateNode=f}return mn(o),null;case 13:if(_t(St),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(xt&&Hn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Aw(),Va(),o.flags|=98560,v=!1;else if(v=cd(o),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Yr]=o}else Va(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;mn(o),v=!1}else _r!==null&&(dm(_r),_r=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(St.current&1)!==0?Ht===0&&(Ht=3):pm())),o.updateQueue!==null&&(o.flags|=4),mn(o),null);case 4:return Ba(),em(s,o),s===null&&cc(o.stateNode.containerInfo),mn(o),null;case 10:return Np(o.type._context),mn(o),null;case 17:return Rn(o.type)&&sd(),mn(o),null;case 19:if(_t(St),v=o.memoizedState,v===null)return mn(o),null;if(f=(o.flags&128)!==0,b=v.rendering,b===null)if(f)xc(v,!1);else{if(Ht!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(b=md(s),b!==null){for(o.flags|=128,xc(v,!1),f=b.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)v=u,s=f,v.flags&=14680066,b=v.alternate,b===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,s=b.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return pt(St,St.current&1|2),o.child}s=s.sibling}v.tail!==null&&vt()>Ha&&(o.flags|=128,f=!0,xc(v,!1),o.lanes=4194304)}else{if(!f)if(s=md(b),s!==null){if(o.flags|=128,f=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),xc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!xt)return mn(o),null}else 2*vt()-v.renderingStartTime>Ha&&u!==1073741824&&(o.flags|=128,f=!0,xc(v,!1),o.lanes=4194304);v.isBackwards?(b.sibling=o.child,o.child=b):(u=v.last,u!==null?u.sibling=b:o.child=b,v.last=b)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=vt(),o.sibling=null,u=St.current,pt(St,f?u&1|2:u&1),o):(mn(o),null);case 22:case 23:return fm(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(Gn&1073741824)!==0&&(mn(o),o.subtreeFlags&6&&(o.flags|=8192)):mn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function fN(s,o){switch(Ep(o),o.tag){case 1:return Rn(o.type)&&sd(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ba(),_t(Cn),_t(fn),Mp(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return jp(o),null;case 13:if(_t(St),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Va()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return _t(St),null;case 4:return Ba(),null;case 10:return Np(o.type._context),null;case 22:case 23:return fm(),null;case 24:return null;default:return null}}var Sd=!1,gn=!1,pN=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function qa(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){kt(s,o,f)}else u.current=null}function tm(s,o,u){try{u()}catch(f){kt(s,o,f)}}var I_=!1;function mN(s,o){if(fp=As,s=rw(),ip(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var b=0,U=-1,B=-1,J=0,ce=0,ue=s,ae=null;t:for(;;){for(var xe;ue!==u||g!==0&&ue.nodeType!==3||(U=b+g),ue!==v||f!==0&&ue.nodeType!==3||(B=b+f),ue.nodeType===3&&(b+=ue.nodeValue.length),(xe=ue.firstChild)!==null;)ae=ue,ue=xe;for(;;){if(ue===s)break t;if(ae===u&&++J===g&&(U=b),ae===v&&++ce===f&&(B=b),(xe=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=xe}u=U===-1||B===-1?null:{start:U,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(pp={focusedElem:s,selectionRange:u},As=!1,Ie=o;Ie!==null;)if(o=Ie,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Ie=s;else for(;Ie!==null;){o=Ie;try{var be=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Ce=be.memoizedProps,Ot=be.memoizedState,K=o.stateNode,W=K.getSnapshotBeforeUpdate(o.elementType===o.type?Ce:xr(o.type,Ce),Ot);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){kt(o,o.return,he)}if(s=o.sibling,s!==null){s.return=o.return,Ie=s;break}Ie=o.return}return be=I_,I_=!1,be}function Ec(s,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&tm(o,u,v)}g=g.next}while(g!==f)}}function Id(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function nm(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function b_(s){var o=s.alternate;o!==null&&(s.alternate=null,b_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Yr],delete o[dc],delete o[vp],delete o[XA],delete o[JA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function A_(s){return s.tag===5||s.tag===3||s.tag===4}function N_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function rm(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=nd));else if(f!==4&&(s=s.child,s!==null))for(rm(s,o,u),s=s.sibling;s!==null;)rm(s,o,u),s=s.sibling}function sm(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(sm(s,o,u),s=s.sibling;s!==null;)sm(s,o,u),s=s.sibling}var on=null,Er=!1;function Si(s,o,u){for(u=u.child;u!==null;)C_(s,o,u),u=u.sibling}function C_(s,o,u){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(go,u)}catch{}switch(u.tag){case 5:gn||qa(u,o);case 6:var f=on,g=Er;on=null,Si(s,o,u),on=f,Er=g,on!==null&&(Er?(s=on,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):on.removeChild(u.stateNode));break;case 18:on!==null&&(Er?(s=on,u=u.stateNode,s.nodeType===8?yp(s.parentNode,u):s.nodeType===1&&yp(s,u),pi(s)):yp(on,u.stateNode));break;case 4:f=on,g=Er,on=u.stateNode.containerInfo,Er=!0,Si(s,o,u),on=f,Er=g;break;case 0:case 11:case 14:case 15:if(!gn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,b=v.destroy;v=v.tag,b!==void 0&&((v&2)!==0||(v&4)!==0)&&tm(u,o,b),g=g.next}while(g!==f)}Si(s,o,u);break;case 1:if(!gn&&(qa(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(U){kt(u,o,U)}Si(s,o,u);break;case 21:Si(s,o,u);break;case 22:u.mode&1?(gn=(f=gn)||u.memoizedState!==null,Si(s,o,u),gn=f):Si(s,o,u);break;default:Si(s,o,u)}}function R_(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new pN),o.forEach(function(f){var g=SN.bind(null,s,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Tr(s,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=s,b=o,U=b;e:for(;U!==null;){switch(U.tag){case 5:on=U.stateNode,Er=!1;break e;case 3:on=U.stateNode.containerInfo,Er=!0;break e;case 4:on=U.stateNode.containerInfo,Er=!0;break e}U=U.return}if(on===null)throw Error(t(160));C_(v,b,g),on=null,Er=!1;var B=g.alternate;B!==null&&(B.return=null),g.return=null}catch(J){kt(g,o,J)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)k_(o,s),o=o.sibling}function k_(s,o){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Tr(o,s),Zr(s),f&4){try{Ec(3,s,s.return),Id(3,s)}catch(Ce){kt(s,s.return,Ce)}try{Ec(5,s,s.return)}catch(Ce){kt(s,s.return,Ce)}}break;case 1:Tr(o,s),Zr(s),f&512&&u!==null&&qa(u,u.return);break;case 5:if(Tr(o,s),Zr(s),f&512&&u!==null&&qa(u,u.return),s.flags&32){var g=s.stateNode;try{uo(g,"")}catch(Ce){kt(s,s.return,Ce)}}if(f&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,b=u!==null?u.memoizedProps:v,U=s.type,B=s.updateQueue;if(s.updateQueue=null,B!==null)try{U==="input"&&v.type==="radio"&&v.name!=null&&nr(g,v),da(U,b);var J=da(U,v);for(b=0;b<B.length;b+=2){var ce=B[b],ue=B[b+1];ce==="style"?ua(g,ue):ce==="dangerouslySetInnerHTML"?Cu(g,ue):ce==="children"?uo(g,ue):P(g,ce,ue,J)}switch(U){case"input":Vn(g,v);break;case"textarea":Nu(g,v);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var xe=v.value;xe!=null?mr(g,!!v.multiple,xe,!1):ae!==!!v.multiple&&(v.defaultValue!=null?mr(g,!!v.multiple,v.defaultValue,!0):mr(g,!!v.multiple,v.multiple?[]:"",!1))}g[dc]=v}catch(Ce){kt(s,s.return,Ce)}}break;case 6:if(Tr(o,s),Zr(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(Ce){kt(s,s.return,Ce)}}break;case 3:if(Tr(o,s),Zr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{pi(o.containerInfo)}catch(Ce){kt(s,s.return,Ce)}break;case 4:Tr(o,s),Zr(s);break;case 13:Tr(o,s),Zr(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(am=vt())),f&4&&R_(s);break;case 22:if(ce=u!==null&&u.memoizedState!==null,s.mode&1?(gn=(J=gn)||ce,Tr(o,s),gn=J):Tr(o,s),Zr(s),f&8192){if(J=s.memoizedState!==null,(s.stateNode.isHidden=J)&&!ce&&(s.mode&1)!==0)for(Ie=s,ce=s.child;ce!==null;){for(ue=Ie=ce;Ie!==null;){switch(ae=Ie,xe=ae.child,ae.tag){case 0:case 11:case 14:case 15:Ec(4,ae,ae.return);break;case 1:qa(ae,ae.return);var be=ae.stateNode;if(typeof be.componentWillUnmount=="function"){f=ae,u=ae.return;try{o=f,be.props=o.memoizedProps,be.state=o.memoizedState,be.componentWillUnmount()}catch(Ce){kt(f,u,Ce)}}break;case 5:qa(ae,ae.return);break;case 22:if(ae.memoizedState!==null){D_(ue);continue}}xe!==null?(xe.return=ae,Ie=xe):D_(ue)}ce=ce.sibling}e:for(ce=null,ue=s;;){if(ue.tag===5){if(ce===null){ce=ue;try{g=ue.stateNode,J?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(U=ue.stateNode,B=ue.memoizedProps.style,b=B!=null&&B.hasOwnProperty("display")?B.display:null,U.style.display=ii("display",b))}catch(Ce){kt(s,s.return,Ce)}}}else if(ue.tag===6){if(ce===null)try{ue.stateNode.nodeValue=J?"":ue.memoizedProps}catch(Ce){kt(s,s.return,Ce)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===s)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===s)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===s)break e;ce===ue&&(ce=null),ue=ue.return}ce===ue&&(ce=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Tr(o,s),Zr(s),f&4&&R_(s);break;case 21:break;default:Tr(o,s),Zr(s)}}function Zr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(A_(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(uo(g,""),f.flags&=-33);var v=N_(s);sm(s,v,g);break;case 3:case 4:var b=f.stateNode.containerInfo,U=N_(s);rm(s,U,b);break;default:throw Error(t(161))}}catch(B){kt(s,s.return,B)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function gN(s,o,u){Ie=s,P_(s)}function P_(s,o,u){for(var f=(s.mode&1)!==0;Ie!==null;){var g=Ie,v=g.child;if(g.tag===22&&f){var b=g.memoizedState!==null||Sd;if(!b){var U=g.alternate,B=U!==null&&U.memoizedState!==null||gn;U=Sd;var J=gn;if(Sd=b,(gn=B)&&!J)for(Ie=g;Ie!==null;)b=Ie,B=b.child,b.tag===22&&b.memoizedState!==null?M_(g):B!==null?(B.return=b,Ie=B):M_(g);for(;v!==null;)Ie=v,P_(v),v=v.sibling;Ie=g,Sd=U,gn=J}j_(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Ie=v):j_(s)}}function j_(s){for(;Ie!==null;){var o=Ie;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:gn||Id(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!gn)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:xr(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Dw(o,v,f);break;case 3:var b=o.updateQueue;if(b!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Dw(o,b,u)}break;case 5:var U=o.stateNode;if(u===null&&o.flags&4){u=U;var B=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&u.focus();break;case"img":B.src&&(u.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var J=o.alternate;if(J!==null){var ce=J.memoizedState;if(ce!==null){var ue=ce.dehydrated;ue!==null&&pi(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gn||o.flags&512&&nm(o)}catch(ae){kt(o,o.return,ae)}}if(o===s){Ie=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function D_(s){for(;Ie!==null;){var o=Ie;if(o===s){Ie=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function M_(s){for(;Ie!==null;){var o=Ie;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Id(4,o)}catch(B){kt(o,u,B)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(B){kt(o,g,B)}}var v=o.return;try{nm(o)}catch(B){kt(o,v,B)}break;case 5:var b=o.return;try{nm(o)}catch(B){kt(o,b,B)}}}catch(B){kt(o,o.return,B)}if(o===s){Ie=null;break}var U=o.sibling;if(U!==null){U.return=o.return,Ie=U;break}Ie=o.return}}var yN=Math.ceil,bd=$.ReactCurrentDispatcher,im=$.ReactCurrentOwner,cr=$.ReactCurrentBatchConfig,st=0,Yt=null,Ut=null,an=0,Gn=0,Wa=wi(0),Ht=0,Tc=null,Po=0,Ad=0,om=0,Sc=null,Pn=null,am=0,Ha=1/0,Ls=null,Nd=!1,lm=null,Ii=null,Cd=!1,bi=null,Rd=0,Ic=0,cm=null,kd=-1,Pd=0;function Sn(){return(st&6)!==0?vt():kd!==-1?kd:kd=vt()}function Ai(s){return(s.mode&1)===0?1:(st&2)!==0&&an!==0?an&-an:eN.transition!==null?(Pd===0&&(Pd=Hl()),Pd):(s=et,s!==0||(s=window.event,s=s===void 0?16:xa(s.type)),s)}function Sr(s,o,u,f){if(50<Ic)throw Ic=0,cm=null,Error(t(185));_o(s,u,f),((st&2)===0||s!==Yt)&&(s===Yt&&((st&2)===0&&(Ad|=u),Ht===4&&Ni(s,an)),jn(s,f),u===1&&st===0&&(o.mode&1)===0&&(Ha=vt()+500,od&&xi()))}function jn(s,o){var u=s.callbackNode;wo(s,o);var f=Ss(s,s===Yt?an:0);if(f===0)u!==null&&pa(u),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(u!=null&&pa(u),o===1)s.tag===0?ZA(L_.bind(null,s)):Ew(L_.bind(null,s)),QA(function(){(st&6)===0&&xi()}),u=null;else{switch(Ur(f)){case 1:u=ma;break;case 4:u=$l;break;case 16:u=mo;break;case 536870912:u=ga;break;default:u=mo}u=W_(u,O_.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function O_(s,o){if(kd=-1,Pd=0,(st&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Ga()&&s.callbackNode!==u)return null;var f=Ss(s,s===Yt?an:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=jd(s,f);else{o=f;var g=st;st|=2;var v=F_();(Yt!==s||an!==o)&&(Ls=null,Ha=vt()+500,Do(s,o));do try{_N();break}catch(U){V_(s,U)}while(!0);Ap(),bd.current=v,st=g,Ut!==null?o=0:(Yt=null,an=0,o=Ht)}if(o!==0){if(o===2&&(g=Wl(s),g!==0&&(f=g,o=um(s,g))),o===1)throw u=Tc,Do(s,0),Ni(s,f),jn(s,vt()),u;if(o===6)Ni(s,f);else{if(g=s.current.alternate,(f&30)===0&&!vN(g)&&(o=jd(s,f),o===2&&(v=Wl(s),v!==0&&(f=v,o=um(s,v))),o===1))throw u=Tc,Do(s,0),Ni(s,f),jn(s,vt()),u;switch(s.finishedWork=g,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Mo(s,Pn,Ls);break;case 3:if(Ni(s,f),(f&130023424)===f&&(o=am+500-vt(),10<o)){if(Ss(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){Sn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=gp(Mo.bind(null,s,Pn,Ls),o);break}Mo(s,Pn,Ls);break;case 4:if(Ni(s,f),(f&4194240)===f)break;for(o=s.eventTimes,g=-1;0<f;){var b=31-Un(f);v=1<<b,b=o[b],b>g&&(g=b),f&=~v}if(f=g,f=vt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*yN(f/1960))-f,10<f){s.timeoutHandle=gp(Mo.bind(null,s,Pn,Ls),f);break}Mo(s,Pn,Ls);break;case 5:Mo(s,Pn,Ls);break;default:throw Error(t(329))}}}return jn(s,vt()),s.callbackNode===u?O_.bind(null,s):null}function um(s,o){var u=Sc;return s.current.memoizedState.isDehydrated&&(Do(s,o).flags|=256),s=jd(s,o),s!==2&&(o=Pn,Pn=u,o!==null&&dm(o)),s}function dm(s){Pn===null?Pn=s:Pn.push.apply(Pn,s)}function vN(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!wr(v(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ni(s,o){for(o&=~om,o&=~Ad,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-Un(o),f=1<<u;s[u]=-1,o&=~f}}function L_(s){if((st&6)!==0)throw Error(t(327));Ga();var o=Ss(s,0);if((o&1)===0)return jn(s,vt()),null;var u=jd(s,o);if(s.tag!==0&&u===2){var f=Wl(s);f!==0&&(o=f,u=um(s,f))}if(u===1)throw u=Tc,Do(s,0),Ni(s,o),jn(s,vt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Mo(s,Pn,Ls),jn(s,vt()),null}function hm(s,o){var u=st;st|=1;try{return s(o)}finally{st=u,st===0&&(Ha=vt()+500,od&&xi())}}function jo(s){bi!==null&&bi.tag===0&&(st&6)===0&&Ga();var o=st;st|=1;var u=cr.transition,f=et;try{if(cr.transition=null,et=1,s)return s()}finally{et=f,cr.transition=u,st=o,(st&6)===0&&xi()}}function fm(){Gn=Wa.current,_t(Wa)}function Do(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,KA(u)),Ut!==null)for(u=Ut.return;u!==null;){var f=u;switch(Ep(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&sd();break;case 3:Ba(),_t(Cn),_t(fn),Mp();break;case 5:jp(f);break;case 4:Ba();break;case 13:_t(St);break;case 19:_t(St);break;case 10:Np(f.type._context);break;case 22:case 23:fm()}u=u.return}if(Yt=s,Ut=s=Ci(s.current,null),an=Gn=o,Ht=0,Tc=null,om=Ad=Po=0,Pn=Sc=null,Co!==null){for(o=0;o<Co.length;o++)if(u=Co[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var b=v.next;v.next=g,f.next=b}u.pending=f}Co=null}return s}function V_(s,o){do{var u=Ut;try{if(Ap(),gd.current=_d,yd){for(var f=It.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}yd=!1}if(ko=0,Qt=Wt=It=null,yc=!1,vc=0,im.current=null,u===null||u.return===null){Ht=1,Tc=o,Ut=null;break}e:{var v=s,b=u.return,U=u,B=o;if(o=an,U.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var J=B,ce=U,ue=ce.tag;if((ce.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=ce.alternate;ae?(ce.updateQueue=ae.updateQueue,ce.memoizedState=ae.memoizedState,ce.lanes=ae.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var xe=c_(b);if(xe!==null){xe.flags&=-257,u_(xe,b,U,v,o),xe.mode&1&&l_(v,J,o),o=xe,B=J;var be=o.updateQueue;if(be===null){var Ce=new Set;Ce.add(B),o.updateQueue=Ce}else be.add(B);break e}else{if((o&1)===0){l_(v,J,o),pm();break e}B=Error(t(426))}}else if(xt&&U.mode&1){var Ot=c_(b);if(Ot!==null){(Ot.flags&65536)===0&&(Ot.flags|=256),u_(Ot,b,U,v,o),Ip($a(B,U));break e}}v=B=$a(B,U),Ht!==4&&(Ht=2),Sc===null?Sc=[v]:Sc.push(v),v=b;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var K=o_(v,B,o);jw(v,K);break e;case 1:U=B;var W=v.type,Y=v.stateNode;if((v.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Ii===null||!Ii.has(Y)))){v.flags|=65536,o&=-o,v.lanes|=o;var he=a_(v,U,o);jw(v,he);break e}}v=v.return}while(v!==null)}z_(u)}catch(ke){o=ke,Ut===u&&u!==null&&(Ut=u=u.return);continue}break}while(!0)}function F_(){var s=bd.current;return bd.current=_d,s===null?_d:s}function pm(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Yt===null||(Po&268435455)===0&&(Ad&268435455)===0||Ni(Yt,an)}function jd(s,o){var u=st;st|=2;var f=F_();(Yt!==s||an!==o)&&(Ls=null,Do(s,o));do try{wN();break}catch(g){V_(s,g)}while(!0);if(Ap(),st=u,bd.current=f,Ut!==null)throw Error(t(261));return Yt=null,an=0,Ht}function wN(){for(;Ut!==null;)U_(Ut)}function _N(){for(;Ut!==null&&!po();)U_(Ut)}function U_(s){var o=q_(s.alternate,s,Gn);s.memoizedProps=s.pendingProps,o===null?z_(s):Ut=o,im.current=null}function z_(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=hN(u,o,Gn),u!==null){Ut=u;return}}else{if(u=fN(u,o),u!==null){u.flags&=32767,Ut=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ht=6,Ut=null;return}}if(o=o.sibling,o!==null){Ut=o;return}Ut=o=s}while(o!==null);Ht===0&&(Ht=5)}function Mo(s,o,u){var f=et,g=cr.transition;try{cr.transition=null,et=1,xN(s,o,u,f)}finally{cr.transition=g,et=f}return null}function xN(s,o,u,f){do Ga();while(bi!==null);if((st&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(ep(s,v),s===Yt&&(Ut=Yt=null,an=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Cd||(Cd=!0,W_(mo,function(){return Ga(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=cr.transition,cr.transition=null;var b=et;et=1;var U=st;st|=4,im.current=null,mN(s,u),k_(u,s),zA(pp),As=!!fp,pp=fp=null,s.current=u,gN(u),Ts(),st=U,et=b,cr.transition=v}else s.current=u;if(Cd&&(Cd=!1,bi=s,Rd=g),v=s.pendingLanes,v===0&&(Ii=null),Uu(u.stateNode),jn(s,vt()),o!==null)for(f=s.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Nd)throw Nd=!1,s=lm,lm=null,s;return(Rd&1)!==0&&s.tag!==0&&Ga(),v=s.pendingLanes,(v&1)!==0?s===cm?Ic++:(Ic=0,cm=s):Ic=0,xi(),null}function Ga(){if(bi!==null){var s=Ur(Rd),o=cr.transition,u=et;try{if(cr.transition=null,et=16>s?16:s,bi===null)var f=!1;else{if(s=bi,bi=null,Rd=0,(st&6)!==0)throw Error(t(331));var g=st;for(st|=4,Ie=s.current;Ie!==null;){var v=Ie,b=v.child;if((Ie.flags&16)!==0){var U=v.deletions;if(U!==null){for(var B=0;B<U.length;B++){var J=U[B];for(Ie=J;Ie!==null;){var ce=Ie;switch(ce.tag){case 0:case 11:case 15:Ec(8,ce,v)}var ue=ce.child;if(ue!==null)ue.return=ce,Ie=ue;else for(;Ie!==null;){ce=Ie;var ae=ce.sibling,xe=ce.return;if(b_(ce),ce===J){Ie=null;break}if(ae!==null){ae.return=xe,Ie=ae;break}Ie=xe}}}var be=v.alternate;if(be!==null){var Ce=be.child;if(Ce!==null){be.child=null;do{var Ot=Ce.sibling;Ce.sibling=null,Ce=Ot}while(Ce!==null)}}Ie=v}}if((v.subtreeFlags&2064)!==0&&b!==null)b.return=v,Ie=b;else e:for(;Ie!==null;){if(v=Ie,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Ec(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Ie=K;break e}Ie=v.return}}var W=s.current;for(Ie=W;Ie!==null;){b=Ie;var Y=b.child;if((b.subtreeFlags&2064)!==0&&Y!==null)Y.return=b,Ie=Y;else e:for(b=W;Ie!==null;){if(U=Ie,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Id(9,U)}}catch(ke){kt(U,U.return,ke)}if(U===b){Ie=null;break e}var he=U.sibling;if(he!==null){he.return=U.return,Ie=he;break e}Ie=U.return}}if(st=g,xi(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(go,s)}catch{}f=!0}return f}finally{et=u,cr.transition=o}}return!1}function B_(s,o,u){o=$a(u,o),o=o_(s,o,1),s=Ti(s,o,1),o=Sn(),s!==null&&(_o(s,1,o),jn(s,o))}function kt(s,o,u){if(s.tag===3)B_(s,s,u);else for(;o!==null;){if(o.tag===3){B_(o,s,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ii===null||!Ii.has(f))){s=$a(u,s),s=a_(o,s,1),o=Ti(o,s,1),s=Sn(),o!==null&&(_o(o,1,s),jn(o,s));break}}o=o.return}}function EN(s,o,u){var f=s.pingCache;f!==null&&f.delete(o),o=Sn(),s.pingedLanes|=s.suspendedLanes&u,Yt===s&&(an&u)===u&&(Ht===4||Ht===3&&(an&130023424)===an&&500>vt()-am?Do(s,0):om|=u),jn(s,o)}function $_(s,o){o===0&&((s.mode&1)===0?o=1:(o=di,di<<=1,(di&130023424)===0&&(di=4194304)));var u=Sn();s=Ds(s,o),s!==null&&(_o(s,o,u),jn(s,u))}function TN(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),$_(s,u)}function SN(s,o){var u=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),$_(s,u)}var q_;q_=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Cn.current)kn=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return kn=!1,dN(s,o,u);kn=(s.flags&131072)!==0}else kn=!1,xt&&(o.flags&1048576)!==0&&Tw(o,ld,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Td(s,o),s=o.pendingProps;var g=Ma(o,fn.current);za(o,u),g=Vp(null,o,f,s,g,u);var v=Fp();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Rn(f)?(v=!0,id(o)):v=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,kp(o),g.updater=xd,o.stateNode=g,g._reactInternals=o,Wp(o,f,s,u),o=Qp(null,o,f,!0,v,u)):(o.tag=0,xt&&v&&xp(o),Tn(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Td(s,o),s=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=bN(f),s=xr(f,s),g){case 0:o=Kp(null,o,f,s,u);break e;case 1:o=g_(null,o,f,s,u);break e;case 11:o=d_(null,o,f,s,u);break e;case 14:o=h_(null,o,f,xr(f.type,s),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xr(f,g),Kp(s,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xr(f,g),g_(s,o,f,g,u);case 3:e:{if(y_(o),s===null)throw Error(t(387));f=o.pendingProps,v=o.memoizedState,g=v.element,Pw(s,o),pd(o,f,null,u);var b=o.memoizedState;if(f=b.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){g=$a(Error(t(423)),o),o=v_(s,o,f,u,g);break e}else if(f!==g){g=$a(Error(t(424)),o),o=v_(s,o,f,u,g);break e}else for(Hn=vi(o.stateNode.containerInfo.firstChild),Wn=o,xt=!0,_r=null,u=Rw(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Va(),f===g){o=Os(s,o,u);break e}Tn(s,o,f,u)}o=o.child}return o;case 5:return Mw(o),s===null&&Sp(o),f=o.type,g=o.pendingProps,v=s!==null?s.memoizedProps:null,b=g.children,mp(f,g)?b=null:v!==null&&mp(f,v)&&(o.flags|=32),m_(s,o),Tn(s,o,b,u),o.child;case 6:return s===null&&Sp(o),null;case 13:return w_(s,o,u);case 4:return Pp(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Fa(o,null,f,u):Tn(s,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xr(f,g),d_(s,o,f,g,u);case 7:return Tn(s,o,o.pendingProps,u),o.child;case 8:return Tn(s,o,o.pendingProps.children,u),o.child;case 12:return Tn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,v=o.memoizedProps,b=g.value,pt(dd,f._currentValue),f._currentValue=b,v!==null)if(wr(v.value,b)){if(v.children===g.children&&!Cn.current){o=Os(s,o,u);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var U=v.dependencies;if(U!==null){b=v.child;for(var B=U.firstContext;B!==null;){if(B.context===f){if(v.tag===1){B=Ms(-1,u&-u),B.tag=2;var J=v.updateQueue;if(J!==null){J=J.shared;var ce=J.pending;ce===null?B.next=B:(B.next=ce.next,ce.next=B),J.pending=B}}v.lanes|=u,B=v.alternate,B!==null&&(B.lanes|=u),Cp(v.return,u,o),U.lanes|=u;break}B=B.next}}else if(v.tag===10)b=v.type===o.type?null:v.child;else if(v.tag===18){if(b=v.return,b===null)throw Error(t(341));b.lanes|=u,U=b.alternate,U!==null&&(U.lanes|=u),Cp(b,u,o),b=v.sibling}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===o){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}Tn(s,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,za(o,u),g=ar(g),f=f(g),o.flags|=1,Tn(s,o,f,u),o.child;case 14:return f=o.type,g=xr(f,o.pendingProps),g=xr(f.type,g),h_(s,o,f,g,u);case 15:return f_(s,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xr(f,g),Td(s,o),o.tag=1,Rn(f)?(s=!0,id(o)):s=!1,za(o,u),s_(o,f,g),Wp(o,f,g,u),Qp(null,o,f,!0,s,u);case 19:return x_(s,o,u);case 22:return p_(s,o,u)}throw Error(t(156,o.tag))};function W_(s,o){return Bl(s,o)}function IN(s,o,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(s,o,u,f){return new IN(s,o,u,f)}function mm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bN(s){if(typeof s=="function")return mm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===ye)return 14}return 2}function Ci(s,o){var u=s.alternate;return u===null?(u=ur(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Dd(s,o,u,f,g,v){var b=2;if(f=s,typeof s=="function")mm(s)&&(b=1);else if(typeof s=="string")b=5;else e:switch(s){case j:return Oo(u.children,g,v,o);case N:b=8,g|=8;break;case O:return s=ur(12,u,o,g|2),s.elementType=O,s.lanes=v,s;case D:return s=ur(13,u,o,g),s.elementType=D,s.lanes=v,s;case fe:return s=ur(19,u,o,g),s.elementType=fe,s.lanes=v,s;case _e:return Md(u,g,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:b=10;break e;case R:b=9;break e;case F:b=11;break e;case ye:b=14;break e;case de:b=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=ur(b,u,o,g),o.elementType=s,o.type=f,o.lanes=v,o}function Oo(s,o,u,f){return s=ur(7,s,f,o),s.lanes=u,s}function Md(s,o,u,f){return s=ur(22,s,f,o),s.elementType=_e,s.lanes=u,s.stateNode={isHidden:!1},s}function gm(s,o,u){return s=ur(6,s,null,o),s.lanes=u,s}function ym(s,o,u){return o=ur(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function AN(s,o,u,f,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gl(0),this.expirationTimes=Gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function vm(s,o,u,f,g,v,b,U,B){return s=new AN(s,o,u,U,B),o===1?(o=1,v===!0&&(o|=8)):o=0,v=ur(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},kp(v),s}function NN(s,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:f==null?null:""+f,children:s,containerInfo:o,implementation:u}}function H_(s){if(!s)return _i;s=s._reactInternals;e:{if(yr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Rn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Rn(u))return _w(s,u,o)}return o}function G_(s,o,u,f,g,v,b,U,B){return s=vm(u,f,!0,s,g,v,b,U,B),s.context=H_(null),u=s.current,f=Sn(),g=Ai(u),v=Ms(f,g),v.callback=o??null,Ti(u,v,g),s.current.lanes=g,_o(s,g,f),jn(s,f),s}function Od(s,o,u,f){var g=o.current,v=Sn(),b=Ai(g);return u=H_(u),o.context===null?o.context=u:o.pendingContext=u,o=Ms(v,b),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Ti(g,o,b),s!==null&&(Sr(s,g,b,v),fd(s,g,b)),b}function Ld(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function K_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function wm(s,o){K_(s,o),(s=s.alternate)&&K_(s,o)}function CN(){return null}var Q_=typeof reportError=="function"?reportError:function(s){console.error(s)};function _m(s){this._internalRoot=s}Vd.prototype.render=_m.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Od(s,o,null,null)},Vd.prototype.unmount=_m.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;jo(function(){Od(null,s,null,null)}),o[Rs]=null}};function Vd(s){this._internalRoot=s}Vd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Xl();s={blockedOn:null,target:s,priority:o};for(var u=0;u<zn.length&&o!==0&&o<zn[u].priority;u++);zn.splice(u,0,s),u===0&&wa(s)}};function xm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Fd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Y_(){}function RN(s,o,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var J=Ld(b);v.call(J)}}var b=G_(o,f,s,0,null,!1,!1,"",Y_);return s._reactRootContainer=b,s[Rs]=b.current,cc(s.nodeType===8?s.parentNode:s),jo(),b}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var U=f;f=function(){var J=Ld(B);U.call(J)}}var B=vm(s,0,!1,null,null,!1,!1,"",Y_);return s._reactRootContainer=B,s[Rs]=B.current,cc(s.nodeType===8?s.parentNode:s),jo(function(){Od(o,B,u,f)}),B}function Ud(s,o,u,f,g){var v=u._reactRootContainer;if(v){var b=v;if(typeof g=="function"){var U=g;g=function(){var B=Ld(b);U.call(B)}}Od(o,b,s,g)}else b=RN(u,o,s,g,f);return Ld(b)}Ql=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=ot(o.pendingLanes);u!==0&&(Kl(o,u|1),jn(o,vt()),(st&6)===0&&(Ha=vt()+500,xi()))}break;case 13:jo(function(){var f=Ds(s,1);if(f!==null){var g=Sn();Sr(f,s,1,g)}}),wm(s,1)}},ya=function(s){if(s.tag===13){var o=Ds(s,134217728);if(o!==null){var u=Sn();Sr(o,s,134217728,u)}wm(s,134217728)}},Yl=function(s){if(s.tag===13){var o=Ai(s),u=Ds(s,o);if(u!==null){var f=Sn();Sr(u,s,o,f)}wm(s,o)}},Xl=function(){return et},Jl=function(s,o){var u=et;try{return et=s,o()}finally{et=u}},_s=function(s,o,u){switch(o){case"input":if(Vn(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==s&&f.form===s.form){var g=rd(f);if(!g)throw Error(t(90));Fe(f),Vn(f,g)}}}break;case"textarea":Nu(s,u);break;case"select":o=u.value,o!=null&&mr(s,!!u.multiple,o,!1)}},ku=hm,Pu=jo;var kN={usingClientEntryPoint:!1,Events:[hc,ja,rd,ai,li,hm]},bc={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PN={bundleType:bc.bundleType,version:bc.version,rendererPackageName:bc.rendererPackageName,rendererConfig:bc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Fu(s),s===null?null:s.stateNode},findFiberByHostInstance:bc.findFiberByHostInstance||CN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{go=zd.inject(PN),Fn=zd}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kN,Dn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(o))throw Error(t(200));return NN(s,o,null,u)},Dn.createRoot=function(s,o){if(!xm(s))throw Error(t(299));var u=!1,f="",g=Q_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=vm(s,1,!1,null,null,u,!1,f,g),s[Rs]=o.current,cc(s.nodeType===8?s.parentNode:s),new _m(o)},Dn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Fu(o),s=s===null?null:s.stateNode,s},Dn.flushSync=function(s){return jo(s)},Dn.hydrate=function(s,o,u){if(!Fd(o))throw Error(t(200));return Ud(null,s,o,!0,u)},Dn.hydrateRoot=function(s,o,u){if(!xm(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",b=Q_;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),o=G_(o,null,s,1,u??null,g,!1,v,b),s[Rs]=o.current,cc(s),f)for(s=0;s<f.length;s++)u=f[s],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Vd(o)},Dn.render=function(s,o,u){if(!Fd(o))throw Error(t(200));return Ud(null,s,o,!1,u)},Dn.unmountComponentAtNode=function(s){if(!Fd(s))throw Error(t(40));return s._reactRootContainer?(jo(function(){Ud(null,null,s,!1,function(){s._reactRootContainer=null,s[Rs]=null})}),!0):!1},Dn.unstable_batchedUpdates=hm,Dn.unstable_renderSubtreeIntoContainer=function(s,o,u,f){if(!Fd(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ud(s,o,u,!1,f)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var sx;function kE(){if(sx)return Sm.exports;sx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sm.exports=UN(),Sm.exports}var ix;function zN(){if(ix)return Bd;ix=1;var n=kE();return Bd.createRoot=n.createRoot,Bd.hydrateRoot=n.hydrateRoot,Bd}var BN=zN(),E=Jg();const Fs=RE(E),$N=DN({__proto__:null,default:Fs},[E]);var qN=(n,e,t,r,i,a,l,h)=>{let p=document.documentElement,m=["light","dark"];function y(I){(Array.isArray(n)?n:[n]).forEach(C=>{let A=C==="class",S=A&&a?i.map(V=>a[V]||V):i;A?(p.classList.remove(...S),p.classList.add(a&&a[I]?a[I]:I)):p.setAttribute(C,I)}),w(I)}function w(I){h&&m.includes(I)&&(p.style.colorScheme=I)}function x(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)y(r);else try{let I=localStorage.getItem(e)||t,C=l&&I==="system"?x():I;y(C)}catch{}},ox=["light","dark"],PE="(prefers-color-scheme: dark)",WN=typeof window>"u",Zg=E.createContext(void 0),HN={setTheme:n=>{},themes:[]},GN=()=>{var n;return(n=E.useContext(Zg))!=null?n:HN},KN=n=>E.useContext(Zg)?E.createElement(E.Fragment,null,n.children):E.createElement(YN,{...n}),QN=["light","dark"],YN=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=QN,defaultTheme:l=t?"system":"light",attribute:h="data-theme",value:p,children:m,nonce:y,scriptProps:w})=>{let[x,I]=E.useState(()=>JN(i,l)),[C,A]=E.useState(()=>x==="system"?Am():x),S=p?Object.values(p):a,V=E.useCallback(G=>{let ee=G;if(!ee)return;G==="system"&&t&&(ee=Am());let j=p?p[ee]:ee,N=e?ZN(y):null,O=document.documentElement,L=R=>{R==="class"?(O.classList.remove(...S),j&&O.classList.add(j)):R.startsWith("data-")&&(j?O.setAttribute(R,j):O.removeAttribute(R))};if(Array.isArray(h)?h.forEach(L):L(h),r){let R=ox.includes(l)?l:null,F=ox.includes(ee)?ee:R;O.style.colorScheme=F}N==null||N()},[y]),M=E.useCallback(G=>{let ee=typeof G=="function"?G(x):G;I(ee);try{localStorage.setItem(i,ee)}catch{}},[x]),P=E.useCallback(G=>{let ee=Am(G);A(ee),x==="system"&&t&&!n&&V("system")},[x,n]);E.useEffect(()=>{let G=window.matchMedia(PE);return G.addListener(P),P(G),()=>G.removeListener(P)},[P]),E.useEffect(()=>{let G=ee=>{ee.key===i&&(ee.newValue?I(ee.newValue):M(l))};return window.addEventListener("storage",G),()=>window.removeEventListener("storage",G)},[M]),E.useEffect(()=>{V(n??x)},[n,x]);let $=E.useMemo(()=>({theme:x,setTheme:M,forcedTheme:n,resolvedTheme:x==="system"?C:x,themes:t?[...a,"system"]:a,systemTheme:t?C:void 0}),[x,M,n,C,t,a]);return E.createElement(Zg.Provider,{value:$},E.createElement(XN,{forcedTheme:n,storageKey:i,attribute:h,enableSystem:t,enableColorScheme:r,defaultTheme:l,value:p,themes:a,nonce:y,scriptProps:w}),m)},XN=E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:l,themes:h,nonce:p,scriptProps:m})=>{let y=JSON.stringify([t,e,a,n,h,l,r,i]).slice(1,-1);return E.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(${qN.toString()})(${y})`}})}),JN=(n,e)=>{if(WN)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},ZN=n=>{let e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Am=n=>(n||(n=window.matchMedia(PE)),n.matches?"dark":"light");const eC="modulepreload",tC=function(n){return"/"+n},ax={},lx=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));i=l(t.map(m=>{if(m=tC(m),m in ax)return;ax[m]=!0;const y=m.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":eC,y||(x.as="script"),x.crossOrigin="",x.href=m,p&&x.setAttribute("nonce",p),document.head.appendChild(x),y)return new Promise((I,C)=>{x.addEventListener("load",I),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return i.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},nC=()=>{};var cx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],h=n[t++],p=((i&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},DE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,h=l?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,y=a>>2,w=(a&3)<<4|h>>4;let x=(h&15)<<2|m>>6,I=m&63;p||(I=64,l||(x=64)),r.push(t[y],t[w],t[x],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const w=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||h==null||m==null||w==null)throw new sC;const x=a<<2|h>>4;if(r.push(x),m!==64){const I=h<<4&240|m>>2;if(r.push(I),w!==64){const C=m<<6&192|w;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iC=function(n){const e=jE(n);return DE.encodeByteArray(e,!0)},Eh=function(n){return iC(n).replace(/\./g,"")},ME=function(n){try{return DE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=()=>oC().__FIREBASE_DEFAULTS__,lC=()=>{if(typeof process>"u"||typeof cx>"u")return;const n=cx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ME(n[1]);return e&&JSON.parse(e)},Jh=()=>{try{return nC()||aC()||lC()||cC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OE=n=>{var e,t;return(t=(e=Jh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ey=n=>{const e=OE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},LE=()=>{var n;return(n=Jh())==null?void 0:n.config},VE=n=>{var e;return(e=Jh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zh(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Eh(JSON.stringify(t)),Eh(JSON.stringify(l)),""].join(".")}const Vc={};function dC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vc))Vc[e]?n.emulator.push(e):n.prod.push(e);return n}function hC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ux=!1;function ef(n,e){if(typeof window>"u"||typeof document>"u"||!Zs(window.location.host)||Vc[n]===e||Vc[n]||ux)return;Vc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=dC().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,I){x.setAttribute("width","24"),x.setAttribute("id",I),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ux=!0,l()},x}function y(x,I){x.setAttribute("id",I),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=hC(r),I=t("text"),C=document.getElementById(I)||document.createElement("span"),A=t("learnmore"),S=document.getElementById(A)||document.createElement("a"),V=t("preprendIcon"),M=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;h(P),y(S,A);const $=m();p(M,V),P.append(M,C,S,$),document.body.appendChild(P)}a?(C.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function pC(){var e;const n=(e=Jh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vC(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function wC(){return!pC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function xC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="FirebaseError";class ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=EC,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?TC(a,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new ms(i,h,r)}}function TC(n,e){return n.replace(SC,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SC=/\{\$([^}]+)}/g;function IC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ho(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(dx(a)&&dx(l)){if(!Ho(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function dx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Pc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bC(n,e){const t=new AC(n,e);return t.subscribe.bind(t)}class AC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");NC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nm),i.error===void 0&&(i.error=Nm),i.complete===void 0&&(i.complete=Nm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(n){return n&&n._delegate?n._delegate:n}class Ws{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kC(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RC(n){return n===Fo?void 0:n}function kC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const jC={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},DC=Xe.INFO,MC={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},OC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=MC[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ty{constructor(e){this.name=e,this._logLevel=DC,this._logHandler=OC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const LC=(n,e)=>e.some(t=>n instanceof t);let hx,fx;function VC(){return hx||(hx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FC(){return fx||(fx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UE=new WeakMap,rg=new WeakMap,zE=new WeakMap,Cm=new WeakMap,ny=new WeakMap;function UC(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ui(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&UE.set(t,n)}).catch(()=>{}),ny.set(e,n),e}function zC(n){if(rg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});rg.set(n,e)}let sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BC(n){sg=n(sg)}function $C(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Rm(this),e,...t);return zE.set(r,e.sort?e.sort():[e]),Ui(r)}:FC().includes(n)?function(...e){return n.apply(Rm(this),e),Ui(UE.get(this))}:function(...e){return Ui(n.apply(Rm(this),e))}}function qC(n){return typeof n=="function"?$C(n):(n instanceof IDBTransaction&&zC(n),LC(n,VC())?new Proxy(n,sg):n)}function Ui(n){if(n instanceof IDBRequest)return UC(n);if(Cm.has(n))return Cm.get(n);const e=qC(n);return e!==n&&(Cm.set(n,e),ny.set(e,n)),e}const Rm=n=>ny.get(n);function WC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=Ui(l);return r&&l.addEventListener("upgradeneeded",p=>{r(Ui(l.result),p.oldVersion,p.newVersion,Ui(l.transaction),p)}),t&&l.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const HC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],km=new Map;function px(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(km.get(e))return km.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=GC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HC.includes(t)))return;const a=async function(l,...h){const p=this.transaction(l,i?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),i&&p.done]))[0]};return km.set(e,a),a}BC(n=>({...n,get:(e,t,r)=>px(e,t)||n.get(e,t,r),has:(e,t)=>!!px(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function QC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ig="@firebase/app",mx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new ty("@firebase/app"),YC="@firebase/app-compat",XC="@firebase/analytics-compat",JC="@firebase/analytics",ZC="@firebase/app-check-compat",eR="@firebase/app-check",tR="@firebase/auth",nR="@firebase/auth-compat",rR="@firebase/database",sR="@firebase/data-connect",iR="@firebase/database-compat",oR="@firebase/functions",aR="@firebase/functions-compat",lR="@firebase/installations",cR="@firebase/installations-compat",uR="@firebase/messaging",dR="@firebase/messaging-compat",hR="@firebase/performance",fR="@firebase/performance-compat",pR="@firebase/remote-config",mR="@firebase/remote-config-compat",gR="@firebase/storage",yR="@firebase/storage-compat",vR="@firebase/firestore",wR="@firebase/ai",_R="@firebase/firestore-compat",xR="firebase",ER="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="[DEFAULT]",TR={[ig]:"fire-core",[YC]:"fire-core-compat",[JC]:"fire-analytics",[XC]:"fire-analytics-compat",[eR]:"fire-app-check",[ZC]:"fire-app-check-compat",[tR]:"fire-auth",[nR]:"fire-auth-compat",[rR]:"fire-rtdb",[sR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[oR]:"fire-fn",[aR]:"fire-fn-compat",[lR]:"fire-iid",[cR]:"fire-iid-compat",[uR]:"fire-fcm",[dR]:"fire-fcm-compat",[hR]:"fire-perf",[fR]:"fire-perf-compat",[pR]:"fire-rc",[mR]:"fire-rc-compat",[gR]:"fire-gcs",[yR]:"fire-gcs-compat",[vR]:"fire-fst",[_R]:"fire-fst-compat",[wR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,SR=new Map,ag=new Map;function gx(n,e){try{n.container.addComponent(e)}catch(t){Hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qi(n){const e=n.name;if(ag.has(e))return Hs.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,n);for(const t of Th.values())gx(t,n);for(const t of SR.values())gx(t,n);return!0}function cu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _n(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zi=new au("app","Firebase",IR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=ER;function BE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:og,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw zi.create("bad-app-name",{appName:String(i)});if(t||(t=LE()),!t)throw zi.create("no-options");const a=Th.get(i);if(a){if(Ho(t,a.options)&&Ho(r,a.config))return a;throw zi.create("duplicate-app",{appName:i})}const l=new PC(i);for(const p of ag.values())l.addComponent(p);const h=new bR(t,r,l);return Th.set(i,h),h}function tf(n=og){const e=Th.get(n);if(!e&&n===og&&LE())return BE();if(!e)throw zi.create("no-app",{appName:n});return e}function hr(n,e,t){let r=TR[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hs.warn(l.join(" "));return}Qi(new Ws(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebase-heartbeat-database",NR=1,Gc="firebase-heartbeat-store";let Pm=null;function $E(){return Pm||(Pm=WC(AR,NR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw zi.create("idb-open",{originalErrorMessage:n.message})})),Pm}async function CR(n){try{const t=(await $E()).transaction(Gc),r=await t.objectStore(Gc).get(qE(n));return await t.done,r}catch(e){if(e instanceof ms)Hs.warn(e.message);else{const t=zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hs.warn(t.message)}}}async function yx(n,e){try{const r=(await $E()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,qE(n)),await r.done}catch(t){if(t instanceof ms)Hs.warn(t.message);else{const r=zi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hs.warn(r.message)}}}function qE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=1024,kR=30;class PR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=vx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>kR){const l=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vx(),{heartbeatsToSend:r,unsentEntries:i}=jR(this._heartbeatsCache.heartbeats),a=Eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Hs.warn(t),""}}}function vx(){return new Date().toISOString().substring(0,10)}function jR(n,e=RR){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),wx(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),wx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class DR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?xC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wx(n){return Eh(JSON.stringify({version:2,heartbeats:n})).length}function MR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n){Qi(new Ws("platform-logger",e=>new KC(e),"PRIVATE")),Qi(new Ws("heartbeat",e=>new PR(e),"PRIVATE")),hr(ig,mx,n),hr(ig,mx,"esm2020"),hr("fire-js","")}OR("");function WE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=WE,HE=new au("auth","Firebase",WE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new ty("@firebase/auth");function VR(n,...e){Sh.logLevel<=Xe.WARN&&Sh.warn(`Auth (${sa}): ${n}`,...e)}function lh(n,...e){Sh.logLevel<=Xe.ERROR&&Sh.error(`Auth (${sa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(n,...e){throw sy(n,...e)}function Nr(n,...e){return sy(n,...e)}function ry(n,e,t){const r={...LR(),[e]:t};return new au("auth","Firebase",r).create(e,{appName:n.name})}function as(n){return ry(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&er(n,"argument-error"),ry(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HE.create(n,...e)}function Oe(n,e,...t){if(!n)throw sy(e,...t)}function zs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lh(e),new Error(e)}function Gs(n,e){n||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function FR(){return _x()==="http:"||_x()==="https:"}function _x(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FR()||gC()||"connection"in navigator)?navigator.onLine:!0}function zR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gs(t>e,"Short delay should be less than long delay!"),this.isMobile=fC()||yC()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n,e){Gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qR=new uu(3e4,6e4);function gs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ys(n,e,t,r,i={}){return QE(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=lu({key:n.config.apiKey,...l}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...a};return mC()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Zs(n.emulatorConfig.host)&&(m.credentials="include"),KE.fetch()(await YE(n,n.config.apiHost,t,h),m)})}async function QE(n,e,t){n._canInitEmulator=!1;const r={...BR,...e};try{const i=new HR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw $d(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw $d(n,"credential-already-in-use",l);if(p==="EMAIL_EXISTS")throw $d(n,"email-already-in-use",l);if(p==="USER_DISABLED")throw $d(n,"user-disabled",l);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw ry(n,y,m);er(n,y)}}catch(i){if(i instanceof ms)throw i;er(n,"network-request-failed",{message:String(i)})}}async function du(n,e,t,r,i={}){const a=await ys(n,e,t,r,i);return"mfaPendingCredential"in a&&er(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function YE(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?iy(n.config,i):`${n.config.apiScheme}://${i}`;return $R.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function WR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),qR.get())})}}function $d(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Nr(n,e,r);return i.customData._tokenResponse=t,i}function xx(n){return n!==void 0&&n.enterprise!==void 0}class GR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KR(n,e){return ys(n,"GET","/v2/recaptchaConfig",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(n,e){return ys(n,"POST","/v1/accounts:delete",e)}async function Ih(n,e){return ys(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YR(n,e=!1){const t=at(n),r=await t.getIdToken(e),i=oy(r);Oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Fc(jm(i.auth_time)),issuedAtTime:Fc(jm(i.iat)),expirationTime:Fc(jm(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function jm(n){return Number(n)*1e3}function oy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const i=ME(t);return i?JSON.parse(i):(lh("Failed to decode base64 JWT payload"),null)}catch(i){return lh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ex(n){const e=oy(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ms&&XR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fc(this.lastLoginAt),this.creationTime=Fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(n){var w;const e=n.auth,t=await n.getIdToken(),r=await Kc(n,Ih(e,{idToken:t}));Oe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=(w=i.providerUserInfo)!=null&&w.length?XE(i.providerUserInfo):[],l=ek(n.providerData,a),h=n.isAnonymous,p=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),m=h?p:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new cg(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function ZR(n){const e=at(n);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ek(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(n,e){const t=await QE(n,{},async()=>{const r=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await YE(n,i,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:r};return n.emulatorConfig&&Zs(n.emulatorConfig.host)&&(p.credentials="include"),KE.fetch()(l,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nk(n,e){return ys(n,"POST","/v2/accounts:revokeToken",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=Ex(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await tk(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new rl;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Oe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rl,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ar{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await Kc(this,QR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:I,providerData:C,stsTokenManager:A}=t;Oe(w&&A,e,"internal-error");const S=rl.fromJSON(this.name,A);Oe(typeof w=="string",e,"internal-error"),ki(r,e.name),ki(i,e.name),Oe(typeof x=="boolean",e,"internal-error"),Oe(typeof I=="boolean",e,"internal-error"),ki(a,e.name),ki(l,e.name),ki(h,e.name),ki(p,e.name),ki(m,e.name),ki(y,e.name);const V=new Ar({uid:w,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:S,createdAt:m,lastLoginAt:y});return C&&Array.isArray(C)&&(V.providerData=C.map(M=>({...M}))),p&&(V._redirectEventId=p),V}static async _fromIdTokenResponse(e,t,r=!1){const i=new rl;i.updateFromServerResponse(t);const a=new Ar({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Oe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?XE(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),h=new rl;h.updateFromIdToken(r);const p=new Ar({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new cg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map;function Bs(n){Gs(n instanceof Function,"Expected a class definition");let e=Tx.get(n);return e?(Gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Tx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JE.type="NONE";const Sx=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n,e,t){return`firebase:${n}:${e}:${t}`}class sl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=ch(this.userKey,i.apiKey,a),this.fullPersistenceKey=ch("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ih(this.auth,{idToken:e}).catch(()=>{});return t?Ar._fromGetAccountInfoResponse(this.auth,t,e):null}return Ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new sl(Bs(Sx),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||Bs(Sx);const l=ch(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(l);if(y){let w;if(typeof y=="string"){const x=await Ih(e,{idToken:y}).catch(()=>{});if(!x)break;w=await Ar._fromGetAccountInfoResponse(e,x,y)}else w=Ar._fromJSON(e,y);m!==a&&(h=w),a=m;break}}catch{}const p=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new sl(a,e,r):(a=p[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new sl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sT(e))return"Blackberry";if(iT(e))return"Webos";if(eT(e))return"Safari";if((e.includes("chrome/")||tT(e))&&!e.includes("edge/"))return"Chrome";if(rT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZE(n=En()){return/firefox\//i.test(n)}function eT(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tT(n=En()){return/crios\//i.test(n)}function nT(n=En()){return/iemobile/i.test(n)}function rT(n=En()){return/android/i.test(n)}function sT(n=En()){return/blackberry/i.test(n)}function iT(n=En()){return/webos/i.test(n)}function ay(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rk(n=En()){var e;return ay(n)&&!!((e=window.navigator)!=null&&e.standalone)}function sk(){return vC()&&document.documentMode===10}function oT(n=En()){return ay(n)||rT(n)||iT(n)||sT(n)||/windows phone/i.test(n)||nT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n,e=[]){let t;switch(n){case"Browser":t=Ix(En());break;case"Worker":t=`${Ix(En())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const p=e(a);l(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(n,e={}){return ys(n,"GET","/v2/passwordPolicy",gs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=6;class lk{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ak,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new ik(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bs(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await sl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ih(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(_n(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,h=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===h)&&(p!=null&&p.user)&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(as(this));const t=e?at(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ok(this),t=new lk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bs(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[Bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{l=!0,p()}}else{const p=e.addObserver(t);return()=>{l=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&VR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pr(n){return at(n)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=bC(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uk(n){nf=n}function lT(n){return nf.loadJS(n)}function dk(){return nf.recaptchaEnterpriseScript}function hk(){return nf.gapiScript}function fk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class pk{constructor(){this.enterprise=new mk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gk="recaptcha-enterprise",cT="NO_RECAPTCHA";class yk{constructor(e){this.type=gk,this.auth=pr(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{KR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new GR(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(p=>{h(p)})})}function i(a,l,h){const p=window.grecaptcha;xx(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(cT)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pk().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&xx(window.grecaptcha))i(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let p=dk();p.length!==0&&(p+=h),lT(p).then(()=>{i(h,a,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function Ax(n,e,t,r=!1,i=!1){const a=new yk(n);let l;if(i)l=cT;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ah(n,e,t,r,i){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ax(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Ax(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(n,e){const t=cu(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ho(a,e??{}))return i;er(i,"already-initialized")}return t.initialize({options:e})}function wk(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Bs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _k(n,e,t){const r=pr(n);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=uT(e),{host:l,port:h}=xk(e),p=h===null?"":`:${h}`,m={url:`${a}//${l}${p}/`},y=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(Ho(m,r.config.emulator)&&Ho(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Zs(l)?(Zh(`${a}//${l}${p}`),ef("Auth",!0)):Ek()}function uT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function xk(n){const e=uT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Nx(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Nx(l)}}}function Nx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ek(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,t){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(n,e){return ys(n,"POST","/v1/accounts:resetPassword",gs(n,e))}async function Tk(n,e){return ys(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e){return du(n,"POST","/v1/accounts:signInWithPassword",gs(n,e))}async function Ik(n,e){return ys(n,"POST","/v1/accounts:sendOobCode",gs(n,e))}async function bk(n,e){return Ik(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n,e){return du(n,"POST","/v1/accounts:signInWithEmailLink",gs(n,e))}async function Nk(n,e){return du(n,"POST","/v1/accounts:signInWithEmailLink",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends ly{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Qc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Qc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,t,"signInWithPassword",Sk);case"emailLink":return Ak(e,{email:this._email,oobCode:this._password});default:er(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,r,"signUpPassword",Tk);case"emailLink":return Nk(e,{idToken:t,email:this._email,oobCode:this._password});default:er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(n,e){return du(n,"POST","/v1/accounts:signInWithIdp",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="http://localhost";class Go extends ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new Go(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return il(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,il(e,t)}buildRequest(){const e={requestUri:Ck,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kk(n){const e=kc(Pc(n)).link,t=e?kc(Pc(e)).deep_link_id:null,r=kc(Pc(n)).deep_link_id;return(r?kc(Pc(r)).link:null)||r||t||e||n}class cy{constructor(e){const t=kc(Pc(e)),r=t.apiKey??null,i=t.oobCode??null,a=Rk(t.mode??null);Oe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=kk(e);try{return new cy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.providerId=xl.PROVIDER_ID}static credential(e,t){return Qc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cy.parseLink(t);return Oe(r,"argument-error"),Qc._fromEmailAndCode(e,r.code,r.tenantId)}}xl.PROVIDER_ID="password";xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends rf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends hu{constructor(){super("facebook.com")}static credential(e){return Go._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Go._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Us.credential(t,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends hu{constructor(){super("github.com")}static credential(e){return Go._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.GITHUB_SIGN_IN_METHOD="github.com";Mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends hu{constructor(){super("twitter.com")}static credential(e,t){return Go._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Oi.credential(t,r)}catch{return null}}}Oi.TWITTER_SIGN_IN_METHOD="twitter.com";Oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(n,e){return du(n,"POST","/v1/accounts:signUp",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ar._fromIdTokenResponse(e,r,i),l=Cx(r);return new Ko({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Cx(r);return new Ko({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Cx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends ms{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Nh(e,t,r,i)}}function hT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(n,a,e,r):a})}async function jk(n,e,t=!1){const r=await Kc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ko._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e,t=!1){const{auth:r}=n;if(_n(r.app))return Promise.reject(as(r));const i="reauthenticate";try{const a=await Kc(n,hT(r,i,e,n),t);Oe(a.idToken,r,"internal-error");const l=oy(a.idToken);Oe(l,r,"internal-error");const{sub:h}=l;return Oe(n.uid===h,r,"user-mismatch"),Ko._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&er(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(n,e,t=!1){if(_n(n.app))return Promise.reject(as(n));const r="signIn",i=await hT(n,r,e),a=await Ko._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function Mk(n,e){return fT(pr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?dy._fromServerResponse(e,t):"totpInfo"in t?hy._fromServerResponse(e,t):er(e,"internal-error")}}class dy extends uy{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new dy(t)}}class hy extends uy{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new hy(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fy(n){const e=pr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ok(n,e,t){const r=pr(n);await Ah(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bk)}async function Lk(n,e,t){await dT(at(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fy(n),r})}async function Vk(n,e){const t=at(n),r=await dT(t,{oobCode:e}),i=r.requestType;switch(Oe(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(r.mfaInfo,t,"internal-error");default:Oe(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=uy._fromServerResponse(pr(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function Fk(n,e){const{data:t}=await Vk(at(n),e);return t.email}async function Dm(n,e,t){if(_n(n.app))return Promise.reject(as(n));const r=pr(n),l=await Ah(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&fy(n),p}),h=await Ko._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function Uk(n,e,t){return _n(n.app)?Promise.reject(as(n)):Mk(at(n),xl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fy(n),r})}function zk(n,e,t,r){return at(n).onIdTokenChanged(e,t,r)}function Bk(n,e,t){return at(n).beforeAuthStateChanged(e,t)}function $k(n,e,t,r){return at(n).onAuthStateChanged(e,t,r)}function Lo(n){return at(n).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=1e3,Wk=10;class mT extends pT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,p)=>{this.notifyListeners(l,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);sk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Wk):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mT.type="LOCAL";const Hk=mT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT extends pT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gT.type="SESSION";const yT=gT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async m=>m(t.origin,a)),p=await Gk(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((h,p)=>{const m=py("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(w){const x=w;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(x.data.response);break;default:clearTimeout(y),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function Qk(n){ls().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function Yk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Jk(){return vT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firebaseLocalStorageDb",Zk=1,Rh="firebaseLocalStorage",_T="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function of(n,e){return n.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function eP(){const n=indexedDB.deleteDatabase(wT);return new fu(n).toPromise()}function ug(){const n=indexedDB.open(wT,Zk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Rh,{keyPath:_T})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Rh)?e(r):(r.close(),await eP(),e(await ug()))})})}async function Rx(n,e,t){const r=of(n,!0).put({[_T]:e,value:t});return new fu(r).toPromise()}async function tP(n,e){const t=of(n,!1).get(e),r=await new fu(t).toPromise();return r===void 0?null:r.value}function kx(n,e){const t=of(n,!0).delete(e);return new fu(t).toPromise()}const nP=800,rP=3;class xT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>rP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sf._getInstance(Jk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Yk(),!this.activeServiceWorker)return;this.sender=new Kk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await Rx(e,Ch,"1"),await kx(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=of(i,!1).getAll();return new fu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xT.type="LOCAL";const sP=xT;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e){return e?Bs(e):(Oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy extends ly{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iP(n){return fT(n.auth,new gy(n),n.bypassAuthState)}function oP(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),Dk(t,new gy(n),n.bypassAuthState)}async function aP(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),jk(t,new gy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iP;case"linkViaPopup":case"linkViaRedirect":return aP;case"reauthViaPopup":case"reauthViaRedirect":return oP;default:er(this.auth,"internal-error")}}resolve(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new uu(2e3,1e4);async function cP(n,e,t){if(_n(n.app))return Promise.reject(Nr(n,"operation-not-supported-in-this-environment"));const r=pr(n);GE(n,e,rf);const i=my(r,t);return new zo(r,"signInViaPopup",e,i).executeNotNull()}class zo extends ET{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Gs(this.filter.length===1,"Popup operations only handle one event");const e=py();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lP.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="pendingRedirect",uh=new Map;class dP extends ET{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=uh.get(this.auth._key());if(!e){try{const r=await hP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}uh.set(this.auth._key(),e)}return this.bypassAuthState||uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hP(n,e){const t=ST(e),r=TT(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function fP(n,e){return TT(n)._set(ST(e),"true")}function pP(n,e){uh.set(n._key(),e)}function TT(n){return Bs(n._redirectPersistence)}function ST(n){return ch(uP,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n,e,t){return gP(n,e,t)}async function gP(n,e,t){if(_n(n.app))return Promise.reject(as(n));const r=pr(n);GE(n,e,rf),await r._initializationPromise;const i=my(r,t);return await fP(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function yP(n,e){return await pr(n)._initializationPromise,IT(n,e,!1)}async function IT(n,e,t=!1){if(_n(n.app))return Promise.reject(as(n));const r=pr(n),i=my(r,e),l=await new dP(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=600*1e3;class wP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_P(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!bT(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Px(e))}saveEventToCache(e){this.cachedEventUids.add(Px(e)),this.lastProcessedEventTime=Date.now()}}function Px(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _P(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e={}){return ys(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TP=/^https?/;async function SP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xP(n);for(const t of e)try{if(IP(t))return}catch{}er(n,"unauthorized-domain")}function IP(n){const e=lg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!TP.test(t))return!1;if(EP.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=new uu(3e4,6e4);function jx(){const n=ls().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function AP(n){return new Promise((e,t)=>{var i,a,l;function r(){jx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jx(),t(Nr(n,"network-request-failed"))},timeout:bP.get()})}if((a=(i=ls().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=ls().gapi)!=null&&l.load)r();else{const h=fk("iframefcb");return ls()[h]=()=>{gapi.load?r():t(Nr(n,"network-request-failed"))},lT(`${hk()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw dh=null,e})}let dh=null;function NP(n){return dh=dh||AP(n),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new uu(5e3,15e3),RP="__/auth/iframe",kP="emulator/auth/iframe",PP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DP(n){const e=n.config;Oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iy(e,kP):`https://${n.config.authDomain}/${RP}`,r={apiKey:e.apiKey,appName:n.name,v:sa},i=jP.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${lu(r).slice(1)}`}async function MP(n){const e=await NP(n),t=ls().gapi;return Oe(t,n,"internal-error"),e.open({where:document.body,url:DP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PP,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Nr(n,"network-request-failed"),h=ls().setTimeout(()=>{a(l)},CP.get());function p(){ls().clearTimeout(h),i(r)}r.ping(p).then(p,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LP=500,VP=600,FP="_blank",UP="http://localhost";class Dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zP(n,e,t,r=LP,i=VP){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p={...OP,width:r.toString(),height:i.toString(),top:a,left:l},m=En().toLowerCase();t&&(h=tT(m)?FP:t),ZE(m)&&(e=e||UP,p.scrollbars="yes");const y=Object.entries(p).reduce((x,[I,C])=>`${x}${I}=${C},`,"");if(rk(m)&&h!=="_self")return BP(e||"",h),new Dx(null);const w=window.open(e||"",h,y);Oe(w,n,"popup-blocked");try{w.focus()}catch{}return new Dx(w)}function BP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="__/auth/handler",qP="emulator/auth/handler",WP=encodeURIComponent("fac");async function Mx(n,e,t,r,i,a){Oe(n.config.authDomain,n,"auth-domain-config-required"),Oe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:sa,eventId:i};if(e instanceof rf){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",IC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof hu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const p=await n._getAppCheckToken(),m=p?`#${WP}=${encodeURIComponent(p)}`:"";return`${HP(n)}?${lu(h).slice(1)}${m}`}function HP({config:n}){return n.emulator?iy(n,qP):`https://${n.authDomain}/${$P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="webStorageSupport";class GP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yT,this._completeRedirectFn=IT,this._overrideRedirectResult=pP}async _openPopup(e,t,r,i){var l;Gs((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await Mx(e,t,r,lg(),i);return zP(e,a,py())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Mx(e,t,r,lg(),i);return Qk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Gs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await MP(e),r=new wP(e);return t.register("authEvent",i=>(Oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mm,{type:Mm},i=>{var l;const a=(l=i==null?void 0:i[0])==null?void 0:l[Mm];a!==void 0&&t(!!a),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oT()||eT()||ay()}}const KP=GP;var Ox="@firebase/auth",Lx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XP(n){Qi(new Ws("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Oe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aT(n)},m=new ck(r,i,a,p);return wk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new Ws("auth-internal",e=>{const t=pr(e.getProvider("auth").getImmediate());return(r=>new QP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(Ox,Lx,YP(n)),hr(Ox,Lx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=300,ZP=VE("authIdTokenMaxAge")||JP;let Vx=null;const e2=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ZP)return;const i=t==null?void 0:t.token;Vx!==i&&(Vx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function t2(n=tf()){const e=cu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vk(n,{popupRedirectResolver:KP,persistence:[sP,Hk,yT]}),r=VE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=e2(a.toString());Bk(t,l,()=>l(t.currentUser)),zk(t,h=>l(h))}}const i=OE("auth");return i&&_k(t,`http://${i}`),t}function n2(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}uk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Nr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",n2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XP("Browser");var Fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,AT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function O(){}O.prototype=N.prototype,j.F=N.prototype,j.prototype=new O,j.prototype.constructor=j,j.D=function(L,R,F){for(var D=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)D[fe-2]=arguments[fe];return N.prototype[R].apply(L,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,N,O){O||(O=0);const L=Array(16);if(typeof N=="string")for(var R=0;R<16;++R)L[R]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(R=0;R<16;++R)L[R]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=j.g[0],O=j.g[1],R=j.g[2];let F=j.g[3],D;D=N+(F^O&(R^F))+L[0]+3614090360&4294967295,N=O+(D<<7&4294967295|D>>>25),D=F+(R^N&(O^R))+L[1]+3905402710&4294967295,F=N+(D<<12&4294967295|D>>>20),D=R+(O^F&(N^O))+L[2]+606105819&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(N^R&(F^N))+L[3]+3250441966&4294967295,O=R+(D<<22&4294967295|D>>>10),D=N+(F^O&(R^F))+L[4]+4118548399&4294967295,N=O+(D<<7&4294967295|D>>>25),D=F+(R^N&(O^R))+L[5]+1200080426&4294967295,F=N+(D<<12&4294967295|D>>>20),D=R+(O^F&(N^O))+L[6]+2821735955&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(N^R&(F^N))+L[7]+4249261313&4294967295,O=R+(D<<22&4294967295|D>>>10),D=N+(F^O&(R^F))+L[8]+1770035416&4294967295,N=O+(D<<7&4294967295|D>>>25),D=F+(R^N&(O^R))+L[9]+2336552879&4294967295,F=N+(D<<12&4294967295|D>>>20),D=R+(O^F&(N^O))+L[10]+4294925233&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(N^R&(F^N))+L[11]+2304563134&4294967295,O=R+(D<<22&4294967295|D>>>10),D=N+(F^O&(R^F))+L[12]+1804603682&4294967295,N=O+(D<<7&4294967295|D>>>25),D=F+(R^N&(O^R))+L[13]+4254626195&4294967295,F=N+(D<<12&4294967295|D>>>20),D=R+(O^F&(N^O))+L[14]+2792965006&4294967295,R=F+(D<<17&4294967295|D>>>15),D=O+(N^R&(F^N))+L[15]+1236535329&4294967295,O=R+(D<<22&4294967295|D>>>10),D=N+(R^F&(O^R))+L[1]+4129170786&4294967295,N=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(N^O))+L[6]+3225465664&4294967295,F=N+(D<<9&4294967295|D>>>23),D=R+(N^O&(F^N))+L[11]+643717713&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^N&(R^F))+L[0]+3921069994&4294967295,O=R+(D<<20&4294967295|D>>>12),D=N+(R^F&(O^R))+L[5]+3593408605&4294967295,N=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(N^O))+L[10]+38016083&4294967295,F=N+(D<<9&4294967295|D>>>23),D=R+(N^O&(F^N))+L[15]+3634488961&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^N&(R^F))+L[4]+3889429448&4294967295,O=R+(D<<20&4294967295|D>>>12),D=N+(R^F&(O^R))+L[9]+568446438&4294967295,N=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(N^O))+L[14]+3275163606&4294967295,F=N+(D<<9&4294967295|D>>>23),D=R+(N^O&(F^N))+L[3]+4107603335&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^N&(R^F))+L[8]+1163531501&4294967295,O=R+(D<<20&4294967295|D>>>12),D=N+(R^F&(O^R))+L[13]+2850285829&4294967295,N=O+(D<<5&4294967295|D>>>27),D=F+(O^R&(N^O))+L[2]+4243563512&4294967295,F=N+(D<<9&4294967295|D>>>23),D=R+(N^O&(F^N))+L[7]+1735328473&4294967295,R=F+(D<<14&4294967295|D>>>18),D=O+(F^N&(R^F))+L[12]+2368359562&4294967295,O=R+(D<<20&4294967295|D>>>12),D=N+(O^R^F)+L[5]+4294588738&4294967295,N=O+(D<<4&4294967295|D>>>28),D=F+(N^O^R)+L[8]+2272392833&4294967295,F=N+(D<<11&4294967295|D>>>21),D=R+(F^N^O)+L[11]+1839030562&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^N)+L[14]+4259657740&4294967295,O=R+(D<<23&4294967295|D>>>9),D=N+(O^R^F)+L[1]+2763975236&4294967295,N=O+(D<<4&4294967295|D>>>28),D=F+(N^O^R)+L[4]+1272893353&4294967295,F=N+(D<<11&4294967295|D>>>21),D=R+(F^N^O)+L[7]+4139469664&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^N)+L[10]+3200236656&4294967295,O=R+(D<<23&4294967295|D>>>9),D=N+(O^R^F)+L[13]+681279174&4294967295,N=O+(D<<4&4294967295|D>>>28),D=F+(N^O^R)+L[0]+3936430074&4294967295,F=N+(D<<11&4294967295|D>>>21),D=R+(F^N^O)+L[3]+3572445317&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^N)+L[6]+76029189&4294967295,O=R+(D<<23&4294967295|D>>>9),D=N+(O^R^F)+L[9]+3654602809&4294967295,N=O+(D<<4&4294967295|D>>>28),D=F+(N^O^R)+L[12]+3873151461&4294967295,F=N+(D<<11&4294967295|D>>>21),D=R+(F^N^O)+L[15]+530742520&4294967295,R=F+(D<<16&4294967295|D>>>16),D=O+(R^F^N)+L[2]+3299628645&4294967295,O=R+(D<<23&4294967295|D>>>9),D=N+(R^(O|~F))+L[0]+4096336452&4294967295,N=O+(D<<6&4294967295|D>>>26),D=F+(O^(N|~R))+L[7]+1126891415&4294967295,F=N+(D<<10&4294967295|D>>>22),D=R+(N^(F|~O))+L[14]+2878612391&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~N))+L[5]+4237533241&4294967295,O=R+(D<<21&4294967295|D>>>11),D=N+(R^(O|~F))+L[12]+1700485571&4294967295,N=O+(D<<6&4294967295|D>>>26),D=F+(O^(N|~R))+L[3]+2399980690&4294967295,F=N+(D<<10&4294967295|D>>>22),D=R+(N^(F|~O))+L[10]+4293915773&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~N))+L[1]+2240044497&4294967295,O=R+(D<<21&4294967295|D>>>11),D=N+(R^(O|~F))+L[8]+1873313359&4294967295,N=O+(D<<6&4294967295|D>>>26),D=F+(O^(N|~R))+L[15]+4264355552&4294967295,F=N+(D<<10&4294967295|D>>>22),D=R+(N^(F|~O))+L[6]+2734768916&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~N))+L[13]+1309151649&4294967295,O=R+(D<<21&4294967295|D>>>11),D=N+(R^(O|~F))+L[4]+4149444226&4294967295,N=O+(D<<6&4294967295|D>>>26),D=F+(O^(N|~R))+L[11]+3174756917&4294967295,F=N+(D<<10&4294967295|D>>>22),D=R+(N^(F|~O))+L[2]+718787259&4294967295,R=F+(D<<15&4294967295|D>>>17),D=O+(F^(R|~N))+L[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+R&4294967295,j.g[3]=j.g[3]+F&4294967295}r.prototype.v=function(j,N){N===void 0&&(N=j.length);const O=N-this.blockSize,L=this.C;let R=this.h,F=0;for(;F<N;){if(R==0)for(;F<=O;)i(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<N;)if(L[R++]=j.charCodeAt(F++),R==this.blockSize){i(this,L),R=0;break}}else for(;F<N;)if(L[R++]=j[F++],R==this.blockSize){i(this,L),R=0;break}}this.h=R,this.o+=N},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;N=this.o*8;for(var O=j.length-8;O<j.length;++O)j[O]=N&255,N/=256;for(this.v(j),j=Array(16),N=0,O=0;O<4;++O)for(let L=0;L<32;L+=8)j[N++]=this.g[O]>>>L&255;return j};function a(j,N){var O=h;return Object.prototype.hasOwnProperty.call(O,j)?O[j]:O[j]=N(j)}function l(j,N){this.h=N;const O=[];let L=!0;for(let R=j.length-1;R>=0;R--){const F=j[R]|0;L&&F==N||(O[R]=F,L=!1)}this.g=O}var h={};function p(j){return-128<=j&&j<128?a(j,function(N){return new l([N|0],N<0?-1:0)}):new l([j|0],j<0?-1:0)}function m(j){if(isNaN(j)||!isFinite(j))return w;if(j<0)return S(m(-j));const N=[];let O=1;for(let L=0;j>=O;L++)N[L]=j/O|0,O*=4294967296;return new l(N,0)}function y(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return S(y(j.substring(1),N));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=m(Math.pow(N,8));let L=w;for(let F=0;F<j.length;F+=8){var R=Math.min(8,j.length-F);const D=parseInt(j.substring(F,F+R),N);R<8?(R=m(Math.pow(N,R)),L=L.j(R).add(m(D))):(L=L.j(O),L=L.add(m(D)))}return L}var w=p(0),x=p(1),I=p(16777216);n=l.prototype,n.m=function(){if(A(this))return-S(this).m();let j=0,N=1;for(let O=0;O<this.g.length;O++){const L=this.i(O);j+=(L>=0?L:4294967296+L)*N,N*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(C(this))return"0";if(A(this))return"-"+S(this).toString(j);const N=m(Math.pow(j,6));var O=this;let L="";for(;;){const R=$(O,N).g;O=V(O,R.j(N));let F=((O.g.length>0?O.g[0]:O.h)>>>0).toString(j);if(O=R,C(O))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function C(j){if(j.h!=0)return!1;for(let N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function A(j){return j.h==-1}n.l=function(j){return j=V(this,j),A(j)?-1:C(j)?0:1};function S(j){const N=j.g.length,O=[];for(let L=0;L<N;L++)O[L]=~j.g[L];return new l(O,~j.h).add(x)}n.abs=function(){return A(this)?S(this):this},n.add=function(j){const N=Math.max(this.g.length,j.g.length),O=[];let L=0;for(let R=0;R<=N;R++){let F=L+(this.i(R)&65535)+(j.i(R)&65535),D=(F>>>16)+(this.i(R)>>>16)+(j.i(R)>>>16);L=D>>>16,F&=65535,D&=65535,O[R]=D<<16|F}return new l(O,O[O.length-1]&-2147483648?-1:0)};function V(j,N){return j.add(S(N))}n.j=function(j){if(C(this)||C(j))return w;if(A(this))return A(j)?S(this).j(S(j)):S(S(this).j(j));if(A(j))return S(this.j(S(j)));if(this.l(I)<0&&j.l(I)<0)return m(this.m()*j.m());const N=this.g.length+j.g.length,O=[];for(var L=0;L<2*N;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(let R=0;R<j.g.length;R++){const F=this.i(L)>>>16,D=this.i(L)&65535,fe=j.i(R)>>>16,ye=j.i(R)&65535;O[2*L+2*R]+=D*ye,M(O,2*L+2*R),O[2*L+2*R+1]+=F*ye,M(O,2*L+2*R+1),O[2*L+2*R+1]+=D*fe,M(O,2*L+2*R+1),O[2*L+2*R+2]+=F*fe,M(O,2*L+2*R+2)}for(j=0;j<N;j++)O[j]=O[2*j+1]<<16|O[2*j];for(j=N;j<2*N;j++)O[j]=0;return new l(O,0)};function M(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function P(j,N){this.g=j,this.h=N}function $(j,N){if(C(N))throw Error("division by zero");if(C(j))return new P(w,w);if(A(j))return N=$(S(j),N),new P(S(N.g),S(N.h));if(A(N))return N=$(j,S(N)),new P(S(N.g),N.h);if(j.g.length>30){if(A(j)||A(N))throw Error("slowDivide_ only works with positive integers.");for(var O=x,L=N;L.l(j)<=0;)O=G(O),L=G(L);var R=ee(O,1),F=ee(L,1);for(L=ee(L,2),O=ee(O,2);!C(L);){var D=F.add(L);D.l(j)<=0&&(R=R.add(O),F=D),L=ee(L,1),O=ee(O,1)}return N=V(j,R.j(N)),new P(R,N)}for(R=w;j.l(N)>=0;){for(O=Math.max(1,Math.floor(j.m()/N.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=m(O),D=F.j(N);A(D)||D.l(j)>0;)O-=L,F=m(O),D=F.j(N);C(F)&&(F=x),R=R.add(F),j=V(j,D)}return new P(R,j)}n.B=function(j){return $(this,j).h},n.and=function(j){const N=Math.max(this.g.length,j.g.length),O=[];for(let L=0;L<N;L++)O[L]=this.i(L)&j.i(L);return new l(O,this.h&j.h)},n.or=function(j){const N=Math.max(this.g.length,j.g.length),O=[];for(let L=0;L<N;L++)O[L]=this.i(L)|j.i(L);return new l(O,this.h|j.h)},n.xor=function(j){const N=Math.max(this.g.length,j.g.length),O=[];for(let L=0;L<N;L++)O[L]=this.i(L)^j.i(L);return new l(O,this.h^j.h)};function G(j){const N=j.g.length+1,O=[];for(let L=0;L<N;L++)O[L]=j.i(L)<<1|j.i(L-1)>>>31;return new l(O,j.h)}function ee(j,N){const O=N>>5;N%=32;const L=j.g.length-O,R=[];for(let F=0;F<L;F++)R[F]=N>0?j.i(F+O)>>>N|j.i(F+O+1)<<32-N:j.i(F+O);return new l(R,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,Bi=l}).apply(typeof Fx<"u"?Fx:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NT,jc,CT,hh,dg,RT,kT,PT;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var _=0;_<d.length;++_){var T=d[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(d,_){if(_)e:{var T=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var Q=d[k];if(!(Q in T))break e;T=T[Q]}d=d[d.length-1],k=T[d],_=_(k),_!=k&&_!=null&&e(T,d,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(_){var T=[],k;for(k in _)Object.prototype.hasOwnProperty.call(_,k)&&T.push([k,_[k]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function p(d,_,T){return d.call.apply(d.bind,arguments)}function m(d,_,T){return m=p,m.apply(null,arguments)}function y(d,_){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function w(d,_){function T(){}T.prototype=_.prototype,d.Z=_.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(k,Q,Z){for(var pe=Array(arguments.length-2),We=2;We<arguments.length;We++)pe[We-2]=arguments[We];return _.prototype[Q].apply(k,pe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function I(d){const _=d.length;if(_>0){const T=Array(_);for(let k=0;k<_;k++)T[k]=d[k];return T}return[]}function C(d,_){for(let k=1;k<arguments.length;k++){const Q=arguments[k];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=d.length||0;const Z=Q.length||0;d.length=T+Z;for(let pe=0;pe<Z;pe++)d[T+pe]=Q[pe]}else d.push(Q)}}class A{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function S(d){l.setTimeout(()=>{throw d},0)}function V(){var d=j;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class M{constructor(){this.h=this.g=null}add(_,T){const k=P.get();k.set(_,T),this.h?this.h.next=k:this.g=k,this.h=k}}var P=new A(()=>new $,d=>d.reset());class ${constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ee=!1,j=new M,N=()=>{const d=Promise.resolve(void 0);G=()=>{d.then(O)}};function O(){for(var d;d=V();){try{d.h.call(d.g)}catch(T){S(T)}var _=P;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}ee=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};l.addEventListener("test",T,_),l.removeEventListener("test",T,_)}catch{}return d})();function D(d){return/^[\s\xa0]*$/.test(d)}function fe(d,_){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}w(fe,R),fe.prototype.init=function(d,_){const T=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(T=="mouseover"?_=d.fromElement:T=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),de=0;function _e(d,_,T,k,Q){this.listener=d,this.proxy=null,this.src=_,this.type=T,this.capture=!!k,this.ha=Q,this.key=++de,this.da=this.fa=!1}function H(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function te(d,_,T){for(const k in d)_.call(T,d[k],k,d)}function le(d,_){for(const T in d)_.call(void 0,d[T],T,d)}function q(d){const _={};for(const T in d)_[T]=d[T];return _}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(d,_){let T,k;for(let Q=1;Q<arguments.length;Q++){k=arguments[Q];for(T in k)d[T]=k[T];for(let Z=0;Z<z.length;Z++)T=z[Z],Object.prototype.hasOwnProperty.call(k,T)&&(d[T]=k[T])}}function re(d){this.src=d,this.g={},this.h=0}re.prototype.add=function(d,_,T,k,Q){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const pe=Te(d,_,k,Q);return pe>-1?(_=d[pe],T||(_.fa=!1)):(_=new _e(_,this.src,Z,!!k,Q),_.fa=T,d.push(_)),_};function ve(d,_){const T=_.type;if(T in d.g){var k=d.g[T],Q=Array.prototype.indexOf.call(k,_,void 0),Z;(Z=Q>=0)&&Array.prototype.splice.call(k,Q,1),Z&&(H(_),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Te(d,_,T,k){for(let Q=0;Q<d.length;++Q){const Z=d[Q];if(!Z.da&&Z.listener==_&&Z.capture==!!T&&Z.ha==k)return Q}return-1}var se="closure_lm_"+(Math.random()*1e6|0),we={};function Ee(d,_,T,k,Q){if(Array.isArray(_)){for(let Z=0;Z<_.length;Z++)Ee(d,_[Z],T,k,Q);return null}return T=co(T),d&&d[ye]?d.J(_,T,h(k)?!!k.capture:!1,Q):X(d,_,T,!1,k,Q)}function X(d,_,T,k,Q,Z){if(!_)throw Error("Invalid event type");const pe=h(Q)?!!Q.capture:!!Q;let We=nr(d);if(We||(d[se]=We=new re(d)),T=We.add(_,T,k,pe,Z),T.proxy)return T;if(k=me(),T.proxy=k,k.src=d,k.listener=T,d.addEventListener)F||(Q=pe),Q===void 0&&(Q=!1),d.addEventListener(_.toString(),k,Q);else if(d.attachEvent)d.attachEvent(qt(_.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function me(){function d(T){return _.call(d.src,d.listener,T)}const _=dn;return d}function Fe(d,_,T,k,Q){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Fe(d,_[Z],T,k,Q);else k=h(k)?!!k.capture:!!k,T=co(T),d&&d[ye]?(d=d.i,Z=String(_).toString(),Z in d.g&&(_=d.g[Z],T=Te(_,T,k,Q),T>-1&&(H(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete d.g[Z],d.h--)))):d&&(d=nr(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Te(_,T,k,Q)),(T=d>-1?_[d]:null)&&lt(T))}function lt(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ye])ve(_.i,d);else{var T=d.type,k=d.proxy;_.removeEventListener?_.removeEventListener(T,k,d.capture):_.detachEvent?_.detachEvent(qt(T),k):_.addListener&&_.removeListener&&_.removeListener(k),(T=nr(_))?(ve(T,d),T.h==0&&(T.src=null,_[se]=null)):H(d)}}}function qt(d){return d in we?we[d]:we[d]="on"+d}function dn(d,_){if(d.da)d=!0;else{_=new fe(_,this);const T=d.listener,k=d.ha||d.src;d.fa&&lt(d),d=T.call(k,_)}return d}function nr(d){return d=d[se],d instanceof re?d:null}var Vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function co(d){return typeof d=="function"?d:(d[Vn]||(d[Vn]=function(_){return d.handleEvent(_)}),d[Vn])}function yt(){L.call(this),this.i=new re(this),this.M=this,this.G=null}w(yt,L),yt.prototype[ye]=!0,yt.prototype.removeEventListener=function(d,_,T,k){Fe(this,d,_,T,k)};function Dt(d,_){var T,k=d.G;if(k)for(T=[];k;k=k.G)T.push(k);if(d=d.M,k=_.type||_,typeof _=="string")_=new R(_,d);else if(_ instanceof R)_.target=_.target||d;else{var Q=_;_=new R(k,d),ie(_,Q)}Q=!0;let Z,pe;if(T)for(pe=T.length-1;pe>=0;pe--)Z=_.g=T[pe],Q=mr(Z,k,!0,_)&&Q;if(Z=_.g=d,Q=mr(Z,k,!0,_)&&Q,Q=mr(Z,k,!1,_)&&Q,T)for(pe=0;pe<T.length;pe++)Z=_.g=T[pe],Q=mr(Z,k,!1,_)&&Q}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const T=d.g[_];for(let k=0;k<T.length;k++)H(T[k]);delete d.g[_],d.h--}}this.G=null},yt.prototype.J=function(d,_,T,k){return this.i.add(String(d),_,!1,T,k)},yt.prototype.K=function(d,_,T,k){return this.i.add(String(d),_,!0,T,k)};function mr(d,_,T,k){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let Q=!0;for(let Z=0;Z<_.length;++Z){const pe=_[Z];if(pe&&!pe.da&&pe.capture==T){const We=pe.listener,Mt=pe.ha||pe.src;pe.fa&&ve(d.i,pe),Q=We.call(Mt,k)!==!1&&Q}}return Q&&!k.defaultPrevented}function Ml(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function Ol(d){d.g=Ml(()=>{d.g=null,d.i&&(d.i=!1,Ol(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Nu extends L{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ol(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(d){L.call(this),this.h=d,this.g={}}w(ni,L);var Ll=[];function ca(d){te(d.g,function(_,T){this.g.hasOwnProperty(T)&&lt(_)},d),d.g={}}ni.prototype.N=function(){ni.Z.N.call(this),ca(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=l.JSON.stringify,Cu=l.JSON.parse,uo=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function si(){}function Ru(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ua(){R.call(this,"d")}w(ua,R);function Vl(){R.call(this,"c")}w(Vl,R);var gr={},da=null;function oi(){return da=da||new yt}gr.Ia="serverreachability";function ha(d){R.call(this,gr.Ia,d)}w(ha,R);function _s(d){const _=oi();Dt(_,new ha(_))}gr.STAT_EVENT="statevent";function xs(d,_){R.call(this,gr.STAT_EVENT,d),this.stat=_}w(xs,R);function Rt(d){const _=oi();Dt(_,new xs(_,d))}gr.Ja="timingevent";function Fl(d,_){R.call(this,gr.Ja,d),this.size=_}w(Fl,R);function ai(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function ku(d,_,T,k,Q,Z){d.info(function(){if(d.g)if(Z){var pe="",We=Z.split("&");for(let dt=0;dt<We.length;dt++){var Mt=We[dt].split("=");if(Mt.length>1){const Ft=Mt[0];Mt=Mt[1];const qn=Ft.split("_");pe=qn.length>=2&&qn[1]=="type"?pe+(Ft+"="+Mt+"&"):pe+(Ft+"=redacted&")}}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+k+") [attempt "+Q+"]: "+_+`
`+T+`
`+pe})}function Pu(d,_,T,k,Q,Z,pe){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Q+"]: "+_+`
`+T+`
`+Z+" "+pe})}function Or(d,_,T,k){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+ho(d,T)+(k?" "+k:"")})}function ju(d,_){d.info(function(){return"TIMEOUT: "+_})}li.prototype.info=function(){};function ho(d,_){if(!d.g)return _;if(!_)return null;try{const Z=JSON.parse(_);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var T=Z[d];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var Q=k[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let pe=1;pe<k.length;pe++)k[pe]=""}}}}return ri(Z)}catch{return _}}var ci={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ui={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Du;function Es(){}w(Es,si),Es.prototype.g=function(){return new XMLHttpRequest},Du=new Es;function Lr(d){return encodeURIComponent(String(d))}function fa(d){var _=1;d=d.split(":");const T=[];for(;_>0&&d.length;)T.push(d.shift()),_--;return d.length&&T.push(d.join(":")),T}function rr(d,_,T,k){this.j=d,this.i=_,this.l=T,this.S=k||1,this.V=new ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mu}function Mu(){this.i=null,this.g="",this.h=!1}var Ou={},Ul={};function yr(d,_,T){d.M=1,d.A=Ss(sr(_)),d.u=T,d.R=!0,zl(d,null)}function zl(d,_){d.F=Date.now(),fo(d),d.B=sr(d.A);var T=d.B,k=d.S;Array.isArray(k)||(k=[String(k)]),Xl(T.i,"t",k),d.C=0,T=d.j.L,d.h=new Mu,d.g=Hu(d.j,T?_:null,!d.u),d.P>0&&(d.O=new Nu(m(d.Y,d,d.g),d.P)),_=d.V,T=d.g,k=d.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ll[0]=Q.toString()),Q=Ll);for(let Z=0;Z<Q.length;Z++){const pe=Ee(T,Q[Z],k||_.handleEvent,!1,_.h||_);if(!pe)break;_.g[pe.key]=pe}_=d.J?q(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),_s(),ku(d.i,d.v,d.B,d.l,d.S,d.u)}rr.prototype.ba=function(d){d=d.target;const _=this.O;_&&qr(d)==3?_.j():this.Y(d)},rr.prototype.Y=function(d){try{if(d==this.g)e:{const We=qr(this.g),Mt=this.g.ya(),dt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||qu(this.g)))){this.K||We!=4||Mt==7||(Mt==8||dt<=0?_s(3):_s(2)),pa(this);var _=this.g.ca();this.X=_;var T=Lu(this);if(this.o=_==200,Pu(this.i,this.v,this.B,this.l,this.S,We,_),this.o){if(this.U&&!this.L){t:{if(this.g){var k,Q=this.g;if((k=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var Z=k;break t}}Z=null}if(d=Z)Or(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vt(this,d);else{this.o=!1,this.m=3,Rt(12),Ts(this),po(this);break e}}if(this.R){d=!0;let Ft;for(;!this.K&&this.C<T.length;)if(Ft=Fu(this,T),Ft==Ul){We==4&&(this.m=4,Rt(14),d=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Ou){this.m=4,Rt(15),Or(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else Or(this.i,this.l,Ft,null),vt(this,Ft);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||T.length!=0||this.h.h||(this.m=1,Rt(16),d=!1),this.o=this.o&&d,!d)Or(this.i,this.l,T,"[Invalid Chunked Response]"),Ts(this),po(this);else if(T.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),To(pe),pe.P=!0,Rt(11))}}else Or(this.i,this.l,T,null),vt(this,T);We==4&&Ts(this),this.o&&!this.K&&(We==4?Sa(this.j,this):(this.o=!1,fo(this)))}else Zl(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Ts(this),po(this)}}}catch{}finally{}};function Lu(d){if(!Vu(d))return d.g.la();const _=qu(d.g);if(_==="")return"";let T="";const k=_.length,Q=qr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ts(d),po(d),"";d.h.i=new l.TextDecoder}for(let Z=0;Z<k;Z++)d.h.h=!0,T+=d.h.i.decode(_[Z],{stream:!(Q&&Z==k-1)});return _.length=0,d.h.g+=T,d.C=0,d.h.g}function Vu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Fu(d,_){var T=d.C,k=_.indexOf(`
`,T);return k==-1?Ul:(T=Number(_.substring(T,k)),isNaN(T)?Ou:(k+=1,k+T>_.length?Ul:(_=_.slice(k,k+T),d.C=k+T,_)))}rr.prototype.cancel=function(){this.K=!0,Ts(this)};function fo(d){d.T=Date.now()+d.H,Bl(d,d.H)}function Bl(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ai(m(d.aa,d),_)}function pa(d){d.D&&(l.clearTimeout(d.D),d.D=null)}rr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ju(this.i,this.B),this.M!=2&&(_s(),Rt(17)),Ts(this),this.m=2,po(this)):Bl(this,this.T-d)};function po(d){d.j.I==0||d.K||Sa(d.j,d)}function Ts(d){pa(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,ca(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function vt(d,_){try{var T=d.j;if(T.I!=0&&(T.g==d||ql(T.h,d))){if(!d.L&&ql(T.h,d)&&T.I==3){try{var k=T.Ba.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Q=k;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)Ta(T),Bn(T);else break e;Gr(T),Rt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ai(m(T.Va,T),6e3));mo(T.h)<=1&&T.ta&&(T.ta=void 0)}else $n(T,11)}else if((d.L||T.g==d)&&Ta(T),!D(_))for(Q=T.Ba.g.parse(_),_=0;_<Q.length;_++){let dt=Q[_];const Ft=dt[0];if(!(Ft<=T.K))if(T.K=Ft,dt=dt[1],T.I==2)if(dt[0]=="c"){T.M=dt[1],T.ba=dt[2];const qn=dt[3];qn!=null&&(T.ka=qn,T.j.info("VER="+T.ka));const Cs=dt[4];Cs!=null&&(T.za=Cs,T.j.info("SVER="+T.za));const Kr=dt[5];Kr!=null&&typeof Kr=="number"&&Kr>0&&(k=1.5*Kr,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const Qr=d.g;if(Qr){const Aa=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Aa){var Z=k.h;Z.g||Aa.indexOf("spdy")==-1&&Aa.indexOf("quic")==-1&&Aa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ga(Z,Z.h),Z.h=null))}if(k.G){const nc=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(k.wa=nc,ot(k.J,k.G,nc))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var pe=d;if(k.na=tc(k,k.L?k.ba:null,k.W),pe.L){go(k.h,pe);var We=pe,Mt=k.O;Mt&&(We.H=Mt),We.D&&(pa(We),fo(We)),k.g=pe}else hn(k);T.i.length>0&&Ns(T)}else dt[0]!="stop"&&dt[0]!="close"||$n(T,7);else T.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?$n(T,7):xa(T):dt[0]!="noop"&&T.l&&T.l.qa(dt),T.A=0)}}_s(4)}catch{}}var Zf=class{constructor(d,_){this.g=d,this.map=_}};function ma(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $l(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function mo(d){return d.h?1:d.g?d.g.size:0}function ql(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function ga(d,_){d.g?d.g.add(_):d.h=_}function go(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}ma.prototype.cancel=function(){if(this.i=Fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Fn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const T of d.g.values())_=_.concat(T.G);return _}return I(d.i)}var Uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Un(d,_){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const k=d[T].indexOf("=");let Q,Z=null;k>=0?(Q=d[T].substring(0,k),Z=d[T].substring(k+1)):Q=d[T],_(Q,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Vr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof Vr?(this.l=d.l,yo(this,d.j),this.o=d.o,this.g=d.g,Fr(this,d.u),this.h=d.h,di(this,Jl(d.i)),this.m=d.m):d&&(_=String(d).match(Uu))?(this.l=!1,yo(this,_[1]||"",!0),this.o=vo(_[2]||""),this.g=vo(_[3]||"",!0),Fr(this,_[4]),this.h=vo(_[5]||"",!0),di(this,_[6]||"",!0),this.m=vo(_[7]||"")):(this.l=!1,this.i=new et(null,this.l))}Vr.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(wo(_,Hl,!0),":");var T=this.g;return(T||_=="file")&&(d.push("//"),(_=this.o)&&d.push(wo(_,Hl,!0),"@"),d.push(Lr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(wo(T,T.charAt(0)=="/"?_o:Gl,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",wo(T,Kl)),d.join("")},Vr.prototype.resolve=function(d){const _=sr(this);let T=!!d.j;T?yo(_,d.j):T=!!d.o,T?_.o=d.o:T=!!d.g,T?_.g=d.g:T=d.u!=null;var k=d.h;if(T)Fr(_,d.u);else if(T=!!d.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var Q=_.h.lastIndexOf("/");Q!=-1&&(k=_.h.slice(0,Q+1)+k)}if(Q=k,Q==".."||Q==".")k="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){k=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const Z=[];for(let pe=0;pe<Q.length;){const We=Q[pe++];We=="."?k&&pe==Q.length&&Z.push(""):We==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),k&&pe==Q.length&&Z.push("")):(Z.push(We),k=!0)}k=Z.join("/")}else k=Q}return T?_.h=k:T=d.i.toString()!=="",T?di(_,Jl(d.i)):T=!!d.m,T&&(_.m=d.m),_};function sr(d){return new Vr(d)}function yo(d,_,T){d.j=T?vo(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Fr(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function di(d,_,T){_ instanceof et?(d.i=_,va(d.i,d.l)):(T||(_=wo(_,ep)),d.i=new et(_,d.l))}function ot(d,_,T){d.i.set(_,T)}function Ss(d){return ot(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function vo(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function wo(d,_,T){return typeof d=="string"?(d=encodeURI(d).replace(_,Wl),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Hl=/[#\/\?@]/g,Gl=/[#\?:]/g,_o=/[#\?]/g,ep=/[#\?@]/g,Kl=/#/g;function et(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Ur(d){d.g||(d.g=new Map,d.h=0,d.i&&Un(d.i,function(_,T){d.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=et.prototype,n.add=function(d,_){Ur(this),this.i=null,d=zr(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(_),this.h+=1,this};function Ql(d,_){Ur(d),_=zr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function ya(d,_){return Ur(d),_=zr(d,_),d.g.has(_)}n.forEach=function(d,_){Ur(this),this.g.forEach(function(T,k){T.forEach(function(Q){d.call(_,Q,k,this)},this)},this)};function Yl(d,_){Ur(d);let T=[];if(typeof _=="string")ya(d,_)&&(T=T.concat(d.g.get(zr(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)T=T.concat(d[_]);return T}n.set=function(d,_){return Ur(this),this.i=null,d=zr(this,d),ya(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=Yl(this,d),d.length>0?String(d[0]):_):_};function Xl(d,_,T){Ql(d,_),T.length>0&&(d.i=null,d.g.set(zr(d,_),I(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let k=0;k<_.length;k++){var T=_[k];const Q=Lr(T);T=Yl(this,T);for(let Z=0;Z<T.length;Z++){let pe=Q;T[Z]!==""&&(pe+="="+Lr(T[Z])),d.push(pe)}}return this.i=d.join("&")};function Jl(d){const _=new et;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function zr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function va(d,_){_&&!d.j&&(Ur(d),d.i=null,d.g.forEach(function(T,k){const Q=k.toLowerCase();k!=Q&&(Ql(this,k),Xl(this,Q,T))},d)),d.j=_}function Br(d,_){const T=new li;if(l.Image){const k=new Image;k.onload=y(rn,T,"TestLoadImage: loaded",!0,_,k),k.onerror=y(rn,T,"TestLoadImage: error",!1,_,k),k.onabort=y(rn,T,"TestLoadImage: abort",!1,_,k),k.ontimeout=y(rn,T,"TestLoadImage: timeout",!1,_,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else _(!1)}function $r(d,_){const T=new li,k=new AbortController,Q=setTimeout(()=>{k.abort(),rn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:k.signal}).then(Z=>{clearTimeout(Q),Z.ok?rn(T,"TestPingServer: ok",!0,_):rn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),rn(T,"TestPingServer: error",!1,_)})}function rn(d,_,T,k,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),k(T)}catch{}}function xo(){this.g=new uo}function Is(d){this.i=d.Sb||null,this.h=d.ab||!1}w(Is,si),Is.prototype.g=function(){return new zn(this.i,this.h)};function zn(d,_){yt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(zn,yt),n=zn.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,vr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zu(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function zu(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?hi(this):vr(this),this.readyState==3&&zu(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,hi(this))},n.Na=function(d){this.g&&(this.response=d,hi(this))},n.ga=function(){this.g&&hi(this)};function hi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,vr(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=_.next();return d.join(`\r
`)};function vr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(zn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Bu(d){let _="";return te(d,function(T,k){_+=k,_+=":",_+=T,_+=`\r
`}),_}function wa(d,_,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=Bu(T),typeof d=="string"?T!=null&&Lr(T):ot(d,_,T))}function ht(d){yt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ht,yt);var $u=/^https?$/i,tp=["POST","PUT"];n=ht.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Du.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Z){fi(this,Z);return}if(d=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Q in k)T.set(Q,k[Q]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Z of k.keys())T.set(Z,k.get(Z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),Q=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(tp,_,void 0)>=0)||k||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of T)this.g.setRequestHeader(Z,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){fi(this,Z)}};function fi(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,pi(d),As(d)}function pi(d){d.A||(d.A=!0,Dt(d,"complete"),Dt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Dt(this,"complete"),Dt(this,"abort"),As(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),As(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?bs(this):this.Xa())},n.Xa=function(){bs(this)};function bs(d){if(d.h&&typeof a<"u"){if(d.v&&qr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Dt(d,"readystatechange"),qr(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var k;if(k=Z===0){let pe=String(d.D).match(Uu)[1]||null;!pe&&l.self&&l.self.location&&(pe=l.self.location.protocol.slice(0,-1)),k=!$u.test(pe?pe.toLowerCase():"")}T=k}if(T)Dt(d,"complete"),Dt(d,"success");else{d.o=6;try{var Q=qr(d)>2?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.ca()+"]",pi(d)}}finally{As(d)}}}}function As(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,_||Dt(d,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qr(d){return d.g?d.g.readyState:0}n.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Cu(_)}};function qu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Zl(d){const _={};d=(d.g&&qr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(D(d[k]))continue;var T=fa(d[k]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=_[Q]||[];_[Q]=Z,Z.push(T)}le(_,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(d,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||_}function _a(d){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wr("baseRetryDelayMs",5e3,d),this.Za=Wr("retryDelaySeedMs",1e4,d),this.Ta=Wr("forwardChannelMaxRetries",2,d),this.va=Wr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(d&&d.concurrentRequestLimit),this.Ba=new xo,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_a.prototype,n.ka=8,n.I=1,n.connect=function(d,_,T,k){Rt(0),this.W=d,this.H=_||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=tc(this,null,this.W),Ns(this)};function xa(d){if(Ea(d),d.I==3){var _=d.V++,T=sr(d.J);if(ot(T,"SID",d.M),ot(T,"RID",_),ot(T,"TYPE","terminate"),Hr(d,T),_=new rr(d,d.j,_),_.M=2,_.A=Ss(sr(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&l.Image&&(new Image().src=_.A,T=!0),T||(_.g=Hu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),fo(_)}So(d)}function Bn(d){d.g&&(To(d),d.g.cancel(),d.g=null)}function Ea(d){Bn(d),d.v&&(l.clearTimeout(d.v),d.v=null),Ta(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function Ns(d){if(!$l(d.h)&&!d.m){d.m=!0;var _=d.Ea;G||N(),ee||(G(),ee=!0),j.add(_,d),d.D=0}}function Wu(d,_){return mo(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ai(m(d.Ea,d,_),Ia(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Q=new rr(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=q(Z),ie(Z,this.U)):Z=this.U),this.u!==null||this.R||(Q.J=Z,Z=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=ec(this,Q,_),T=sr(this.J),ot(T,"RID",d),ot(T,"CVER",22),this.G&&ot(T,"X-HTTP-Session-Id",this.G),Hr(this,T),Z&&(this.R?_="headers="+Lr(Bu(Z))+"&"+_:this.u&&wa(T,this.u,Z)),ga(this.h,Q),this.Ra&&ot(T,"TYPE","init"),this.S?(ot(T,"$req",_),ot(T,"SID","null"),Q.U=!0,yr(Q,T,null)):yr(Q,T,_),this.I=2}}else this.I==3&&(d?Eo(this,d):this.i.length==0||$l(this.h)||Eo(this))};function Eo(d,_){var T;_?T=_.l:T=d.V++;const k=sr(d.J);ot(k,"SID",d.M),ot(k,"RID",T),ot(k,"AID",d.K),Hr(d,k),d.u&&d.o&&wa(k,d.u,d.o),T=new rr(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),_&&(d.i=_.G.concat(d.i)),_=ec(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ga(d.h,T),yr(T,k,_)}function Hr(d,_){d.H&&te(d.H,function(T,k){ot(_,k,T)}),d.l&&te({},function(T,k){ot(_,k,T)})}function ec(d,_,T){T=Math.min(d.i.length,T);const k=d.l?m(d.l.Ka,d.l,d):null;e:{var Q=d.i;let We=-1;for(;;){const Mt=["count="+T];We==-1?T>0?(We=Q[0].g,Mt.push("ofs="+We)):We=0:Mt.push("ofs="+We);let dt=!0;for(let Ft=0;Ft<T;Ft++){var Z=Q[Ft].g;const qn=Q[Ft].map;if(Z-=We,Z<0)We=Math.max(0,Q[Ft].g-100),dt=!1;else try{Z="req"+Z+"_"||"";try{var pe=qn instanceof Map?qn:Object.entries(qn);for(const[Cs,Kr]of pe){let Qr=Kr;h(Kr)&&(Qr=ri(Kr)),Mt.push(Z+Cs+"="+encodeURIComponent(Qr))}}catch(Cs){throw Mt.push(Z+"type="+encodeURIComponent("_badmap")),Cs}}catch{k&&k(qn)}}if(dt){pe=Mt.join("&");break e}}pe=void 0}return d=d.i.splice(0,T),_.G=d,pe}function hn(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;G||N(),ee||(G(),ee=!0),j.add(_,d),d.A=0}}function Gr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ai(m(d.Da,d),Ia(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,mi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ai(m(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Bn(this),mi(this))};function To(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function mi(d){d.g=new rr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=sr(d.na);ot(_,"RID","rpc"),ot(_,"SID",d.M),ot(_,"AID",d.K),ot(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&ot(_,"TO",d.ia),ot(_,"TYPE","xmlhttp"),Hr(d,_),d.u&&d.o&&wa(_,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=Ss(sr(_)),T.u=null,T.R=!0,zl(T,d)}n.Va=function(){this.C!=null&&(this.C=null,Bn(this),Gr(this),Rt(19))};function Ta(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Sa(d,_){var T=null;if(d.g==_){Ta(d),To(d),d.g=null;var k=2}else if(ql(d.h,_))T=_.G,go(d.h,_),k=1;else return;if(d.I!=0){if(_.o)if(k==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var Q=d.D;k=oi(),Dt(k,new Fl(k,T)),Ns(d)}else hn(d);else if(Q=_.m,Q==3||Q==0&&_.X>0||!(k==1&&Wu(d,_)||k==2&&Gr(d)))switch(T&&T.length>0&&(_=d.h,_.i=_.i.concat(T)),Q){case 1:$n(d,5);break;case 4:$n(d,10);break;case 3:$n(d,6);break;default:$n(d,2)}}}function Ia(d,_){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*_}function $n(d,_){if(d.j.info("Error code "+_),_==2){var T=m(d.bb,d),k=d.Ua;const Q=!k;k=new Vr(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||yo(k,"https"),Ss(k),Q?Br(k.toString(),T):$r(k.toString(),T)}else Rt(2);d.I=0,d.l&&d.l.pa(_),So(d),Ea(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function So(d){if(d.I=0,d.ja=[],d.l){const _=Fn(d.h);(_.length!=0||d.i.length!=0)&&(C(d.ja,_),C(d.ja,d.i),d.h.i.length=0,I(d.i),d.i.length=0),d.l.oa()}}function tc(d,_,T){var k=T instanceof Vr?sr(T):new Vr(T);if(k.g!="")_&&(k.g=_+"."+k.g),Fr(k,k.u);else{var Q=l.location;k=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;const Z=new Vr(null);k&&yo(Z,k),_&&(Z.g=_),Q&&Fr(Z,Q),T&&(Z.h=T),k=Z}return T=d.G,_=d.wa,T&&_&&ot(k,T,_),ot(k,"VER",d.ka),Hr(d,k),k}function Hu(d,_,T){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new ht(new Is({ab:T})):new ht(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gu(){}n=Gu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ba(){}ba.prototype.g=function(d,_){return new sn(d,_)};function sn(d,_){yt.call(this),this.g=new _a(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!D(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new gi(this)}w(sn,yt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){xa(this.g)},sn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=ri(d),d=T);_.i.push(new Zf(_.Ya++,d)),_.I==3&&Ns(_)},sn.prototype.N=function(){this.g.l=null,delete this.j,xa(this.g),delete this.g,sn.Z.N.call(this)};function Ku(d){ua.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const T in _){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}w(Ku,ua);function Qu(){Vl.call(this),this.status=1}w(Qu,Vl);function gi(d){this.g=d}w(gi,Gu),gi.prototype.ra=function(){Dt(this.g,"a")},gi.prototype.qa=function(d){Dt(this.g,new Ku(d))},gi.prototype.pa=function(d){Dt(this.g,new Qu)},gi.prototype.oa=function(){Dt(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,PT=function(){return new ba},kT=function(){return oi()},RT=gr,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,hh=ci,ui.COMPLETE="complete",CT=ui,Ru.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",yt.prototype.listen=yt.prototype.J,jc=Ru,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,NT=ht}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const Ux="@firebase/firestore",zx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new ty("@firebase/firestore");function Ja(){return Qo.logLevel}function Se(n,...e){if(Qo.logLevel<=Xe.DEBUG){const t=e.map(yy);Qo.debug(`Firestore (${El}): ${n}`,...t)}}function Ks(n,...e){if(Qo.logLevel<=Xe.ERROR){const t=e.map(yy);Qo.error(`Firestore (${El}): ${n}`,...t)}}function Yo(n,...e){if(Qo.logLevel<=Xe.WARN){const t=e.map(yy);Qo.warn(`Firestore (${El}): ${n}`,...t)}}function yy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jT(n,r,t)}function jT(n,e,t){let r=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ks(r),new Error(r)}function ct(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||jT(e,i,r)}function He(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class r2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class s2{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $s,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},h=p=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $s)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new DT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class i2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new i2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ct(this.o===void 0,3512);const r=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Bx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=l2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Je(n,e){return n<e?-1:n>e?1:0}function hg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Om(i)===Om(a)?Je(i,a):Om(i)?1:-1}return Je(n.length,e.length)}const c2=55296,u2=57343;function Om(n){const e=n.charCodeAt(0);return e>=c2&&e<=u2}function fl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="__name__";class ts{constructor(e,t,r){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ze(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=ts.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Je(e.length,t.length)}static compareSegments(e,t){const r=ts.isNumericId(e),i=ts.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ts.extractNumericId(e).compare(ts.extractNumericId(t)):hg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bi.fromString(e.substring(4,e.length-2))}}class mt extends ts{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const d2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends ts{construct(e,t,r){return new tn(e,t,r)}static isValidIdentifier(e){return d2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$x}static keyField(){return new tn([$x])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(mt.fromString(e))}static fromName(e){return new Me(mt.fromString(e).popFirst(5))}static empty(){return new Me(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n,e,t){if(!t)throw new ge(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LT(n,e,t,r){if(e===!0&&r===!0)throw new ge(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qx(n){if(!Me.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wx(n){if(Me.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function lf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze(12329,{type:typeof n})}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lf(n);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function h2(n,e){if(e<=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function pu(n,e){if(!VT(n))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ge(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=-62135596800,Gx=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Gx);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hx)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gx}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:$t("string",gt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new gt(0,0))}static max(){return new qe(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=-1;function f2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Yi(i,Me.empty(),e)}function p2(n){return new Yi(n.readTime,n.key,Yc)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(qe.min(),Me.empty(),Yc)}static max(){return new Yi(qe.max(),Me.empty(),Yc)}}function m2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==g2)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let i=0,a=0,l=!1;e.forEach((h=>{++i,h.next((()=>{++a,l&&a===i&&t()}),(p=>r(p)))})),l=!0,a===i&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((i=>i?oe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((y=>{l[m]=y,++h,h===a&&r(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new oe(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function v2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-1;function uf(n){return n==null}function kh(n){return n===0&&1/n==-1/0}function w2(n){return typeof n=="number"&&Number.isInteger(n)&&!kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="";function _2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kx(e)),e=x2(n.get(t),e);return Kx(e)}function x2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case FT:t+="";break;default:t+=a}}return t}function Kx(n){return n+FT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function io(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=a??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ln(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Xn([])}unionWith(e){let t=new Kt(tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zT("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const E2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(n){if(ct(!!n,39018),typeof n=="string"){let e=0;const t=E2.exec(n);if(ct(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(n.seconds),nanos:Lt(n.nanos)}}function Lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ji(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="server_timestamp",$T="__type__",qT="__previous_value__",WT="__local_write_time__";function wy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[$T])==null?void 0:r.stringValue)===BT}function df(n){const e=n.mapValue.fields[qT];return wy(e)?df(e):e}function Xc(n){const e=Xi(n.mapValue.fields[WT].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t,r,i,a,l,h,p,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=y}}const Ph="(default)";class pl{constructor(e,t){this.projectId=e,this.database=t||Ph}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="__type__",S2="__max__",Hd={mapValue:{}},GT="__vector__",jh="value";function Zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wy(n)?4:b2(n)?9007199254740991:I2(n)?10:11:ze(28295,{value:n})}function fs(n,e){if(n===e)return!0;const t=Zi(n);if(t!==Zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xc(n).isEqual(Xc(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Xi(i.timestampValue),h=Xi(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Ji(i.bytesValue).isEqual(Ji(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return Lt(i.geoPointValue.latitude)===Lt(a.geoPointValue.latitude)&&Lt(i.geoPointValue.longitude)===Lt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Lt(i.integerValue)===Lt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Lt(i.doubleValue),h=Lt(a.doubleValue);return l===h?kh(l)===kh(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return fl(n.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},h=a.mapValue.fields||{};if(Qx(l)!==Qx(h))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(h[p]===void 0||!fs(l[p],h[p])))return!1;return!0})(n,e);default:return ze(52216,{left:n})}}function Jc(n,e){return(n.values||[]).find((t=>fs(t,e)))!==void 0}function ml(n,e){if(n===e)return 0;const t=Zi(n),r=Zi(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=Lt(a.integerValue||a.doubleValue),p=Lt(l.integerValue||l.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return Xx(n.timestampValue,e.timestampValue);case 4:return Xx(Xc(n),Xc(e));case 5:return hg(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=Ji(a),p=Ji(l);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),p=l.split("/");for(let m=0;m<h.length&&m<p.length;m++){const y=Je(h[m],p[m]);if(y!==0)return y}return Je(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=Je(Lt(a.latitude),Lt(l.latitude));return h!==0?h:Je(Lt(a.longitude),Lt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Jx(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var x,I,C,A;const h=a.fields||{},p=l.fields||{},m=(x=h[jh])==null?void 0:x.arrayValue,y=(I=p[jh])==null?void 0:I.arrayValue,w=Je(((C=m==null?void 0:m.values)==null?void 0:C.length)||0,((A=y==null?void 0:y.values)==null?void 0:A.length)||0);return w!==0?w:Jx(m,y)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Hd.mapValue&&l===Hd.mapValue)return 0;if(a===Hd.mapValue)return 1;if(l===Hd.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),m=l.fields||{},y=Object.keys(m);p.sort(),y.sort();for(let w=0;w<p.length&&w<y.length;++w){const x=hg(p[w],y[w]);if(x!==0)return x;const I=ml(h[p[w]],m[y[w]]);if(I!==0)return I}return Je(p.length,y.length)})(n.mapValue,e.mapValue);default:throw ze(23264,{he:t})}}function Xx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Xi(n),r=Xi(e),i=Je(t.seconds,r.seconds);return i!==0?i:Je(t.nanos,r.nanos)}function Jx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=ml(t[i],r[i]);if(a)return a}return Je(t.length,r.length)}function gl(n){return fg(n)}function fg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Xi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ji(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=fg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${fg(t.fields[l])}`;return i+"}"})(n.mapValue):ze(61005,{value:n})}function fh(n){switch(Zi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(n);return e?16+fh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+fh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return io(r.fields,((a,l)=>{i+=a.length+fh(l)})),i})(n.mapValue);default:throw ze(13486,{value:n})}}function Zx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pg(n){return!!n&&"integerValue"in n}function _y(n){return!!n&&"arrayValue"in n}function e0(n){return!!n&&"nullValue"in n}function t0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ph(n){return!!n&&"mapValue"in n}function I2(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[HT])==null?void 0:r.stringValue)===GT}function Uc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return io(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Uc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uc(n.arrayValue.values[t]);return e}return{...n}}function b2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===S2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(t)}setAll(e){let t=tn.emptyPath(),r={},i=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Uc(l):i.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ph(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){io(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Ln(Uc(this.value))}}function KT(n){const e=[];return io(n.fields,((t,r)=>{const i=new tn([t]);if(ph(r)){const a=KT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new wn(e,0,qe.min(),qe.min(),qe.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,i){return new wn(e,1,t,qe.min(),r,i,0)}static newNoDocument(e,t){return new wn(e,2,t,qe.min(),qe.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,qe.min(),qe.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t){this.position=e,this.inclusive=t}}function n0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=Me.comparator(Me.fromName(l.referenceValue),t.key):r=ml(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function r0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function A2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{}class Bt extends QT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new C2(e,t,r):t==="array-contains"?new P2(e,r):t==="in"?new j2(e,r):t==="not-in"?new D2(e,r):t==="array-contains-any"?new M2(e,r):new Bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new R2(e,r):new k2(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ml(t,this.value)):t!==null&&Zi(this.value)===Zi(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends QT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new kr(e,t)}matches(e){return YT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YT(n){return n.op==="and"}function XT(n){return N2(n)&&YT(n)}function N2(n){for(const e of n.filters)if(e instanceof kr)return!1;return!0}function mg(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+gl(n.value);if(XT(n))return n.filters.map((e=>mg(e))).join(",");{const e=n.filters.map((t=>mg(t))).join(",");return`${n.op}(${e})`}}function JT(n,e){return n instanceof Bt?(function(r,i){return i instanceof Bt&&r.op===i.op&&r.field.isEqual(i.field)&&fs(r.value,i.value)})(n,e):n instanceof kr?(function(r,i){return i instanceof kr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,h)=>a&&JT(l,i.filters[h])),!0):!1})(n,e):void ze(19439)}function ZT(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${gl(t.value)}`})(n):n instanceof kr?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZT).join(" ,")+"}"})(n):"Filter"}class C2 extends Bt{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class R2 extends Bt{constructor(e,t){super(e,"in",t),this.keys=eS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class k2 extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=eS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Me.fromName(r.referenceValue)))}class P2 extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _y(t)&&Jc(t.arrayValue,this.value)}}class j2 extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jc(this.value.arrayValue,t)}}class D2 extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jc(this.value.arrayValue,t)}}class M2 extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_y(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Jc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function s0(n,e=null,t=[],r=[],i=null,a=null,l=null){return new O2(n,e,t,r,i,a,l)}function xy(n){const e=He(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>mg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>gl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>gl(r))).join(",")),e.Te=t}return e.Te}function Ey(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!r0(n.startAt,e.startAt)&&r0(n.endAt,e.endAt)}function gg(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L2(n,e,t,r,i,a,l,h){return new Il(n,e,t,r,i,a,l,h)}function hf(n){return new Il(n)}function i0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tS(n){return n.collectionGroup!==null}function zc(n){const e=He(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Kt(tn.comparator);return l.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Zc(a,r))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new Zc(tn.keyField(),r))}return e.Ie}function cs(n){const e=He(n);return e.Ee||(e.Ee=V2(e,zc(n))),e.Ee}function V2(n,e){if(n.limitType==="F")return s0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Zc(i.field,a)}));const t=n.endAt?new Dh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dh(n.startAt.position,n.startAt.inclusive):null;return s0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yg(n,e){const t=n.filters.concat([e]);return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mh(n,e,t){return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ff(n,e){return Ey(cs(n),cs(e))&&n.limitType===e.limitType}function nS(n){return`${xy(cs(n))}|lt:${n.limitType}`}function Za(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>ZT(i))).join(", ")}]`),uf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>gl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>gl(i))).join(",")),`Target(${r})`})(cs(n))}; limitType=${n.limitType})`}function pf(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Me.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of zc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,h,p){const m=n0(l,h,p);return l.inclusive?m<=0:m<0})(r.startAt,zc(r),i)||r.endAt&&!(function(l,h,p){const m=n0(l,h,p);return l.inclusive?m>=0:m>0})(r.endAt,zc(r),i))})(n,e)}function F2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rS(n){return(e,t)=>{let r=!1;for(const i of zc(n)){const a=U2(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function U2(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):(function(a,l,h){const p=l.data.field(a),m=h.data.field(a);return p!==null&&m!==null?ml(p,m):ze(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return UT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Ct(Me.comparator);function Qs(){return z2}const sS=new Ct(Me.comparator);function Dc(...n){let e=sS;for(const t of n)e=e.insert(t.key,t);return e}function iS(n){let e=sS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Bo(){return Bc()}function oS(){return Bc()}function Bc(){return new ia((n=>n.toString()),((n,e)=>n.isEqual(e)))}const B2=new Ct(Me.comparator),$2=new Kt(Me.comparator);function Ze(...n){let e=$2;for(const t of n)e=e.add(t);return e}const q2=new Kt(Je);function W2(){return q2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function aS(n){return{integerValue:""+n}}function H2(n,e){return w2(e)?aS(e):Ty(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this._=void 0}}function G2(n,e,t){return n instanceof eu?(function(i,a){const l={fields:{[$T]:{stringValue:BT},[WT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&wy(a)&&(a=df(a)),a&&(l.fields[qT]=a),{mapValue:l}})(t,e):n instanceof tu?cS(n,e):n instanceof nu?uS(n,e):(function(i,a){const l=lS(i,a),h=o0(l)+o0(i.Ae);return pg(l)&&pg(i.Ae)?aS(h):Ty(i.serializer,h)})(n,e)}function K2(n,e,t){return n instanceof tu?cS(n,e):n instanceof nu?uS(n,e):t}function lS(n,e){return n instanceof Oh?(function(r){return pg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class eu extends mf{}class tu extends mf{constructor(e){super(),this.elements=e}}function cS(n,e){const t=dS(e);for(const r of n.elements)t.some((i=>fs(i,r)))||t.push(r);return{arrayValue:{values:t}}}class nu extends mf{constructor(e){super(),this.elements=e}}function uS(n,e){let t=dS(e);for(const r of n.elements)t=t.filter((i=>!fs(i,r)));return{arrayValue:{values:t}}}class Oh extends mf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o0(n){return Lt(n.integerValue||n.doubleValue)}function dS(n){return _y(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t){this.field=e,this.transform=t}}function Y2(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof tu&&i instanceof tu||r instanceof nu&&i instanceof nu?fl(r.elements,i.elements,fs):r instanceof Oh&&i instanceof Oh?fs(r.Ae,i.Ae):r instanceof eu&&i instanceof eu})(n.transform,e.transform)}class X2{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gf{}function hS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yf(n.key,An.none()):new mu(n.key,n.data,An.none());{const t=n.data,r=Ln.empty();let i=new Kt(tn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new oo(n.key,r,new Xn(i.toArray()),An.none())}}function J2(n,e,t){n instanceof mu?(function(i,a,l){const h=i.value.clone(),p=l0(i.fieldTransforms,a,l.transformResults);h.setAll(p),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof oo?(function(i,a,l){if(!mh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const h=l0(i.fieldTransforms,a,l.transformResults),p=a.data;p.setAll(fS(i)),p.setAll(h),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function $c(n,e,t,r){return n instanceof mu?(function(a,l,h,p){if(!mh(a.precondition,l))return h;const m=a.value.clone(),y=c0(a.fieldTransforms,p,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof oo?(function(a,l,h,p){if(!mh(a.precondition,l))return h;const m=c0(a.fieldTransforms,p,l),y=l.data;return y.setAll(fS(a)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,l,h){return mh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function Z2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=lS(r.transform,i||null);a!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,a))}return t||null}function a0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fl(r,i,((a,l)=>Y2(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mu extends gf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oo extends gf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function fS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function l0(n,e,t){const r=new Map;ct(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,K2(l,h,t[i]))}return r}function c0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,G2(a,l,e))}return r}class yf extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ej extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&J2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$c(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$c(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oS();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const p=hS(l,h);p!==null&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(qe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,((t,r)=>a0(t,r)))&&fl(this.baseMutations,e.baseMutations,((t,r)=>a0(t,r)))}}class Sy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return B2})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Sy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nj=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,rt;function sj(n){switch(n){case ne.OK:return ze(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ze(15467,{code:n})}}function pS(n){if(n===void 0)return Ks("GRPC error has no .code"),ne.UNKNOWN;switch(n){case zt.OK:return ne.OK;case zt.CANCELLED:return ne.CANCELLED;case zt.UNKNOWN:return ne.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ne.INTERNAL;case zt.UNAVAILABLE:return ne.UNAVAILABLE;case zt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case zt.NOT_FOUND:return ne.NOT_FOUND;case zt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case zt.ABORTED:return ne.ABORTED;case zt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case zt.DATA_LOSS:return ne.DATA_LOSS;default:return ze(39323,{code:n})}}(rt=zt||(zt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new Bi([4294967295,4294967295],0);function u0(n){const e=ij().encode(n),t=new AT;return t.update(e),new Uint8Array(t.digest())}function d0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Bi([t,r],0),new Bi([i,a],0)]}class Iy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mc(`Invalid padding: ${t}`);if(r<0)throw new Mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Bi.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Bi.fromNumber(r)));return i.compare(oj)===1&&(i=new Bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=u0(e),[r,i]=d0(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Iy(a,i,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=u0(e),[r,i]=d0(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vf(qe.min(),i,new Ct(Je),Qs(),Ze())}}class gu{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gu(r,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class mS{constructor(e,t){this.targetId=e,this.Ce=t}}class gS{constructor(e,t,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class h0{constructor(){this.ve=0,this.Fe=f0(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),r=Ze();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ze(38017,{changeType:a})}})),new gu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=f0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class aj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qs(),this.Je=Gd(),this.He=Gd(),this.Ye=new Ct(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(gg(a))if(r===0){const l=new Me(a.path);this.et(t,l,wn.newNoDocument(l,qe.min()))}else ct(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),p=h?this.ct(h,e,l):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,h;try{l=Ji(r).toUint8Array()}catch(p){if(p instanceof zT)return Yo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Iy(l,i,a)}catch(p){return Yo(p instanceof Mc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&gg(h.target)){const p=new Me(h.target.path);this.It(p).has(l)||this.Et(l,p)||this.et(l,p,wn.newNoDocument(p,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=Ze();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new vf(e,t,this.Ye,this.je,r);return this.je=Qs(),this.Je=Gd(),this.He=Gd(),this.Ye=new Ct(Je),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new h0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new h0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gd(){return new Ct(Me.comparator)}function f0(){return new Ct(Me.comparator)}const lj={asc:"ASCENDING",desc:"DESCENDING"},cj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uj={and:"AND",or:"OR"};class dj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vg(n,e){return n.useProto3Json||uf(e)?e:{value:e}}function Lh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hj(n,e){return Lh(n,e.toTimestamp())}function us(n){return ct(!!n,49232),qe.fromTimestamp((function(t){const r=Xi(t);return new gt(r.seconds,r.nanos)})(n))}function by(n,e){return wg(n,e).canonicalString()}function wg(n,e){const t=(function(i){return new mt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function vS(n){const e=mt.fromString(n);return ct(TS(e),10190,{key:e.toString()}),e}function _g(n,e){return by(n.databaseId,e.path)}function Lm(n,e){const t=vS(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(_S(t))}function wS(n,e){return by(n.databaseId,e)}function fj(n){const e=vS(n);return e.length===4?mt.emptyPath():_S(e)}function xg(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _S(n){return ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function p0(n,e,t){return{name:_g(n,e),fields:t.value.mapValue.fields}}function pj(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ze(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(ct(y===void 0||typeof y=="string",58123),nn.fromBase64String(y||"")):(ct(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),nn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(m){const y=m.code===void 0?ne.UNKNOWN:pS(m.code);return new ge(y,m.message||"")})(l);t=new gS(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lm(n,r.document.name),a=us(r.document.updateTime),l=r.document.createTime?us(r.document.createTime):qe.min(),h=new Ln({mapValue:{fields:r.document.fields}}),p=wn.newFoundDocument(i,a,l,h),m=r.targetIds||[],y=r.removedTargetIds||[];t=new gh(m,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lm(n,r.document),a=r.readTime?us(r.readTime):qe.min(),l=wn.newNoDocument(i,a),h=r.removedTargetIds||[];t=new gh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lm(n,r.document),a=r.removedTargetIds||[];t=new gh([],a,i,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new rj(i,a),h=r.targetId;t=new mS(h,l)}}return t}function mj(n,e){let t;if(e instanceof mu)t={update:p0(n,e.key,e.value)};else if(e instanceof yf)t={delete:_g(n,e.key)};else if(e instanceof oo)t={update:p0(n,e.key,e.data),updateMask:Sj(e.fieldMask)};else{if(!(e instanceof ej))return ze(16599,{Vt:e.type});t={verify:_g(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof eu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof tu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof nu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Oh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ze(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:hj(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ze(27497)})(n,e.precondition)),t}function gj(n,e){return n&&n.length>0?(ct(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?us(i.updateTime):us(a);return l.isEqual(qe.min())&&(l=us(a)),new X2(l,i.transformResults||[])})(t,e)))):[]}function yj(n,e){return{documents:[wS(n,e.path)]}}function vj(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wS(n,i);const a=(function(m){if(m.length!==0)return ES(kr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:el(x.field),direction:xj(x.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=vg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function wj(n){let e=fj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(w){const x=xS(w);return x instanceof kr&&XT(x)?x.getFilters():[x]})(t.where));let l=[];t.orderBy&&(l=(function(w){return w.map((x=>(function(C){return new Zc(tl(C.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let x;return x=typeof w=="object"?w.value:w,uf(x)?null:x})(t.limit));let p=null;t.startAt&&(p=(function(w){const x=!!w.before,I=w.values||[];return new Dh(I,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const x=!w.before,I=w.values||[];return new Dh(I,x)})(t.endAt)),L2(e,i,l,a,h,"F",p,m)}function _j(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=tl(t.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=tl(t.unaryFilter.field);return Bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=tl(t.unaryFilter.field);return Bt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=tl(t.unaryFilter.field);return Bt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(tl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return kr.create(t.compositeFilter.filters.map((r=>xS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(t.compositeFilter.op))})(n):ze(30097,{filter:n})}function xj(n){return lj[n]}function Ej(n){return cj[n]}function Tj(n){return uj[n]}function el(n){return{fieldPath:n.canonicalString()}}function tl(n){return tn.fromServerFormat(n.fieldPath)}function ES(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(t0(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NAN"}};if(e0(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(t0(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NOT_NAN"}};if(e0(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:el(t.field),op:Ej(t.op),value:t.value}}})(n):n instanceof kr?(function(t){const r=t.getFilters().map((i=>ES(i)));return r.length===1?r[0]:{compositeFilter:{op:Tj(t.op),filters:r}}})(n):ze(54877,{filter:n})}function Sj(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t,r,i,a=qe.min(),l=qe.min(),h=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.yt=e}}function bj(n){const e=wj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.Cn=new Nj}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Yi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class Nj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kt(mt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SS=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(SS,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="LruGarbageCollector",Cj=1048576;function y0([n,e],[t,r]){const i=Je(n,t);return i===0?Je(e,r):i}class Rj{constructor(e){this.Ir=e,this.buffer=new Kt(y0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();y0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(g0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sl(t)?Se(g0,"Ignoring IndexedDB error during garbage collection: ",t):await Tl(t)}await this.Vr(3e5)}))}}class Pj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(cf.ce);const r=new Rj(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(m0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,l,h,p,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,l=Date.now(),this.nthSequenceNumber(e,i)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),Ja()<=Xe.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${w} documents in `+(m-p)+`ms
Total Duration: ${m-y}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:w}))))}}function jj(n,e){return new Pj(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.changes=new ia((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&$c(r.mutation,i,Xn.empty(),gt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ze()){const i=Bo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=Dc();return a.forEach(((h,p)=>{l=l.insert(h,p.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Bo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,i){let a=Qs();const l=Bc(),h=(function(){return Bc()})();return t.forEach(((p,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof oo)?a=a.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),$c(y.mutation,m,y.mutation.getFieldMask(),gt.now())):l.set(m.key,Xn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,y)=>l.set(m,y))),t.forEach(((m,y)=>h.set(m,new Mj(y,l.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Bc();let i=new Ct(((l,h)=>l-h)),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let y=r.get(p)||Xn.empty();y=h.applyToLocalView(m,y),r.set(p,y);const w=(i.get(h.batchId)||Ze()).add(p);i=i.insert(h.batchId,w)}))})).next((()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,y=p.value,w=oS();y.forEach((x=>{if(!a.has(x)){const I=hS(t.get(x),r.get(x));I!==null&&w.set(x,I),a=a.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return oe.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return Me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):oe.resolve(Bo());let h=Yc,p=a;return l.next((m=>oe.forEach(m,((y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{p=p.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,Ze()))).next((y=>({batchId:h,changes:iS(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((r=>{let i=Dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=Dc();return this.indexManager.getCollectionParents(e,a).next((h=>oe.forEach(h,(p=>{const m=(function(w,x){return new Il(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((y=>{y.forEach(((w,x)=>{l=l.insert(w,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((p,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,wn.newInvalidDocument(y)))}));let h=Dc();return l.forEach(((p,m)=>{const y=a.get(p);y!==void 0&&$c(y.mutation,m,Xn.empty(),gt.now()),pf(t,m)&&(h=h.insert(p,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:us(i.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:bj(i.bundledQuery),readTime:us(i.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.overlays=new Ct(Me.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bo();return oe.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Bo(),a=t.length+1,l=new Me(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ct(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=Bo(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=Bo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,y)=>h.set(m,y))),!(h.size()>=i)););return oe.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new nj(t,r));let a=this.qr.get(t);a===void 0&&(a=Ze(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.Qr=new Kt(Zt.$r),this.Ur=new Kt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Zt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Me(new mt([])),r=new Zt(t,e),i=new Zt(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Me(new mt([])),r=new Zt(t,e),i=new Zt(t,e+1);let a=Ze();return this.Ur.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Zt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Me.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Zt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new tj(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Zr=this.Zr.add(new Zt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?vy:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zt(t,0),i=new Zt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(l=>{const h=this.Xr(l.Yr);a.push(h)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(Je);return t.forEach((i=>{const a=new Zt(i,0),l=new Zt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{r=r.add(h.Yr)}))})),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Me.isDocumentKey(a)||(a=a.child(""));const l=new Zt(new Me(a),0);let h=new Kt(Je);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(p.Yr)),!0)}),l),oe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ct(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(t.mutations,(i=>{const a=new Zt(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Zt(t,0),i=this.Zr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=Qs();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():wn.newInvalidDocument(i))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Qs();const l=t.path,h=new Me(l.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:y}}=p.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||m2(p2(y),r)<=0||(i.has(y.key)||pf(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ze(9500)}ii(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Bj(this)}getSize(e){return oe.resolve(this.size)}}class Bj extends Dj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.persistence=e,this.si=new ia((t=>xy(t)),Ey),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new Ay,this.targetCount=0,this.ai=yl.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new yl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),oe.waitFor(a).next((()=>i))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.ui={},this.overlays={},this.ci=new cf(0),this.li=!1,this.li=!0,this.hi=new Fj,this.referenceDelegate=e(this),this.Pi=new $j(this),this.indexManager=new Aj,this.remoteDocumentCache=(function(i){return new zj(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Ij(t),this.Ii=new Lj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Uj(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new qj(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return oe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class qj extends y2{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.Ri=new Ay,this.Vi=null}static mi(e){return new Ny(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(r=>{const i=Me.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,qe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vh{constructor(e,t){this.persistence=e,this.pi=new ia((r=>_2(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=jj(this,t)}static mi(e,t){return new Vh(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?oe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((h=>{h||(r++,a.removeEntry(l,qe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fh(e.data.value)),t}br(e,t,r){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ze(),i=Ze();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Cy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wC()?8:v2(En())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new Wj;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ja()<=Xe.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Ja()<=Xe.DEBUG&&Se("QueryEngine","Query:",Za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ja()<=Xe.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(t))):oe.resolve())}ys(e,t){if(i0(t))return oe.resolve(null);let r=cs(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Mh(t,null,"F"),r=cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ze(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((p=>{const m=this.Ds(t,h);return this.Cs(t,m,l,p.readTime)?this.ys(e,Mh(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,r,i){return i0(t)||i.isEqual(qe.min())?oe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,i)?oe.resolve(null):(Ja()<=Xe.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Za(t)),this.vs(e,l,t,f2(i,Yc)).next((h=>h)))}))}Ds(e,t){let r=new Kt(rS(e));return t.forEach(((i,a)=>{pf(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Ja()<=Xe.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Za(t)),this.ps.getDocumentsMatchingQuery(e,t,Yi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LocalStore",Gj=3e8;class Kj{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ct(Je),this.xs=new ia((a=>xy(a)),Ey),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Oj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Qj(n,e,t,r){return new Kj(n,e,t,r)}async function bS(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let p=Ze();for(const m of i){l.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}for(const m of a){h.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((m=>({Ls:m,removedBatchIds:l,addedBatchIds:h})))}))}))}function Yj(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,m,y){const w=m.batch,x=w.keys();let I=oe.resolve();return x.forEach((C=>{I=I.next((()=>y.getEntry(p,C))).next((A=>{const S=m.docVersions.get(C);ct(S!==null,48541),A.version.compareTo(S)<0&&(w.applyToRemoteDocument(A,m),A.isValidDocument()&&(A.setReadTime(m.commitVersion),y.addEntry(A)))}))})),I.next((()=>h.mutationQueue.removeMutationBatch(p,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let p=Ze();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function AS(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Xj(n,e){const t=He(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach(((y,w)=>{const x=i.get(w);if(!x)return;h.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,w))));let I=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?I=I.withResumeToken(nn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),i=i.insert(w,I),(function(A,S,V){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Gj?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(x,I,y)&&h.push(t.Pi.updateTargetData(a,I))}));let p=Qs(),m=Ze();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),h.push(Jj(a,l,e.documentUpdates).next((y=>{p=y.ks,m=y.qs}))),!r.isEqual(qe.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(y)}return oe.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Ms=i,a)))}function Jj(n,e,t){let r=Ze(),i=Ze();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Qs();return t.forEach(((h,p)=>{const m=a.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(qe.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):Se(Ry,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)})),{ks:l,qs:i}}))}function Zj(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function eD(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,oe.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new Vi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Eg(n,e,t){const r=He(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Sl(l))throw l;Se(Ry,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function v0(n,e,t){const r=He(n);let i=qe.min(),a=Ze();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(p,m,y){const w=He(p),x=w.xs.get(y);return x!==void 0?oe.resolve(w.Ms.get(x)):w.Pi.getTargetData(m,y)})(r,l,cs(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next((p=>{a=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:qe.min(),t?a:Ze()))).next((h=>(tD(r,F2(e),h),{documents:h,Qs:a})))))}function tD(n,e,t){let r=n.Os.get(e)||qe.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class w0{constructor(){this.activeTargetIds=W2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nD{constructor(){this.Mo=new w0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="ConnectivityMonitor";class x0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(_0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(_0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd=null;function Tg(){return Kd===null?Kd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kd++,"0x"+Kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",sD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ph?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const l=Tg(),h=this.zo(e,t.toUriEncodedString());Se(Vm,`Sending RPC '${e}' ${l}:`,h,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,i,a);const{host:m}=new URL(h),y=Zs(m);return this.Jo(e,h,p,r,y).then((w=>(Se(Vm,`Received RPC '${e}' ${l}: `,w),w)),(w=>{throw Yo(Vm,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w}))}Ho(e,t,r,i,a,l){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+El})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=sD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class aD extends iD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const l=Tg();return new Promise(((h,p)=>{const m=new NT;m.setWithCredentials(!0),m.listenOnce(CT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case hh.NO_ERROR:const w=m.getResponseJson();Se(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case hh.TIMEOUT:Se(yn,`RPC '${e}' ${l} timed out`),p(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case hh.HTTP_ERROR:const x=m.getStatus();if(Se(yn,`RPC '${e}' ${l} failed with status:`,x,"response text:",m.getResponseText()),x>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I==null?void 0:I.error;if(C&&C.status&&C.message){const A=(function(V){const M=V.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(M)>=0?M:ne.UNKNOWN})(C.status);p(new ge(A,C.message))}else p(new ge(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Se(yn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(i);Se(yn,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=Tg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=PT(),h=kT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=a.join("");Se(yn,`Creating RPC '${e}' stream ${i}: ${y}`,p);const w=l.createWebChannel(y,p);this.I_(w);let x=!1,I=!1;const C=new oD({Yo:S=>{I?Se(yn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(Se(yn,`Opening RPC '${e}' stream ${i} transport.`),w.open(),x=!0),Se(yn,`RPC '${e}' stream ${i} sending:`,S),w.send(S))},Zo:()=>w.close()}),A=(S,V,M)=>{S.listen(V,(P=>{try{M(P)}catch($){setTimeout((()=>{throw $}),0)}}))};return A(w,jc.EventType.OPEN,(()=>{I||(Se(yn,`RPC '${e}' stream ${i} transport opened.`),C.o_())})),A(w,jc.EventType.CLOSE,(()=>{I||(I=!0,Se(yn,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(w))})),A(w,jc.EventType.ERROR,(S=>{I||(I=!0,Yo(yn,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),C.a_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))})),A(w,jc.EventType.MESSAGE,(S=>{var V;if(!I){const M=S.data[0];ct(!!M,16349);const P=M,$=(P==null?void 0:P.error)||((V=P[0])==null?void 0:V.error);if($){Se(yn,`RPC '${e}' stream ${i} received error:`,$);const G=$.status;let ee=(function(O){const L=zt[O];if(L!==void 0)return pS(L)})(G),j=$.message;ee===void 0&&(ee=ne.INTERNAL,j="Unknown error status: "+G+" with message "+$.message),I=!0,C.a_(new ge(ee,j)),w.close()}else Se(yn,`RPC '${e}' stream ${i} received:`,M),C.u_(M)}})),A(h,RT.STAT_EVENT,(S=>{S.stat===dg.PROXY?Se(yn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===dg.NOPROXY&&Se(yn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return new dj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="PersistentStream";class CS{constructor(e,t,r,i,a,l,h,p){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(E0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Se(E0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lD extends CS{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=pj(this.serializer,e),r=(function(a){if(!("targetChange"in a))return qe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?qe.min():l.readTime?us(l.readTime):qe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=xg(this.serializer),t.addTarget=(function(a,l){let h;const p=l.target;if(h=gg(p)?{documents:yj(a,p)}:{query:vj(a,p).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=yS(a,l.resumeToken);const m=vg(a,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(qe.min())>0){h.readTime=Lh(a,l.snapshotVersion.toTimestamp());const m=vg(a,l.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=_j(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=xg(this.serializer),t.removeTarget=e,this.q_(t)}}class cD extends CS{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=gj(e.writeResults,e.commitTime),r=us(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=xg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>mj(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{}class dD extends uD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,wg(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ne.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,wg(t,r),i,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ne.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="RemoteStore";class fD{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{oa(this)&&(Se(Xo,"Restarting streams for network reachability change."),await(async function(p){const m=He(p);m.Ea.add(4),await yu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await _f(m)})(this))}))})),this.Ra=new hD(r,i)}}async function _f(n){if(oa(n))for(const e of n.da)await e(!0)}async function yu(n){for(const e of n.da)await e(!1)}function RS(n,e){const t=He(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dy(t)?jy(t):bl(t).O_()&&Py(t,e))}function ky(n,e){const t=He(n),r=bl(t);t.Ia.delete(e),r.O_()&&kS(t,e),t.Ia.size===0&&(r.O_()?r.L_():oa(t)&&t.Ra.set("Unknown"))}function Py(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(n).Y_(e)}function kS(n,e){n.Va.Ue(e),bl(n).Z_(e)}function jy(n){n.Va=new aj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),bl(n).start(),n.Ra.ua()}function Dy(n){return oa(n)&&!bl(n).x_()&&n.Ia.size>0}function oa(n){return He(n).Ea.size===0}function PS(n){n.Va=void 0}async function pD(n){n.Ra.set("Online")}async function mD(n){n.Ia.forEach(((e,t)=>{Py(n,e)}))}async function gD(n,e){PS(n),Dy(n)?(n.Ra.ha(e),jy(n)):n.Ra.set("Unknown")}async function yD(n,e,t){if(n.Ra.set("Online"),e instanceof gS&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const h of a.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ia.delete(h),i.Va.removeTarget(h))})(n,e)}catch(r){Se(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fh(n,r)}else if(e instanceof gh?n.Va.Ze(e):e instanceof mS?n.Va.st(e):n.Va.tt(e),!t.isEqual(qe.min()))try{const r=await AS(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const y=a.Ia.get(m);y&&a.Ia.set(m,y.withResumeToken(p.resumeToken,l))}})),h.targetMismatches.forEach(((p,m)=>{const y=a.Ia.get(p);if(!y)return;a.Ia.set(p,y.withResumeToken(nn.EMPTY_BYTE_STRING,y.snapshotVersion)),kS(a,p);const w=new Vi(y.target,p,m,y.sequenceNumber);Py(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){Se(Xo,"Failed to raise snapshot:",r),await Fh(n,r)}}async function Fh(n,e,t){if(!Sl(e))throw e;n.Ea.add(1),await yu(n),n.Ra.set("Offline"),t||(t=()=>AS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Se(Xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _f(n)}))}function jS(n,e){return e().catch((t=>Fh(n,t,e)))}async function xf(n){const e=He(n),t=eo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vy;for(;vD(e);)try{const i=await Zj(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,wD(e,i)}catch(i){await Fh(e,i)}DS(e)&&MS(e)}function vD(n){return oa(n)&&n.Ta.length<10}function wD(n,e){n.Ta.push(e);const t=eo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function DS(n){return oa(n)&&!eo(n).x_()&&n.Ta.length>0}function MS(n){eo(n).start()}async function _D(n){eo(n).ra()}async function xD(n){const e=eo(n);for(const t of n.Ta)e.ea(t.mutations)}async function ED(n,e,t){const r=n.Ta.shift(),i=Sy.from(r,e,t);await jS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await xf(n)}async function TD(n,e){e&&eo(n).X_&&await(async function(r,i){if((function(l){return sj(l)&&l!==ne.ABORTED})(i.code)){const a=r.Ta.shift();eo(r).B_(),await jS(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await xf(r)}})(n,e),DS(n)&&MS(n)}async function T0(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Se(Xo,"RemoteStore received new credentials");const r=oa(t);t.Ea.add(3),await yu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _f(t)}async function SD(n,e){const t=He(n);e?(t.Ea.delete(2),await _f(t)):e||(t.Ea.add(2),await yu(t),t.Ra.set("Unknown"))}function bl(n){return n.ma||(n.ma=(function(t,r,i){const a=He(t);return a.sa(),new lD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:pD.bind(null,n),t_:mD.bind(null,n),r_:gD.bind(null,n),H_:yD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Dy(n)?jy(n):n.Ra.set("Unknown")):(await n.ma.stop(),PS(n))}))),n.ma}function eo(n){return n.fa||(n.fa=(function(t,r,i){const a=He(t);return a.sa(),new cD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_D.bind(null,n),r_:TD.bind(null,n),ta:xD.bind(null,n),na:ED.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xf(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(Xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new My(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),Sl(n))return new ge(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=Dc(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.ga=new Ct(Me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class vl{constructor(e,t,r,i,a,l,h,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new vl(e,t,ol.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bD{constructor(){this.queries=I0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=He(t),a=i.queries;i.queries=I0(),a.forEach(((l,h)=>{for(const p of h.Sa)p.onError(r)}))})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function I0(){return new ia((n=>nS(n)),ff)}async function Ly(n,e){const t=He(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new ID,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const h=Oy(l,`Initialization of query '${Za(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Fy(t)}async function Vy(n,e){const t=He(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function AD(n,e){const t=He(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(i)&&(r=!0);l.wa=i}}r&&Fy(t)}function ND(n,e,t){const r=He(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Fy(n){n.Ca.forEach((e=>{e.next()}))}var Sg,b0;(b0=Sg||(Sg={})).Ma="default",b0.Cache="cache";class Uy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.key=e}}class LS{constructor(e){this.key=e}}class CD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=rS(e),this.tu=new ol(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new S0,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,w)=>{const x=i.get(y),I=pf(this.query,w)?w:null,C=!!x&&this.mutatedKeys.has(x.key),A=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;x&&I?x.data.isEqual(I.data)?C!==A&&(r.track({type:3,doc:I}),S=!0):this.su(x,I)||(r.track({type:2,doc:I}),S=!0,(p&&this.eu(I,p)>0||m&&this.eu(I,m)<0)&&(h=!0)):!x&&I?(r.track({type:0,doc:I}),S=!0):x&&!I&&(r.track({type:1,doc:x}),S=!0,(p||m)&&(h=!0)),S&&(I?(l=l.add(I),a=A?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,w)=>(function(I,C){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:S})}};return A(I)-A(C)})(y.type,w.type)||this.eu(y.doc,w.doc))),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],p=this.Xa.size===0&&this.current&&!i?1:0,m=p!==this.Za;return this.Za=p,l.length!==0||m?{snapshot:new vl(this.query,e.tu,a,l,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new LS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new OS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zy="SyncEngine";class RD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kD{constructor(e){this.key=e,this.hu=!1}}class PD{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ia((h=>nS(h)),ff),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Me.comparator),this.Au=new Map,this.Ru=new Ay,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jD(n,e,t=!0){const r=$S(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await VS(r,e,t,!0),i}async function DD(n,e){const t=$S(n);await VS(t,e,!0,!1)}async function VS(n,e,t,r){const i=await eD(n.localStore,cs(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await MD(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&RS(n.remoteStore,i),h}async function MD(n,e,t,r,i){n.pu=(w,x,I)=>(async function(A,S,V,M){let P=S.view.ru(V);P.Cs&&(P=await v0(A.localStore,S.query,!1).then((({documents:j})=>S.view.ru(j,P))));const $=M&&M.targetChanges.get(S.targetId),G=M&&M.targetMismatches.get(S.targetId)!=null,ee=S.view.applyChanges(P,A.isPrimaryClient,$,G);return N0(A,S.targetId,ee.au),ee.snapshot})(n,w,x,I);const a=await v0(n.localStore,e,!0),l=new CD(e,a.Qs),h=l.ru(a.documents),p=gu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=l.applyChanges(h,n.isPrimaryClient,p);N0(n,t,m.au);const y=new RD(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function OD(n,e,t){const r=He(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!ff(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Eg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ky(r.remoteStore,i.targetId),Ig(r,i.targetId)})).catch(Tl)):(Ig(r,i.targetId),await Eg(r.localStore,i.targetId,!0))}async function LD(n,e){const t=He(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ky(t.remoteStore,r.targetId))}async function VD(n,e,t){const r=WD(n);try{const i=await(function(l,h){const p=He(l),m=gt.now(),y=h.reduce(((I,C)=>I.add(C.key)),Ze());let w,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let C=Qs(),A=Ze();return p.Ns.getEntries(I,y).next((S=>{C=S,C.forEach(((V,M)=>{M.isValidDocument()||(A=A.add(V))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,C))).next((S=>{w=S;const V=[];for(const M of h){const P=Z2(M,w.get(M.key).overlayedDocument);P!=null&&V.push(new oo(M.key,P,KT(P.value.mapValue),An.exists(!0)))}return p.mutationQueue.addMutationBatch(I,m,V,h)})).next((S=>{x=S;const V=S.applyToLocalDocumentSet(w,A);return p.documentOverlayCache.saveOverlays(I,S.batchId,V)}))})).then((()=>({batchId:x.batchId,changes:iS(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,h,p){let m=l.Vu[l.currentUser.toKey()];m||(m=new Ct(Je)),m=m.insert(h,p),l.Vu[l.currentUser.toKey()]=m})(r,i.batchId,t),await vu(r,i.changes),await xf(r.remoteStore)}catch(i){const a=Oy(i,"Failed to persist write");t.reject(a)}}async function FS(n,e){const t=He(n);try{const r=await Xj(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Au.get(a);l&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?ct(l.hu,14607):i.removedDocuments.size>0&&(ct(l.hu,42227),l.hu=!1))})),await vu(t,r,e)}catch(r){await Tl(r)}}function A0(n,e,t){const r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(l,h){const p=He(l);p.onlineState=h;let m=!1;p.queries.forEach(((y,w)=>{for(const x of w.Sa)x.va(h)&&(m=!0)})),m&&Fy(p)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FD(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new Ct(Me.comparator);l=l.insert(a,wn.newNoDocument(a,qe.min()));const h=Ze().add(a),p=new vf(qe.min(),new Map,new Ct(Je),l,h);await FS(r,p),r.du=r.du.remove(a),r.Au.delete(e),By(r)}else await Eg(r.localStore,e,!1).then((()=>Ig(r,e,t))).catch(Tl)}async function UD(n,e){const t=He(n),r=e.batch.batchId;try{const i=await Yj(t.localStore,e);zS(t,r,null),US(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vu(t,i)}catch(i){await Tl(i)}}async function zD(n,e,t){const r=He(n);try{const i=await(function(l,h){const p=He(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return p.mutationQueue.lookupMutationBatch(m,h).next((w=>(ct(w!==null,37113),y=w.keys(),p.mutationQueue.removeMutationBatch(m,w)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,y,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>p.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);zS(r,e,t),US(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vu(r,i)}catch(i){await Tl(i)}}function US(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function zS(n,e,t){const r=He(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ig(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||BS(n,r)}))}function BS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ky(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),By(n))}function N0(n,e,t){for(const r of t)r instanceof OS?(n.Ru.addReference(r.key,e),BD(n,r)):r instanceof LS?(Se(zy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||BS(n,r.key)):ze(19791,{wu:r})}function BD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Se(zy,"New document in limbo: "+t),n.Eu.add(r),By(n))}function By(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Me(mt.fromString(e)),r=n.fu.next();n.Au.set(r,new kD(t)),n.du=n.du.insert(t,r),RS(n.remoteStore,new Vi(cs(hf(t.path)),r,"TargetPurposeLimboResolution",cf.ce))}}async function vu(n,e,t){const r=He(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,p)=>{l.push(r.pu(p,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(m){i.push(m);const w=Cy.As(p.targetId,m);a.push(w)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(p,m){const y=He(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(m,(x=>oe.forEach(x.Es,(I=>y.persistence.referenceDelegate.addReference(w,x.targetId,I))).next((()=>oe.forEach(x.ds,(I=>y.persistence.referenceDelegate.removeReference(w,x.targetId,I)))))))))}catch(w){if(!Sl(w))throw w;Se(Ry,"Failed to update sequence numbers: "+w)}for(const w of m){const x=w.targetId;if(!w.fromCache){const I=y.Ms.get(x),C=I.snapshotVersion,A=I.withLastLimboFreeSnapshotVersion(C);y.Ms=y.Ms.insert(x,A)}}})(r.localStore,a))}async function $D(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Se(zy,"User change. New user:",e.toKey());const r=await bS(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((p=>{p.reject(new ge(ne.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(t,r.Ls)}}function qD(n,e){const t=He(n),r=t.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let i=Ze();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const h=t.Tu.get(l);i=i.unionWith(h.view.nu)}return i}}function $S(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FD.bind(null,e),e.Pu.H_=AD.bind(null,e.eventManager),e.Pu.yu=ND.bind(null,e.eventManager),e}function WD(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zD.bind(null,e),e}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Qj(this.persistence,new Hj,e.initialUser,this.serializer)}Cu(e){return new IS(Ny.mi,this.serializer)}Du(e){return new nD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class HD extends Uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ct(this.persistence.referenceDelegate instanceof Vh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kj(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new IS((r=>Vh.mi(r,t)),this.serializer)}}class bg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>A0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$D.bind(null,this.syncEngine),await SD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bD})()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),r=(function(a){return new aD(a)})(e.databaseInfo);return(function(a,l,h,p){return new dD(a,l,h,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,h){return new fD(r,i,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>A0(this.syncEngine,t,0)),(function(){return x0.v()?new x0:new rD})())}createSyncEngine(e,t){return(function(i,a,l,h,p,m,y){const w=new PD(i,a,l,h,p,m);return y&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=He(i);Se(Xo,"RemoteStore shutting down."),a.Ea.add(5),await yu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="FirestoreClient";class GD{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=af.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Se(to,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Se(to,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Oy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Um(n,e){n.asyncQueue.verifyOperationInProgress(),Se(to,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await bS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function C0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KD(n);Se(to,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>T0(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>T0(e.remoteStore,i))),n._onlineComponents=e}async function KD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(to,"Using user provided OfflineComponentProvider");try{await Um(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Yo("Error using user provided cache. Falling back to memory cache: "+t),await Um(n,new Uh)}}else Se(to,"Using default OfflineComponentProvider"),await Um(n,new HD(void 0));return n._offlineComponents}async function qS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(to,"Using user provided OnlineComponentProvider"),await C0(n,n._uninitializedComponentsProvider._online)):(Se(to,"Using default OnlineComponentProvider"),await C0(n,new bg))),n._onlineComponents}function QD(n){return qS(n).then((e=>e.syncEngine))}async function zh(n){const e=await qS(n),t=e.eventManager;return t.onListen=jD.bind(null,e.syncEngine),t.onUnlisten=OD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LD.bind(null,e.syncEngine),t}function YD(n,e,t={}){const r=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,p,m){const y=new $y({next:x=>{y.Nu(),l.enqueueAndForget((()=>Vy(a,w)));const I=x.docs.has(h);!I&&x.fromCache?m.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&x.fromCache&&p&&p.source==="server"?m.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new Uy(hf(h.path),y,{includeMetadataChanges:!0,qa:!0});return Ly(a,w)})(await zh(n),n.asyncQueue,e,t,r))),r.promise}function XD(n,e,t={}){const r=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,p,m){const y=new $y({next:x=>{y.Nu(),l.enqueueAndForget((()=>Vy(a,w))),x.fromCache&&p.source==="server"?m.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new Uy(h,y,{includeMetadataChanges:!0,qa:!0});return Ly(a,w)})(await zh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firestore.googleapis.com",k0=!0;class P0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HS,this.ssl=k0}else this.host=e.host,this.ssl=e.ssl??k0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Cj)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new MT;switch(r.type){case"firstParty":return new o2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=R0.get(t);r&&(Se("ComponentProvider","Removing Datastore"),R0.delete(t),r.terminate())})(this),Promise.resolve()}}function GS(n,e,t,r={}){var m;n=xn(n,Ef);const i=Zs(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(Zh(`https://${h}`),ef("Firestore",!0)),a.host!==HS&&a.host!==h&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:h,ssl:i,emulatorOptions:r};if(!Ho(p,l)&&(n._setSettings(p),r.mockUserToken)){let y,w;if(typeof r.mockUserToken=="string")y=r.mockUserToken,w=vn.MOCK_USER;else{y=FE(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new vn(x)}n._authCredentials=new r2(new DT(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class Nt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pu(t,Nt._jsonSchema))return new Nt(e,r||null,new Me(mt.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:$t("string",Nt._jsonSchemaVersion),referencePath:$t("string")};class qs extends vs{constructor(e,t,r){super(e,t,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Me(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function Tt(n,e,...t){if(n=at(n),OT("collection","path",e),n instanceof Ef){const r=mt.fromString(e,...t);return Wx(r),new qs(n,null,r)}{if(!(n instanceof Nt||n instanceof qs))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return Wx(r),new qs(n.firestore,null,r)}}function Ye(n,e,...t){if(n=at(n),arguments.length===1&&(e=af.newId()),OT("doc","path",e),n instanceof Ef){const r=mt.fromString(e,...t);return qx(r),new Nt(n,null,new Me(r))}{if(!(n instanceof Nt||n instanceof qs))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return qx(r),new Nt(n.firestore,n instanceof qs?n.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="AsyncQueue";class D0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NS(this,"async_queue_retry"),this._c=()=>{const r=Fm();r&&Se(j0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sl(e))throw e;Se(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",M0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=My.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ze(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function M0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Pr extends Ef{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new D0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new D0(e),this._firestoreClient=void 0,await e}}}function KS(n,e){const t=typeof n=="object"?n:tf(),r=typeof n=="string"?n:Ph,i=cu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=ey("firestore");a&&GS(i,...a)}return i}function Al(n){if(n._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JD(n),n._firestoreClient}function JD(n){var r,i,a;const e=n._freezeSettings(),t=(function(h,p,m,y){return new T2(h,p,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,WS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new GD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(nn.fromBase64String(e))}catch(t){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pu(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:$t("string",Yn._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(pu(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:$t("string",Cr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pu(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Rr(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:$t("string",Rr._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=/^__.*__$/;class eM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,t,this.fieldTransforms):new mu(e,this.data,t,this.fieldTransforms)}}class QS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:n})}}class qy{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YS(this.Ac)&&ZD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wf(e)}Cc(e,t,r,i=!1){return new qy({Ac:e,methodName:t,Dc:r,path:tn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _u(n){const e=n._freezeSettings(),t=wf(n._databaseId);return new tM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wy(n,e,t,r,i,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Gy("Data must be an object, but it was:",l,r);const h=ZS(r,l);let p,m;if(a.merge)p=new Xn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const x=Ag(e,w,t);if(!l.contains(x))throw new ge(ne.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);t1(y,x)||y.push(x)}p=new Xn(y),m=l.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,m=l.fieldTransforms;return new eM(new Ln(h),p,m)}class Tf extends wu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}class Hy extends wu{_toFieldTransform(e){return new Q2(e.path,new eu)}isEqual(e){return e instanceof Hy}}function XS(n,e,t,r){const i=n.Cc(1,e,t);Gy("Data must be an object, but it was:",i,r);const a=[],l=Ln.empty();io(r,((p,m)=>{const y=Ky(e,p,t);m=at(m);const w=i.yc(y);if(m instanceof Tf)a.push(y);else{const x=xu(m,w);x!=null&&(a.push(y),l.set(y,x))}}));const h=new Xn(a);return new QS(l,h,i.fieldTransforms)}function JS(n,e,t,r,i,a){const l=n.Cc(1,e,t),h=[Ag(e,r,t)],p=[i];if(a.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(Ag(e,a[x])),p.push(a[x+1]);const m=[],y=Ln.empty();for(let x=h.length-1;x>=0;--x)if(!t1(m,h[x])){const I=h[x];let C=p[x];C=at(C);const A=l.yc(I);if(C instanceof Tf)m.push(I);else{const S=xu(C,A);S!=null&&(m.push(I),y.set(I,S))}}const w=new Xn(m);return new QS(y,w,l.fieldTransforms)}function nM(n,e,t,r=!1){return xu(t,n.Cc(r?4:3,e))}function xu(n,e){if(e1(n=at(n)))return Gy("Unsupported field value:",e,n),ZS(n,e);if(n instanceof wu)return(function(r,i){if(!YS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const h of r){let p=xu(h,i.wc(l));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:Lh(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lh(i.serializer,a)}}if(r instanceof Cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:yS(i.serializer,r._byteString)};if(r instanceof Nt){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:by(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rr)return(function(l,h){return{mapValue:{fields:{[HT]:{stringValue:GT},[jh]:{arrayValue:{values:l.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Ty(h.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${lf(r)}`)})(n,e)}function ZS(n,e){const t={};return UT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(n,((r,i)=>{const a=xu(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function e1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Cr||n instanceof Yn||n instanceof Nt||n instanceof wu||n instanceof Rr)}function Gy(n,e,t){if(!e1(t)||!VT(t)){const r=lf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Ag(n,e,t){if((e=at(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return Ky(n,e);throw Bh("Field path arguments must be of type string or ",n,!1,void 0,t)}const rM=new RegExp("[~\\*/\\[\\]]");function Ky(n,e,t){if(e.search(rM)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bh(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||l)&&(p+=" (found",a&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new ge(ne.INVALID_ARGUMENT,h+n+p)}function t1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sM extends n1{data(){return super.data()}}function Sf(n,e){return typeof e=="string"?Ky(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qy{}class If extends Qy{}function bn(n,e,...t){let r=[];e instanceof Qy&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((p=>p instanceof bf)).length,h=a.filter((p=>p instanceof Eu)).length;if(l>1||l>0&&h>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Eu extends If{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Eu(e,t,r)}_apply(e){const t=this._parse(e);return s1(e._query,t),new vs(e.firestore,e.converter,yg(e._query,t))}_parse(e){const t=_u(e.firestore);return(function(a,l,h,p,m,y,w){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){V0(w,y);const C=[];for(const A of w)C.push(L0(p,a,A));x={arrayValue:{values:C}}}else x=L0(p,a,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||V0(w,y),x=nM(h,l,w,y==="in"||y==="not-in");return Bt.create(m,y,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function en(n,e,t){const r=e,i=Sf("where",n);return Eu._create(i,r,t)}class bf extends Qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bf(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:kr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const h=a.getFlattenedFilters();for(const p of h)s1(l,p),l=yg(l,p)})(e._query,t),new vs(e.firestore,e.converter,yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Af extends If{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Af(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(a,l)})(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Il(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function $o(n,e="asc"){const t=e,r=Sf("orderBy",n);return Af._create(r,t)}class Nf extends If{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Nf(e,t,r)}_apply(e){return new vs(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function Yy(n){return h2("limit",n),Nf._create("limit",n,"F")}function L0(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tS(e)&&t.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mt.fromString(t));if(!Me.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zx(n,new Me(r))}if(t instanceof Nt)return Zx(n,t._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(t)}.`)}function V0(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s1(n,e){const t=(function(i,a){for(const l of i)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class i1{convertValue(e,t="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return io(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,i,a;const t=(a=(i=(r=e.fields)==null?void 0:r[jh].arrayValue)==null?void 0:i.values)==null?void 0:a.map((l=>Lt(l.doubleValue)));return new Rr(t)}convertGeoPoint(e){return new Cr(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=df(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const t=Xi(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);ct(TS(r),9688,{name:e});const i=new pl(r.get(1),r.get(3)),a=new Me(r.popFirst(5));return i.isEqual(t)||Ks(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $i extends n1{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Sf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$i._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$i._jsonSchemaVersion="firestore/documentSnapshot/1.0",$i._jsonSchema={type:$t("string",$i._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class qc extends $i{data(e={}){return super.data(e)}}class qi{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new qc(this._firestore,this._userDataWriter,r.key,r,new nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((h=>{const p=new qc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new nl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const p=new qc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new nl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:iM(h.type),doc:p,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=af.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n){n=xn(n,Nt);const e=xn(n.firestore,Pr);return YD(Al(e),n._key).then((t=>o1(e,n,t)))}qi._jsonSchemaVersion="firestore/querySnapshot/1.0",qi._jsonSchema={type:$t("string",qi._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Jy extends i1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function On(n){n=xn(n,vs);const e=xn(n.firestore,Pr),t=Al(e),r=new Jy(e);return r1(n._query),XD(t,n._query).then((i=>new qi(e,r,n,i)))}function es(n,e,t){n=xn(n,Nt);const r=xn(n.firestore,Pr),i=Xy(n.converter,e,t);return Cl(r,[Wy(_u(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,An.none())])}function rs(n,e,t,...r){n=xn(n,Nt);const i=xn(n.firestore,Pr),a=_u(i);let l;return l=typeof(e=at(e))=="string"||e instanceof Nl?JS(a,"updateDoc",n._key,e,t,r):XS(a,"updateDoc",n._key,e),Cl(i,[l.toMutation(n._key,An.exists(!0))])}function Jo(n){return Cl(xn(n.firestore,Pr),[new yf(n._key,An.none())])}function no(n,e){const t=xn(n.firestore,Pr),r=Ye(n),i=Xy(n.converter,e);return Cl(t,[Wy(_u(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then((()=>r))}function Zy(n,...e){var p,m,y;n=at(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||O0(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(O0(e[r])){const w=e[r];e[r]=(p=w.next)==null?void 0:p.bind(w),e[r+1]=(m=w.error)==null?void 0:m.bind(w),e[r+2]=(y=w.complete)==null?void 0:y.bind(w)}let a,l,h;if(n instanceof Nt)l=xn(n.firestore,Pr),h=hf(n._key.path),a={next:w=>{e[r]&&e[r](o1(l,n,w))},error:e[r+1],complete:e[r+2]};else{const w=xn(n,vs);l=xn(w.firestore,Pr),h=w._query;const x=new Jy(l);a={next:I=>{e[r]&&e[r](new qi(l,x,w,I))},error:e[r+1],complete:e[r+2]},r1(n._query)}return(function(x,I,C,A){const S=new $y(A),V=new Uy(I,S,C);return x.asyncQueue.enqueueAndForget((async()=>Ly(await zh(x),V))),()=>{S.Nu(),x.asyncQueue.enqueueAndForget((async()=>Vy(await zh(x),V)))}})(Al(l),h,i,a)}function Cl(n,e){return(function(r,i){const a=new $s;return r.asyncQueue.enqueueAndForget((async()=>VD(await QD(r),i,a))),a.promise})(Al(n),e)}function o1(n,e,t){const r=t.docs.get(e._key),i=new Jy(n);return new $i(n,i,e._key,r,new nl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_u(e)}set(e,t,r){this._verifyNotCommitted();const i=zm(e,this._firestore),a=Xy(i.converter,t,r),l=Wy(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,An.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=zm(e,this._firestore);let l;return l=typeof(t=at(t))=="string"||t instanceof Nl?JS(this._dataReader,"WriteBatch.update",a._key,t,r,i):XS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zm(e,this._firestore);return this._mutations=this._mutations.concat(new yf(t._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zm(n,e){if((n=at(n)).firestore!==e)throw new ge(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Wc(){return new Hy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n){return Al(n=xn(n,Pr)),new a1(n,(e=>Cl(n,e)))}(function(e,t=!0){(function(i){El=i})(sa),Qi(new Ws("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new Pr(new s2(r.getProvider("auth-internal")),new a2(l,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(m.options.projectId,y)})(l,i),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),hr(Ux,zx,e),hr(Ux,zx,"esm2020")})();const oM=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:i1,Bytes:Yn,CollectionReference:qs,DocumentReference:Nt,DocumentSnapshot:$i,FieldPath:Nl,FieldValue:wu,Firestore:Pr,FirestoreError:ge,GeoPoint:Cr,Query:vs,QueryCompositeFilterConstraint:bf,QueryConstraint:If,QueryDocumentSnapshot:qc,QueryFieldFilterConstraint:Eu,QueryLimitConstraint:Nf,QueryOrderByConstraint:Af,QuerySnapshot:qi,SnapshotMetadata:nl,Timestamp:gt,VectorValue:Rr,WriteBatch:a1,_AutoId:af,_ByteString:nn,_DatabaseId:pl,_DocumentKey:Me,_EmptyAuthCredentialsProvider:MT,_FieldPath:tn,_cast:xn,_logWarn:Yo,_validateIsNotUsedTogether:LT,addDoc:no,collection:Tt,connectFirestoreEmulator:GS,deleteDoc:Jo,doc:Ye,ensureFirestoreConfigured:Al,executeWrite:Cl,getDoc:dr,getDocs:On,getFirestore:KS,limit:Yy,onSnapshot:Zy,orderBy:$o,query:bn,serverTimestamp:Wc,setDoc:es,updateDoc:rs,where:en,writeBatch:ev},Symbol.toStringTag,{value:"Module"}));var aM="firebase",lM="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(aM,lM,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebasestorage.googleapis.com",c1="storageBucket",cM=120*1e3,uM=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt extends ms{constructor(e,t,r=0){super(Bm(e),`Firebase Storage: ${t} (${Bm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pt||(Pt={}));function Bm(n){return"storage/"+n}function tv(){const n="An unknown error occurred, please check the error payload for server response.";return new jt(Pt.UNKNOWN,n)}function dM(n){return new jt(Pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function hM(n){return new jt(Pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fM(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new jt(Pt.UNAUTHENTICATED,n)}function pM(){return new jt(Pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mM(n){return new jt(Pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function gM(){return new jt(Pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yM(){return new jt(Pt.CANCELED,"User canceled the upload/download.")}function vM(n){return new jt(Pt.INVALID_URL,"Invalid URL '"+n+"'.")}function wM(n){return new jt(Pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _M(){return new jt(Pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+c1+"' property when initializing the app?")}function xM(){return new jt(Pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function EM(){return new jt(Pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TM(n){return new jt(Pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ng(n){return new jt(Pt.INVALID_ARGUMENT,n)}function u1(){return new jt(Pt.APP_DELETED,"The Firebase app was deleted.")}function SM(n){return new jt(Pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hc(n,e){return new jt(Pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Nc(n){throw new jt(Pt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Jn.makeFromUrl(e,t)}catch{return new Jn(e,"")}if(r.path==="")return r;throw wM(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+i+l,"i"),p={bucket:1,path:3};function m($){$.path_=decodeURIComponent($.path)}const y="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",I=new RegExp(`^https?://${w}/${y}/b/${i}/o${x}`,"i"),C={bucket:1,path:3},A=t===l1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",V=new RegExp(`^https?://${A}/${i}/${S}`,"i"),P=[{regex:h,indices:p,postModify:a},{regex:I,indices:C,postModify:m},{regex:V,indices:{bucket:1,path:2},postModify:m}];for(let $=0;$<P.length;$++){const G=P[$],ee=G.regex.exec(e);if(ee){const j=ee[G.indices.bucket];let N=ee[G.indices.path];N||(N=""),r=new Jn(j,N),G.postModify(r);break}}if(r==null)throw vM(e);return r}}class IM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function p(){return h===2}let m=!1;function y(...S){m||(m=!0,e.apply(null,S))}function w(S){i=setTimeout(()=>{i=null,n(I,p())},S)}function x(){a&&clearTimeout(a)}function I(S,...V){if(m){x();return}if(S){x(),y.call(null,S,...V);return}if(p()||l){x(),y.call(null,S,...V);return}r<64&&(r*=2);let P;h===1?(h=2,P=0):P=(r+Math.random())*1e3,w(P)}let C=!1;function A(S){C||(C=!0,x(),!m&&(i!==null?(S||(h=2),clearTimeout(i),w(0)):S||(h=1)))}return w(0),a=setTimeout(()=>{l=!0,A(!0)},t),A}function AM(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(n){return n!==void 0}function CM(n){return typeof n=="object"&&!Array.isArray(n)}function nv(n){return typeof n=="string"||n instanceof String}function F0(n){return rv()&&n instanceof Blob}function rv(){return typeof Blob<"u"}function U0(n,e,t,r){if(r<e)throw Ng(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ng(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function d1(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var qo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(qo||(qo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t,r,i,a,l,h,p,m,y,w,x=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=w,this.retry=x,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Qd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{const p=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===qo.NO_ERROR,p=a.getStatus();if(!h||RM(p,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===qo.ABORT;r(!1,new Qd(!1,null,y));return}const m=this.successCodes_.indexOf(p)!==-1;r(!0,new Qd(m,a))})},t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());NM(p)?a(p):a()}catch(p){l(p)}else if(h!==null){const p=tv();p.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,p)):l(p)}else if(i.canceled){const p=this.appDelete_?u1():yM();l(p)}else{const p=gM();l(p)}};this.canceled_?t(!1,new Qd(!1,null,!0)):this.backoffId_=bM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function PM(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function jM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DM(n,e){e&&(n["X-Firebase-GMPID"]=e)}function MM(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function OM(n,e,t,r,i,a,l=!0,h=!1){const p=d1(n.urlParams),m=n.url+p,y=Object.assign({},n.headers);return DM(y,e),PM(y,t),jM(y,a),MM(y,r),new kM(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VM(...n){const e=LM();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(rv())return new Blob(n);throw new jt(Pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FM(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){if(typeof atob>"u")throw TM("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $m{constructor(e,t){this.data=e,this.contentType=t||null}}function zM(n,e){switch(n){case ss.RAW:return new $m(h1(e));case ss.BASE64:case ss.BASE64URL:return new $m(f1(n,e));case ss.DATA_URL:return new $m($M(e),qM(e))}throw tv()}function h1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=n.charCodeAt(++t);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function BM(n){let e;try{e=decodeURIComponent(n)}catch{throw Hc(ss.DATA_URL,"Malformed data URL.")}return h1(e)}function f1(n,e){switch(n){case ss.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Hc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ss.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Hc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=UM(e)}catch(i){throw i.message.includes("polyfill")?i:Hc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class p1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Hc(ss.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=WM(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $M(n){const e=new p1(n);return e.base64?f1(ss.BASE64,e.rest):BM(e.rest)}function qM(n){return new p1(n).contentType}function WM(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t){let r=0,i="";F0(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(F0(this.data_)){const r=this.data_,i=FM(r,e,t);return i===null?null:new Li(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Li(r,!0)}}static getBlob(...e){if(rv()){const t=e.map(r=>r instanceof Li?r.data_:r);return new Li(VM.apply(null,t))}else{const t=e.map(l=>nv(l)?zM(ss.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Li(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){let e;try{e=JSON.parse(n)}catch{return null}return CM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function GM(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function g1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(n,e){return e}class In{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||KM}}let Yd=null;function QM(n){return!nv(n)||n.length<2?n:g1(n)}function y1(){if(Yd)return Yd;const n=[];n.push(new In("bucket")),n.push(new In("generation")),n.push(new In("metageneration")),n.push(new In("name","fullPath",!0));function e(a,l){return QM(l)}const t=new In("name");t.xform=e,n.push(t);function r(a,l){return l!==void 0?Number(l):l}const i=new In("size");return i.xform=r,n.push(i),n.push(new In("timeCreated")),n.push(new In("updated")),n.push(new In("md5Hash",null,!0)),n.push(new In("cacheControl",null,!0)),n.push(new In("contentDisposition",null,!0)),n.push(new In("contentEncoding",null,!0)),n.push(new In("contentLanguage",null,!0)),n.push(new In("contentType",null,!0)),n.push(new In("metadata","customMetadata",!0)),Yd=n,Yd}function YM(n,e){function t(){const r=n.bucket,i=n.fullPath,a=new Jn(r,i);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function XM(n,e,t){const r={};r.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return YM(r,n),r}function v1(n,e,t){const r=m1(e);return r===null?null:XM(n,r,t)}function JM(n,e,t,r){const i=m1(e);if(i===null||!nv(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,w=n.fullPath,x="/b/"+l(y)+"/o/"+l(w),I=Cf(x,t,r),C=d1({alt:"media",token:m});return I+C})[0]}function ZM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class sv{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(n){if(!n)throw tv()}function eO(n,e){function t(r,i){const a=v1(n,i,e);return w1(a!==null),a}return t}function tO(n,e){function t(r,i){const a=v1(n,i,e);return w1(a!==null),JM(a,i,n.host,n._protocol)}return t}function _1(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=pM():i=fM():t.getStatus()===402?i=hM(n.bucket):t.getStatus()===403?i=mM(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function x1(n){const e=_1(n);function t(r,i){let a=e(r,i);return r.getStatus()===404&&(a=dM(n.path)),a.serverResponse=i.serverResponse,a}return t}function nO(n,e,t){const r=e.fullServerUrl(),i=Cf(r,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,h=new sv(i,a,tO(n,t),l);return h.errorHandler=x1(e),h}function rO(n,e){const t=e.fullServerUrl(),r=Cf(t,n.host,n._protocol),i="DELETE",a=n.maxOperationRetryTime;function l(p,m){}const h=new sv(r,i,l,a);return h.successCodes=[200,204],h.errorHandler=x1(e),h}function sO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function iO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=sO(null,e)),r}function oO(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let P="";for(let $=0;$<2;$++)P=P+Math.random().toString().slice(2);return P}const p=h();l["Content-Type"]="multipart/related; boundary="+p;const m=iO(e,r,i),y=ZM(m,t),w="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,x=`\r
--`+p+"--",I=Li.getBlob(w,r,x);if(I===null)throw xM();const C={name:m.fullPath},A=Cf(a,n.host,n._protocol),S="POST",V=n.maxUploadRetryTime,M=new sv(A,S,eO(n,t),V);return M.urlParams=C,M.headers=l,M.body=I.uploadData(),M.errorHandler=_1(e),M}class aO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,a){if(this.sent_)throw Nc("cannot .send() more than once");if(Zs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lO extends aO{initXhr(){this.xhr_.responseType="text"}}function iv(){return new lO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t){this._service=e,t instanceof Jn?this._location=t:this._location=Jn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zo(e,t)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return g1(this._location.path)}get storage(){return this._service}get parent(){const e=HM(this._location.path);if(e===null)return null;const t=new Jn(this._location.bucket,e);return new Zo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw SM(e)}}function cO(n,e,t){n._throwIfRoot("uploadBytes");const r=oO(n.storage,n._location,y1(),new Li(e,!0),t);return n.storage.makeRequestWithTokens(r,iv).then(i=>({metadata:i,ref:n}))}function uO(n){n._throwIfRoot("getDownloadURL");const e=nO(n.storage,n._location,y1());return n.storage.makeRequestWithTokens(e,iv).then(t=>{if(t===null)throw EM();return t})}function dO(n){n._throwIfRoot("deleteObject");const e=rO(n.storage,n._location);return n.storage.makeRequestWithTokens(e,iv)}function hO(n,e){const t=GM(n._location.path,e),r=new Jn(n._location.bucket,t);return new Zo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(n){return/^[A-Za-z]+:\/\//.test(n)}function pO(n,e){return new Zo(n,e)}function E1(n,e){if(n instanceof ov){const t=n;if(t._bucket==null)throw _M();const r=new Zo(t,t._bucket);return e!=null?E1(r,e):r}else return e!==void 0?hO(n,e):n}function mO(n,e){if(e&&fO(e)){if(n instanceof ov)return pO(n,e);throw Ng("To use ref(service, url), the first argument must be a Storage instance.")}else return E1(n,e)}function z0(n,e){const t=e==null?void 0:e[c1];return t==null?null:Jn.makeFromBucketSpec(t,n)}function gO(n,e,t,r={}){n.host=`${e}:${t}`;const i=Zs(e);i&&(Zh(`https://${n.host}/b`),ef("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:FE(a,n.app.options.projectId))}class ov{constructor(e,t,r,i,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=l1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cM,this._maxUploadRetryTime=uM,this._requests=new Set,i!=null?this._bucket=Jn.makeFromBucketSpec(i,this._host):this._bucket=z0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=z0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zo(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new IM(u1());{const l=OM(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const B0="@firebase/storage",$0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="storage";function yO(n,e,t){return n=at(n),cO(n,e,t)}function vO(n){return n=at(n),uO(n)}function wO(n){return n=at(n),dO(n)}function q0(n,e){return n=at(n),mO(n,e)}function S1(n=tf(),e){n=at(n);const r=cu(n,T1).getImmediate({identifier:e}),i=ey("storage");return i&&_O(r,...i),r}function _O(n,e,t,r={}){gO(n,e,t,r)}function xO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ov(t,r,i,e,sa)}function EO(){Qi(new Ws(T1,xO,"PUBLIC").setMultipleInstances(!0)),hr(B0,$0,""),hr(B0,$0,"esm2020")}EO();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,_n(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="us-central1";class SO{constructor(e,t,r,i,a=Cg,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new TO(e,t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Cg}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function IO(n,e,t){const r=Zs(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Zh(n.emulatorOrigin+"/backends"),ef("Functions",!0))}const W0="@firebase/functions",H0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="auth-internal",AO="app-check-internal",NO="messaging-internal";function CO(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider(bO),l=t.getProvider(NO),h=t.getProvider(AO);return new SO(i,a,l,h,r)};Qi(new Ws(I1,e,"PUBLIC").setMultipleInstances(!0)),hr(W0,H0,n),hr(W0,H0,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(n=tf(),e=Cg){const r=cu(at(n),I1).getImmediate({identifier:e}),i=ey("functions");return i&&kO(r,...i),r}function kO(n,e,t){IO(at(n),e,t)}CO();const PO={apiKey:"AIzaSyDy4jBqxKpD_B6SGAqRLyTrmGxQ9rEA0zw",authDomain:"officeofmapp.firebaseapp.com",projectId:"officeofmapp",storageBucket:"officeofmapp.firebasestorage.app",messagingSenderId:"710263745328",appId:"1:710263745328:web:a41ed7f9f6df52970db6f5"},Rf=BE(PO),Et=t2(Rf),Re=KS(Rf);S1(Rf);RO(Rf);const jO=Object.freeze(Object.defineProperty({__proto__:null,auth:Et,db:Re},Symbol.toStringTag,{value:"Module"})),G0="reycelrcentino@gmail.com",DO="kNooCkk@0228a",Pe={async signIn(n,e){const t=await Uk(Et,n,e);try{if(!await this.getUserProfile(t.user.uid))throw console.error("User authenticated but no profile found:",t.user.email),await Lo(Et),new Error("Account not properly set up. Please contact administrator.");return await this.updateLastLogin(t.user.uid),t}catch(r){throw console.error("Error verifying user profile after sign-in:",r),await Lo(Et),r}},async signInWithGoogle(){var n;try{const e=new Us;e.addScope("email"),e.addScope("profile"),console.log("Starting Google Sign-In...");try{console.log("Attempting popup sign-in...");const t=await cP(Et,e);return console.log("Popup sign-in successful:",t.user.email),t}catch(t){if(console.log("Popup failed, trying redirect:",t.code),t.code==="auth/popup-blocked"||t.code==="auth/popup-closed-by-user"||t.code==="auth/cancelled-popup-request"||(n=t.message)!=null&&n.includes("popup"))return console.log("Using redirect method..."),await mP(Et,e),null;throw t}}catch(e){throw console.error("Google sign-in error:",e),e}},async handleRedirectResult(){try{const n=await yP(Et);if(!n)return null;if(console.log("Google redirect sign-in completed for:",n.user.email),await this.getUserProfile(n.user.uid))return await this.updateLastLogin(n.user.uid),n;{const t=await dr(Ye(Re,"approved_google_users",n.user.email));if(t.exists()){console.log("Pre-approved Google user found, creating profile");const r=t.data(),i={...r,uid:n.user.uid,name:n.user.displayName||r.name,lastLogin:new Date};return await es(Ye(Re,"users",n.user.uid),i),await Jo(Ye(Re,"approved_google_users",n.user.email)),await this.updateLastLogin(n.user.uid),n}throw await Lo(Et),new Error("PENDING_APPROVAL")}}catch(n){throw console.error("Google redirect result error:",n),n}},async checkExistingPendingRequest(n){const e=bn(Tt(Re,"pending_users"),en("email","==",n),en("status","==","pending"));return!(await On(e)).empty},async createGoogleUserRequest(n,e,t,r){if(await this.checkExistingPendingRequest(n))throw new Error("A request for this email is already pending approval.");const a={email:n,name:e,role:t,requestedAt:new Date,status:"pending",authProvider:"google",requestedAdminId:t==="staff"?r:void 0};return(await no(Tt(Re,"pending_users"),a)).id},async requestUserCreation(n,e,t="staff",r){if(t==="super_admin")throw new Error("Super admin accounts cannot be requested");if(await this.checkExistingPendingRequest(n))throw new Error("A request for this email is already pending approval.");const a={email:n,name:e,role:t,requestedAt:new Date,status:"pending",authProvider:"email",requestedAdminId:t==="staff"?r:void 0};return(await no(Tt(Re,"pending_users"),a)).id},async approveGoogleUser(n,e){const t=await this.getUserProfile(e);if(!t)throw new Error("Approver profile not found");if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only administrators and super administrators can approve user accounts");const r=await dr(Ye(Re,"pending_users",n));if(!r.exists())throw new Error("Pending user not found");const i=r.data();if(i.status!=="pending")throw new Error("User request already processed");if(i.authProvider!=="google")throw new Error("This method is only for Google users");if(t.role==="admin"&&i.role!=="staff")throw new Error("Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");if((i.role==="admin"||i.role==="super_admin")&&t.role!=="super_admin")throw new Error("Only super administrators can approve administrator and super administrator accounts");const a={uid:`google_${i.email.replace(/[^a-zA-Z0-9]/g,"_")}`,email:i.email,role:i.role,name:i.name,createdAt:new Date,lastLogin:new Date,approvedBy:e,approvedAt:new Date,assignedAdminId:i.role==="staff"?i.requestedAdminId||e:void 0};await es(Ye(Re,"approved_google_users",i.email),a),await rs(Ye(Re,"pending_users",n),{status:"approved",approvedBy:e,approvedAt:new Date}),console.log(`Google user approved: ${i.email} with role ${i.role} by ${t.email} (${t.role})`)},async approveUser(n,e,t){const r=await this.getUserProfile(t);if(!r)throw new Error("Approver profile not found");if(r.role!=="admin"&&r.role!=="super_admin")throw new Error("Only administrators and super administrators can approve user accounts");const i=await dr(Ye(Re,"pending_users",n));if(!i.exists())throw new Error("Pending user not found");const a=i.data();if(a.status!=="pending")throw new Error("User request already processed");if(r.role==="admin"&&a.role!=="staff")throw new Error("Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");if((a.role==="admin"||a.role==="super_admin")&&r.role!=="super_admin")throw new Error("Only super administrators can approve administrator and super administrator accounts");const l=Et.currentUser;try{const h=await Dm(Et,a.email,e),p={uid:h.user.uid,email:a.email,role:a.role,name:a.name,createdAt:new Date,lastLogin:new Date,approvedBy:t,approvedAt:new Date,assignedAdminId:a.role==="staff"?a.requestedAdminId||t:void 0};if(await es(Ye(Re,"users",h.user.uid),p),!(await dr(Ye(Re,"users",h.user.uid))).exists())throw new Error("Failed to create user profile in database");return console.log("User profile created successfully for:",h.user.email),await rs(Ye(Re,"pending_users",n),{status:"approved",approvedBy:t,approvedAt:new Date}),await Lo(Et),l&&console.warn("Admin session interrupted. Please sign in again."),h}catch(h){throw h}},async updateUserRole(n,e,t){const r=await this.getUserProfile(n);if(!r)throw new Error("User not found");if(r.role==="super_admin")throw new Error("Super administrator roles cannot be modified for security reasons");if(e==="super_admin"){const i=await this.getUserProfile(t);if(!i||i.role!=="super_admin")throw new Error("Only super administrators can assign super admin roles")}if(r.role==="super_admin"&&e!=="super_admin"&&(await this.getAllUsers()).filter(l=>l.role==="super_admin").length<=1)throw new Error("Cannot remove the last super administrator");await rs(Ye(Re,"users",n),{role:e,updatedAt:new Date,updatedBy:t}),console.log(`User role updated: ${r.email} -> ${e}`)},async deleteUser(n,e){const t=await this.getUserProfile(n);if(!t)throw new Error("User not found");if(t.role==="super_admin")throw new Error("Super administrator accounts cannot be deleted for security reasons");const r=await this.getUserProfile(e);if(!r)throw new Error("Deleter profile not found");if(t.role==="admin"&&r.role!=="super_admin")throw new Error("Only super administrators can delete administrator accounts");await Jo(Ye(Re,"users",n)),console.log(`User deleted: ${t.email} by ${r.email}`)},async createUser(n,e,t,r,i){if(!Et.currentUser)throw new Error("No authenticated user. Please sign in first.");const l=await this.getUserProfile(i);if(!l)throw new Error("Creator profile not found");if(l.role!=="admin"&&l.role!=="super_admin")throw new Error("Only administrators and super administrators can create user accounts");if(l.role==="admin"&&r!=="staff")throw new Error("Administrators can only create staff accounts. Contact a super admin to create administrator accounts.");if((r==="admin"||r==="super_admin")&&l.role!=="super_admin")throw new Error("Only super administrators can create administrator and super administrator accounts");r==="super_admin"&&console.log(`Super admin account creation requested by: ${l.email}`);try{const h=await Dm(Et,n,e),p={uid:h.user.uid,email:n,role:r,name:t,createdAt:new Date,lastLogin:new Date,approvedBy:i,approvedAt:new Date,assignedAdminId:r==="staff"?i:void 0};return await es(Ye(Re,"users",h.user.uid),p),console.log(`User account created: ${n} with role ${r} by ${l.email} (${l.role})`),await Lo(Et),{...h,adminSignedOut:!0}}catch(h){throw await Lo(Et).catch(()=>{}),h.code==="auth/email-already-in-use"?new Error("Email address is already in use"):h.code==="auth/invalid-email"?new Error("Invalid email address"):h.code==="auth/weak-password"?new Error("Password is too weak. Use at least 6 characters"):h.code==="auth/network-request-failed"?new Error("Network error. Check your internet connection"):h}},async rejectUser(n,e,t){await rs(Ye(Re,"pending_users",n),{status:"rejected",rejectionReason:e,approvedBy:t,approvedAt:new Date})},async getPendingUsers(){const n=bn(Tt(Re,"pending_users"),en("status","==","pending"));return(await On(n)).docs.map(t=>({id:t.id,...t.data()}))},async isAdmin(n){const e=await this.getUserProfile(n);return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="super_admin"},async getAllUsers(){return(await On(Tt(Re,"users"))).docs.map(e=>e.data())},async getVisibleUsers(n){const e=await this.getAllUsers();return n!=="super_admin"?e.filter(t=>t.role!=="super_admin"):e},async getAdminUsers(){const n=bn(Tt(Re,"users"),en("role","==","admin"));return(await On(n)).docs.map(t=>t.data())},async getStaffForAdmin(n){const e=bn(Tt(Re,"users"),en("role","==","staff"),en("assignedAdminId","==",n));return(await On(e)).docs.map(r=>r.data())},async getPendingUsersForAdmin(n){const e=bn(Tt(Re,"pending_users"),en("status","==","pending"),en("requestedAdminId","==",n));return(await On(e)).docs.map(r=>({id:r.id,...r.data()}))},async initializeSuperAdmin(){const n=bn(Tt(Re,"users"),en("role","==","super_admin"));if((await On(n)).empty){const t=await Dm(Et,G0,DO),r={uid:t.user.uid,email:G0,role:"super_admin",name:"Super Administrator",createdAt:new Date,lastLogin:new Date};return await es(Ye(Re,"users",t.user.uid),r),t}return null},async signOut(){return Lo(Et)},async getUserProfile(n){const e=Ye(Re,"users",n),t=await dr(e);return t.exists()?t.data():null},async createUserProfile(n,e,t){const r={uid:n.uid,email:n.email,role:e,name:t,createdAt:new Date,lastLogin:new Date};return await es(Ye(Re,"users",n.uid),r),r},async updateLastLogin(n){await es(Ye(Re,"users",n),{lastLogin:new Date},{merge:!0})},async updateUserProfile(n,e){const t=["name"],r={};for(const i of t)e[i]!==void 0&&(r[i]=e[i]);if(Object.keys(r).length===0)throw new Error("No valid fields to update");return r.updatedAt=new Date,await es(Ye(Re,"users",n),r,{merge:!0}),console.log(`User profile updated: ${n}`,r),r},onAuthStateChange(n){return $k(Et,n)},async sendPasswordReset(n){try{return await Ok(Et,n),{success:!0,message:"Password reset email sent successfully"}}catch(e){let t="Failed to send password reset email";throw e.code==="auth/user-not-found"?t="No account found with this email address":e.code==="auth/invalid-email"?t="Invalid email address":e.code==="auth/too-many-requests"&&(t="Too many requests. Please try again later"),new Error(t)}},async confirmPasswordReset(n,e){try{return await Lk(Et,n,e),{success:!0,message:"Password reset successfully"}}catch(t){let r="Failed to reset password";throw t.code==="auth/invalid-action-code"?r="Invalid or expired reset code":t.code==="auth/weak-password"&&(r="Password is too weak. Use at least 6 characters"),new Error(r)}},async verifyPasswordResetCode(n){try{return{success:!0,email:await Fk(Et,n)}}catch(e){let t="Invalid or expired reset code";throw e.code==="auth/invalid-action-code"?t="Invalid or expired reset code":e.code==="auth/expired-action-code"&&(t="Reset code has expired. Please request a new one"),new Error(t)}},getCurrentUser(){return Et.currentUser}},b1=()=>{const[n,e]=E.useState([]),t=E.useCallback(p=>{const m=Math.random().toString(36).substr(2,9),y={id:m,duration:5e3,...p};return e(w=>[...w,y]),y.duration&&y.duration>0&&setTimeout(()=>{r(m)},y.duration),m},[]),r=E.useCallback(p=>{e(m=>m.filter(y=>y.id!==p))},[]),i=E.useCallback((p,m)=>t({type:"success",title:p,message:m}),[t]),a=E.useCallback((p,m)=>t({type:"error",title:p,message:m,duration:7e3}),[t]),l=E.useCallback((p,m)=>t({type:"warning",title:p,message:m}),[t]),h=E.useCallback((p,m)=>t({type:"info",title:p,message:m}),[t]);return{toasts:n,addToast:t,removeToast:r,success:i,error:a,warning:l,info:h}},MO=[{name:"Office Supplies",description:"Stationery, paper, pens, and other office materials",isActive:!0},{name:"Transportation",description:"Travel expenses, fuel, public transport, taxi fares",isActive:!0},{name:"Utilities",description:"Electricity, water, internet, phone bills",isActive:!0},{name:"Meals & Entertainment",description:"Business meals, client entertainment, catering",isActive:!0},{name:"Equipment",description:"Computers, furniture, machinery, tools",isActive:!0},{name:"Services",description:"Professional services, consulting, maintenance",isActive:!0},{name:"Marketing & Advertising",description:"Promotional materials, advertising costs, marketing campaigns",isActive:!0},{name:"Training & Education",description:"Courses, seminars, training materials, certifications",isActive:!0},{name:"Medical & Health",description:"Medical expenses, health insurance, wellness programs",isActive:!0},{name:"Legal & Compliance",description:"Legal fees, permits, licenses, regulatory compliance",isActive:!0},{name:"Maintenance & Repairs",description:"Building maintenance, equipment repairs, cleaning services",isActive:!0},{name:"Other",description:"Miscellaneous expenses not covered by other categories",isActive:!0}],K0=S1(),Ir={async initializeCategories(n){const e=ev(Re);for(const t of MO){const r=Ye(Tt(Re,"receipt_categories"));e.set(r,{...t,id:r.id,createdBy:n,createdAt:new Date})}await e.commit(),console.log("Default receipt categories initialized")},async getCategories(){const n=bn(Tt(Re,"receipt_categories"),en("isActive","==",!0),$o("name"));return(await On(n)).docs.map(t=>t.data())},async createCategory(n){return(await no(Tt(Re,"receipt_categories"),{...n,createdAt:new Date})).id},async updateCategory(n,e){await rs(Ye(Re,"receipt_categories",n),e)},async deleteCategory(n){await rs(Ye(Re,"receipt_categories",n),{isActive:!1})},async uploadReceiptFile(n,e){const r=`${Date.now()}_${n.name}`,i=q0(K0,`receipts/${e}/${r}`),a=await yO(i,n);return{url:await vO(a.ref),fileName:r,fileSize:n.size,mimeType:n.type}},async deleteReceiptFile(n){const e=q0(K0,n);await wO(e)},async createReceipt(n){const e=await no(Tt(Re,"receipts"),{...n,uploadedAt:new Date});return console.log(`Receipt created: ${n.title} by ${n.uploadedByName}`),e.id},async updateReceipt(n,e){await rs(Ye(Re,"receipts",n),e),console.log(`Receipt updated: ${n}`)},async deleteReceipt(n,e){const t=await dr(Ye(Re,"receipts",n));if(!t.exists())throw new Error("Receipt not found");const r=t.data(),i=await Pe.getUserProfile(e);if(!i)throw new Error("User profile not found");if(!(r.ownerId===e||r.assignedAdminId===e&&i.role==="admin"||i.role==="super_admin"))throw new Error("Insufficient permissions to delete this receipt");try{await this.deleteReceiptFile(`receipts/${r.ownerId}/${r.fileName}`)}catch(l){console.warn("Failed to delete receipt file from storage:",l)}await Jo(Ye(Re,"receipts",n)),console.log(`Receipt deleted: ${n} by ${i.name}`)},async getReceipt(n){const e=await dr(Ye(Re,"receipts",n));return e.exists()?{id:e.id,...e.data()}:null},async getUserReceipts(n,e){let t=bn(Tt(Re,"receipts"),en("ownerId","==",n),$o("uploadedAt","desc")),i=(await On(t)).docs.map(a=>({id:a.id,...a.data()}));return e&&(i=this.applyFilters(i,e)),i},async getAdminReceipts(n,e){let t=bn(Tt(Re,"receipts"),en("assignedAdminId","==",n),$o("uploadedAt","desc")),i=(await On(t)).docs.map(a=>({id:a.id,...a.data()}));return e&&(i=this.applyFilters(i,e)),i},async getAllReceipts(n,e){const t=await Pe.getUserProfile(n);if(!t||t.role!=="super_admin")throw new Error("Only super administrators can view all receipts");let r=bn(Tt(Re,"receipts"),$o("uploadedAt","desc")),a=(await On(r)).docs.map(l=>({id:l.id,...l.data()}));return e&&(a=this.applyFilters(a,e)),a},async getVisibleReceipts(n,e){const t=await Pe.getUserProfile(n);if(!t)throw new Error("User profile not found");switch(t.role){case"super_admin":return this.getAllReceipts(n,e);case"admin":const[r,i]=await Promise.all([this.getUserReceipts(n,e),this.getAdminReceipts(n,e)]);return[...r,...i];case"staff":default:return this.getUserReceipts(n,e)}},async approveReceipt(n,e){const t=await Pe.getUserProfile(e);if(!t||t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only administrators can approve receipts");const r=await this.getReceipt(n);if(!r)throw new Error("Receipt not found");if(t.role==="admin"&&r.assignedAdminId!==e)throw new Error("You can only approve receipts from your assigned staff");await this.updateReceipt(n,{status:"approved",approvedBy:e,approvedByName:t.name,approvedAt:new Date}),console.log(`Receipt approved: ${n} by ${t.name}`)},async rejectReceipt(n,e,t){const r=await Pe.getUserProfile(e);if(!r||r.role!=="admin"&&r.role!=="super_admin")throw new Error("Only administrators can reject receipts");const i=await this.getReceipt(n);if(!i)throw new Error("Receipt not found");if(r.role==="admin"&&i.assignedAdminId!==e)throw new Error("You can only reject receipts from your assigned staff");await this.updateReceipt(n,{status:"rejected",rejectedBy:e,rejectedByName:r.name,rejectedAt:new Date,rejectionReason:t}),console.log(`Receipt rejected: ${n} by ${r.name} - Reason: ${t}`)},async getReceiptStats(n){const e=await this.getVisibleReceipts(n),t={totalReceipts:e.length,totalAmount:e.reduce((r,i)=>r+i.amount,0),officialReceipts:e.filter(r=>r.type==="official").length,unofficialReceipts:e.filter(r=>r.type==="unofficial").length,pendingApprovals:e.filter(r=>r.status==="pending").length,approvedReceipts:e.filter(r=>r.status==="approved").length,rejectedReceipts:e.filter(r=>r.status==="rejected").length,categoriesBreakdown:{}};return e.forEach(r=>{t.categoriesBreakdown[r.category]||(t.categoriesBreakdown[r.category]={count:0,amount:0}),t.categoriesBreakdown[r.category].count++,t.categoriesBreakdown[r.category].amount+=r.amount}),t},applyFilters(n,e){return n.filter(t=>!(e.category&&t.category!==e.category||e.type&&t.type!==e.type||e.status&&t.status!==e.status||e.uploadedBy&&t.uploadedBy!==e.uploadedBy||e.dateFrom&&new Date(t.date)<new Date(e.dateFrom)||e.dateTo&&new Date(t.date)>new Date(e.dateTo)||e.amountMin&&t.amount<e.amountMin||e.amountMax&&t.amount>e.amountMax||e.tags&&e.tags.length>0&&!e.tags.some(i=>t.tags.some(a=>a.toLowerCase().includes(i.toLowerCase())))))},async downloadReceipt(n,e){const t=await this.getReceipt(n);if(!t)throw new Error("Receipt not found");const r=await Pe.getUserProfile(e);if(!r)throw new Error("User profile not found");if(!(t.ownerId===e||t.assignedAdminId===e&&r.role==="admin"||r.role==="super_admin"))throw new Error("Insufficient permissions to download this receipt");return t.imageUrl}},Q0={async initializeApp(){try{console.log("Initializing application...");const n=Pe.getCurrentUser();if(!n){console.log("No authenticated user found, skipping initialization");return}const e=await Pe.getUserProfile(n.uid);if(!e){console.log("No user profile found, skipping initialization");return}e.role==="super_admin"&&await this.initializeReceiptCategories(n.uid),console.log("Application initialization completed")}catch(n){console.error("Error during app initialization:",n)}},async initializeReceiptCategories(n){try{(await Ir.getCategories()).length===0?(console.log("Initializing default receipt categories..."),await Ir.initializeCategories(n),console.log("Receipt categories initialized successfully")):console.log("Receipt categories already exist, skipping initialization")}catch(e){console.error("Error initializing receipt categories:",e)}}},OO=async n=>{try{const e=Et.currentUser,t=n||(e==null?void 0:e.email);if(!t){console.log("No user email provided and no current user");return}if(console.log("=== User Profile Debug ==="),console.log("Email:",t),e){console.log("Firebase Auth User:",{uid:e.uid,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName});try{const a=await Pe.getUserProfile(e.uid);console.log("Firestore Profile:",a)}catch(a){console.error("Error fetching Firestore profile:",a)}}const r=bn(Tt(Re,"pending_users"),en("email","==",t)),i=await On(r);i.empty?console.log("No pending user requests found"):(console.log("Pending User Requests:"),i.forEach(a=>{console.log("- ",a.id,a.data())}));try{const a=await dr(Ye(Re,"approved_google_users",t));a.exists()?console.log("Approved Google User:",a.data()):console.log("No approved Google user record found")}catch(a){console.error("Error checking approved Google users:",a)}console.log("=== End Debug ===")}catch(e){console.error("Debug error:",e)}};typeof window<"u"&&(window.debugUserProfile=OO);const A1=E.createContext(void 0);function LO({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState(null),[a,l]=E.useState(!0),[h,p]=E.useState(null),m=b1();E.useEffect(()=>((async()=>{await(async()=>{try{console.log("Checking for Google Sign-In redirect result...");const V=await Pe.handleRedirectResult();V?console.log("Google redirect sign-in completed for:",V.user.email):console.log("No redirect result found")}catch(V){console.error("Google redirect error:",V);try{await Pe.signOut()}catch(M){console.error("Error signing out after redirect failure:",M)}V.message==="PENDING_APPROVAL"?(console.log("User needs approval after redirect"),p("pending_approval")):m.error("Authentication Failed",V.message||"Please try again.")}})()})(),Pe.onAuthStateChange(async S=>{if(console.log("Auth state changed:",S?`${S.email} (${S.uid})`:"signed out"),t(S),S){console.log("User authenticated:",S.uid),await new Promise(V=>setTimeout(V,100));try{let V=null,M=0;const P=5;for(;!V&&M<P;)try{if(V=await Pe.getUserProfile(S.uid),V){console.log("User profile found:",V);break}const $=100*Math.pow(2,M);console.log(`Profile not found, retrying in ${$}ms (attempt ${M+1}/${P})`),await new Promise(G=>setTimeout(G,$)),M++}catch($){if(console.error(`Profile fetch attempt ${M+1} failed:`,$),M++,M<P){const G=100*Math.pow(2,M-1);await new Promise(ee=>setTimeout(ee,G))}}if(!V){if(console.log("No user profile found for UID after all retries:",S.uid),console.log("User details:",{uid:S.uid,email:S.email,displayName:S.displayName,emailVerified:S.emailVerified,providerData:S.providerData}),S.providerData.some(G=>G.providerId==="google.com")){console.log("Google user without profile detected - checking if user is pre-approved");try{const{getDoc:G,doc:ee,setDoc:j,deleteDoc:N}=await lx(async()=>{const{getDoc:R,doc:F,setDoc:D,deleteDoc:fe}=await Promise.resolve().then(()=>oM);return{getDoc:R,doc:F,setDoc:D,deleteDoc:fe}},void 0),{db:O}=await lx(async()=>{const{db:R}=await Promise.resolve().then(()=>jO);return{db:R}},void 0),L=await G(ee(O,"approved_google_users",S.email));if(L.exists()){console.log("Pre-approved Google user found in AuthContext, creating profile");const R=L.data(),F={...R,uid:S.uid,name:S.displayName||R.name,lastLogin:new Date};await j(ee(O,"users",S.uid),F),await N(ee(O,"approved_google_users",S.email)),console.log("Pre-approved user profile created successfully in AuthContext"),i(F),p(null),await Pe.updateLastLogin(S.uid),await Q0.initializeApp(),console.log("User successfully authenticated with pre-approved profile:",{email:F.email,role:F.role,name:F.name}),l(!1);return}}catch(G){console.error("Error checking pre-approved users in AuthContext:",G)}try{if(await Pe.checkExistingPendingRequest(S.email)){console.log("User has pending approval request - signing out and showing pending approval page"),await Pe.signOut(),p("pending_approval");return}else{console.log("No pending request found - this user may need to go through role selection again"),await Pe.signOut();return}}catch(G){console.error("Error checking pending requests:",G),console.log("Assuming user needs approval due to pending check failure"),await Pe.signOut(),p("pending_approval");return}}console.log("Signing out user without profile"),await Pe.signOut(),p("pending_approval");return}i(V),p(null),await Q0.initializeApp(),console.log("User successfully authenticated with profile:",{email:V.email,role:V.role,name:V.name})}catch(V){console.error("Error in auth state change handler:",V),console.log("Signing out user due to profile processing error");try{await Pe.signOut()}catch(M){console.error("Error signing out after profile error:",M)}m.error("Authentication Error","Please try signing in again.");return}}else i(null),p(null),console.log("User signed out, cleared profile and auth errors");l(!1)})),[]);const I={user:e,userProfile:r,loading:a,authError:h,signIn:async(C,A)=>{l(!0);try{await Pe.signIn(C,A)}finally{l(!1)}},signOut:async()=>{await Pe.signOut(),p(null)},clearAuthError:()=>{p(null)}};return c.jsx(A1.Provider,{value:I,children:n})}function kf(){const n=E.useContext(A1);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const N1=E.createContext(void 0),VO=[{id:"1",name:"Fr. Juan Santos",email:"juan.santos@province.ph",position:"Provincial Minister",department:"Administration",phone:"+63 912 345 6789",status:"active"},{id:"2",name:"Br. Brendan",email:"brendan@province.ph",position:"Secretary",department:"Administration",phone:"+63 912 345 6790",status:"active"},{id:"3",name:"Sr. Maria Cruz",email:"maria.cruz@province.ph",position:"Finance Officer",department:"Finance",phone:"+63 912 345 6791",status:"active"},{id:"4",name:"Br. Miguel Torres",email:"miguel.torres@province.ph",position:"Community Coordinator",department:"Community Affairs",phone:"+63 912 345 6792",status:"active"}],FO=[{id:"1",name:"Admin User",email:"admin@province.ph",role:"admin",department:"Administration"},{id:"2",name:"Manager User",email:"manager@province.ph",role:"manager",department:"Finance"}];function UO({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState([]),[a,l]=E.useState([]),[h,p]=E.useState([]),[m]=E.useState(VO);E.useEffect(()=>{const P=localStorage.getItem("user"),$=localStorage.getItem("tasks"),G=localStorage.getItem("receipts"),ee=localStorage.getItem("files");P&&t(JSON.parse(P)),$&&i(JSON.parse($)),G&&l(JSON.parse(G)),ee&&p(JSON.parse(ee))},[]),E.useEffect(()=>{e&&localStorage.setItem("user",JSON.stringify(e))},[e]),E.useEffect(()=>{localStorage.setItem("tasks",JSON.stringify(r))},[r]),E.useEffect(()=>{localStorage.setItem("receipts",JSON.stringify(a))},[a]),E.useEffect(()=>{localStorage.setItem("files",JSON.stringify(h))},[h]);const y=(P,$)=>{const G=FO.find(ee=>ee.email===P);return G&&$==="password"?(t(G),!0):!1},w=()=>{t(null),localStorage.removeItem("user")},x=P=>{const $={...P,id:Date.now().toString(),createdAt:new Date().toISOString()};i([...r,$])},I=(P,$)=>{i(r.map(G=>G.id===P?{...G,...$}:G))},C=P=>{i(r.filter($=>$.id!==P))},A=P=>{const $={...P,id:Date.now().toString(),uploadedAt:new Date().toISOString()};l([...a,$])},S=P=>{l(a.filter($=>$.id!==P))},V=P=>{const $={...P,id:Date.now().toString(),uploadedAt:new Date().toISOString()};p([...h,$])},M=P=>{p(h.filter($=>$.id!==P))};return c.jsx(N1.Provider,{value:{user:e,tasks:r,receipts:a,files:h,employees:m,login:y,logout:w,addTask:x,updateTask:I,deleteTask:C,addReceipt:A,deleteReceipt:S,addFile:V,deleteFile:M},children:n})}function av(){const n=E.useContext(N1);if(n===void 0)throw new Error("useApp must be used within an AppProvider");return n}function C1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=C1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function lv(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=C1(n))&&(r&&(r+=" "),r+=e);return r}const cv="-",zO=n=>{const e=$O(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const h=l.split(cv);return h[0]===""&&h.length!==1&&h.shift(),R1(h,e)||BO(l)},getConflictingClassGroupIds:(l,h)=>{const p=t[l]||[];return h&&r[l]?[...p,...r[l]]:p}}},R1=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?R1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(cv);return(l=e.validators.find(({validator:h})=>h(a)))==null?void 0:l.classGroupId},Y0=/^\[(.+)\]$/,BO=n=>{if(Y0.test(n)){const e=Y0.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},$O=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)Rg(t[i],r,i,e);return r},Rg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:X0(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(qO(i)){Rg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,l])=>{Rg(l,X0(e,a),t,r)})})},X0=(n,e)=>{let t=n;return e.split(cv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},qO=n=>n.isThemeGetter,WO=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,l)=>{t.set(a,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return i(a,l),l},set(a,l){t.has(a)?t.set(a,l):i(a,l)}}},kg="!",Pg=":",HO=Pg.length,GO=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const a=[];let l=0,h=0,p=0,m;for(let C=0;C<i.length;C++){let A=i[C];if(l===0&&h===0){if(A===Pg){a.push(i.slice(p,C)),p=C+HO;continue}if(A==="/"){m=C;continue}}A==="["?l++:A==="]"?l--:A==="("?h++:A===")"&&h--}const y=a.length===0?i:i.substring(p),w=KO(y),x=w!==y,I=m&&m>p?m-p:void 0;return{modifiers:a,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:I}};if(e){const i=e+Pg,a=r;r=l=>l.startsWith(i)?a(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=a=>t({className:a,parseClassName:i})}return r},KO=n=>n.endsWith(kg)?n.substring(0,n.length-1):n.startsWith(kg)?n.substring(1):n,QO=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let a=[];return r.forEach(l=>{l[0]==="["||e[l]?(i.push(...a.sort(),l),a=[]):a.push(l)}),i.push(...a.sort()),i}},YO=n=>({cache:WO(n.cacheSize),parseClassName:GO(n),sortModifiers:QO(n),...zO(n)}),XO=/\s+/,JO=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,l=[],h=n.trim().split(XO);let p="";for(let m=h.length-1;m>=0;m-=1){const y=h[m],{isExternal:w,modifiers:x,hasImportantModifier:I,baseClassName:C,maybePostfixModifierPosition:A}=t(y);if(w){p=y+(p.length>0?" "+p:p);continue}let S=!!A,V=r(S?C.substring(0,A):C);if(!V){if(!S){p=y+(p.length>0?" "+p:p);continue}if(V=r(C),!V){p=y+(p.length>0?" "+p:p);continue}S=!1}const M=a(x).join(":"),P=I?M+kg:M,$=P+V;if(l.includes($))continue;l.push($);const G=i(V,S);for(let ee=0;ee<G.length;++ee){const j=G[ee];l.push(P+j)}p=y+(p.length>0?" "+p:p)}return p};function ZO(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=k1(e))&&(r&&(r+=" "),r+=t);return r}const k1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=k1(n[r]))&&(t&&(t+=" "),t+=e);return t};function e4(n,...e){let t,r,i,a=l;function l(p){const m=e.reduce((y,w)=>w(y),n());return t=YO(m),r=t.cache.get,i=t.cache.set,a=h,h(p)}function h(p){const m=r(p);if(m)return m;const y=JO(p,t);return i(p,y),y}return function(){return a(ZO.apply(null,arguments))}}const Gt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},P1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,j1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,t4=/^\d+\/\d+$/,n4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,r4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,s4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,i4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,o4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ka=n=>t4.test(n),Ke=n=>!!n&&!Number.isNaN(Number(n)),Pi=n=>!!n&&Number.isInteger(Number(n)),qm=n=>n.endsWith("%")&&Ke(n.slice(0,-1)),Vs=n=>n4.test(n),a4=()=>!0,l4=n=>r4.test(n)&&!s4.test(n),D1=()=>!1,c4=n=>i4.test(n),u4=n=>o4.test(n),d4=n=>!Ae(n)&&!Ne(n),h4=n=>Rl(n,L1,D1),Ae=n=>P1.test(n),Vo=n=>Rl(n,V1,l4),Wm=n=>Rl(n,y4,Ke),J0=n=>Rl(n,M1,D1),f4=n=>Rl(n,O1,u4),Xd=n=>Rl(n,F1,c4),Ne=n=>j1.test(n),Cc=n=>kl(n,V1),p4=n=>kl(n,v4),Z0=n=>kl(n,M1),m4=n=>kl(n,L1),g4=n=>kl(n,O1),Jd=n=>kl(n,F1,!0),Rl=(n,e,t)=>{const r=P1.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},kl=(n,e,t=!1)=>{const r=j1.exec(n);return r?r[1]?e(r[1]):t:!1},M1=n=>n==="position"||n==="percentage",O1=n=>n==="image"||n==="url",L1=n=>n==="length"||n==="size"||n==="bg-size",V1=n=>n==="length",y4=n=>n==="number",v4=n=>n==="family-name",F1=n=>n==="shadow",w4=()=>{const n=Gt("color"),e=Gt("font"),t=Gt("text"),r=Gt("font-weight"),i=Gt("tracking"),a=Gt("leading"),l=Gt("breakpoint"),h=Gt("container"),p=Gt("spacing"),m=Gt("radius"),y=Gt("shadow"),w=Gt("inset-shadow"),x=Gt("text-shadow"),I=Gt("drop-shadow"),C=Gt("blur"),A=Gt("perspective"),S=Gt("aspect"),V=Gt("ease"),M=Gt("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],G=()=>[...$(),Ne,Ae],ee=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],N=()=>[Ne,Ae,p],O=()=>[Ka,"full","auto",...N()],L=()=>[Pi,"none","subgrid",Ne,Ae],R=()=>["auto",{span:["full",Pi,Ne,Ae]},Pi,Ne,Ae],F=()=>[Pi,"auto",Ne,Ae],D=()=>["auto","min","max","fr",Ne,Ae],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ye=()=>["start","end","center","stretch","center-safe","end-safe"],de=()=>["auto",...N()],_e=()=>[Ka,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],H=()=>[n,Ne,Ae],te=()=>[...$(),Z0,J0,{position:[Ne,Ae]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",m4,h4,{size:[Ne,Ae]}],z=()=>[qm,Cc,Vo],ie=()=>["","none","full",m,Ne,Ae],re=()=>["",Ke,Cc,Vo],ve=()=>["solid","dashed","dotted","double"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[Ke,qm,Z0,J0],we=()=>["","none",C,Ne,Ae],Ee=()=>["none",Ke,Ne,Ae],X=()=>["none",Ke,Ne,Ae],me=()=>[Ke,Ne,Ae],Fe=()=>[Ka,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vs],breakpoint:[Vs],color:[a4],container:[Vs],"drop-shadow":[Vs],ease:["in","out","in-out"],font:[d4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vs],shadow:[Vs],spacing:["px",Ke],text:[Vs],"text-shadow":[Vs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ka,Ae,Ne,S]}],container:["container"],columns:[{columns:[Ke,Ae,Ne,h]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:G()}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Pi,"auto",Ne,Ae]}],basis:[{basis:[Ka,"full","auto",h,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ke,Ka,"auto","initial","none",Ae]}],grow:[{grow:["",Ke,Ne,Ae]}],shrink:[{shrink:["",Ke,Ne,Ae]}],order:[{order:[Pi,"first","last","none",Ne,Ae]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...ye(),"normal"]}],"justify-self":[{"justify-self":["auto",...ye()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...ye(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ye(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...ye(),"baseline"]}],"place-self":[{"place-self":["auto",...ye()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:de()}],mx:[{mx:de()}],my:[{my:de()}],ms:[{ms:de()}],me:[{me:de()}],mt:[{mt:de()}],mr:[{mr:de()}],mb:[{mb:de()}],ml:[{ml:de()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:_e()}],w:[{w:[h,"screen",..._e()]}],"min-w":[{"min-w":[h,"screen","none",..._e()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[l]},..._e()]}],h:[{h:["screen",..._e()]}],"min-h":[{"min-h":["screen","none",..._e()]}],"max-h":[{"max-h":["screen",..._e()]}],"font-size":[{text:["base",t,Cc,Vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ne,Wm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qm,Ae]}],"font-family":[{font:[p4,Ae,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ne,Ae]}],"line-clamp":[{"line-clamp":[Ke,"none",Ne,Wm]}],leading:[{leading:[a,...N()]}],"list-image":[{"list-image":["none",Ne,Ae]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ne,Ae]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ke,"from-font","auto",Ne,Vo]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Ke,"auto",Ne,Ae]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne,Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne,Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pi,Ne,Ae],radial:["",Ne,Ae],conic:[Pi,Ne,Ae]},g4,f4]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:re()}],"border-w-x":[{"border-x":re()}],"border-w-y":[{"border-y":re()}],"border-w-s":[{"border-s":re()}],"border-w-e":[{"border-e":re()}],"border-w-t":[{"border-t":re()}],"border-w-r":[{"border-r":re()}],"border-w-b":[{"border-b":re()}],"border-w-l":[{"border-l":re()}],"divide-x":[{"divide-x":re()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":re()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ke,Ne,Ae]}],"outline-w":[{outline:["",Ke,Cc,Vo]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",y,Jd,Xd]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",w,Jd,Xd]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Ke,Vo]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":re()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",x,Jd,Xd]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[Ke,Ne,Ae]}],"mix-blend":[{"mix-blend":[...Te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[Ne,Ae]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[Ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ne,Ae]}],filter:[{filter:["","none",Ne,Ae]}],blur:[{blur:we()}],brightness:[{brightness:[Ke,Ne,Ae]}],contrast:[{contrast:[Ke,Ne,Ae]}],"drop-shadow":[{"drop-shadow":["","none",I,Jd,Xd]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",Ke,Ne,Ae]}],"hue-rotate":[{"hue-rotate":[Ke,Ne,Ae]}],invert:[{invert:["",Ke,Ne,Ae]}],saturate:[{saturate:[Ke,Ne,Ae]}],sepia:[{sepia:["",Ke,Ne,Ae]}],"backdrop-filter":[{"backdrop-filter":["","none",Ne,Ae]}],"backdrop-blur":[{"backdrop-blur":we()}],"backdrop-brightness":[{"backdrop-brightness":[Ke,Ne,Ae]}],"backdrop-contrast":[{"backdrop-contrast":[Ke,Ne,Ae]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ke,Ne,Ae]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ke,Ne,Ae]}],"backdrop-invert":[{"backdrop-invert":["",Ke,Ne,Ae]}],"backdrop-opacity":[{"backdrop-opacity":[Ke,Ne,Ae]}],"backdrop-saturate":[{"backdrop-saturate":[Ke,Ne,Ae]}],"backdrop-sepia":[{"backdrop-sepia":["",Ke,Ne,Ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ne,Ae]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ke,"initial",Ne,Ae]}],ease:[{ease:["linear","initial",V,Ne,Ae]}],delay:[{delay:[Ke,Ne,Ae]}],animate:[{animate:["none",M,Ne,Ae]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Ne,Ae]}],"perspective-origin":[{"perspective-origin":G()}],rotate:[{rotate:Ee()}],"rotate-x":[{"rotate-x":Ee()}],"rotate-y":[{"rotate-y":Ee()}],"rotate-z":[{"rotate-z":Ee()}],scale:[{scale:X()}],"scale-x":[{"scale-x":X()}],"scale-y":[{"scale-y":X()}],"scale-z":[{"scale-z":X()}],"scale-3d":["scale-3d"],skew:[{skew:me()}],"skew-x":[{"skew-x":me()}],"skew-y":[{"skew-y":me()}],transform:[{transform:[Ne,Ae,"","none","gpu","cpu"]}],"transform-origin":[{origin:G()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fe()}],"translate-x":[{"translate-x":Fe()}],"translate-y":[{"translate-y":Fe()}],"translate-z":[{"translate-z":Fe()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne,Ae]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne,Ae]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Ke,Cc,Vo,Wm]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},U1=e4(w4);function ut(...n){return U1(lv(n))}function tt({className:n,...e}){return c.jsx("div",{"data-slot":"card",className:ut("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function At({className:n,...e}){return c.jsx("div",{"data-slot":"card-header",className:ut("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function Vt({className:n,...e}){return c.jsx("h4",{"data-slot":"card-title",className:ut("leading-none",n),...e})}function nt({className:n,...e}){return c.jsx("div",{"data-slot":"card-content",className:ut("px-6 [&:last-child]:pb-6",n),...e})}function eE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Pf(...n){return e=>{let t=!1;const r=n.map(i=>{const a=eE(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():eE(n[i],null)}}}}function ft(...n){return E.useCallback(Pf(...n),n)}var Ys=E.forwardRef((n,e)=>{const{children:t,...r}=n,i=E.Children.toArray(t),a=i.find(x4);if(a){const l=a.props.children,h=i.map(p=>p===a?E.Children.count(l)>1?E.Children.only(null):E.isValidElement(l)?l.props.children:null:p);return c.jsx(jg,{...r,ref:e,children:E.isValidElement(l)?E.cloneElement(l,void 0,h):null})}return c.jsx(jg,{...r,ref:e,children:t})});Ys.displayName="Slot";var jg=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const i=T4(t),a=E4(r,t.props);return t.type!==E.Fragment&&(a.ref=e?Pf(e,i):i),E.cloneElement(t,a)}return E.Children.count(t)>1?E.Children.only(null):null});jg.displayName="SlotClone";var _4=({children:n})=>c.jsx(c.Fragment,{children:n});function x4(n){return E.isValidElement(n)&&n.type===_4}function E4(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...h)=>{a(...h),i(...h)}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function T4(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const tE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,nE=lv,z1=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return nE(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(m=>{const y=t==null?void 0:t[m],w=a==null?void 0:a[m];if(y===null)return null;const x=tE(y)||tE(w);return i[m][x]}),h=t&&Object.entries(t).reduce((m,y)=>{let[w,x]=y;return x===void 0||(m[w]=x),m},{}),p=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,y)=>{let{class:w,className:x,...I}=y;return Object.entries(I).every(C=>{let[A,S]=C;return Array.isArray(S)?S.includes({...a,...h}[A]):{...a,...h}[A]===S})?[...m,w,x]:m},[]);return nE(n,l,p,t==null?void 0:t.class,t==null?void 0:t.className)},S4=z1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),je=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},a)=>{const l=r?Ys:"button";return c.jsx(l,{ref:a,"data-slot":"button",className:ut(S4({variant:e,size:t,className:n})),...i})});je.displayName="Button";function cn({className:n,type:e,...t}){return c.jsx("input",{type:e,"data-slot":"input",className:ut("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}var Tu=kE();const I4=RE(Tu);var b4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=b4.reduce((n,e)=>{const t=E.forwardRef((r,i)=>{const{asChild:a,...l}=r,h=a?Ys:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(h,{...l,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function B1(n,e){n&&Tu.flushSync(()=>n.dispatchEvent(e))}var A4="Label",$1=E.forwardRef((n,e)=>c.jsx(Ge.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));$1.displayName=A4;var N4=$1;function Ue({className:n,...e}){return c.jsx(N4,{"data-slot":"label",className:ut("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),rE=n=>{const e=R4(n);return e.charAt(0).toUpperCase()+e.slice(1)},q1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...h},p)=>E.createElement("svg",{ref:p,...k4,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:q1("lucide",i),...h},[...l.map(([m,y])=>E.createElement(m,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(n,e)=>{const t=E.forwardRef(({className:r,...i},a)=>E.createElement(P4,{ref:a,iconNode:e,className:q1(`lucide-${C4(rE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=rE(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Dg=$e("arrow-left",j4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],M4=$e("bell",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],L4=$e("briefcase",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],W1=$e("calendar",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],U4=$e("chart-column",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mg=$e("check",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H1=$e("chevron-down",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],q4=$e("chevron-up",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fi=$e("circle-alert",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Wo=$e("circle-check-big",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],yh=$e("circle-x",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Og=$e("clock",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Y4=$e("dollar-sign",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Lg=$e("download",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Z4=$e("eye-off",J4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vg=$e("eye",eL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Uo=$e("file-text",tL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],G1=$e("folder-open",nL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sL=$e("funnel",rL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oL=$e("info",iL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],lL=$e("layout-dashboard",aL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],K1=$e("list-checks",cL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fg=$e("loader-circle",uL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],hL=$e("log-out",dL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],uv=$e("mail",fL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],mL=$e("menu",pL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Q1=$e("message-circle",gL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],vL=$e("moon",yL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],vh=$e("pen-line",wL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xL=$e("pen",_L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],TL=$e("phone",EL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dv=$e("plus",SL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Y1=$e("receipt",IL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],AL=$e("refresh-cw",bL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],CL=$e("save",NL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],kL=$e("send",RL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hv=$e("settings",PL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],is=$e("shield",jL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ML=$e("square-pen",DL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],LL=$e("sun",OL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],FL=$e("tag",VL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],jf=$e("trash-2",UL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],X1=$e("triangle-alert",zL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],J1=$e("upload",BL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Df=$e("user",$L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],fv=$e("users",qL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ea=$e("x",WL),HL=({isOpen:n,userEmail:e,userName:t,onRoleSelect:r,onCancel:i,loading:a=!1})=>{var V;const[l,h]=E.useState("staff"),[p,m]=E.useState(""),[y,w]=E.useState([]),[x,I]=E.useState(!1);E.useEffect(()=>{n&&C()},[n]);const C=async()=>{I(!0);try{const M=await Pe.getAdminUsers();w(M),M.length>0&&m(M[0].uid)}catch(M){console.error("Error loading admin users:",M)}finally{I(!1)}};if(!n)return null;const A=[{value:"staff",label:"Staff Member",description:"Basic access to tasks, receipts, and files. Will be assigned to a specific administrator.",icon:Df,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{value:"admin",label:"Administrator",description:"Full access including user management and system settings",icon:hv,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"}],S=()=>{r(l,l==="staff"?p:void 0)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"relative",children:[c.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:a,children:c.jsx(ea,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(Wo,{className:"w-5 h-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx(Vt,{className:"text-lg",children:"Google Sign-In Successful"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Choose your requested role"})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:t}),c.jsx("p",{className:"text-xs text-gray-500",children:e})]})]}),c.jsxs(nt,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Ue,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select the role you're requesting:"}),c.jsx("div",{className:"space-y-3",children:A.map(M=>{const P=M.icon,$=l===M.value;return c.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 p-4 transition-all ${$?`${M.borderColor} ${M.bgColor}`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>h(M.value),children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${$?M.bgColor:"bg-gray-50"}`,children:c.jsx(P,{className:`w-5 h-5 ${$?M.color:"text-gray-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:`font-medium ${$?M.color:"text-gray-900"}`,children:M.label}),$&&c.jsx("div",{className:`w-2 h-2 rounded-full ${M.color.replace("text-","bg-")}`})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:M.description})]})]}),c.jsx("input",{type:"radio",name:"role",value:M.value,checked:$,onChange:()=>h(M.value),className:"absolute top-4 right-4 w-4 h-4 text-blue-600"})]},M.value)})})]}),l==="staff"&&c.jsxs("div",{children:[c.jsx(Ue,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select the administrator you'd like to work under:"}),x?c.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading administrators..."}):y.length===0?c.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-yellow-800",children:"No administrators available. Your request will be assigned to the approving administrator."})}):c.jsx("div",{className:"space-y-2",children:y.map(M=>c.jsx("div",{className:`relative cursor-pointer rounded-lg border-2 p-3 transition-all ${p===M.uid?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>m(M.uid),children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${p===M.uid?"bg-blue-100":"bg-gray-50"}`,children:c.jsx(fv,{className:`w-4 h-4 ${p===M.uid?"text-blue-600":"text-gray-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:`font-medium ${p===M.uid?"text-blue-900":"text-gray-900"}`,children:M.name}),c.jsx("p",{className:"text-sm text-gray-600",children:M.email})]}),c.jsx("input",{type:"radio",name:"admin",value:M.uid,checked:p===M.uid,onChange:()=>m(M.uid),className:"w-4 h-4 text-blue-600"})]})},M.uid))})]}),c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Note:"})," Your request will be reviewed by an administrator.",l==="staff"&&p&&c.jsxs("span",{children:[" You will be assigned to ",(V=y.find(M=>M.uid===p))==null?void 0:V.name,"."]}),l==="admin"&&c.jsx("span",{children:" Administrator requests require additional approval."})]})}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx(je,{onClick:S,disabled:a,className:"flex-1",children:a?"Submitting...":"Submit Request"}),c.jsx(je,{onClick:i,variant:"outline",disabled:a,className:"flex-1",children:"Cancel"})]})]})]})})},Z1=({onSuccess:n,onError:e})=>{const[t,r]=E.useState(!1),[i,a]=E.useState(!1),[l,h]=E.useState(null),p=async()=>{r(!0);try{console.log("Starting Google Sign-In..."),a(!1),h(null);const w=await Pe.signInWithGoogle();if(w){console.log("Google Sign-In popup completed, checking user profile...");try{if(await new Promise(I=>setTimeout(I,100)),await Pe.getUserProfile(w.user.uid)){console.log("Existing user signed in successfully"),await Pe.updateLastLogin(w.user.uid),n==null||n();return}else{console.log("No profile found, checking if user is pre-approved...");try{const I=await dr(Ye(Re,"approved_google_users",w.user.email));if(I.exists()){console.log("Pre-approved Google user found, creating profile");const C=I.data(),A={...C,uid:w.user.uid,name:w.user.displayName||C.name,lastLogin:new Date};await es(Ye(Re,"users",w.user.uid),A),await Jo(Ye(Re,"approved_google_users",w.user.email)),console.log("Pre-approved user profile created successfully"),await Pe.updateLastLogin(w.user.uid),n==null||n();return}}catch(I){console.error("Error checking pre-approved users:",I)}console.log("New user detected, checking for existing requests..."),await Pe.signOut();try{if(await Pe.checkExistingPendingRequest(w.user.email)){console.log("User already has pending request"),e==null||e("Your access request is already pending approval. Please wait for admin approval.");return}}catch(I){console.error("Error checking pending requests:",I)}console.log("Showing role selection modal for new user"),h({email:w.user.email,name:w.user.displayName||w.user.email.split("@")[0]}),a(!0);return}}catch(x){console.error("Error checking user profile:",x),await Pe.signOut(),console.log("Profile check failed, checking if user is pre-approved...");try{if((await dr(Ye(Re,"approved_google_users",w.user.email))).exists()){console.log("Pre-approved Google user found after profile error"),e==null||e("Authentication error occurred. Please try signing in again.");return}}catch(I){console.error("Error checking pre-approved users after profile error:",I)}try{if(await Pe.checkExistingPendingRequest(w.user.email)){e==null||e("Your access request is already pending approval. Please wait for admin approval.");return}}catch(I){console.error("Error checking pending requests:",I)}h({email:w.user.email,name:w.user.displayName||w.user.email.split("@")[0]}),a(!0);return}}console.log("Google Sign-In using redirect method, will be handled on page reload")}catch(w){console.error("Google Sign-In error:",w);let x="Google Sign-In failed";if(w.code==="auth/popup-blocked")x="Popup was blocked. Please allow popups for this site and try again.";else if(w.code==="auth/popup-closed-by-user")x="Sign-in was cancelled. Please try again.";else if(w.code==="auth/unauthorized-domain")x="This domain is not authorized for Google Sign-In. Please contact support.";else if(w.code==="auth/operation-not-allowed")x="Google Sign-In is not enabled. Please contact support.";else if(w.code==="auth/network-request-failed")x="Network error. Please check your connection and try again.";else if(w.message==="PENDING_APPROVAL"){console.log("User needs approval, will be handled by AuthContext");return}else w.message&&(x=w.message);e==null||e(x)}finally{r(!1)}},m=async(w,x)=>{if(l){r(!0);try{console.log(`Creating Google user request for ${l.email} with role ${w}${x?` assigned to admin ${x}`:""}`),await Pe.createGoogleUserRequest(l.email,l.name,w,x),console.log("Google user request created successfully"),a(!1),h(null),console.log("Role selection complete, triggering success callback"),n==null||n()}catch(I){console.error("Error creating Google user request:",I),e==null||e(I.message||"Failed to submit request")}finally{r(!1)}}},y=()=>{a(!1),h(null),r(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:p,disabled:t,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Signing in...":"Continue with Google"]}),c.jsx(HL,{isOpen:i,userEmail:(l==null?void 0:l.email)||"",userName:(l==null?void 0:l.name)||"",onRoleSelect:m,onCancel:y,loading:t})]})},pv="/assets/bb626b016a1517c6cfff6c8c45abb0b9ac8e523c-CvVptfcF.png";function GL(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,a]=E.useState(!1),[l,h]=E.useState(""),[p,m]=E.useState(!1),[y,w]=E.useState(!1),[x,I]=E.useState(""),[C,A]=E.useState(null),[S,V]=E.useState(""),[M,P]=E.useState(""),$=F=>{const D=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return F?D.test(F)?(V(""),!0):(V("Please enter a valid email address"),!1):(V("Email is required"),!1)},G=F=>F?F.length<6?(P("Password must be at least 6 characters"),!1):(P(""),!0):(P("Password is required"),!1);E.useEffect(()=>{const F=Pe.getCurrentUser();A(F),typeof window<"u"&&(window.forceSignOut=async()=>{try{await Pe.signOut(),localStorage.clear(),sessionStorage.clear(),window.location.reload()}catch(D){console.error("Error signing out:",D)}},window.debugAuth=()=>{const D=Pe.getCurrentUser();return console.log("Current user:",D),D})},[]);const ee=async()=>{try{await Pe.signOut(),A(null),h(""),I("Signed out successfully. You can now sign in as a different user.")}catch(F){console.error("Sign out error:",F),h("Error signing out. Please try again.")}},j=async F=>{F.preventDefault(),h("");const D=$(n),fe=G(t);if(!(!D||!fe)){m(!0);try{const ye=await Pe.signIn(n,t);console.log("Sign in successful:",ye.user.uid)}catch(ye){console.error("Sign in error:",ye);let de="An error occurred during sign in";ye.code==="auth/invalid-credential"?de="Invalid email or password. Please check your credentials and try again.":ye.code==="auth/user-not-found"?de="No account found with this email address.":ye.code==="auth/wrong-password"?de="Incorrect password. Please try again.":ye.code==="auth/invalid-email"?de="Please enter a valid email address.":ye.code==="auth/user-disabled"?de="This account has been disabled. Contact administrator.":ye.code==="auth/too-many-requests"?de="Too many failed attempts. Please try again later or reset your password.":ye.code==="auth/network-request-failed"?de="Network error. Please check your internet connection.":ye.message&&(de=ye.message),h(de)}finally{m(!1)}}},N=async F=>{if(F.preventDefault(),!$(n)){h("Please enter a valid email address first");return}m(!0),h(""),I("");try{await Pe.sendPasswordReset(n),I("Password reset email sent! Check your inbox and spam folder."),w(!1)}catch(D){let fe="Failed to send password reset email";D.code==="auth/user-not-found"?fe="No account found with this email address":D.code==="auth/too-many-requests"?fe="Too many requests. Please try again later":D.message&&(fe=D.message),h(fe)}finally{m(!1)}},O=()=>{console.log("Google Sign-In success callback triggered")},L=F=>{console.error("Google Sign-In error:",F),h(F)},R=()=>{a(!i)};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"space-y-4 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("img",{src:pv,alt:"Province Logo",className:"h-24 w-24 object-contain"})}),c.jsx(Vt,{className:"text-2xl font-bold",children:"Province of San Antonio de Padua"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Office Management System"})]}),c.jsxs(nt,{children:[C&&c.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-yellow-800",children:["Already signed in as: ",c.jsx("strong",{children:C.email})]}),c.jsx("p",{className:"text-xs text-yellow-600",children:"Sign out to login as a different user"})]}),c.jsx(je,{type:"button",variant:"outline",size:"sm",onClick:ee,disabled:p,children:"Sign Out"})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Z1,{onSuccess:O,onError:L}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),c.jsxs("form",{onSubmit:j,className:"space-y-4",noValidate:!0,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"email",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx(cn,{id:"email",type:"email",placeholder:"your.email@province.ph",value:n,onChange:F=>{e(F.target.value),S&&$(F.target.value)},onBlur:()=>$(n),className:S?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"email"}),S&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx(Fi,{className:"h-4 w-4 text-red-500"})})]}),S&&c.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[c.jsx(Fi,{className:"h-3 w-3"}),S]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"password",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(cn,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:t,onChange:F=>{r(F.target.value),M&&G(F.target.value)},onBlur:()=>G(t),className:M?"border-red-500 focus:border-red-500 pr-10":"pr-10",required:!0,autoComplete:"current-password"}),c.jsx("button",{type:"button",onClick:R,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:-1,children:i?c.jsx(Z4,{className:"h-4 w-4"}):c.jsx(Vg,{className:"h-4 w-4"})})]}),M&&c.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[c.jsx(Fi,{className:"h-3 w-3"}),M]})]}),l&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:c.jsxs("p",{className:"text-sm text-red-700 flex items-center gap-2",children:[c.jsx(Fi,{className:"h-4 w-4"}),l]})}),x&&c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:c.jsxs("p",{className:"text-sm text-green-700 flex items-center gap-2",children:[c.jsx(Wo,{className:"h-4 w-4"}),x]})}),c.jsx(je,{type:"submit",className:"w-full",disabled:p,children:p?c.jsxs(c.Fragment,{children:[c.jsx(Fg,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):"Sign In"}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsx(je,{type:"button",variant:"link",className:"text-sm p-0 h-auto",onClick:()=>w(!y),children:"Forgot Password?"})}),y&&c.jsxs("div",{className:"p-4 border rounded-md bg-gray-50",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enter your email address and we'll send you a password reset link."}),c.jsx(je,{type:"button",onClick:N,disabled:p||!n||!!S,className:"w-full",children:p?c.jsxs(c.Fragment,{children:[c.jsx(Fg,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Email"})]}),c.jsx(je,{type:"button",variant:"outline",className:"w-full",onClick:()=>window.location.href="/register",children:"Request Account Access"}),c.jsx("div",{className:"text-xs text-muted-foreground text-center mt-4",children:"Contact administrator for account access"})]})]})]})]})})}const KL=()=>{const[n,e]=E.useState({email:"",name:"",role:"staff"}),[t,r]=E.useState(!1),[i,a]=E.useState(!1),[l,h]=E.useState(""),[p,m]=E.useState({email:"",name:""}),y=V=>{const M=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return V?M.test(V)?"":"Please enter a valid email address":"Email is required"},w=V=>V.trim()?V.trim().length<2?"Name must be at least 2 characters":/^[a-zA-Z\s]+$/.test(V.trim())?"":"Name can only contain letters and spaces":"Full name is required",x=(V,M)=>{e({...n,[V]:M}),p[V]&&m({...p,[V]:""}),l&&h("")},I=()=>{const V=y(n.email),M=w(n.name);return m({email:V,name:M}),!V&&!M},C=async V=>{var M,P;if(V.preventDefault(),h(""),!!I()){r(!0);try{console.log("Submitting registration request:",n),await Pe.requestUserCreation(n.email,n.name,n.role),a(!0)}catch($){console.error("Error submitting request:",$);let G="Error submitting request. Please try again.";$.code==="permission-denied"?G="Permission denied. Please try again or contact support.":(M=$.message)!=null&&M.includes("already pending")?G="A request for this email is already pending approval.":(P=$.message)!=null&&P.includes("already exists")?G="An account with this email already exists.":$.message&&(G=$.message),h(G)}finally{r(!1)}}},A=()=>{a(!0)},S=V=>{h(V)};return i?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"text-center",children:[c.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(Wo,{className:"w-6 h-6 text-green-600"})}),c.jsx(Vt,{className:"text-xl text-green-800",children:"Request Submitted Successfully"})]}),c.jsxs(nt,{className:"space-y-4",children:[c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsx("p",{className:"text-green-700 text-sm text-center",children:"Your account request has been submitted for approval. You will be notified via email once it's processed by an administrator."})}),c.jsx("div",{className:"text-center text-sm text-muted-foreground",children:c.jsx("p",{children:"Please check your email for updates on your request status."})}),c.jsxs(je,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",children:[c.jsx(Dg,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"text-center",children:[c.jsx(Vt,{className:"text-2xl font-bold",children:"Create Account"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Request access to the Office Management System"})]}),c.jsxs(nt,{className:"space-y-4",children:[l&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:c.jsxs("p",{className:"text-red-700 text-sm flex items-center gap-2",children:[c.jsx(Fi,{className:"h-4 w-4"}),l]})}),c.jsx("div",{children:c.jsx(Z1,{onSuccess:A,onError:S})}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or register with email"})})]}),c.jsxs("form",{onSubmit:C,className:"space-y-4",noValidate:!0,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Ue,{htmlFor:"name",className:"flex items-center gap-2",children:[c.jsx(Df,{className:"h-4 w-4"}),"Full Name"]}),c.jsx(cn,{id:"name",type:"text",placeholder:"Enter your full name",value:n.name,onChange:V=>x("name",V.target.value),onBlur:()=>{const V=w(n.name);m({...p,name:V})},className:p.name?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"name"}),p.name&&c.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[c.jsx(Fi,{className:"h-3 w-3"}),p.name]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Ue,{htmlFor:"email",className:"flex items-center gap-2",children:[c.jsx(uv,{className:"h-4 w-4"}),"Email Address"]}),c.jsx(cn,{id:"email",type:"email",placeholder:"Enter your email",value:n.email,onChange:V=>x("email",V.target.value),onBlur:()=>{const V=y(n.email);m({...p,email:V})},className:p.email?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"email"}),p.email&&c.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[c.jsx(Fi,{className:"h-3 w-3"}),p.email]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Ue,{htmlFor:"role",className:"flex items-center gap-2",children:[c.jsx(is,{className:"h-4 w-4"}),"Requested Role"]}),c.jsxs("select",{id:"role",value:n.role,onChange:V=>x("role",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"staff",children:"Staff Member"}),c.jsx("option",{value:"admin",children:"Administrator"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator requests require additional approval"})]}),c.jsx(je,{type:"submit",className:"w-full",disabled:t||!!p.email||!!p.name,children:t?c.jsxs(c.Fragment,{children:[c.jsx(Fg,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting Request..."]}):"Submit Request"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(je,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",disabled:t,children:[c.jsx(Dg,{className:"mr-2 h-4 w-4"}),"Back to Login"]}),c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Note:"})," All account requests must be approved by an administrator before access is granted. You will receive an email notification once your request is processed."]})})]})]})]})})},QL=({userEmail:n,onRetry:e,onSignOut:t})=>c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"text-center space-y-4",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("img",{src:pv,alt:"Province Logo",className:"h-20 w-20 object-contain"})}),c.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(Og,{className:"w-8 h-8 text-yellow-600"})}),c.jsx(Vt,{className:"text-xl text-yellow-800",children:"Waiting for Admin Approval"})]}),c.jsxs(nt,{className:"space-y-6",children:[c.jsxs("div",{className:"text-center space-y-3",children:[c.jsx("p",{className:"text-gray-700",children:"Your account request is currently being reviewed by an administrator."}),n&&c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700",children:[c.jsx(uv,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:n})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx(is,{className:"w-5 h-5 text-gray-600 mt-0.5"}),c.jsxs("div",{className:"text-sm text-gray-700",children:[c.jsx("p",{className:"font-medium mb-1",children:"What happens next?"}),c.jsxs("ul",{className:"space-y-1 text-xs",children:[c.jsx("li",{children:" An administrator will review your request"}),c.jsx("li",{children:" You'll receive an email notification when approved"}),c.jsx("li",{children:" Once approved, you can sign in normally"})]})]})]}),c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Need immediate access?"})," Contact your administrator directly."]})})]}),c.jsxs("div",{className:"space-y-3",children:[e&&c.jsxs(je,{onClick:e,variant:"outline",className:"w-full",children:[c.jsx(AL,{className:"mr-2 h-4 w-4"}),"Check Again"]}),c.jsxs(je,{onClick:t||(()=>window.location.href="/"),variant:"outline",className:"w-full",children:[c.jsx(Dg,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-xs text-gray-500",children:"This page will automatically refresh when your account is approved."})})]})]})}),YL=({toast:n,onRemove:e})=>{const t=()=>{switch(n.type){case"success":return c.jsx(Wo,{className:"w-5 h-5 text-green-600"});case"error":return c.jsx(yh,{className:"w-5 h-5 text-red-600"});case"warning":return c.jsx(X1,{className:"w-5 h-5 text-yellow-600"});case"info":return c.jsx(oL,{className:"w-5 h-5 text-blue-600"})}},r=()=>{switch(n.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}},i=()=>{switch(n.type){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800"}};return c.jsx("div",{className:`max-w-sm w-full ${r()} border rounded-lg shadow-lg p-4 mb-3 animate-in slide-in-from-right duration-300`,children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:t()}),c.jsxs("div",{className:"ml-3 w-0 flex-1",children:[c.jsx("p",{className:`text-sm font-medium ${i()}`,children:n.title}),n.message&&c.jsx("p",{className:`mt-1 text-sm ${i()} opacity-90`,children:n.message})]}),c.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:c.jsxs("button",{className:`inline-flex ${i()} hover:opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current rounded`,onClick:()=>e(n.id),children:[c.jsx("span",{className:"sr-only",children:"Close"}),c.jsx(ea,{className:"w-4 h-4"})]})})]})})},Zd=({toasts:n,onRemove:e})=>n.length===0?null:c.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(t=>c.jsx(YL,{toast:t,onRemove:e},t.id))});function XL(n,e){const t=E.createContext(e),r=a=>{const{children:l,...h}=a,p=E.useMemo(()=>h,Object.values(h));return c.jsx(t.Provider,{value:p,children:l})};r.displayName=n+"Provider";function i(a){const l=E.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,i]}function ei(n,e=[]){let t=[];function r(a,l){const h=E.createContext(l),p=t.length;t=[...t,l];const m=w=>{var V;const{scope:x,children:I,...C}=w,A=((V=x==null?void 0:x[n])==null?void 0:V[p])||h,S=E.useMemo(()=>C,Object.values(C));return c.jsx(A.Provider,{value:S,children:I})};m.displayName=a+"Provider";function y(w,x){var A;const I=((A=x==null?void 0:x[n])==null?void 0:A[p])||h,C=E.useContext(I);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${w}\` must be used within \`${a}\``)}return[m,y]}const i=()=>{const a=t.map(l=>E.createContext(l));return function(h){const p=(h==null?void 0:h[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...h,[n]:p}}),[h,p])}};return i.scopeName=n,[r,JL(i,...e)]}function JL(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=r.reduce((h,{useScope:p,scopeName:m})=>{const w=p(a)[`__scope${m}`];return{...h,...w}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function tr(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}var un=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},mv="Avatar",[ZL]=ei(mv),[eV,eI]=ZL(mv),tI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,a]=E.useState("idle");return c.jsx(eV,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:c.jsx(Ge.span,{...r,ref:e})})});tI.displayName=mv;var nI="AvatarImage",tV=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...a}=n,l=eI(nI,t),h=nV(r,a.referrerPolicy),p=tr(m=>{i(m),l.onImageLoadingStatusChange(m)});return un(()=>{h!=="idle"&&p(h)},[h,p]),h==="loaded"?c.jsx(Ge.img,{...a,ref:e,src:r}):null});tV.displayName=nI;var rI="AvatarFallback",sI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,a=eI(rI,t),[l,h]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const p=window.setTimeout(()=>h(!0),r);return()=>window.clearTimeout(p)}},[r]),l&&a.imageLoadingStatus!=="loaded"?c.jsx(Ge.span,{...i,ref:e}):null});sI.displayName=rI;function nV(n,e){const[t,r]=E.useState("idle");return un(()=>{if(!n){r("error");return}let i=!0;const a=new window.Image,l=h=>()=>{i&&r(h)};return r("loading"),a.onload=l("loaded"),a.onerror=l("error"),a.src=n,e&&(a.referrerPolicy=e),()=>{i=!1}},[n,e]),t}var rV=tI,sV=sI;function iI({className:n,...e}){return c.jsx(rV,{"data-slot":"avatar",className:ut("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function oI({className:n,...e}){return c.jsx(sV,{"data-slot":"avatar-fallback",className:ut("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}function De(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function wl({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=iV({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r,h=tr(t),p=E.useCallback(m=>{if(a){const w=typeof m=="function"?m(n):m;w!==n&&h(w)}else i(m)},[a,n,i,h]);return[l,p]}function iV({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,i=E.useRef(r),a=tr(e);return E.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),t}function gv(n){const e=n+"CollectionProvider",[t,r]=ei(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=I=>{const{scope:C,children:A}=I,S=Fs.useRef(null),V=Fs.useRef(new Map).current;return c.jsx(i,{scope:C,itemMap:V,collectionRef:S,children:A})};l.displayName=e;const h=n+"CollectionSlot",p=Fs.forwardRef((I,C)=>{const{scope:A,children:S}=I,V=a(h,A),M=ft(C,V.collectionRef);return c.jsx(Ys,{ref:M,children:S})});p.displayName=h;const m=n+"CollectionItemSlot",y="data-radix-collection-item",w=Fs.forwardRef((I,C)=>{const{scope:A,children:S,...V}=I,M=Fs.useRef(null),P=ft(C,M),$=a(m,A);return Fs.useEffect(()=>($.itemMap.set(M,{ref:M,...V}),()=>void $.itemMap.delete(M))),c.jsx(Ys,{[y]:"",ref:P,children:S})});w.displayName=m;function x(I){const C=a(n+"CollectionConsumer",I);return Fs.useCallback(()=>{const S=C.collectionRef.current;if(!S)return[];const V=Array.from(S.querySelectorAll(`[${y}]`));return Array.from(C.itemMap.values()).sort(($,G)=>V.indexOf($.ref.current)-V.indexOf(G.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:l,Slot:p,ItemSlot:w},x,r]}var oV=E.createContext(void 0);function Mf(n){const e=E.useContext(oV);return n||e||"ltr"}function aV(n,e=globalThis==null?void 0:globalThis.document){const t=tr(n);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var lV="DismissableLayer",Ug="dismissableLayer.update",cV="dismissableLayer.pointerDownOutside",uV="dismissableLayer.focusOutside",sE,aI=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Of=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:h,...p}=n,m=E.useContext(aI),[y,w]=E.useState(null),x=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=E.useState({}),C=ft(e,j=>w(j)),A=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),V=A.indexOf(S),M=y?A.indexOf(y):-1,P=m.layersWithOutsidePointerEventsDisabled.size>0,$=M>=V,G=fV(j=>{const N=j.target,O=[...m.branches].some(L=>L.contains(N));!$||O||(i==null||i(j),l==null||l(j),j.defaultPrevented||h==null||h())},x),ee=pV(j=>{const N=j.target;[...m.branches].some(L=>L.contains(N))||(a==null||a(j),l==null||l(j),j.defaultPrevented||h==null||h())},x);return aV(j=>{M===m.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&h&&(j.preventDefault(),h()))},x),E.useEffect(()=>{if(y)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(sE=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(y)),m.layers.add(y),iE(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=sE)}},[y,x,t,m]),E.useEffect(()=>()=>{y&&(m.layers.delete(y),m.layersWithOutsidePointerEventsDisabled.delete(y),iE())},[y,m]),E.useEffect(()=>{const j=()=>I({});return document.addEventListener(Ug,j),()=>document.removeEventListener(Ug,j)},[]),c.jsx(Ge.div,{...p,ref:C,style:{pointerEvents:P?$?"auto":"none":void 0,...n.style},onFocusCapture:De(n.onFocusCapture,ee.onFocusCapture),onBlurCapture:De(n.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:De(n.onPointerDownCapture,G.onPointerDownCapture)})});Of.displayName=lV;var dV="DismissableLayerBranch",hV=E.forwardRef((n,e)=>{const t=E.useContext(aI),r=E.useRef(null),i=ft(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),c.jsx(Ge.div,{...n,ref:i})});hV.displayName=dV;function fV(n,e=globalThis==null?void 0:globalThis.document){const t=tr(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=h=>{if(h.target&&!r.current){let p=function(){lI(cV,t,m,{discrete:!0})};const m={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=p,e.addEventListener("click",i.current,{once:!0})):p()}else e.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function pV(n,e=globalThis==null?void 0:globalThis.document){const t=tr(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&lI(uV,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iE(){const n=new CustomEvent(Ug);document.dispatchEvent(n)}function lI(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?B1(i,a):i.dispatchEvent(a)}var Hm=0;function yv(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??oE()),document.body.insertAdjacentElement("beforeend",n[1]??oE()),Hm++,()=>{Hm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Hm--}},[])}function oE(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Gm="focusScope.autoFocusOnMount",Km="focusScope.autoFocusOnUnmount",aE={bubbles:!1,cancelable:!0},mV="FocusScope",Lf=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=n,[h,p]=E.useState(null),m=tr(i),y=tr(a),w=E.useRef(null),x=ft(e,A=>p(A)),I=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let A=function(P){if(I.paused||!h)return;const $=P.target;h.contains($)?w.current=$:ji(w.current,{select:!0})},S=function(P){if(I.paused||!h)return;const $=P.relatedTarget;$!==null&&(h.contains($)||ji(w.current,{select:!0}))},V=function(P){if(document.activeElement===document.body)for(const G of P)G.removedNodes.length>0&&ji(h)};document.addEventListener("focusin",A),document.addEventListener("focusout",S);const M=new MutationObserver(V);return h&&M.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",S),M.disconnect()}}},[r,h,I.paused]),E.useEffect(()=>{if(h){cE.add(I);const A=document.activeElement;if(!h.contains(A)){const V=new CustomEvent(Gm,aE);h.addEventListener(Gm,m),h.dispatchEvent(V),V.defaultPrevented||(gV(xV(cI(h)),{select:!0}),document.activeElement===A&&ji(h))}return()=>{h.removeEventListener(Gm,m),setTimeout(()=>{const V=new CustomEvent(Km,aE);h.addEventListener(Km,y),h.dispatchEvent(V),V.defaultPrevented||ji(A??document.body,{select:!0}),h.removeEventListener(Km,y),cE.remove(I)},0)}}},[h,m,y,I]);const C=E.useCallback(A=>{if(!t&&!r||I.paused)return;const S=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,V=document.activeElement;if(S&&V){const M=A.currentTarget,[P,$]=yV(M);P&&$?!A.shiftKey&&V===$?(A.preventDefault(),t&&ji(P,{select:!0})):A.shiftKey&&V===P&&(A.preventDefault(),t&&ji($,{select:!0})):V===M&&A.preventDefault()}},[t,r,I.paused]);return c.jsx(Ge.div,{tabIndex:-1,...l,ref:x,onKeyDown:C})});Lf.displayName=mV;function gV(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ji(r,{select:e}),document.activeElement!==t)return}function yV(n){const e=cI(n),t=lE(e,n),r=lE(e.reverse(),n);return[t,r]}function cI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function lE(n,e){for(const t of n)if(!vV(t,{upTo:e}))return t}function vV(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function wV(n){return n instanceof HTMLInputElement&&"select"in n}function ji(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&wV(n)&&e&&n.select()}}var cE=_V();function _V(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=uE(n,e),n.unshift(e)},remove(e){var t;n=uE(n,e),(t=n[0])==null||t.resume()}}}function uE(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function xV(n){return n.filter(e=>e.tagName!=="A")}var EV=$N.useId||(()=>{}),TV=0;function ds(n){const[e,t]=E.useState(EV());return un(()=>{t(r=>r??String(TV++))},[n]),n||(e?`radix-${e}`:"")}const SV=["top","right","bottom","left"],ro=Math.min,Qn=Math.max,$h=Math.round,eh=Math.floor,hs=n=>({x:n,y:n}),IV={left:"right",right:"left",bottom:"top",top:"bottom"},bV={start:"end",end:"start"};function zg(n,e,t){return Qn(n,ro(e,t))}function Xs(n,e){return typeof n=="function"?n(e):n}function Js(n){return n.split("-")[0]}function Pl(n){return n.split("-")[1]}function vv(n){return n==="x"?"y":"x"}function wv(n){return n==="y"?"height":"width"}const AV=new Set(["top","bottom"]);function os(n){return AV.has(Js(n))?"y":"x"}function _v(n){return vv(os(n))}function NV(n,e,t){t===void 0&&(t=!1);const r=Pl(n),i=_v(n),a=wv(i);let l=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=qh(l)),[l,qh(l)]}function CV(n){const e=qh(n);return[Bg(n),e,Bg(e)]}function Bg(n){return n.replace(/start|end/g,e=>bV[e])}const dE=["left","right"],hE=["right","left"],RV=["top","bottom"],kV=["bottom","top"];function PV(n,e,t){switch(n){case"top":case"bottom":return t?e?hE:dE:e?dE:hE;case"left":case"right":return e?RV:kV;default:return[]}}function jV(n,e,t,r){const i=Pl(n);let a=PV(Js(n),t==="start",r);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(Bg)))),a}function qh(n){return n.replace(/left|right|bottom|top/g,e=>IV[e])}function DV(n){return{top:0,right:0,bottom:0,left:0,...n}}function uI(n){return typeof n!="number"?DV(n):{top:n,right:n,bottom:n,left:n}}function Wh(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function fE(n,e,t){let{reference:r,floating:i}=n;const a=os(e),l=_v(e),h=wv(l),p=Js(e),m=a==="y",y=r.x+r.width/2-i.width/2,w=r.y+r.height/2-i.height/2,x=r[h]/2-i[h]/2;let I;switch(p){case"top":I={x:y,y:r.y-i.height};break;case"bottom":I={x:y,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:w};break;case"left":I={x:r.x-i.width,y:w};break;default:I={x:r.x,y:r.y}}switch(Pl(e)){case"start":I[l]-=x*(t&&m?-1:1);break;case"end":I[l]+=x*(t&&m?-1:1);break}return I}const MV=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:l}=t,h=a.filter(Boolean),p=await(l.isRTL==null?void 0:l.isRTL(e));let m=await l.getElementRects({reference:n,floating:e,strategy:i}),{x:y,y:w}=fE(m,r,p),x=r,I={},C=0;for(let A=0;A<h.length;A++){const{name:S,fn:V}=h[A],{x:M,y:P,data:$,reset:G}=await V({x:y,y:w,initialPlacement:r,placement:x,strategy:i,middlewareData:I,rects:m,platform:l,elements:{reference:n,floating:e}});y=M??y,w=P??w,I={...I,[S]:{...I[S],...$}},G&&C<=50&&(C++,typeof G=="object"&&(G.placement&&(x=G.placement),G.rects&&(m=G.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:i}):G.rects),{x:y,y:w}=fE(m,x,p)),A=-1)}return{x:y,y:w,placement:x,strategy:i,middlewareData:I}};async function ru(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:l,elements:h,strategy:p}=n,{boundary:m="clippingAncestors",rootBoundary:y="viewport",elementContext:w="floating",altBoundary:x=!1,padding:I=0}=Xs(e,n),C=uI(I),S=h[x?w==="floating"?"reference":"floating":w],V=Wh(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(S)))==null||t?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(h.floating)),boundary:m,rootBoundary:y,strategy:p})),M=w==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h.floating)),$=await(a.isElement==null?void 0:a.isElement(P))?await(a.getScale==null?void 0:a.getScale(P))||{x:1,y:1}:{x:1,y:1},G=Wh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:M,offsetParent:P,strategy:p}):M);return{top:(V.top-G.top+C.top)/$.y,bottom:(G.bottom-V.bottom+C.bottom)/$.y,left:(V.left-G.left+C.left)/$.x,right:(G.right-V.right+C.right)/$.x}}const OV=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:l,elements:h,middlewareData:p}=e,{element:m,padding:y=0}=Xs(n,e)||{};if(m==null)return{};const w=uI(y),x={x:t,y:r},I=_v(i),C=wv(I),A=await l.getDimensions(m),S=I==="y",V=S?"top":"left",M=S?"bottom":"right",P=S?"clientHeight":"clientWidth",$=a.reference[C]+a.reference[I]-x[I]-a.floating[C],G=x[I]-a.reference[I],ee=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let j=ee?ee[P]:0;(!j||!await(l.isElement==null?void 0:l.isElement(ee)))&&(j=h.floating[P]||a.floating[C]);const N=$/2-G/2,O=j/2-A[C]/2-1,L=ro(w[V],O),R=ro(w[M],O),F=L,D=j-A[C]-R,fe=j/2-A[C]/2+N,ye=zg(F,fe,D),de=!p.arrow&&Pl(i)!=null&&fe!==ye&&a.reference[C]/2-(fe<F?L:R)-A[C]/2<0,_e=de?fe<F?fe-F:fe-D:0;return{[I]:x[I]+_e,data:{[I]:ye,centerOffset:fe-ye-_e,...de&&{alignmentOffset:_e}},reset:de}}}),LV=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:l,initialPlacement:h,platform:p,elements:m}=e,{mainAxis:y=!0,crossAxis:w=!0,fallbackPlacements:x,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:A=!0,...S}=Xs(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const V=Js(i),M=os(h),P=Js(h)===h,$=await(p.isRTL==null?void 0:p.isRTL(m.floating)),G=x||(P||!A?[qh(h)]:CV(h)),ee=C!=="none";!x&&ee&&G.push(...jV(h,A,C,$));const j=[h,...G],N=await ru(e,S),O=[];let L=((r=a.flip)==null?void 0:r.overflows)||[];if(y&&O.push(N[V]),w){const fe=NV(i,l,$);O.push(N[fe[0]],N[fe[1]])}if(L=[...L,{placement:i,overflows:O}],!O.every(fe=>fe<=0)){var R,F;const fe=(((R=a.flip)==null?void 0:R.index)||0)+1,ye=j[fe];if(ye&&(!(w==="alignment"?M!==os(ye):!1)||L.every(H=>os(H.placement)===M?H.overflows[0]>0:!0)))return{data:{index:fe,overflows:L},reset:{placement:ye}};let de=(F=L.filter(_e=>_e.overflows[0]<=0).sort((_e,H)=>_e.overflows[1]-H.overflows[1])[0])==null?void 0:F.placement;if(!de)switch(I){case"bestFit":{var D;const _e=(D=L.filter(H=>{if(ee){const te=os(H.placement);return te===M||te==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(te=>te>0).reduce((te,le)=>te+le,0)]).sort((H,te)=>H[1]-te[1])[0])==null?void 0:D[0];_e&&(de=_e);break}case"initialPlacement":de=h;break}if(i!==de)return{reset:{placement:de}}}return{}}}};function pE(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function mE(n){return SV.some(e=>n[e]>=0)}const VV=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Xs(n,e);switch(r){case"referenceHidden":{const a=await ru(e,{...i,elementContext:"reference"}),l=pE(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:mE(l)}}}case"escaped":{const a=await ru(e,{...i,altBoundary:!0}),l=pE(a,t.floating);return{data:{escapedOffsets:l,escaped:mE(l)}}}default:return{}}}}},dI=new Set(["left","top"]);async function FV(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=Js(t),h=Pl(t),p=os(t)==="y",m=dI.has(l)?-1:1,y=a&&p?-1:1,w=Xs(e,n);let{mainAxis:x,crossAxis:I,alignmentAxis:C}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return h&&typeof C=="number"&&(I=h==="end"?C*-1:C),p?{x:I*y,y:x*m}:{x:x*m,y:I*y}}const UV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:l,middlewareData:h}=e,p=await FV(e,n);return l===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:a+p.y,data:{...p,placement:l}}}}},zV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:h={fn:S=>{let{x:V,y:M}=S;return{x:V,y:M}}},...p}=Xs(n,e),m={x:t,y:r},y=await ru(e,p),w=os(Js(i)),x=vv(w);let I=m[x],C=m[w];if(a){const S=x==="y"?"top":"left",V=x==="y"?"bottom":"right",M=I+y[S],P=I-y[V];I=zg(M,I,P)}if(l){const S=w==="y"?"top":"left",V=w==="y"?"bottom":"right",M=C+y[S],P=C-y[V];C=zg(M,C,P)}const A=h.fn({...e,[x]:I,[w]:C});return{...A,data:{x:A.x-t,y:A.y-r,enabled:{[x]:a,[w]:l}}}}}},BV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:l}=e,{offset:h=0,mainAxis:p=!0,crossAxis:m=!0}=Xs(n,e),y={x:t,y:r},w=os(i),x=vv(w);let I=y[x],C=y[w];const A=Xs(h,e),S=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(p){const P=x==="y"?"height":"width",$=a.reference[x]-a.floating[P]+S.mainAxis,G=a.reference[x]+a.reference[P]-S.mainAxis;I<$?I=$:I>G&&(I=G)}if(m){var V,M;const P=x==="y"?"width":"height",$=dI.has(Js(i)),G=a.reference[w]-a.floating[P]+($&&((V=l.offset)==null?void 0:V[w])||0)+($?0:S.crossAxis),ee=a.reference[w]+a.reference[P]+($?0:((M=l.offset)==null?void 0:M[w])||0)-($?S.crossAxis:0);C<G?C=G:C>ee&&(C=ee)}return{[x]:I,[w]:C}}}},$V=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:l,elements:h}=e,{apply:p=()=>{},...m}=Xs(n,e),y=await ru(e,m),w=Js(i),x=Pl(i),I=os(i)==="y",{width:C,height:A}=a.floating;let S,V;w==="top"||w==="bottom"?(S=w,V=x===(await(l.isRTL==null?void 0:l.isRTL(h.floating))?"start":"end")?"left":"right"):(V=w,S=x==="end"?"top":"bottom");const M=A-y.top-y.bottom,P=C-y.left-y.right,$=ro(A-y[S],M),G=ro(C-y[V],P),ee=!e.middlewareData.shift;let j=$,N=G;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=P),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=M),ee&&!x){const L=Qn(y.left,0),R=Qn(y.right,0),F=Qn(y.top,0),D=Qn(y.bottom,0);I?N=C-2*(L!==0||R!==0?L+R:Qn(y.left,y.right)):j=A-2*(F!==0||D!==0?F+D:Qn(y.top,y.bottom))}await p({...e,availableWidth:N,availableHeight:j});const O=await l.getDimensions(h.floating);return C!==O.width||A!==O.height?{reset:{rects:!0}}:{}}}};function Vf(){return typeof window<"u"}function jl(n){return hI(n)?(n.nodeName||"").toLowerCase():"#document"}function Zn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ws(n){var e;return(e=(hI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function hI(n){return Vf()?n instanceof Node||n instanceof Zn(n).Node:!1}function jr(n){return Vf()?n instanceof Element||n instanceof Zn(n).Element:!1}function ps(n){return Vf()?n instanceof HTMLElement||n instanceof Zn(n).HTMLElement:!1}function gE(n){return!Vf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Zn(n).ShadowRoot}const qV=new Set(["inline","contents"]);function Su(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Dr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!qV.has(i)}const WV=new Set(["table","td","th"]);function HV(n){return WV.has(jl(n))}const GV=[":popover-open",":modal"];function Ff(n){return GV.some(e=>{try{return n.matches(e)}catch{return!1}})}const KV=["transform","translate","scale","rotate","perspective"],QV=["transform","translate","scale","rotate","perspective","filter"],YV=["paint","layout","strict","content"];function xv(n){const e=Ev(),t=jr(n)?Dr(n):n;return KV.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||QV.some(r=>(t.willChange||"").includes(r))||YV.some(r=>(t.contain||"").includes(r))}function XV(n){let e=so(n);for(;ps(e)&&!_l(e);){if(xv(e))return e;if(Ff(e))return null;e=so(e)}return null}function Ev(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JV=new Set(["html","body","#document"]);function _l(n){return JV.has(jl(n))}function Dr(n){return Zn(n).getComputedStyle(n)}function Uf(n){return jr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function so(n){if(jl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||gE(n)&&n.host||ws(n);return gE(e)?e.host:e}function fI(n){const e=so(n);return _l(e)?n.ownerDocument?n.ownerDocument.body:n.body:ps(e)&&Su(e)?e:fI(e)}function su(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=fI(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),l=Zn(i);if(a){const h=$g(l);return e.concat(l,l.visualViewport||[],Su(i)?i:[],h&&t?su(h):[])}return e.concat(i,su(i,[],t))}function $g(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function pI(n){const e=Dr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ps(n),a=i?n.offsetWidth:t,l=i?n.offsetHeight:r,h=$h(t)!==a||$h(r)!==l;return h&&(t=a,r=l),{width:t,height:r,$:h}}function Tv(n){return jr(n)?n:n.contextElement}function al(n){const e=Tv(n);if(!ps(e))return hs(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=pI(e);let l=(a?$h(t.width):t.width)/r,h=(a?$h(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!h||!Number.isFinite(h))&&(h=1),{x:l,y:h}}const ZV=hs(0);function mI(n){const e=Zn(n);return!Ev()||!e.visualViewport?ZV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eF(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Zn(n)?!1:e}function ta(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=Tv(n);let l=hs(1);e&&(r?jr(r)&&(l=al(r)):l=al(n));const h=eF(a,t,r)?mI(a):hs(0);let p=(i.left+h.x)/l.x,m=(i.top+h.y)/l.y,y=i.width/l.x,w=i.height/l.y;if(a){const x=Zn(a),I=r&&jr(r)?Zn(r):r;let C=x,A=$g(C);for(;A&&r&&I!==C;){const S=al(A),V=A.getBoundingClientRect(),M=Dr(A),P=V.left+(A.clientLeft+parseFloat(M.paddingLeft))*S.x,$=V.top+(A.clientTop+parseFloat(M.paddingTop))*S.y;p*=S.x,m*=S.y,y*=S.x,w*=S.y,p+=P,m+=$,C=Zn(A),A=$g(C)}}return Wh({width:y,height:w,x:p,y:m})}function zf(n,e){const t=Uf(n).scrollLeft;return e?e.left+t:ta(ws(n)).left+t}function gI(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-zf(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function tF(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",l=ws(r),h=e?Ff(e.floating):!1;if(r===l||h&&a)return t;let p={scrollLeft:0,scrollTop:0},m=hs(1);const y=hs(0),w=ps(r);if((w||!w&&!a)&&((jl(r)!=="body"||Su(l))&&(p=Uf(r)),ps(r))){const I=ta(r);m=al(r),y.x=I.x+r.clientLeft,y.y=I.y+r.clientTop}const x=l&&!w&&!a?gI(l,p):hs(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-p.scrollLeft*m.x+y.x+x.x,y:t.y*m.y-p.scrollTop*m.y+y.y+x.y}}function nF(n){return Array.from(n.getClientRects())}function rF(n){const e=ws(n),t=Uf(n),r=n.ownerDocument.body,i=Qn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Qn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+zf(n);const h=-t.scrollTop;return Dr(r).direction==="rtl"&&(l+=Qn(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:l,y:h}}const yE=25;function sF(n,e){const t=Zn(n),r=ws(n),i=t.visualViewport;let a=r.clientWidth,l=r.clientHeight,h=0,p=0;if(i){a=i.width,l=i.height;const y=Ev();(!y||y&&e==="fixed")&&(h=i.offsetLeft,p=i.offsetTop)}const m=zf(r);if(m<=0){const y=r.ownerDocument,w=y.body,x=getComputedStyle(w),I=y.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,C=Math.abs(r.clientWidth-w.clientWidth-I);C<=yE&&(a-=C)}else m<=yE&&(a+=m);return{width:a,height:l,x:h,y:p}}const iF=new Set(["absolute","fixed"]);function oF(n,e){const t=ta(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=ps(n)?al(n):hs(1),l=n.clientWidth*a.x,h=n.clientHeight*a.y,p=i*a.x,m=r*a.y;return{width:l,height:h,x:p,y:m}}function vE(n,e,t){let r;if(e==="viewport")r=sF(n,t);else if(e==="document")r=rF(ws(n));else if(jr(e))r=oF(e,t);else{const i=mI(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Wh(r)}function yI(n,e){const t=so(n);return t===e||!jr(t)||_l(t)?!1:Dr(t).position==="fixed"||yI(t,e)}function aF(n,e){const t=e.get(n);if(t)return t;let r=su(n,[],!1).filter(h=>jr(h)&&jl(h)!=="body"),i=null;const a=Dr(n).position==="fixed";let l=a?so(n):n;for(;jr(l)&&!_l(l);){const h=Dr(l),p=xv(l);!p&&h.position==="fixed"&&(i=null),(a?!p&&!i:!p&&h.position==="static"&&!!i&&iF.has(i.position)||Su(l)&&!p&&yI(n,l))?r=r.filter(y=>y!==l):i=h,l=so(l)}return e.set(n,r),r}function lF(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const l=[...t==="clippingAncestors"?Ff(e)?[]:aF(e,this._c):[].concat(t),r],h=l[0],p=l.reduce((m,y)=>{const w=vE(e,y,i);return m.top=Qn(w.top,m.top),m.right=ro(w.right,m.right),m.bottom=ro(w.bottom,m.bottom),m.left=Qn(w.left,m.left),m},vE(e,h,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function cF(n){const{width:e,height:t}=pI(n);return{width:e,height:t}}function uF(n,e,t){const r=ps(e),i=ws(e),a=t==="fixed",l=ta(n,!0,a,e);let h={scrollLeft:0,scrollTop:0};const p=hs(0);function m(){p.x=zf(i)}if(r||!r&&!a)if((jl(e)!=="body"||Su(i))&&(h=Uf(e)),r){const I=ta(e,!0,a,e);p.x=I.x+e.clientLeft,p.y=I.y+e.clientTop}else i&&m();a&&!r&&i&&m();const y=i&&!r&&!a?gI(i,h):hs(0),w=l.left+h.scrollLeft-p.x-y.x,x=l.top+h.scrollTop-p.y-y.y;return{x:w,y:x,width:l.width,height:l.height}}function Qm(n){return Dr(n).position==="static"}function wE(n,e){if(!ps(n)||Dr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ws(n)===t&&(t=t.ownerDocument.body),t}function vI(n,e){const t=Zn(n);if(Ff(n))return t;if(!ps(n)){let i=so(n);for(;i&&!_l(i);){if(jr(i)&&!Qm(i))return i;i=so(i)}return t}let r=wE(n,e);for(;r&&HV(r)&&Qm(r);)r=wE(r,e);return r&&_l(r)&&Qm(r)&&!xv(r)?t:r||XV(n)||t}const dF=async function(n){const e=this.getOffsetParent||vI,t=this.getDimensions,r=await t(n.floating);return{reference:uF(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hF(n){return Dr(n).direction==="rtl"}const fF={convertOffsetParentRelativeRectToViewportRelativeRect:tF,getDocumentElement:ws,getClippingRect:lF,getOffsetParent:vI,getElementRects:dF,getClientRects:nF,getDimensions:cF,getScale:al,isElement:jr,isRTL:hF};function wI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function pF(n,e){let t=null,r;const i=ws(n);function a(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function l(h,p){h===void 0&&(h=!1),p===void 0&&(p=1),a();const m=n.getBoundingClientRect(),{left:y,top:w,width:x,height:I}=m;if(h||e(),!x||!I)return;const C=eh(w),A=eh(i.clientWidth-(y+x)),S=eh(i.clientHeight-(w+I)),V=eh(y),P={rootMargin:-C+"px "+-A+"px "+-S+"px "+-V+"px",threshold:Qn(0,ro(1,p))||1};let $=!0;function G(ee){const j=ee[0].intersectionRatio;if(j!==p){if(!$)return l();j?l(!1,j):r=setTimeout(()=>{l(!1,1e-7)},1e3)}j===1&&!wI(m,n.getBoundingClientRect())&&l(),$=!1}try{t=new IntersectionObserver(G,{...P,root:i.ownerDocument})}catch{t=new IntersectionObserver(G,P)}t.observe(n)}return l(!0),a}function mF(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,m=Tv(n),y=i||a?[...m?su(m):[],...su(e)]:[];y.forEach(V=>{i&&V.addEventListener("scroll",t,{passive:!0}),a&&V.addEventListener("resize",t)});const w=m&&h?pF(m,t):null;let x=-1,I=null;l&&(I=new ResizeObserver(V=>{let[M]=V;M&&M.target===m&&I&&(I.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var P;(P=I)==null||P.observe(e)})),t()}),m&&!p&&I.observe(m),I.observe(e));let C,A=p?ta(n):null;p&&S();function S(){const V=ta(n);A&&!wI(A,V)&&t(),A=V,C=requestAnimationFrame(S)}return t(),()=>{var V;y.forEach(M=>{i&&M.removeEventListener("scroll",t),a&&M.removeEventListener("resize",t)}),w==null||w(),(V=I)==null||V.disconnect(),I=null,p&&cancelAnimationFrame(C)}}const gF=UV,yF=zV,vF=LV,wF=$V,_F=VV,_E=OV,xF=BV,EF=(n,e,t)=>{const r=new Map,i={platform:fF,...t},a={...i.platform,_c:r};return MV(n,e,{...i,platform:a})};var TF=typeof document<"u",SF=function(){},wh=TF?E.useLayoutEffect:SF;function Hh(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Hh(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!Hh(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function _I(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function xE(n,e){const t=_I(n);return Math.round(e*t)/t}function Ym(n){const e=E.useRef(n);return wh(()=>{e.current=n}),e}function IF(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:l}={},transform:h=!0,whileElementsMounted:p,open:m}=n,[y,w]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[x,I]=E.useState(r);Hh(x,r)||I(r);const[C,A]=E.useState(null),[S,V]=E.useState(null),M=E.useCallback(H=>{H!==ee.current&&(ee.current=H,A(H))},[]),P=E.useCallback(H=>{H!==j.current&&(j.current=H,V(H))},[]),$=a||C,G=l||S,ee=E.useRef(null),j=E.useRef(null),N=E.useRef(y),O=p!=null,L=Ym(p),R=Ym(i),F=Ym(m),D=E.useCallback(()=>{if(!ee.current||!j.current)return;const H={placement:e,strategy:t,middleware:x};R.current&&(H.platform=R.current),EF(ee.current,j.current,H).then(te=>{const le={...te,isPositioned:F.current!==!1};fe.current&&!Hh(N.current,le)&&(N.current=le,Tu.flushSync(()=>{w(le)}))})},[x,e,t,R,F]);wh(()=>{m===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,w(H=>({...H,isPositioned:!1})))},[m]);const fe=E.useRef(!1);wh(()=>(fe.current=!0,()=>{fe.current=!1}),[]),wh(()=>{if($&&(ee.current=$),G&&(j.current=G),$&&G){if(L.current)return L.current($,G,D);D()}},[$,G,D,L,O]);const ye=E.useMemo(()=>({reference:ee,floating:j,setReference:M,setFloating:P}),[M,P]),de=E.useMemo(()=>({reference:$,floating:G}),[$,G]),_e=E.useMemo(()=>{const H={position:t,left:0,top:0};if(!de.floating)return H;const te=xE(de.floating,y.x),le=xE(de.floating,y.y);return h?{...H,transform:"translate("+te+"px, "+le+"px)",..._I(de.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:te,top:le}},[t,h,de.floating,y.x,y.y]);return E.useMemo(()=>({...y,update:D,refs:ye,elements:de,floatingStyles:_e}),[y,D,ye,de,_e])}const bF=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?_E({element:r.current,padding:i}).fn(t):{}:r?_E({element:r,padding:i}).fn(t):{}}}},AF=(n,e)=>({...gF(n),options:[n,e]}),NF=(n,e)=>({...yF(n),options:[n,e]}),CF=(n,e)=>({...xF(n),options:[n,e]}),RF=(n,e)=>({...vF(n),options:[n,e]}),kF=(n,e)=>({...wF(n),options:[n,e]}),PF=(n,e)=>({..._F(n),options:[n,e]}),jF=(n,e)=>({...bF(n),options:[n,e]});var DF="Arrow",xI=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return c.jsx(Ge.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});xI.displayName=DF;var MF=xI;function OF(n){const[e,t]=E.useState(void 0);return un(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,h;if("borderBoxSize"in a){const p=a.borderBoxSize,m=Array.isArray(p)?p[0]:p;l=m.inlineSize,h=m.blockSize}else l=n.offsetWidth,h=n.offsetHeight;t({width:l,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Sv="Popper",[EI,Bf]=ei(Sv),[LF,TI]=EI(Sv),SI=n=>{const{__scopePopper:e,children:t}=n,[r,i]=E.useState(null);return c.jsx(LF,{scope:e,anchor:r,onAnchorChange:i,children:t})};SI.displayName=Sv;var II="PopperAnchor",bI=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=TI(II,t),l=E.useRef(null),h=ft(e,l);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:c.jsx(Ge.div,{...i,ref:h})});bI.displayName=II;var Iv="PopperContent",[VF,FF]=EI(Iv),AI=E.forwardRef((n,e)=>{var se,we,Ee,X,me,Fe;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:h=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:y=0,sticky:w="partial",hideWhenDetached:x=!1,updatePositionStrategy:I="optimized",onPlaced:C,...A}=n,S=TI(Iv,t),[V,M]=E.useState(null),P=ft(e,lt=>M(lt)),[$,G]=E.useState(null),ee=OF($),j=(ee==null?void 0:ee.width)??0,N=(ee==null?void 0:ee.height)??0,O=r+(a!=="center"?"-"+a:""),L=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},R=Array.isArray(m)?m:[m],F=R.length>0,D={padding:L,boundary:R.filter(zF),altBoundary:F},{refs:fe,floatingStyles:ye,placement:de,isPositioned:_e,middlewareData:H}=IF({strategy:"fixed",placement:O,whileElementsMounted:(...lt)=>mF(...lt,{animationFrame:I==="always"}),elements:{reference:S.anchor},middleware:[AF({mainAxis:i+N,alignmentAxis:l}),p&&NF({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?CF():void 0,...D}),p&&RF({...D}),kF({...D,apply:({elements:lt,rects:qt,availableWidth:dn,availableHeight:nr})=>{const{width:Vn,height:co}=qt.reference,yt=lt.floating.style;yt.setProperty("--radix-popper-available-width",`${dn}px`),yt.setProperty("--radix-popper-available-height",`${nr}px`),yt.setProperty("--radix-popper-anchor-width",`${Vn}px`),yt.setProperty("--radix-popper-anchor-height",`${co}px`)}}),$&&jF({element:$,padding:h}),BF({arrowWidth:j,arrowHeight:N}),x&&PF({strategy:"referenceHidden",...D})]}),[te,le]=RI(de),q=tr(C);un(()=>{_e&&(q==null||q())},[_e,q]);const z=(se=H.arrow)==null?void 0:se.x,ie=(we=H.arrow)==null?void 0:we.y,re=((Ee=H.arrow)==null?void 0:Ee.centerOffset)!==0,[ve,Te]=E.useState();return un(()=>{V&&Te(window.getComputedStyle(V).zIndex)},[V]),c.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:_e?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(X=H.transformOrigin)==null?void 0:X.x,(me=H.transformOrigin)==null?void 0:me.y].join(" "),...((Fe=H.hide)==null?void 0:Fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:c.jsx(VF,{scope:t,placedSide:te,onArrowChange:G,arrowX:z,arrowY:ie,shouldHideArrow:re,children:c.jsx(Ge.div,{"data-side":te,"data-align":le,...A,ref:P,style:{...A.style,animation:_e?void 0:"none"}})})})});AI.displayName=Iv;var NI="PopperArrow",UF={top:"bottom",right:"left",bottom:"top",left:"right"},CI=E.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=FF(NI,r),l=UF[a.placedSide];return c.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:c.jsx(MF,{...i,ref:t,style:{...i.style,display:"block"}})})});CI.displayName=NI;function zF(n){return n!==null}var BF=n=>({name:"transformOrigin",options:n,fn(e){var S,V,M;const{placement:t,rects:r,middlewareData:i}=e,l=((S=i.arrow)==null?void 0:S.centerOffset)!==0,h=l?0:n.arrowWidth,p=l?0:n.arrowHeight,[m,y]=RI(t),w={start:"0%",center:"50%",end:"100%"}[y],x=(((V=i.arrow)==null?void 0:V.x)??0)+h/2,I=(((M=i.arrow)==null?void 0:M.y)??0)+p/2;let C="",A="";return m==="bottom"?(C=l?w:`${x}px`,A=`${-p}px`):m==="top"?(C=l?w:`${x}px`,A=`${r.floating.height+p}px`):m==="right"?(C=`${-p}px`,A=l?w:`${I}px`):m==="left"&&(C=`${r.floating.width+p}px`,A=l?w:`${I}px`),{data:{x:C,y:A}}}});function RI(n){const[e,t="center"]=n.split("-");return[e,t]}var kI=SI,PI=bI,jI=AI,DI=CI,$F="Portal",$f=E.forwardRef((n,e)=>{var h;const{container:t,...r}=n,[i,a]=E.useState(!1);un(()=>a(!0),[]);const l=t||i&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return l?I4.createPortal(c.jsx(Ge.div,{...r,ref:e}),l):null});$f.displayName=$F;function qF(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var ti=n=>{const{present:e,children:t}=n,r=WF(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=ft(r.ref,HF(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:a}):null};ti.displayName="Presence";function WF(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),a=E.useRef("none"),l=n?"mounted":"unmounted",[h,p]=qF(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=th(r.current);a.current=h==="mounted"?m:"none"},[h]),un(()=>{const m=r.current,y=i.current;if(y!==n){const x=a.current,I=th(m);n?p("MOUNT"):I==="none"||(m==null?void 0:m.display)==="none"?p("UNMOUNT"):p(y&&x!==I?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,p]),un(()=>{if(e){let m;const y=e.ownerDocument.defaultView??window,w=I=>{const A=th(r.current).includes(I.animationName);if(I.target===e&&A&&(p("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",m=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},x=I=>{I.target===e&&(a.current=th(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",w),e.addEventListener("animationend",w),()=>{y.clearTimeout(m),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",w),e.removeEventListener("animationend",w)}}else p("ANIMATION_END")},[e,p]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function th(n){return(n==null?void 0:n.animationName)||"none"}function HF(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Xm="rovingFocusGroup.onEntryFocus",GF={bubbles:!1,cancelable:!0},qf="RovingFocusGroup",[qg,MI,KF]=gv(qf),[QF,Wf]=ei(qf,[KF]),[YF,XF]=QF(qf),OI=E.forwardRef((n,e)=>c.jsx(qg.Provider,{scope:n.__scopeRovingFocusGroup,children:c.jsx(qg.Slot,{scope:n.__scopeRovingFocusGroup,children:c.jsx(JF,{...n,ref:e})})}));OI.displayName=qf;var JF=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:y=!1,...w}=n,x=E.useRef(null),I=ft(e,x),C=Mf(a),[A=null,S]=wl({prop:l,defaultProp:h,onChange:p}),[V,M]=E.useState(!1),P=tr(m),$=MI(t),G=E.useRef(!1),[ee,j]=E.useState(0);return E.useEffect(()=>{const N=x.current;if(N)return N.addEventListener(Xm,P),()=>N.removeEventListener(Xm,P)},[P]),c.jsx(YF,{scope:t,orientation:r,dir:C,loop:i,currentTabStopId:A,onItemFocus:E.useCallback(N=>S(N),[S]),onItemShiftTab:E.useCallback(()=>M(!0),[]),onFocusableItemAdd:E.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:E.useCallback(()=>j(N=>N-1),[]),children:c.jsx(Ge.div,{tabIndex:V||ee===0?-1:0,"data-orientation":r,...w,ref:I,style:{outline:"none",...n.style},onMouseDown:De(n.onMouseDown,()=>{G.current=!0}),onFocus:De(n.onFocus,N=>{const O=!G.current;if(N.target===N.currentTarget&&O&&!V){const L=new CustomEvent(Xm,GF);if(N.currentTarget.dispatchEvent(L),!L.defaultPrevented){const R=$().filter(de=>de.focusable),F=R.find(de=>de.active),D=R.find(de=>de.id===A),ye=[F,D,...R].filter(Boolean).map(de=>de.ref.current);FI(ye,y)}}G.current=!1}),onBlur:De(n.onBlur,()=>M(!1))})})}),LI="RovingFocusGroupItem",VI=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,...l}=n,h=ds(),p=a||h,m=XF(LI,t),y=m.currentTabStopId===p,w=MI(t),{onFocusableItemAdd:x,onFocusableItemRemove:I}=m;return E.useEffect(()=>{if(r)return x(),()=>I()},[r,x,I]),c.jsx(qg.ItemSlot,{scope:t,id:p,focusable:r,active:i,children:c.jsx(Ge.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...l,ref:e,onMouseDown:De(n.onMouseDown,C=>{r?m.onItemFocus(p):C.preventDefault()}),onFocus:De(n.onFocus,()=>m.onItemFocus(p)),onKeyDown:De(n.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){m.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const A=t3(C,m.orientation,m.dir);if(A!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let V=w().filter(M=>M.focusable).map(M=>M.ref.current);if(A==="last")V.reverse();else if(A==="prev"||A==="next"){A==="prev"&&V.reverse();const M=V.indexOf(C.currentTarget);V=m.loop?n3(V,M+1):V.slice(M+1)}setTimeout(()=>FI(V))}})})})});VI.displayName=LI;var ZF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function e3(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function t3(n,e,t){const r=e3(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ZF[r]}function FI(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function n3(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var UI=OI,zI=VI,r3=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Qa=new WeakMap,nh=new WeakMap,rh={},Jm=0,BI=function(n){return n&&(n.host||BI(n.parentNode))},s3=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=BI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},i3=function(n,e,t,r){var i=s3(e,Array.isArray(n)?n:[n]);rh[t]||(rh[t]=new WeakMap);var a=rh[t],l=[],h=new Set,p=new Set(i),m=function(w){!w||h.has(w)||(h.add(w),m(w.parentNode))};i.forEach(m);var y=function(w){!w||p.has(w)||Array.prototype.forEach.call(w.children,function(x){if(h.has(x))y(x);else try{var I=x.getAttribute(r),C=I!==null&&I!=="false",A=(Qa.get(x)||0)+1,S=(a.get(x)||0)+1;Qa.set(x,A),a.set(x,S),l.push(x),A===1&&C&&nh.set(x,!0),S===1&&x.setAttribute(t,"true"),C||x.setAttribute(r,"true")}catch(V){console.error("aria-hidden: cannot operate on ",x,V)}})};return y(e),h.clear(),Jm++,function(){l.forEach(function(w){var x=Qa.get(w)-1,I=a.get(w)-1;Qa.set(w,x),a.set(w,I),x||(nh.has(w)||w.removeAttribute(r),nh.delete(w)),I||w.removeAttribute(t)}),Jm--,Jm||(Qa=new WeakMap,Qa=new WeakMap,nh=new WeakMap,rh={})}},bv=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=r3(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),i3(r,i,t,"aria-hidden")):function(){return null}},ns=function(){return ns=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ns.apply(this,arguments)};function $I(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function o3(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}var _h="right-scroll-bar-position",xh="width-before-scroll-bar",a3="with-scroll-bars-hidden",l3="--removed-body-scroll-bar-size";function Zm(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function c3(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var u3=typeof window<"u"?E.useLayoutEffect:E.useEffect,EE=new WeakMap;function d3(n,e){var t=c3(null,function(r){return n.forEach(function(i){return Zm(i,r)})});return u3(function(){var r=EE.get(t);if(r){var i=new Set(r),a=new Set(n),l=t.current;i.forEach(function(h){a.has(h)||Zm(h,null)}),a.forEach(function(h){i.has(h)||Zm(h,l)})}EE.set(t,n)},[n]),t}function h3(n){return n}function f3(n,e){e===void 0&&(e=h3);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var l=e(a,r);return t.push(l),function(){t=t.filter(function(h){return h!==l})}},assignSyncMedium:function(a){for(r=!0;t.length;){var l=t;t=[],l.forEach(a)}t={push:function(h){return a(h)},filter:function(){return t}}},assignMedium:function(a){r=!0;var l=[];if(t.length){var h=t;t=[],h.forEach(a),l=t}var p=function(){var y=l;l=[],y.forEach(a)},m=function(){return Promise.resolve().then(p)};m(),t={push:function(y){l.push(y),m()},filter:function(y){return l=l.filter(y),t}}}};return i}function p3(n){n===void 0&&(n={});var e=f3(null);return e.options=ns({async:!0,ssr:!1},n),e}var qI=function(n){var e=n.sideCar,t=$I(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,ns({},t))};qI.isSideCarExport=!0;function m3(n,e){return n.useMedium(e),qI}var WI=p3(),eg=function(){},Hf=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:eg,onWheelCapture:eg,onTouchMoveCapture:eg}),i=r[0],a=r[1],l=n.forwardProps,h=n.children,p=n.className,m=n.removeScrollBar,y=n.enabled,w=n.shards,x=n.sideCar,I=n.noRelative,C=n.noIsolation,A=n.inert,S=n.allowPinchZoom,V=n.as,M=V===void 0?"div":V,P=n.gapMode,$=$I(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),G=x,ee=d3([t,e]),j=ns(ns({},$),i);return E.createElement(E.Fragment,null,y&&E.createElement(G,{sideCar:WI,removeScrollBar:m,shards:w,noRelative:I,noIsolation:C,inert:A,setCallbacks:a,allowPinchZoom:!!S,lockRef:t,gapMode:P}),l?E.cloneElement(E.Children.only(h),ns(ns({},j),{ref:ee})):E.createElement(M,ns({},j,{className:p,ref:ee}),h))});Hf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hf.classNames={fullWidth:xh,zeroRight:_h};var g3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function y3(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=g3();return e&&n.setAttribute("nonce",e),n}function v3(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function w3(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var _3=function(){var n=0,e=null;return{add:function(t){n==0&&(e=y3())&&(v3(e,t),w3(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},x3=function(){var n=_3();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},HI=function(){var n=x3(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},E3={left:0,top:0,right:0,gap:0},tg=function(n){return parseInt(n||"",10)||0},T3=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[tg(t),tg(r),tg(i)]},S3=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return E3;var e=T3(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},I3=HI(),ll="data-scroll-locked",b3=function(n,e,t,r){var i=n.left,a=n.top,l=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(a3,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(ll,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_h,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(xh,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(_h," .").concat(_h,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xh," .").concat(xh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ll,`] {
    `).concat(l3,": ").concat(h,`px;
  }
`)},TE=function(){var n=parseInt(document.body.getAttribute(ll)||"0",10);return isFinite(n)?n:0},A3=function(){E.useEffect(function(){return document.body.setAttribute(ll,(TE()+1).toString()),function(){var n=TE()-1;n<=0?document.body.removeAttribute(ll):document.body.setAttribute(ll,n.toString())}},[])},N3=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;A3();var a=E.useMemo(function(){return S3(i)},[i]);return E.createElement(I3,{styles:b3(a,!e,i,t?"":"!important")})},Wg=!1;if(typeof window<"u")try{var sh=Object.defineProperty({},"passive",{get:function(){return Wg=!0,!0}});window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{Wg=!1}var Ya=Wg?{passive:!1}:!1,C3=function(n){return n.tagName==="TEXTAREA"},GI=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!C3(n)&&t[e]==="visible")},R3=function(n){return GI(n,"overflowY")},k3=function(n){return GI(n,"overflowX")},SE=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=KI(n,r);if(i){var a=QI(n,r),l=a[1],h=a[2];if(l>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},P3=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},j3=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},KI=function(n,e){return n==="v"?R3(e):k3(e)},QI=function(n,e){return n==="v"?P3(e):j3(e)},D3=function(n,e){return n==="h"&&e==="rtl"?-1:1},M3=function(n,e,t,r,i){var a=D3(n,window.getComputedStyle(e).direction),l=a*r,h=t.target,p=e.contains(h),m=!1,y=l>0,w=0,x=0;do{if(!h)break;var I=QI(n,h),C=I[0],A=I[1],S=I[2],V=A-S-a*C;(C||V)&&KI(n,h)&&(w+=V,x+=C);var M=h.parentNode;h=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!p&&h!==document.body||p&&(e.contains(h)||e===h));return(y&&Math.abs(w)<1||!y&&Math.abs(x)<1)&&(m=!0),m},ih=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},IE=function(n){return[n.deltaX,n.deltaY]},bE=function(n){return n&&"current"in n?n.current:n},O3=function(n,e){return n[0]===e[0]&&n[1]===e[1]},L3=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},V3=0,Xa=[];function F3(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),i=E.useState(V3++)[0],a=E.useState(HI)[0],l=E.useRef(n);E.useEffect(function(){l.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var A=o3([n.lockRef.current],(n.shards||[]).map(bE),!0).filter(Boolean);return A.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),A.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=E.useCallback(function(A,S){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!l.current.allowPinchZoom;var V=ih(A),M=t.current,P="deltaX"in A?A.deltaX:M[0]-V[0],$="deltaY"in A?A.deltaY:M[1]-V[1],G,ee=A.target,j=Math.abs(P)>Math.abs($)?"h":"v";if("touches"in A&&j==="h"&&ee.type==="range")return!1;var N=window.getSelection(),O=N&&N.anchorNode,L=O?O===ee||O.contains(ee):!1;if(L)return!1;var R=SE(j,ee);if(!R)return!0;if(R?G=j:(G=j==="v"?"h":"v",R=SE(j,ee)),!R)return!1;if(!r.current&&"changedTouches"in A&&(P||$)&&(r.current=G),!G)return!0;var F=r.current||G;return M3(F,S,A,F==="h"?P:$)},[]),p=E.useCallback(function(A){var S=A;if(!(!Xa.length||Xa[Xa.length-1]!==a)){var V="deltaY"in S?IE(S):ih(S),M=e.current.filter(function(G){return G.name===S.type&&(G.target===S.target||S.target===G.shadowParent)&&O3(G.delta,V)})[0];if(M&&M.should){S.cancelable&&S.preventDefault();return}if(!M){var P=(l.current.shards||[]).map(bE).filter(Boolean).filter(function(G){return G.contains(S.target)}),$=P.length>0?h(S,P[0]):!l.current.noIsolation;$&&S.cancelable&&S.preventDefault()}}},[]),m=E.useCallback(function(A,S,V,M){var P={name:A,delta:S,target:V,should:M,shadowParent:U3(V)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function($){return $!==P})},1)},[]),y=E.useCallback(function(A){t.current=ih(A),r.current=void 0},[]),w=E.useCallback(function(A){m(A.type,IE(A),A.target,h(A,n.lockRef.current))},[]),x=E.useCallback(function(A){m(A.type,ih(A),A.target,h(A,n.lockRef.current))},[]);E.useEffect(function(){return Xa.push(a),n.setCallbacks({onScrollCapture:w,onWheelCapture:w,onTouchMoveCapture:x}),document.addEventListener("wheel",p,Ya),document.addEventListener("touchmove",p,Ya),document.addEventListener("touchstart",y,Ya),function(){Xa=Xa.filter(function(A){return A!==a}),document.removeEventListener("wheel",p,Ya),document.removeEventListener("touchmove",p,Ya),document.removeEventListener("touchstart",y,Ya)}},[]);var I=n.removeScrollBar,C=n.inert;return E.createElement(E.Fragment,null,C?E.createElement(a,{styles:L3(i)}):null,I?E.createElement(N3,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function U3(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const z3=m3(WI,F3);var Gf=E.forwardRef(function(n,e){return E.createElement(Hf,ns({},n,{ref:e,sideCar:z3}))});Gf.classNames=Hf.classNames;var Hg=["Enter"," "],B3=["ArrowDown","PageUp","Home"],YI=["ArrowUp","PageDown","End"],$3=[...B3,...YI],q3={ltr:[...Hg,"ArrowRight"],rtl:[...Hg,"ArrowLeft"]},W3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Iu="Menu",[iu,H3,G3]=gv(Iu),[aa,XI]=ei(Iu,[G3,Bf,Wf]),Kf=Bf(),JI=Wf(),[K3,la]=aa(Iu),[Q3,bu]=aa(Iu),ZI=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:a,modal:l=!0}=n,h=Kf(e),[p,m]=E.useState(null),y=E.useRef(!1),w=tr(a),x=Mf(i);return E.useEffect(()=>{const I=()=>{y.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>y.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),c.jsx(kI,{...h,children:c.jsx(K3,{scope:e,open:t,onOpenChange:w,content:p,onContentChange:m,children:c.jsx(Q3,{scope:e,onClose:E.useCallback(()=>w(!1),[w]),isUsingKeyboardRef:y,dir:x,modal:l,children:r})})})};ZI.displayName=Iu;var Y3="MenuAnchor",Av=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Kf(t);return c.jsx(PI,{...i,...r,ref:e})});Av.displayName=Y3;var Nv="MenuPortal",[X3,eb]=aa(Nv,{forceMount:void 0}),tb=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,a=la(Nv,e);return c.jsx(X3,{scope:e,forceMount:t,children:c.jsx(ti,{present:t||a.open,children:c.jsx($f,{asChild:!0,container:i,children:r})})})};tb.displayName=Nv;var fr="MenuContent",[J3,Cv]=aa(fr),nb=E.forwardRef((n,e)=>{const t=eb(fr,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=la(fr,n.__scopeMenu),l=bu(fr,n.__scopeMenu);return c.jsx(iu.Provider,{scope:n.__scopeMenu,children:c.jsx(ti,{present:r||a.open,children:c.jsx(iu.Slot,{scope:n.__scopeMenu,children:l.modal?c.jsx(Z3,{...i,ref:e}):c.jsx(e6,{...i,ref:e})})})})}),Z3=E.forwardRef((n,e)=>{const t=la(fr,n.__scopeMenu),r=E.useRef(null),i=ft(e,r);return E.useEffect(()=>{const a=r.current;if(a)return bv(a)},[]),c.jsx(Rv,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:De(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),e6=E.forwardRef((n,e)=>{const t=la(fr,n.__scopeMenu);return c.jsx(Rv,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Rv=E.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:h,onEntryFocus:p,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:w,onInteractOutside:x,onDismiss:I,disableOutsideScroll:C,...A}=n,S=la(fr,t),V=bu(fr,t),M=Kf(t),P=JI(t),$=H3(t),[G,ee]=E.useState(null),j=E.useRef(null),N=ft(e,j,S.onContentChange),O=E.useRef(0),L=E.useRef(""),R=E.useRef(0),F=E.useRef(null),D=E.useRef("right"),fe=E.useRef(0),ye=C?Gf:E.Fragment,de=C?{as:Ys,allowPinchZoom:!0}:void 0,_e=te=>{var se,we;const le=L.current+te,q=$().filter(Ee=>!Ee.disabled),z=document.activeElement,ie=(se=q.find(Ee=>Ee.ref.current===z))==null?void 0:se.textValue,re=q.map(Ee=>Ee.textValue),ve=h6(re,le,ie),Te=(we=q.find(Ee=>Ee.textValue===ve))==null?void 0:we.ref.current;(function Ee(X){L.current=X,window.clearTimeout(O.current),X!==""&&(O.current=window.setTimeout(()=>Ee(""),1e3))})(le),Te&&setTimeout(()=>Te.focus())};E.useEffect(()=>()=>window.clearTimeout(O.current),[]),yv();const H=E.useCallback(te=>{var q,z;return D.current===((q=F.current)==null?void 0:q.side)&&p6(te,(z=F.current)==null?void 0:z.area)},[]);return c.jsx(J3,{scope:t,searchRef:L,onItemEnter:E.useCallback(te=>{H(te)&&te.preventDefault()},[H]),onItemLeave:E.useCallback(te=>{var le;H(te)||((le=j.current)==null||le.focus(),ee(null))},[H]),onTriggerLeave:E.useCallback(te=>{H(te)&&te.preventDefault()},[H]),pointerGraceTimerRef:R,onPointerGraceIntentChange:E.useCallback(te=>{F.current=te},[]),children:c.jsx(ye,{...de,children:c.jsx(Lf,{asChild:!0,trapped:i,onMountAutoFocus:De(a,te=>{var le;te.preventDefault(),(le=j.current)==null||le.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:c.jsx(Of,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:w,onInteractOutside:x,onDismiss:I,children:c.jsx(UI,{asChild:!0,...P,dir:V.dir,orientation:"vertical",loop:r,currentTabStopId:G,onCurrentTabStopIdChange:ee,onEntryFocus:De(p,te=>{V.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(jI,{role:"menu","aria-orientation":"vertical","data-state":vb(S.open),"data-radix-menu-content":"",dir:V.dir,...M,...A,ref:N,style:{outline:"none",...A.style},onKeyDown:De(A.onKeyDown,te=>{const q=te.target.closest("[data-radix-menu-content]")===te.currentTarget,z=te.ctrlKey||te.altKey||te.metaKey,ie=te.key.length===1;q&&(te.key==="Tab"&&te.preventDefault(),!z&&ie&&_e(te.key));const re=j.current;if(te.target!==re||!$3.includes(te.key))return;te.preventDefault();const Te=$().filter(se=>!se.disabled).map(se=>se.ref.current);YI.includes(te.key)&&Te.reverse(),u6(Te)}),onBlur:De(n.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(O.current),L.current="")}),onPointerMove:De(n.onPointerMove,ou(te=>{const le=te.target,q=fe.current!==te.clientX;if(te.currentTarget.contains(le)&&q){const z=te.clientX>fe.current?"right":"left";D.current=z,fe.current=te.clientX}}))})})})})})})});nb.displayName=fr;var t6="MenuGroup",kv=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return c.jsx(Ge.div,{role:"group",...r,ref:e})});kv.displayName=t6;var n6="MenuLabel",rb=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return c.jsx(Ge.div,{...r,ref:e})});rb.displayName=n6;var Gh="MenuItem",AE="menu.itemSelect",Qf=E.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,a=E.useRef(null),l=bu(Gh,n.__scopeMenu),h=Cv(Gh,n.__scopeMenu),p=ft(e,a),m=E.useRef(!1),y=()=>{const w=a.current;if(!t&&w){const x=new CustomEvent(AE,{bubbles:!0,cancelable:!0});w.addEventListener(AE,I=>r==null?void 0:r(I),{once:!0}),B1(w,x),x.defaultPrevented?m.current=!1:l.onClose()}};return c.jsx(sb,{...i,ref:p,disabled:t,onClick:De(n.onClick,y),onPointerDown:w=>{var x;(x=n.onPointerDown)==null||x.call(n,w),m.current=!0},onPointerUp:De(n.onPointerUp,w=>{var x;m.current||(x=w.currentTarget)==null||x.click()}),onKeyDown:De(n.onKeyDown,w=>{const x=h.searchRef.current!=="";t||x&&w.key===" "||Hg.includes(w.key)&&(w.currentTarget.click(),w.preventDefault())})})});Qf.displayName=Gh;var sb=E.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...a}=n,l=Cv(Gh,t),h=JI(t),p=E.useRef(null),m=ft(e,p),[y,w]=E.useState(!1),[x,I]=E.useState("");return E.useEffect(()=>{const C=p.current;C&&I((C.textContent??"").trim())},[a.children]),c.jsx(iu.ItemSlot,{scope:t,disabled:r,textValue:i??x,children:c.jsx(zI,{asChild:!0,...h,focusable:!r,children:c.jsx(Ge.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:m,onPointerMove:De(n.onPointerMove,ou(C=>{r?l.onItemLeave(C):(l.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:De(n.onPointerLeave,ou(C=>l.onItemLeave(C))),onFocus:De(n.onFocus,()=>w(!0)),onBlur:De(n.onBlur,()=>w(!1))})})})}),r6="MenuCheckboxItem",ib=E.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return c.jsx(ub,{scope:n.__scopeMenu,checked:t,children:c.jsx(Qf,{role:"menuitemcheckbox","aria-checked":Kh(t)?"mixed":t,...i,ref:e,"data-state":jv(t),onSelect:De(i.onSelect,()=>r==null?void 0:r(Kh(t)?!0:!t),{checkForDefaultPrevented:!1})})})});ib.displayName=r6;var ob="MenuRadioGroup",[s6,i6]=aa(ob,{value:void 0,onValueChange:()=>{}}),ab=E.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,a=tr(r);return c.jsx(s6,{scope:n.__scopeMenu,value:t,onValueChange:a,children:c.jsx(kv,{...i,ref:e})})});ab.displayName=ob;var lb="MenuRadioItem",cb=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=i6(lb,n.__scopeMenu),a=t===i.value;return c.jsx(ub,{scope:n.__scopeMenu,checked:a,children:c.jsx(Qf,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":jv(a),onSelect:De(r.onSelect,()=>{var l;return(l=i.onValueChange)==null?void 0:l.call(i,t)},{checkForDefaultPrevented:!1})})})});cb.displayName=lb;var Pv="MenuItemIndicator",[ub,o6]=aa(Pv,{checked:!1}),db=E.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,a=o6(Pv,t);return c.jsx(ti,{present:r||Kh(a.checked)||a.checked===!0,children:c.jsx(Ge.span,{...i,ref:e,"data-state":jv(a.checked)})})});db.displayName=Pv;var a6="MenuSeparator",hb=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return c.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});hb.displayName=a6;var l6="MenuArrow",fb=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Kf(t);return c.jsx(DI,{...i,...r,ref:e})});fb.displayName=l6;var c6="MenuSub",[z5,pb]=aa(c6),Oc="MenuSubTrigger",mb=E.forwardRef((n,e)=>{const t=la(Oc,n.__scopeMenu),r=bu(Oc,n.__scopeMenu),i=pb(Oc,n.__scopeMenu),a=Cv(Oc,n.__scopeMenu),l=E.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:p}=a,m={__scopeMenu:n.__scopeMenu},y=E.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return E.useEffect(()=>y,[y]),E.useEffect(()=>{const w=h.current;return()=>{window.clearTimeout(w),p(null)}},[h,p]),c.jsx(Av,{asChild:!0,...m,children:c.jsx(sb,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":vb(t.open),...n,ref:Pf(e,i.onTriggerChange),onClick:w=>{var x;(x=n.onClick)==null||x.call(n,w),!(n.disabled||w.defaultPrevented)&&(w.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:De(n.onPointerMove,ou(w=>{a.onItemEnter(w),!w.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),y()},100))})),onPointerLeave:De(n.onPointerLeave,ou(w=>{var I,C;y();const x=(I=t.content)==null?void 0:I.getBoundingClientRect();if(x){const A=(C=t.content)==null?void 0:C.dataset.side,S=A==="right",V=S?-5:5,M=x[S?"left":"right"],P=x[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:w.clientX+V,y:w.clientY},{x:M,y:x.top},{x:P,y:x.top},{x:P,y:x.bottom},{x:M,y:x.bottom}],side:A}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(w),w.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:De(n.onKeyDown,w=>{var I;const x=a.searchRef.current!=="";n.disabled||x&&w.key===" "||q3[r.dir].includes(w.key)&&(t.onOpenChange(!0),(I=t.content)==null||I.focus(),w.preventDefault())})})})});mb.displayName=Oc;var gb="MenuSubContent",yb=E.forwardRef((n,e)=>{const t=eb(fr,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=la(fr,n.__scopeMenu),l=bu(fr,n.__scopeMenu),h=pb(gb,n.__scopeMenu),p=E.useRef(null),m=ft(e,p);return c.jsx(iu.Provider,{scope:n.__scopeMenu,children:c.jsx(ti,{present:r||a.open,children:c.jsx(iu.Slot,{scope:n.__scopeMenu,children:c.jsx(Rv,{id:h.contentId,"aria-labelledby":h.triggerId,...i,ref:m,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{var w;l.isUsingKeyboardRef.current&&((w=p.current)==null||w.focus()),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:De(n.onFocusOutside,y=>{y.target!==h.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:De(n.onEscapeKeyDown,y=>{l.onClose(),y.preventDefault()}),onKeyDown:De(n.onKeyDown,y=>{var I;const w=y.currentTarget.contains(y.target),x=W3[l.dir].includes(y.key);w&&x&&(a.onOpenChange(!1),(I=h.trigger)==null||I.focus(),y.preventDefault())})})})})})});yb.displayName=gb;function vb(n){return n?"open":"closed"}function Kh(n){return n==="indeterminate"}function jv(n){return Kh(n)?"indeterminate":n?"checked":"unchecked"}function u6(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function d6(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function h6(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=d6(n,Math.max(a,0));i.length===1&&(l=l.filter(m=>m!==t));const p=l.find(m=>m.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function f6(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const h=e[a].x,p=e[a].y,m=e[l].x,y=e[l].y;p>r!=y>r&&t<(m-h)*(r-p)/(y-p)+h&&(i=!i)}return i}function p6(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return f6(t,e)}function ou(n){return e=>e.pointerType==="mouse"?n(e):void 0}var m6=ZI,g6=Av,y6=tb,v6=nb,w6=kv,_6=rb,x6=Qf,E6=ib,T6=ab,S6=cb,I6=db,b6=hb,A6=fb,N6=mb,C6=yb,Dv="DropdownMenu",[R6]=ei(Dv,[XI]),Nn=XI(),[k6,wb]=R6(Dv),_b=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:a,onOpenChange:l,modal:h=!0}=n,p=Nn(e),m=E.useRef(null),[y=!1,w]=wl({prop:i,defaultProp:a,onChange:l});return c.jsx(k6,{scope:e,triggerId:ds(),triggerRef:m,contentId:ds(),open:y,onOpenChange:w,onOpenToggle:E.useCallback(()=>w(x=>!x),[w]),modal:h,children:c.jsx(m6,{...p,open:y,onOpenChange:w,dir:r,modal:h,children:t})})};_b.displayName=Dv;var xb="DropdownMenuTrigger",Eb=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,a=wb(xb,t),l=Nn(t);return c.jsx(g6,{asChild:!0,...l,children:c.jsx(Ge.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Pf(e,a.triggerRef),onPointerDown:De(n.onPointerDown,h=>{!r&&h.button===0&&h.ctrlKey===!1&&(a.onOpenToggle(),a.open||h.preventDefault())}),onKeyDown:De(n.onKeyDown,h=>{r||(["Enter"," "].includes(h.key)&&a.onOpenToggle(),h.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault())})})})});Eb.displayName=xb;var P6="DropdownMenuPortal",Tb=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Nn(e);return c.jsx(y6,{...r,...t})};Tb.displayName=P6;var Sb="DropdownMenuContent",Ib=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=wb(Sb,t),a=Nn(t),l=E.useRef(!1);return c.jsx(v6,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:De(n.onCloseAutoFocus,h=>{var p;l.current||(p=i.triggerRef.current)==null||p.focus(),l.current=!1,h.preventDefault()}),onInteractOutside:De(n.onInteractOutside,h=>{const p=h.detail.originalEvent,m=p.button===0&&p.ctrlKey===!0,y=p.button===2||m;(!i.modal||y)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ib.displayName=Sb;var j6="DropdownMenuGroup",D6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(w6,{...i,...r,ref:e})});D6.displayName=j6;var M6="DropdownMenuLabel",bb=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(_6,{...i,...r,ref:e})});bb.displayName=M6;var O6="DropdownMenuItem",Ab=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(x6,{...i,...r,ref:e})});Ab.displayName=O6;var L6="DropdownMenuCheckboxItem",V6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(E6,{...i,...r,ref:e})});V6.displayName=L6;var F6="DropdownMenuRadioGroup",U6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(T6,{...i,...r,ref:e})});U6.displayName=F6;var z6="DropdownMenuRadioItem",B6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(S6,{...i,...r,ref:e})});B6.displayName=z6;var $6="DropdownMenuItemIndicator",q6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(I6,{...i,...r,ref:e})});q6.displayName=$6;var W6="DropdownMenuSeparator",Nb=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(b6,{...i,...r,ref:e})});Nb.displayName=W6;var H6="DropdownMenuArrow",G6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(A6,{...i,...r,ref:e})});G6.displayName=H6;var K6="DropdownMenuSubTrigger",Q6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(N6,{...i,...r,ref:e})});Q6.displayName=K6;var Y6="DropdownMenuSubContent",X6=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Nn(t);return c.jsx(C6,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});X6.displayName=Y6;var J6=_b,Z6=Eb,eU=Tb,tU=Ib,nU=bb,rU=Ab,sU=Nb;function iU({...n}){return c.jsx(J6,{"data-slot":"dropdown-menu",...n})}function oU({...n}){return c.jsx(Z6,{"data-slot":"dropdown-menu-trigger",...n})}function aU({className:n,sideOffset:e=4,...t}){return c.jsx(eU,{children:c.jsx(tU,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function lU({className:n,inset:e,variant:t="default",...r}){return c.jsx(rU,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:ut("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function cU({className:n,inset:e,...t}){return c.jsx(nU,{"data-slot":"dropdown-menu-label","data-inset":e,className:ut("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",n),...t})}function uU({className:n,...e}){return c.jsx(sU,{"data-slot":"dropdown-menu-separator",className:ut("bg-border -mx-1 my-1 h-px",n),...e})}function dU({onMenuClick:n}){const{userProfile:e}=kf(),{theme:t,setTheme:r}=GN(),i=l=>l?l.split(" ").map(h=>h[0]).join("").toUpperCase():"U",a=async()=>{try{await Pe.signOut()}catch(l){console.error("Logout error:",l)}};return e?c.jsx("header",{className:"sticky top-0 z-40 border-b bg-background",children:c.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:[c.jsx(je,{variant:"ghost",size:"icon",className:"md:hidden",onClick:n,children:c.jsx(mL,{className:"h-5 w-5"})}),c.jsx("div",{className:"flex-1",children:c.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Province of San Antonio de Padua"})}),c.jsxs(je,{variant:"ghost",size:"icon",onClick:()=>r(t==="dark"?"light":"dark"),children:[c.jsx(LL,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),c.jsx(vL,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),c.jsxs(iU,{children:[c.jsx(oU,{asChild:!0,children:c.jsx(je,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:c.jsx(iI,{children:c.jsx(oI,{children:e?i(e.name):"U"})})})}),c.jsxs(aU,{align:"end",className:"w-56",children:[c.jsx(cU,{children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:e==null?void 0:e.name}),c.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e==null?void 0:e.email}),c.jsx("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:e==null?void 0:e.role})]})}),c.jsx(uU,{}),c.jsxs(lU,{onClick:a,children:[c.jsx(hL,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Log out"})]})]})]})]})}):c.jsx("header",{className:"sticky top-0 z-40 border-b bg-background",children:c.jsx("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:c.jsx("div",{className:"flex-1",children:c.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Province of San Antonio de Padua"})})})})}const hU=[{name:"Dashboard",view:"dashboard",icon:lL},{name:"Tasks",view:"tasks",icon:K1},{name:"Receipts",view:"receipts",icon:Y1},{name:"Files",view:"files",icon:G1},{name:"Employees",view:"employees",icon:fv},{name:"Messages",view:"messaging",icon:Q1}];function fU({currentView:n,onViewChange:e,isOpen:t,onClose:r}){return c.jsxs(c.Fragment,{children:[t&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:r}),c.jsx("aside",{className:ut("fixed top-0 left-0 z-50 h-screen w-64 border-r bg-background transition-transform duration-300 md:relative md:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsxs("div",{className:"flex h-16 items-center gap-3 border-b px-6",children:[c.jsx("img",{src:pv,alt:"Province Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-semibold",children:"San Antonio"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"de Padua"})]})]}),c.jsx("nav",{className:"flex-1 space-y-1 p-4",children:hU.map(i=>{const a=i.icon,l=n===i.view;return c.jsxs(je,{variant:l?"secondary":"ghost",className:ut("w-full justify-start",l&&"bg-secondary"),onClick:()=>{e(i.view),r()},children:[c.jsx(a,{className:"mr-3 h-5 w-5"}),i.name]},i.view)})}),c.jsx("div",{className:"border-t p-4",children:c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Philippines Province"})})]})})]})}function Cb(...n){return U1(lv(n))}function Kn({className:n,...e}){return c.jsx("div",{className:Cb("animate-pulse rounded-md bg-muted",n),...e})}const pU=z1("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function bt({className:n,variant:e,asChild:t=!1,...r}){const i=t?Ys:"span";return c.jsx(i,{"data-slot":"badge",className:ut(pU({variant:e}),n),...r})}const mU=({isOpen:n,user:e,currentUserRole:t,onRoleUpdate:r,onClose:i,loading:a=!1})=>{const[l,h]=E.useState(e.role),[p,m]=E.useState(!1);if(!n)return null;const y=[{value:"staff",label:"Staff Member",description:"Basic access to tasks, receipts, and files",icon:Df,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",canAssign:!0},{value:"admin",label:"Administrator",description:"Full access including user management and system settings",icon:hv,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",canAssign:!0},{value:"super_admin",label:"Super Administrator",description:"Complete system control and user management",icon:is,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",canAssign:t==="super_admin"}],w=async()=>{if(l===e.role){i();return}m(!0);try{await r(e.uid,l),i()}catch(A){console.error("Error updating user role:",A)}finally{m(!1)}},x=e.role==="super_admin"&&t==="super_admin",I=l!==e.role;return e.role==="super_admin"?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"relative",children:[c.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",children:c.jsx(ea,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(is,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx(Vt,{className:"text-lg",children:"Super Administrator"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Role cannot be modified"})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.name}),c.jsx("p",{className:"text-xs text-gray-500",children:e.email}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Role:"}),c.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-700",children:"Super Administrator"})]})]})]}),c.jsxs(nt,{className:"space-y-4",children:[c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(is,{className:"w-5 h-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Role Protected"}),c.jsx("p",{className:"text-sm text-red-700",children:"Super administrator roles cannot be modified for security reasons. This ensures system integrity and prevents accidental privilege escalation."})]})]})}),c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Security Best Practice:"})," Super admin privileges are permanent and cannot be changed through the user interface."]})}),c.jsx(je,{onClick:i,className:"w-full",children:"Close"})]})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"relative",children:[c.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:a||p,children:c.jsx(ea,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(vh,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx(Vt,{className:"text-lg",children:"Edit User Role"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Change user permissions"})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.name}),c.jsx("p",{className:"text-xs text-gray-500",children:e.email}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Current role:"}),c.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.role==="super_admin"?"bg-red-100 text-red-700":e.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:e.role==="super_admin"?"Super Admin":e.role==="admin"?"Administrator":"Staff Member"})]})]})]}),c.jsxs(nt,{className:"space-y-4",children:[x&&c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(X1,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Warning:"})," You are editing your own super admin role. Be careful not to remove your own access."]})]})}),c.jsxs("div",{children:[c.jsx(Ue,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select new role:"}),c.jsx("div",{className:"space-y-3",children:y.map(A=>{const S=A.icon,V=l===A.value,M=!A.canAssign;return c.jsxs("div",{className:`relative rounded-lg border-2 p-4 transition-all ${M?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":V?`${A.borderColor} ${A.bgColor} cursor-pointer`:"border-gray-200 hover:border-gray-300 cursor-pointer"}`,onClick:()=>!M&&h(A.value),children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${M?"bg-gray-100":V?A.bgColor:"bg-gray-50"}`,children:c.jsx(S,{className:`w-5 h-5 ${M?"text-gray-400":V?A.color:"text-gray-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:`font-medium ${M?"text-gray-400":V?A.color:"text-gray-900"}`,children:A.label}),V&&!M&&c.jsx("div",{className:`w-2 h-2 rounded-full ${A.color.replace("text-","bg-")}`}),M&&c.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Restricted"})]}),c.jsx("p",{className:`text-sm mt-1 ${M?"text-gray-400":"text-gray-600"}`,children:A.description})]})]}),!M&&c.jsx("input",{type:"radio",name:"role",value:A.value,checked:V,onChange:()=>h(A.value),className:"absolute top-4 right-4 w-4 h-4 text-blue-600"})]},A.value)})})]}),t!=="super_admin"&&c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Note:"})," Only super administrators can assign super admin roles."]})}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx(je,{onClick:w,disabled:a||p||!I,className:"flex-1",children:p?"Updating...":I?"Update Role":"No Changes"}),c.jsx(je,{onClick:i,variant:"outline",disabled:a||p,className:"flex-1",children:"Cancel"})]})]})]})})},gU=({isOpen:n,userProfile:e,onProfileUpdate:t,onClose:r})=>{const[i,a]=E.useState(e.name),[l,h]=E.useState(!1),[p,m]=E.useState(null);if(!n)return null;const y=async I=>{I.preventDefault(),h(!0),m(null);try{if(!i.trim())throw new Error("Name cannot be empty");if(i.trim().length<2)throw new Error("Name must be at least 2 characters long");if(i.trim().length>50)throw new Error("Name cannot exceed 50 characters");await Pe.updateUserProfile(e.uid,{name:i.trim()});const C={...e,name:i.trim(),updatedAt:new Date};t(C),r()}catch(C){console.error("Error updating profile:",C),m(C instanceof Error?C.message:"Failed to update profile")}finally{h(!1)}},w=()=>{a(e.name),m(null),r()},x=i.trim()!==e.name;return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(tt,{className:"w-full max-w-md shadow-xl",children:[c.jsxs(At,{className:"relative",children:[c.jsx("button",{onClick:w,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:l,children:c.jsx(ea,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(Df,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx(Vt,{className:"text-lg",children:"Edit Profile"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Update your personal information"})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.email}),c.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.role==="super_admin"?"Super Administrator":e.role==="admin"?"Administrator":"Staff Member"})]})]}),c.jsx(nt,{children:c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[c.jsx(Fi,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-sm text-red-700",children:p})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Full Name"}),c.jsx(cn,{id:"name",type:"text",value:i,onChange:I=>a(I.target.value),placeholder:"Enter your full name",disabled:l,className:"w-full",maxLength:50,required:!0}),c.jsx("p",{className:"text-xs text-gray-500",children:"This name will be displayed throughout the application"})]}),c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:c.jsx("span",{className:"text-blue-600 text-xs",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Profile Information"}),c.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Your email address and role cannot be changed. Contact a super administrator if you need to modify these details."})]})]})}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsxs(je,{type:"submit",disabled:l||!x,className:"flex-1 flex items-center gap-2",children:[c.jsx(CL,{className:"w-4 h-4"}),l?"Saving...":"Save Changes"]}),c.jsx(je,{type:"button",variant:"outline",onClick:w,disabled:l,className:"flex-1",children:"Cancel"})]}),x&&c.jsx("p",{className:"text-xs text-amber-600 text-center",children:"You have unsaved changes"})]})})]})})},yU=async()=>{const n=Et.currentUser;if(console.log("Current user:",n==null?void 0:n.uid,n==null?void 0:n.email),n)try{const e=await dr(Ye(Re,"users",n.uid));console.log("User profile exists:",e.exists()),e.exists()&&console.log("User profile data:",e.data())}catch(e){console.error("Error fetching user profile:",e)}},vU=({currentUserUid:n,userRole:e})=>{const[t,r]=E.useState("users"),[i,a]=E.useState([]),[l,h]=E.useState([]),[p,m]=E.useState([]),[y,w]=E.useState(null),[x,I]=E.useState(!0),[C,A]=E.useState(!1),[S,V]=E.useState({email:"",name:"",password:"",role:"staff"}),[M,P]=E.useState(!1),[$,G]=E.useState(null),[ee,j]=E.useState(!1),[N,O]=E.useState(!1);E.useEffect(()=>{L()},[]);const L=async()=>{try{if(await yU(),!e||e!=="admin"&&e!=="super_admin"){console.error("Insufficient privileges for admin panel");return}const z=Pe.getCurrentUser();if(!z){console.error("No authenticated user found");return}const ie=await Pe.getUserProfile(z.uid);if(!ie){console.error("User profile not found in Firestore"),alert("User profile not found. Please contact administrator.");return}if(console.log("User profile verified:",ie.role),w(ie),e==="super_admin"){const[re,ve,Te]=await Promise.all([Pe.getPendingUsers().catch(se=>(console.error("Error loading pending users:",se),[])),Pe.getVisibleUsers(e).catch(se=>(console.error("Error loading visible users:",se),[])),Pe.getAdminUsers().catch(se=>(console.error("Error loading admin users:",se),[]))]);a(re),h(ve),m(Te)}else{const[re,ve,Te,se]=await Promise.all([Pe.getPendingUsersForAdmin(z.uid).catch(X=>(console.error("Error loading pending users for admin:",X),[])),Pe.getStaffForAdmin(z.uid).catch(X=>(console.error("Error loading staff for admin:",X),[])),Pe.getVisibleUsers(e).catch(X=>(console.error("Error loading visible users:",X),[])),Pe.getAdminUsers().catch(X=>(console.error("Error loading admin users:",X),[]))]);a(re);const we=Te.filter(X=>X.role==="admin"),Ee=[...ve,...we];h(Ee),m(se)}}catch(z){console.error("Error loading admin data:",z)}finally{I(!1)}},R=async z=>{if(e!=="admin"&&e!=="super_admin"){alert("Error: Only administrators and super administrators can approve user accounts");return}const ie=i.find(re=>re.id===z);if(ie){if(e==="admin"&&ie.role!=="staff"){alert("Error: Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");return}try{if(ie.authProvider==="google"){await Pe.approveGoogleUser(z,n);const re=ie.role==="super_admin"?"Super Administrator":ie.role==="admin"?"Administrator":"Staff Member";alert(`Google ${re} approved successfully. They can now sign in with their Google account.`)}else{const re=prompt("Enter password for new user:");if(!re)return;await Pe.approveUser(z,re,n);const ve=ie.role==="super_admin"?"Super Administrator":ie.role==="admin"?"Administrator":"Staff Member";alert(`${ve} approved successfully. They can now sign in with their email and the password you set.`)}await L()}catch(re){console.error("Error approving user:",re);const ve=re instanceof Error?re.message:"Unknown error occurred";alert(`Error approving user: ${ve}`)}}},F=async z=>{const ie=prompt("Enter rejection reason (optional):");try{await Pe.rejectUser(z,ie||"Request denied",n),alert("User request rejected"),await L()}catch(re){console.error("Error rejecting user:",re),alert("Error rejecting user")}},D=async z=>{z.preventDefault(),P(!0);try{if(e!=="admin"&&e!=="super_admin")throw new Error("Only administrators and super administrators can create user accounts");if(e==="admin"&&S.role!=="staff")throw new Error("Administrators can only create staff accounts. Contact a super admin to create administrator accounts.");const ie=Pe.getCurrentUser();if(!ie)throw new Error("No authenticated user found. Please sign in again.");await Pe.createUser(S.email,S.password,S.name,S.role,ie.uid),V({email:"",name:"",password:"",role:"staff"}),A(!1);const re=S.role==="super_admin"?"Super Administrator":S.role==="admin"?"Administrator":"Staff Member";alert(`${re} account created successfully. Admin needs to sign in again.`),await L()}catch(ie){console.error("Error creating user:",ie);const re=ie instanceof Error?ie.message:"Unknown error occurred";alert(`Error creating user: ${re}`)}finally{P(!1)}},fe=async z=>{const ie=l.find(re=>re.uid===z);if((ie==null?void 0:ie.role)==="super_admin"&&e!=="super_admin"){alert("Error: Insufficient privileges to delete super administrator accounts");return}if(confirm("Are you sure you want to delete this user?"))try{const re=Pe.getCurrentUser();if(!re)throw new Error("No authenticated user found. Please sign in again.");await Pe.deleteUser(z,re.uid),alert("User deleted successfully"),await L()}catch(re){console.error("Error deleting user:",re),alert("Error deleting user")}},ye=z=>{if(!(e==="super_admin"||e==="admin"&&(z.role==="staff"||z.uid===n))){alert("Error: You can only edit staff profiles and your own profile.");return}G(z),j(!0)},de=async(z,ie)=>{try{const re=Pe.getCurrentUser();if(!re)throw new Error("No authenticated user found. Please sign in again.");const ve=l.find(Te=>Te.uid===z);if((ve==null?void 0:ve.role)==="super_admin"&&e!=="super_admin")throw new Error("Insufficient privileges to modify super administrator accounts");await Pe.updateUserRole(z,ie,re.uid),await L()}catch(re){throw console.error("Error updating user role:",re),re}},_e=()=>{j(!1),G(null)},H=z=>{w(z),L()},te=()=>{O(!0)},le=()=>{O(!1)};if(x||!y)return c.jsx("div",{className:"flex items-center justify-center p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})});const q=()=>t==="users"?c.jsxs("div",{className:"space-y-6",children:[c.jsxs(tt,{children:[c.jsxs(At,{children:[c.jsxs(Vt,{children:["Pending User Approvals (",i.length,")"]}),e==="admin"&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"As an admin, you can approve staff requests. Super admin requests require super admin approval."})]}),c.jsx(nt,{children:e!=="admin"&&e!=="super_admin"?c.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-blue-600 text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Admin Required"}),c.jsx("p",{className:"text-sm text-blue-700",children:"User approval requires administrator privileges. Contact an admin to approve pending requests."}),i.length>0&&c.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[c.jsx("strong",{children:i.length})," user",i.length!==1?"s":""," waiting for approval."]})]})]})}):i.length===0?c.jsx("p",{className:"text-muted-foreground",children:"No pending user requests"}):c.jsx("div",{className:"space-y-4",children:i.map((z,ie)=>{const re=e==="super_admin"||e==="admin"&&z.role==="staff",ve=z.role==="staff"&&z.requestedAdminId?p.find(se=>se.uid===z.requestedAdminId):null,Te=z.role==="staff"&&z.requestedAdminId===n;return c.jsxs("div",{className:`flex items-center justify-between p-4 border rounded transition-all ${Te?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"font-medium",children:z.name}),Te&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:" For You"})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:z.email}),c.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[c.jsx(bt,{variant:z.role==="super_admin"?"destructive":z.role==="admin"?"default":"secondary",children:z.role==="super_admin"?"Super Admin":z.role==="admin"?"Admin":"Staff Member"}),z.authProvider&&c.jsx(bt,{variant:"secondary",children:z.authProvider==="google"?" Google":" Email"}),z.role==="staff"&&ve&&c.jsxs(bt,{variant:"outline",className:"text-xs",children:[" Wants to work under: ",ve.name]}),z.role==="staff"&&!ve&&z.requestedAdminId&&c.jsx(bt,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-700",children:" Admin not found"}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["Requested: ",new Date(z.requestedAt).toLocaleDateString()]}),!re&&c.jsx(bt,{variant:"outline",className:"text-xs",children:"Requires Super Admin"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(je,{size:"sm",onClick:()=>R(z.id),disabled:!re,title:re?"":"Only super admins can approve admin/super admin requests",children:"Approve"}),c.jsx(je,{size:"sm",variant:"destructive",onClick:()=>F(z.id),children:"Reject"})]})]},z.id||`pending-user-${ie}-${z.email}`)})})})]}),e==="super_admin"&&c.jsxs(tt,{children:[c.jsxs(At,{children:[c.jsx(Vt,{children:"Staff Assignment Overview"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Overview of staff assignments across all administrators"})]}),c.jsx(nt,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.map(z=>{const ie=l.filter(re=>re.role==="staff"&&re.assignedAdminId===z.uid);return c.jsxs("div",{className:"p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-blue-600 text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:z.name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:z.email})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Assigned Staff:"}),c.jsx(bt,{variant:"outline",children:ie.length})]}),ie.length>0&&c.jsxs("div",{className:"text-xs text-gray-500",children:[ie.slice(0,3).map(re=>re.name).join(", "),ie.length>3&&` +${ie.length-3} more`]})]})]},z.uid)}),(()=>{const z=l.filter(ie=>ie.role==="staff"&&!ie.assignedAdminId);return z.length>0&&c.jsxs("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-yellow-600 text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-yellow-800",children:"Unassigned Staff"}),c.jsx("p",{className:"text-xs text-yellow-600",children:"Need admin assignment"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-yellow-700",children:"Count:"}),c.jsx(bt,{variant:"outline",className:"border-yellow-300",children:z.length})]}),z.length>0&&c.jsxs("div",{className:"text-xs text-yellow-600",children:[z.slice(0,3).map(ie=>ie.name).join(", "),z.length>3&&` +${z.length-3} more`]})]})]})})()]})})]}),c.jsxs(tt,{children:[c.jsxs(At,{children:[c.jsxs(Vt,{children:["All Users (",l.length,")"]}),e==="admin"&&c.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.jsx("p",{children:"You can see your assigned staff and other administrators."}),c.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-200 rounded"}),"Your Staff (",l.filter(z=>z.role==="staff"&&z.assignedAdminId===n).length,")"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 border border-yellow-200 rounded"}),"Unassigned Staff (",l.filter(z=>z.role==="staff"&&!z.assignedAdminId).length,")"]})]})]})]}),c.jsx(nt,{children:c.jsx("div",{className:"space-y-4",children:l.map((z,ie)=>{const re=e==="super_admin"||e==="admin"&&(z.role==="staff"||z.uid===n),ve=e==="super_admin"||e==="admin"&&z.role==="staff"&&z.uid!==n,Te=z.role==="staff"&&z.assignedAdminId?p.find(Ee=>Ee.uid===z.assignedAdminId):null,se=z.role==="staff"&&z.assignedAdminId===n,we=z.role==="staff"&&!z.assignedAdminId;return c.jsxs("div",{className:`flex items-center justify-between p-4 border rounded transition-all ${se?"border-green-200 bg-green-50":we?"border-yellow-200 bg-yellow-50":"border-gray-200"}`,children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"font-medium",children:[z.name,z.uid===n&&c.jsx("span",{className:"text-xs text-blue-600 ml-2",children:"(You)"})]}),se&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Your Staff"}),we&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" Unassigned"})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:z.email}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx(bt,{variant:z.role==="super_admin"?"destructive":z.role==="admin"?"default":"secondary",children:z.role==="super_admin"?"Super Admin":z.role==="admin"?"Administrator":"Staff Member"}),z.role==="staff"&&Te&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-gray-500",children:""}),c.jsxs(bt,{variant:"outline",className:"text-xs",children:[" Reports to: ",Te.name]})]}),we&&c.jsx(bt,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-700",children:" Needs Assignment"}),z.role==="admin"&&c.jsxs(bt,{variant:"outline",className:"text-xs",children:[" ",l.filter(Ee=>Ee.role==="staff"&&Ee.assignedAdminId===z.uid).length," Staff"]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[re&&z.role!=="super_admin"&&c.jsxs(je,{variant:"outline",size:"sm",onClick:()=>ye(z),children:[c.jsx(vh,{className:"h-4 w-4 mr-1"}),"Edit Role"]}),z.role==="super_admin"&&c.jsxs(je,{variant:"outline",size:"sm",disabled:!0,title:"Super admin roles cannot be modified for security reasons",children:[c.jsx(vh,{className:"h-4 w-4 mr-1"}),"Protected"]}),!re&&z.role!=="super_admin"&&c.jsxs(je,{variant:"outline",size:"sm",disabled:!0,title:e==="admin"?"You can only edit staff profiles and your own profile":"Insufficient privileges",children:[c.jsx(vh,{className:"h-4 w-4 mr-1"}),"Restricted"]}),ve&&c.jsx(je,{variant:"destructive",size:"sm",onClick:()=>fe(z.uid),children:"Delete"}),!ve&&z.role!=="super_admin"&&z.uid!==n&&c.jsx(je,{variant:"destructive",size:"sm",disabled:!0,title:e==="admin"?"You can only delete staff accounts":"Insufficient privileges",children:"Delete"})]})]},z.uid||`user-${ie}-${z.email}`)})})})]})]}):t==="create"?e!=="admin"&&e!=="super_admin"?c.jsx("div",{children:c.jsxs(tt,{children:[c.jsx(At,{children:c.jsx(Vt,{children:"Access Restricted"})}),c.jsx(nt,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-red-600 text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Admin Privileges Required"}),c.jsx("p",{className:"text-sm text-red-700",children:"Only administrators and super administrators can create user accounts."})]})]})}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"If you need to create a user account, please contact an administrator."})]})})]})}):c.jsx("div",{children:c.jsxs(tt,{children:[c.jsxs(At,{children:[c.jsx(Vt,{children:"Create New User"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:e==="super_admin"?"Super Admin Privilege - Create accounts with any role":"Admin Privilege - Create staff accounts"})]}),c.jsx(nt,{children:C?c.jsxs("form",{onSubmit:D,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),c.jsx("input",{type:"text",required:!0,value:S.name,onChange:z=>V({...S,name:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),c.jsx("input",{type:"email",required:!0,value:S.email,onChange:z=>V({...S,email:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Password"}),c.jsx("input",{type:"password",required:!0,value:S.password,onChange:z=>V({...S,password:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password",minLength:6})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Role"}),c.jsxs("select",{value:S.role,onChange:z=>V({...S,role:z.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"staff",children:"Staff Member"}),e==="super_admin"&&c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"admin",children:"Administrator"}),c.jsx("option",{value:"super_admin",children:"Super Administrator"})]})]}),e==="admin"&&c.jsx("p",{className:"text-xs text-muted-foreground",children:"As an admin, you can only create staff accounts. Contact a super admin to create administrator accounts."})]})]}),S.role==="super_admin"&&c.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-yellow-600 text-xs",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-yellow-800 mb-1",children:"Creating Super Administrator"}),c.jsx("p",{className:"text-sm text-yellow-700",children:"You are creating another super administrator account. This user will have complete system access including the ability to manage other super admins."})]})]})}),S.role==="admin"&&c.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-purple-600 text-xs",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-purple-800 mb-1",children:"Creating Administrator"}),c.jsx("p",{className:"text-sm text-purple-700",children:"You are creating an administrator account. This user will be able to manage staff accounts and create new staff members."})]})]})}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(je,{type:"submit",disabled:M,children:M?"Creating...":"Create User"}),c.jsx(je,{type:"button",variant:"outline",onClick:()=>{A(!1),V({email:"",name:"",password:"",role:"staff"})},children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-4",children:[e==="super_admin"?c.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-blue-600 text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Super Admin Privileges"}),c.jsx("p",{className:"text-sm text-blue-700",children:"As a super administrator, you can create accounts with any role including other super admins and administrators."})]})]})}):c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-green-600 text-sm",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-green-800 mb-1",children:"Admin Privileges"}),c.jsx("p",{className:"text-sm text-green-700",children:"As an administrator, you can create staff member accounts. Contact a super admin to create administrator accounts."})]})]})}),c.jsx("p",{className:"text-muted-foreground",children:"Create a new user account with email and password authentication."}),c.jsx(je,{onClick:()=>A(!0),children:"Create New User"})]})})]})}):null;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold",children:[e==="super_admin"?"Super Admin Panel":"Admin Panel",y&&c.jsxs("span",{className:"text-lg font-medium text-gray-600 ml-2",children:["- ",y.name]})]}),c.jsx("p",{className:"text-muted-foreground",children:y?c.jsxs(c.Fragment,{children:["Welcome back, ",c.jsx("span",{className:"font-medium",children:y.name})," (",y.email,")  Manage users and system settings"]}):"Manage users and system settings"})]}),y&&c.jsxs(je,{variant:"outline",size:"sm",onClick:te,className:"flex items-center gap-2",children:[c.jsx(hv,{className:"w-4 h-4"}),"Edit Profile"]})]}),c.jsx("div",{className:"flex space-x-4 border-b",children:[{id:"users",label:"User Management"},...e==="admin"||e==="super_admin"?[{id:"create",label:"Create User"}]:[]].map(z=>c.jsx("button",{onClick:()=>r(z.id),className:`px-4 py-2 ${t===z.id?"border-b-2 border-blue-500":""}`,children:z.label},z.id))}),q(),$&&c.jsx(mU,{isOpen:ee,user:$,currentUserRole:e,onRoleUpdate:de,onClose:_e}),y&&c.jsx(gU,{isOpen:N,userProfile:y,onProfileUpdate:H,onClose:le})]})};function NE({onNavigate:n}){const{userProfile:e}=kf();if(!e)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx(Kn,{className:"h-9 w-48"}),c.jsx(Kn,{className:"h-5 w-64 mt-2"})]}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((r,i)=>c.jsxs(tt,{children:[c.jsxs(At,{className:"flex flex-row items-center justify-between pb-2",children:[c.jsx(Kn,{className:"h-4 w-20"}),c.jsx(Kn,{className:"h-9 w-9 rounded-lg"})]}),c.jsx(nt,{children:c.jsx(Kn,{className:"h-8 w-12"})})]},i))}),c.jsxs(tt,{children:[c.jsx(At,{children:c.jsx(Kn,{className:"h-6 w-32"})}),c.jsx(nt,{children:c.jsx(Kn,{className:"h-4 w-full"})})]})]});if(e.role==="admin"||e.role==="super_admin")return c.jsx(vU,{currentUserUid:e.uid,userRole:e.role});const t=[{title:"My Tasks",value:0,icon:K1,onClick:()=>n("tasks")},{title:"My Receipts",value:0,icon:Y1,onClick:()=>n("receipts")},{title:"Files",value:0,icon:G1,onClick:()=>n("files")},{title:"Directory",value:0,icon:fv,onClick:()=>n("employees")}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),c.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e==null?void 0:e.name,"!",c.jsxs("span",{className:"ml-2 inline-flex items-center gap-1",children:[c.jsx(is,{className:"h-4 w-4"}),e==null?void 0:e.role]})]})]}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.map(r=>{const i=r.icon;return c.jsxs(tt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:r.onClick,children:[c.jsxs(At,{className:"flex flex-row items-center justify-between pb-2",children:[c.jsx(Vt,{className:"text-sm font-medium",children:r.title}),c.jsx("div",{className:"p-2 rounded-lg bg-gray-50 dark:bg-gray-950",children:c.jsx(i,{className:"h-5 w-5"})})]}),c.jsx(nt,{children:c.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title)})}),c.jsxs(tt,{children:[c.jsx(At,{children:c.jsx(Vt,{children:"Getting Started"})}),c.jsx(nt,{children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to the Office Management System. Use the navigation menu to access your tasks, receipts, and files."})})]})]})}const Qh=E.forwardRef(({className:n,...e},t)=>c.jsx("textarea",{className:Cb("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Qh.displayName="Textarea";var Mv="Dialog",[Rb]=ei(Mv),[wU,Mr]=Rb(Mv),kb=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:a,modal:l=!0}=n,h=E.useRef(null),p=E.useRef(null),[m=!1,y]=wl({prop:r,defaultProp:i,onChange:a});return c.jsx(wU,{scope:e,triggerRef:h,contentRef:p,contentId:ds(),titleId:ds(),descriptionId:ds(),open:m,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(w=>!w),[y]),modal:l,children:t})};kb.displayName=Mv;var Pb="DialogTrigger",jb=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mr(Pb,t),a=ft(e,i.triggerRef);return c.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Vv(i.open),...r,ref:a,onClick:De(n.onClick,i.onOpenToggle)})});jb.displayName=Pb;var Ov="DialogPortal",[_U,Db]=Rb(Ov,{forceMount:void 0}),Mb=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,a=Mr(Ov,e);return c.jsx(_U,{scope:e,forceMount:t,children:E.Children.map(r,l=>c.jsx(ti,{present:t||a.open,children:c.jsx($f,{asChild:!0,container:i,children:l})}))})};Mb.displayName=Ov;var Yh="DialogOverlay",Ob=E.forwardRef((n,e)=>{const t=Db(Yh,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=Mr(Yh,n.__scopeDialog);return a.modal?c.jsx(ti,{present:r||a.open,children:c.jsx(xU,{...i,ref:e})}):null});Ob.displayName=Yh;var xU=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mr(Yh,t);return c.jsx(Gf,{as:Ys,allowPinchZoom:!0,shards:[i.contentRef],children:c.jsx(Ge.div,{"data-state":Vv(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),na="DialogContent",Lb=E.forwardRef((n,e)=>{const t=Db(na,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=Mr(na,n.__scopeDialog);return c.jsx(ti,{present:r||a.open,children:a.modal?c.jsx(EU,{...i,ref:e}):c.jsx(TU,{...i,ref:e})})});Lb.displayName=na;var EU=E.forwardRef((n,e)=>{const t=Mr(na,n.__scopeDialog),r=E.useRef(null),i=ft(e,t.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return bv(a)},[]),c.jsx(Vb,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(n.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:De(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,h=l.button===0&&l.ctrlKey===!0;(l.button===2||h)&&a.preventDefault()}),onFocusOutside:De(n.onFocusOutside,a=>a.preventDefault())})}),TU=E.forwardRef((n,e)=>{const t=Mr(na,n.__scopeDialog),r=E.useRef(!1),i=E.useRef(!1);return c.jsx(Vb,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,h;(l=n.onCloseAutoFocus)==null||l.call(n,a),a.defaultPrevented||(r.current||(h=t.triggerRef.current)==null||h.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var p,m;(p=n.onInteractOutside)==null||p.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),Vb=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=n,h=Mr(na,t),p=E.useRef(null),m=ft(e,p);return yv(),c.jsxs(c.Fragment,{children:[c.jsx(Lf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:c.jsx(Of,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":Vv(h.open),...l,ref:m,onDismiss:()=>h.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(IU,{titleId:h.titleId}),c.jsx(AU,{contentRef:p,descriptionId:h.descriptionId})]})]})}),Lv="DialogTitle",Fb=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mr(Lv,t);return c.jsx(Ge.h2,{id:i.titleId,...r,ref:e})});Fb.displayName=Lv;var Ub="DialogDescription",SU=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mr(Ub,t);return c.jsx(Ge.p,{id:i.descriptionId,...r,ref:e})});SU.displayName=Ub;var zb="DialogClose",Bb=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mr(zb,t);return c.jsx(Ge.button,{type:"button",...r,ref:e,onClick:De(n.onClick,()=>i.onOpenChange(!1))})});Bb.displayName=zb;function Vv(n){return n?"open":"closed"}var $b="DialogTitleWarning",[B5,qb]=XL($b,{contentName:na,titleName:Lv,docsSlug:"dialog"}),IU=({titleId:n})=>{const e=qb($b),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},bU="DialogDescriptionWarning",AU=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qb(bU).contentName}}.`;return E.useEffect(()=>{var a;const i=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},NU=kb,CU=jb,RU=Mb,kU=Ob,PU=Lb,jU=Fb,DU=Bb;function cl({...n}){return c.jsx(NU,{"data-slot":"dialog",...n})}function Fv({...n}){return c.jsx(CU,{"data-slot":"dialog-trigger",...n})}function MU({...n}){return c.jsx(RU,{"data-slot":"dialog-portal",...n})}function OU({className:n,...e}){return c.jsx(kU,{"data-slot":"dialog-overlay",className:ut("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function ul({className:n,children:e,...t}){return c.jsxs(MU,{"data-slot":"dialog-portal",children:[c.jsx(OU,{}),c.jsxs(PU,{"data-slot":"dialog-content",className:ut("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,c.jsxs(DU,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(ea,{}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function dl({className:n,...e}){return c.jsx("div",{"data-slot":"dialog-header",className:ut("flex flex-col gap-2 text-center sm:text-left",n),...e})}function hl({className:n,...e}){return c.jsx(jU,{"data-slot":"dialog-title",className:ut("text-lg leading-none font-semibold",n),...e})}function CE(n,[e,t]){return Math.min(t,Math.max(e,n))}function LU(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var VU="VisuallyHidden",Wb=E.forwardRef((n,e)=>c.jsx(Ge.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Wb.displayName=VU;var FU=[" ","Enter","ArrowUp","ArrowDown"],UU=[" ","Enter"],Au="Select",[Yf,Xf,zU]=gv(Au),[Dl]=ei(Au,[zU,Bf]),Jf=Bf(),[BU,ao]=Dl(Au),[$U,qU]=Dl(Au),Hb=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:a,value:l,defaultValue:h,onValueChange:p,dir:m,name:y,autoComplete:w,disabled:x,required:I,form:C}=n,A=Jf(e),[S,V]=E.useState(null),[M,P]=E.useState(null),[$,G]=E.useState(!1),ee=Mf(m),[j=!1,N]=wl({prop:r,defaultProp:i,onChange:a}),[O,L]=wl({prop:l,defaultProp:h,onChange:p}),R=E.useRef(null),F=S?C||!!S.closest("form"):!0,[D,fe]=E.useState(new Set),ye=Array.from(D).map(de=>de.props.value).join(";");return c.jsx(kI,{...A,children:c.jsxs(BU,{required:I,scope:e,trigger:S,onTriggerChange:V,valueNode:M,onValueNodeChange:P,valueNodeHasChildren:$,onValueNodeHasChildrenChange:G,contentId:ds(),value:O,onValueChange:L,open:j,onOpenChange:N,dir:ee,triggerPointerDownPosRef:R,disabled:x,children:[c.jsx(Yf.Provider,{scope:e,children:c.jsx($U,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(de=>{fe(_e=>new Set(_e).add(de))},[]),onNativeOptionRemove:E.useCallback(de=>{fe(_e=>{const H=new Set(_e);return H.delete(de),H})},[]),children:t})}),F?c.jsxs(mA,{"aria-hidden":!0,required:I,tabIndex:-1,name:y,autoComplete:w,value:O,onChange:de=>L(de.target.value),disabled:x,form:C,children:[O===void 0?c.jsx("option",{value:""}):null,Array.from(D)]},ye):null]})})};Hb.displayName=Au;var Gb="SelectTrigger",Kb=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,a=Jf(t),l=ao(Gb,t),h=l.disabled||r,p=ft(e,l.onTriggerChange),m=Xf(t),y=E.useRef("touch"),[w,x,I]=gA(A=>{const S=m().filter(P=>!P.disabled),V=S.find(P=>P.value===l.value),M=yA(S,A,V);M!==void 0&&l.onValueChange(M.value)}),C=A=>{h||(l.onOpenChange(!0),I()),A&&(l.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return c.jsx(PI,{asChild:!0,...a,children:c.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":pA(l.value)?"":void 0,...i,ref:p,onClick:De(i.onClick,A=>{A.currentTarget.focus(),y.current!=="mouse"&&C(A)}),onPointerDown:De(i.onPointerDown,A=>{y.current=A.pointerType;const S=A.target;S.hasPointerCapture(A.pointerId)&&S.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(C(A),A.preventDefault())}),onKeyDown:De(i.onKeyDown,A=>{const S=w.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&x(A.key),!(S&&A.key===" ")&&FU.includes(A.key)&&(C(),A.preventDefault())})})})});Kb.displayName=Gb;var Qb="SelectValue",Yb=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:a,placeholder:l="",...h}=n,p=ao(Qb,t),{onValueNodeHasChildrenChange:m}=p,y=a!==void 0,w=ft(e,p.onValueNodeChange);return un(()=>{m(y)},[m,y]),c.jsx(Ge.span,{...h,ref:w,style:{pointerEvents:"none"},children:pA(p.value)?c.jsx(c.Fragment,{children:l}):a})});Yb.displayName=Qb;var WU="SelectIcon",Xb=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return c.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});Xb.displayName=WU;var HU="SelectPortal",Jb=n=>c.jsx($f,{asChild:!0,...n});Jb.displayName=HU;var ra="SelectContent",Zb=E.forwardRef((n,e)=>{const t=ao(ra,n.__scopeSelect),[r,i]=E.useState();if(un(()=>{i(new DocumentFragment)},[]),!t.open){const a=r;return a?Tu.createPortal(c.jsx(eA,{scope:n.__scopeSelect,children:c.jsx(Yf.Slot,{scope:n.__scopeSelect,children:c.jsx("div",{children:n.children})})}),a):null}return c.jsx(tA,{...n,ref:e})});Zb.displayName=ra;var br=10,[eA,lo]=Dl(ra),GU="SelectContentImpl",tA=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:h,sideOffset:p,align:m,alignOffset:y,arrowPadding:w,collisionBoundary:x,collisionPadding:I,sticky:C,hideWhenDetached:A,avoidCollisions:S,...V}=n,M=ao(ra,t),[P,$]=E.useState(null),[G,ee]=E.useState(null),j=ft(e,se=>$(se)),[N,O]=E.useState(null),[L,R]=E.useState(null),F=Xf(t),[D,fe]=E.useState(!1),ye=E.useRef(!1);E.useEffect(()=>{if(P)return bv(P)},[P]),yv();const de=E.useCallback(se=>{const[we,...Ee]=F().map(Fe=>Fe.ref.current),[X]=Ee.slice(-1),me=document.activeElement;for(const Fe of se)if(Fe===me||(Fe==null||Fe.scrollIntoView({block:"nearest"}),Fe===we&&G&&(G.scrollTop=0),Fe===X&&G&&(G.scrollTop=G.scrollHeight),Fe==null||Fe.focus(),document.activeElement!==me))return},[F,G]),_e=E.useCallback(()=>de([N,P]),[de,N,P]);E.useEffect(()=>{D&&_e()},[D,_e]);const{onOpenChange:H,triggerPointerDownPosRef:te}=M;E.useEffect(()=>{if(P){let se={x:0,y:0};const we=X=>{var me,Fe;se={x:Math.abs(Math.round(X.pageX)-(((me=te.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(X.pageY)-(((Fe=te.current)==null?void 0:Fe.y)??0))}},Ee=X=>{se.x<=10&&se.y<=10?X.preventDefault():P.contains(X.target)||H(!1),document.removeEventListener("pointermove",we),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[P,H,te]),E.useEffect(()=>{const se=()=>H(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[H]);const[le,q]=gA(se=>{const we=F().filter(me=>!me.disabled),Ee=we.find(me=>me.ref.current===document.activeElement),X=yA(we,se,Ee);X&&setTimeout(()=>X.ref.current.focus())}),z=E.useCallback((se,we,Ee)=>{const X=!ye.current&&!Ee;(M.value!==void 0&&M.value===we||X)&&(O(se),X&&(ye.current=!0))},[M.value]),ie=E.useCallback(()=>P==null?void 0:P.focus(),[P]),re=E.useCallback((se,we,Ee)=>{const X=!ye.current&&!Ee;(M.value!==void 0&&M.value===we||X)&&R(se)},[M.value]),ve=r==="popper"?Gg:nA,Te=ve===Gg?{side:h,sideOffset:p,align:m,alignOffset:y,arrowPadding:w,collisionBoundary:x,collisionPadding:I,sticky:C,hideWhenDetached:A,avoidCollisions:S}:{};return c.jsx(eA,{scope:t,content:P,viewport:G,onViewportChange:ee,itemRefCallback:z,selectedItem:N,onItemLeave:ie,itemTextRefCallback:re,focusSelectedItem:_e,selectedItemText:L,position:r,isPositioned:D,searchRef:le,children:c.jsx(Gf,{as:Ys,allowPinchZoom:!0,children:c.jsx(Lf,{asChild:!0,trapped:M.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:De(i,se=>{var we;(we=M.trigger)==null||we.focus({preventScroll:!0}),se.preventDefault()}),children:c.jsx(Of,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:c.jsx(ve,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:se=>se.preventDefault(),...V,...Te,onPlaced:()=>fe(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...V.style},onKeyDown:De(V.onKeyDown,se=>{const we=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!we&&se.key.length===1&&q(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let X=F().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(se.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const me=se.target,Fe=X.indexOf(me);X=X.slice(Fe+1)}setTimeout(()=>de(X)),se.preventDefault()}})})})})})})});tA.displayName=GU;var KU="SelectItemAlignedPosition",nA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,a=ao(ra,t),l=lo(ra,t),[h,p]=E.useState(null),[m,y]=E.useState(null),w=ft(e,j=>y(j)),x=Xf(t),I=E.useRef(!1),C=E.useRef(!0),{viewport:A,selectedItem:S,selectedItemText:V,focusSelectedItem:M}=l,P=E.useCallback(()=>{if(a.trigger&&a.valueNode&&h&&m&&A&&S&&V){const j=a.trigger.getBoundingClientRect(),N=m.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),L=V.getBoundingClientRect();if(a.dir!=="rtl"){const me=L.left-N.left,Fe=O.left-me,lt=j.left-Fe,qt=j.width+lt,dn=Math.max(qt,N.width),nr=window.innerWidth-br,Vn=CE(Fe,[br,Math.max(br,nr-dn)]);h.style.minWidth=qt+"px",h.style.left=Vn+"px"}else{const me=N.right-L.right,Fe=window.innerWidth-O.right-me,lt=window.innerWidth-j.right-Fe,qt=j.width+lt,dn=Math.max(qt,N.width),nr=window.innerWidth-br,Vn=CE(Fe,[br,Math.max(br,nr-dn)]);h.style.minWidth=qt+"px",h.style.right=Vn+"px"}const R=x(),F=window.innerHeight-br*2,D=A.scrollHeight,fe=window.getComputedStyle(m),ye=parseInt(fe.borderTopWidth,10),de=parseInt(fe.paddingTop,10),_e=parseInt(fe.borderBottomWidth,10),H=parseInt(fe.paddingBottom,10),te=ye+de+D+H+_e,le=Math.min(S.offsetHeight*5,te),q=window.getComputedStyle(A),z=parseInt(q.paddingTop,10),ie=parseInt(q.paddingBottom,10),re=j.top+j.height/2-br,ve=F-re,Te=S.offsetHeight/2,se=S.offsetTop+Te,we=ye+de+se,Ee=te-we;if(we<=re){const me=R.length>0&&S===R[R.length-1].ref.current;h.style.bottom="0px";const Fe=m.clientHeight-A.offsetTop-A.offsetHeight,lt=Math.max(ve,Te+(me?ie:0)+Fe+_e),qt=we+lt;h.style.height=qt+"px"}else{const me=R.length>0&&S===R[0].ref.current;h.style.top="0px";const lt=Math.max(re,ye+A.offsetTop+(me?z:0)+Te)+Ee;h.style.height=lt+"px",A.scrollTop=we-re+A.offsetTop}h.style.margin=`${br}px 0`,h.style.minHeight=le+"px",h.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>I.current=!0)}},[x,a.trigger,a.valueNode,h,m,A,S,V,a.dir,r]);un(()=>P(),[P]);const[$,G]=E.useState();un(()=>{m&&G(window.getComputedStyle(m).zIndex)},[m]);const ee=E.useCallback(j=>{j&&C.current===!0&&(P(),M==null||M(),C.current=!1)},[P,M]);return c.jsx(YU,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:I,onScrollButtonChange:ee,children:c.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:c.jsx(Ge.div,{...i,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});nA.displayName=KU;var QU="SelectPopperPosition",Gg=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=br,...a}=n,l=Jf(t);return c.jsx(jI,{...l,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Gg.displayName=QU;var[YU,Uv]=Dl(ra,{}),Kg="SelectViewport",rA=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,a=lo(Kg,t),l=Uv(Kg,t),h=ft(e,a.onViewportChange),p=E.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(Yf.Slot,{scope:t,children:c.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:De(i.onScroll,m=>{const y=m.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&w){const I=Math.abs(p.current-y.scrollTop);if(I>0){const C=window.innerHeight-br*2,A=parseFloat(w.style.minHeight),S=parseFloat(w.style.height),V=Math.max(A,S);if(V<C){const M=V+I,P=Math.min(C,M),$=M-P;w.style.height=P+"px",w.style.bottom==="0px"&&(y.scrollTop=$>0?$:0,w.style.justifyContent="flex-end")}}}p.current=y.scrollTop})})})]})});rA.displayName=Kg;var sA="SelectGroup",[XU,JU]=Dl(sA),ZU=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=ds();return c.jsx(XU,{scope:t,id:i,children:c.jsx(Ge.div,{role:"group","aria-labelledby":i,...r,ref:e})})});ZU.displayName=sA;var iA="SelectLabel",e5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=JU(iA,t);return c.jsx(Ge.div,{id:i.id,...r,ref:e})});e5.displayName=iA;var Xh="SelectItem",[t5,oA]=Dl(Xh),aA=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:a,...l}=n,h=ao(Xh,t),p=lo(Xh,t),m=h.value===r,[y,w]=E.useState(a??""),[x,I]=E.useState(!1),C=ft(e,M=>{var P;return(P=p.itemRefCallback)==null?void 0:P.call(p,M,r,i)}),A=ds(),S=E.useRef("touch"),V=()=>{i||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(t5,{scope:t,value:r,disabled:i,textId:A,isSelected:m,onItemTextChange:E.useCallback(M=>{w(P=>P||((M==null?void 0:M.textContent)??"").trim())},[]),children:c.jsx(Yf.ItemSlot,{scope:t,value:r,disabled:i,textValue:y,children:c.jsx(Ge.div,{role:"option","aria-labelledby":A,"data-highlighted":x?"":void 0,"aria-selected":m&&x,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:C,onFocus:De(l.onFocus,()=>I(!0)),onBlur:De(l.onBlur,()=>I(!1)),onClick:De(l.onClick,()=>{S.current!=="mouse"&&V()}),onPointerUp:De(l.onPointerUp,()=>{S.current==="mouse"&&V()}),onPointerDown:De(l.onPointerDown,M=>{S.current=M.pointerType}),onPointerMove:De(l.onPointerMove,M=>{var P;S.current=M.pointerType,i?(P=p.onItemLeave)==null||P.call(p):S.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(l.onPointerLeave,M=>{var P;M.currentTarget===document.activeElement&&((P=p.onItemLeave)==null||P.call(p))}),onKeyDown:De(l.onKeyDown,M=>{var $;(($=p.searchRef)==null?void 0:$.current)!==""&&M.key===" "||(UU.includes(M.key)&&V(),M.key===" "&&M.preventDefault())})})})})});aA.displayName=Xh;var Lc="SelectItemText",lA=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...a}=n,l=ao(Lc,t),h=lo(Lc,t),p=oA(Lc,t),m=qU(Lc,t),[y,w]=E.useState(null),x=ft(e,V=>w(V),p.onItemTextChange,V=>{var M;return(M=h.itemTextRefCallback)==null?void 0:M.call(h,V,p.value,p.disabled)}),I=y==null?void 0:y.textContent,C=E.useMemo(()=>c.jsx("option",{value:p.value,disabled:p.disabled,children:I},p.value),[p.disabled,p.value,I]),{onNativeOptionAdd:A,onNativeOptionRemove:S}=m;return un(()=>(A(C),()=>S(C)),[A,S,C]),c.jsxs(c.Fragment,{children:[c.jsx(Ge.span,{id:p.textId,...a,ref:x}),p.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Tu.createPortal(a.children,l.valueNode):null]})});lA.displayName=Lc;var cA="SelectItemIndicator",uA=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return oA(cA,t).isSelected?c.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});uA.displayName=cA;var Qg="SelectScrollUpButton",dA=E.forwardRef((n,e)=>{const t=lo(Qg,n.__scopeSelect),r=Uv(Qg,n.__scopeSelect),[i,a]=E.useState(!1),l=ft(e,r.onScrollButtonChange);return un(()=>{if(t.viewport&&t.isPositioned){let h=function(){const m=p.scrollTop>0;a(m)};const p=t.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?c.jsx(fA,{...n,ref:l,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=t;h&&p&&(h.scrollTop=h.scrollTop-p.offsetHeight)}}):null});dA.displayName=Qg;var Yg="SelectScrollDownButton",hA=E.forwardRef((n,e)=>{const t=lo(Yg,n.__scopeSelect),r=Uv(Yg,n.__scopeSelect),[i,a]=E.useState(!1),l=ft(e,r.onScrollButtonChange);return un(()=>{if(t.viewport&&t.isPositioned){let h=function(){const m=p.scrollHeight-p.clientHeight,y=Math.ceil(p.scrollTop)<m;a(y)};const p=t.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?c.jsx(fA,{...n,ref:l,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=t;h&&p&&(h.scrollTop=h.scrollTop+p.offsetHeight)}}):null});hA.displayName=Yg;var fA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,a=lo("SelectScrollButton",t),l=E.useRef(null),h=Xf(t),p=E.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return E.useEffect(()=>()=>p(),[p]),un(()=>{var y;const m=h().find(w=>w.ref.current===document.activeElement);(y=m==null?void 0:m.ref.current)==null||y.scrollIntoView({block:"nearest"})},[h]),c.jsx(Ge.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:De(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:De(i.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:De(i.onPointerLeave,()=>{p()})})}),n5="SelectSeparator",r5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return c.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});r5.displayName=n5;var Xg="SelectArrow",s5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Jf(t),a=ao(Xg,t),l=lo(Xg,t);return a.open&&l.position==="popper"?c.jsx(DI,{...i,...r,ref:e}):null});s5.displayName=Xg;function pA(n){return n===""||n===void 0}var mA=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=E.useRef(null),a=ft(e,i),l=LU(t);return E.useEffect(()=>{const h=i.current,p=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(p,"value").set;if(l!==t&&y){const w=new Event("change",{bubbles:!0});y.call(h,t),h.dispatchEvent(w)}},[l,t]),c.jsx(Wb,{asChild:!0,children:c.jsx("select",{...r,ref:a,defaultValue:t})})});mA.displayName="BubbleSelect";function gA(n){const e=tr(n),t=E.useRef(""),r=E.useRef(0),i=E.useCallback(l=>{const h=t.current+l;e(h),(function p(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>p(""),1e3))})(h)},[e]),a=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,a]}function yA(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=i5(n,Math.max(a,0));i.length===1&&(l=l.filter(m=>m!==t));const p=l.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function i5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var o5=Hb,a5=Kb,l5=Yb,c5=Xb,u5=Jb,d5=Zb,h5=rA,f5=aA,p5=lA,m5=uA,g5=dA,y5=hA;function Wi({...n}){return c.jsx(o5,{"data-slot":"select",...n})}function Hi({...n}){return c.jsx(l5,{"data-slot":"select-value",...n})}function Gi({className:n,size:e="default",children:t,...r}){return c.jsxs(a5,{"data-slot":"select-trigger","data-size":e,className:ut("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,c.jsx(c5,{asChild:!0,children:c.jsx(H1,{className:"size-4 opacity-50"})})]})}function Ki({className:n,children:e,position:t="popper",...r}){return c.jsx(u5,{children:c.jsxs(d5,{"data-slot":"select-content",className:ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[c.jsx(v5,{}),c.jsx(h5,{className:ut("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),c.jsx(w5,{})]})})}function Jt({className:n,children:e,...t}){return c.jsxs(f5,{"data-slot":"select-item",className:ut("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[c.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:c.jsx(m5,{children:c.jsx(Mg,{className:"size-4"})})}),c.jsx(p5,{children:e})]})}function v5({className:n,...e}){return c.jsx(g5,{"data-slot":"select-scroll-up-button",className:ut("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(q4,{className:"size-4"})})}function w5({className:n,...e}){return c.jsx(y5,{"data-slot":"select-scroll-down-button",className:ut("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(H1,{className:"size-4"})})}function _5(){const{tasks:n,addTask:e,updateTask:t,deleteTask:r}=av(),[i,a]=E.useState(!1),[l,h]=E.useState(null),[p,m]=E.useState("all"),[y,w]=E.useState({title:"",description:"",status:"pending",priority:"medium",assignee:"",dueDate:new Date().toISOString().split("T")[0]}),x=()=>{w({title:"",description:"",status:"pending",priority:"medium",assignee:"",dueDate:new Date().toISOString().split("T")[0]}),h(null)},I=P=>{P.preventDefault(),l?t(l.id,y):e(y),a(!1),x()},C=P=>{h(P),w({title:P.title,description:P.description,status:P.status,priority:P.priority,assignee:P.assignee,dueDate:P.dueDate}),a(!0)},A=P=>{confirm("Are you sure you want to delete this task?")&&r(P)},S=p==="all"?n:n.filter(P=>P.status===p),V=P=>{switch(P){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"in-progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}},M=P=>{switch(P){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Task Manager"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage and track your tasks"})]}),c.jsxs(cl,{open:i,onOpenChange:P=>{a(P),P||x()},children:[c.jsx(Fv,{asChild:!0,children:c.jsxs(je,{children:[c.jsx(dv,{className:"mr-2 h-4 w-4"}),"Add Task"]})}),c.jsxs(ul,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsx(dl,{children:c.jsx(hl,{children:l?"Edit Task":"Create New Task"})}),c.jsxs("form",{onSubmit:I,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"title",children:"Title"}),c.jsx(cn,{id:"title",value:y.title,onChange:P=>w({...y,title:P.target.value}),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"description",children:"Description"}),c.jsx(Qh,{id:"description",value:y.description,onChange:P=>w({...y,description:P.target.value}),rows:4})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"status",children:"Status"}),c.jsxs(Wi,{value:y.status,onValueChange:P=>w({...y,status:P}),children:[c.jsx(Gi,{children:c.jsx(Hi,{})}),c.jsxs(Ki,{children:[c.jsx(Jt,{value:"pending",children:"Pending"}),c.jsx(Jt,{value:"in-progress",children:"In Progress"}),c.jsx(Jt,{value:"completed",children:"Completed"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"priority",children:"Priority"}),c.jsxs(Wi,{value:y.priority,onValueChange:P=>w({...y,priority:P}),children:[c.jsx(Gi,{children:c.jsx(Hi,{})}),c.jsxs(Ki,{children:[c.jsx(Jt,{value:"low",children:"Low"}),c.jsx(Jt,{value:"medium",children:"Medium"}),c.jsx(Jt,{value:"high",children:"High"})]})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"assignee",children:"Assignee"}),c.jsx(cn,{id:"assignee",value:y.assignee,onChange:P=>w({...y,assignee:P.target.value}),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"dueDate",children:"Due Date"}),c.jsx(cn,{id:"dueDate",type:"date",value:y.dueDate,onChange:P=>w({...y,dueDate:P.target.value}),required:!0})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(je,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),c.jsxs(je,{type:"submit",children:[l?"Update":"Create"," Task"]})]})]})]})]})]}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ue,{children:"Filter by Status:"}),c.jsxs(Wi,{value:p,onValueChange:m,children:[c.jsx(Gi,{className:"w-48",children:c.jsx(Hi,{})}),c.jsxs(Ki,{children:[c.jsx(Jt,{value:"all",children:"All Tasks"}),c.jsx(Jt,{value:"pending",children:"Pending"}),c.jsx(Jt,{value:"in-progress",children:"In Progress"}),c.jsx(Jt,{value:"completed",children:"Completed"})]})]})]})})}),c.jsx("div",{className:"grid gap-4",children:S.length===0?c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsx("p",{className:"text-center text-muted-foreground",children:"No tasks found. Create your first task to get started!"})})}):S.map(P=>c.jsxs(tt,{className:"hover:shadow-md transition-shadow",children:[c.jsx(At,{children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(Vt,{className:"text-lg",children:P.title}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:P.description})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(je,{variant:"ghost",size:"icon",onClick:()=>C(P),children:c.jsx(ML,{className:"h-4 w-4"})}),c.jsx(je,{variant:"ghost",size:"icon",onClick:()=>A(P.id),children:c.jsx(jf,{className:"h-4 w-4 text-destructive"})})]})]})}),c.jsx(nt,{children:c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx(bt,{className:V(P.status),children:P.status}),c.jsxs(bt,{className:M(P.priority),children:[P.priority," priority"]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(W1,{className:"h-3 w-3"}),new Date(P.dueDate).toLocaleDateString()]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assigned to: ",P.assignee]})]})})]},P.id))})]})}var zv="Tabs",[x5]=ei(zv,[Wf]),vA=Wf(),[E5,Bv]=x5(zv),wA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:h,activationMode:p="automatic",...m}=n,y=Mf(h),[w,x]=wl({prop:r,onChange:i,defaultProp:a});return c.jsx(E5,{scope:t,baseId:ds(),value:w,onValueChange:x,orientation:l,dir:y,activationMode:p,children:c.jsx(Ge.div,{dir:y,"data-orientation":l,...m,ref:e})})});wA.displayName=zv;var _A="TabsList",xA=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,a=Bv(_A,t),l=vA(t);return c.jsx(UI,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:r,children:c.jsx(Ge.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});xA.displayName=_A;var EA="TabsTrigger",TA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...a}=n,l=Bv(EA,t),h=vA(t),p=bA(l.baseId,r),m=AA(l.baseId,r),y=r===l.value;return c.jsx(zI,{asChild:!0,...h,focusable:!i,active:y,children:c.jsx(Ge.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":m,"data-state":y?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:p,...a,ref:e,onMouseDown:De(n.onMouseDown,w=>{!i&&w.button===0&&w.ctrlKey===!1?l.onValueChange(r):w.preventDefault()}),onKeyDown:De(n.onKeyDown,w=>{[" ","Enter"].includes(w.key)&&l.onValueChange(r)}),onFocus:De(n.onFocus,()=>{const w=l.activationMode!=="manual";!y&&!i&&w&&l.onValueChange(r)})})})});TA.displayName=EA;var SA="TabsContent",IA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:a,...l}=n,h=Bv(SA,t),p=bA(h.baseId,r),m=AA(h.baseId,r),y=r===h.value,w=E.useRef(y);return E.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),c.jsx(ti,{present:i||y,children:({present:x})=>c.jsx(Ge.div,{"data-state":y?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":p,hidden:!x,id:m,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:w.current?"0s":void 0},children:x&&a})})});IA.displayName=SA;function bA(n,e){return`${n}-trigger-${e}`}function AA(n,e){return`${n}-content-${e}`}var T5=wA,S5=xA,I5=TA,b5=IA;function A5({className:n,...e}){return c.jsx(T5,{"data-slot":"tabs",className:ut("flex flex-col gap-2",n),...e})}function N5({className:n,...e}){return c.jsx(S5,{"data-slot":"tabs-list",className:ut("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",n),...e})}function ng({className:n,...e}){return c.jsx(I5,{"data-slot":"tabs-trigger",className:ut("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function C5({className:n,...e}){return c.jsx(b5,{"data-slot":"tabs-content",className:ut("flex-1 outline-none",n),...e})}const R5=({currentUserId:n,userRole:e})=>{var Ee;const[t,r]=E.useState([]),[i,a]=E.useState([]),[l,h]=E.useState(null),[p,m]=E.useState(null),[y,w]=E.useState(!0),[x,I]=E.useState(!1),[C,A]=E.useState(!1),[S,V]=E.useState(null),[M,P]=E.useState(!1),[$,G]=E.useState(!1),[ee,j]=E.useState({}),[N,O]=E.useState("all"),[L,R]=E.useState({title:"",description:"",amount:"",categoryId:"",type:"unofficial",date:new Date().toISOString().split("T")[0],tags:"",vendor:"",invoiceNumber:"",taxAmount:"",notes:""}),[F,D]=E.useState(null),[fe,ye]=E.useState("");E.useEffect(()=>{de()},[n]);const de=async()=>{try{w(!0);const[X,me,Fe,lt]=await Promise.all([Ir.getVisibleReceipts(n,ee),Ir.getCategories(),Pe.getUserProfile(n),Ir.getReceiptStats(n)]);r(X),a(me),m(Fe),h(lt)}catch(X){console.error("Error loading receipt data:",X)}finally{w(!1)}},_e=()=>{R({title:"",description:"",amount:"",categoryId:"",type:"unofficial",date:new Date().toISOString().split("T")[0],tags:"",vendor:"",invoiceNumber:"",taxAmount:"",notes:""}),D(null),ye("")},H=X=>{var Fe;const me=(Fe=X.target.files)==null?void 0:Fe[0];if(me){D(me);const lt=new FileReader;lt.onloadend=()=>{ye(lt.result)},lt.readAsDataURL(me)}},te=async X=>{if(X.preventDefault(),!F||!p){alert("Please select a file and ensure you are logged in");return}I(!0);try{const me=await Ir.uploadReceiptFile(F,n),Fe=i.find(dn=>dn.id===L.categoryId);if(!Fe)throw new Error("Invalid category selected");const lt=L.tags.split(",").map(dn=>dn.trim()).filter(dn=>dn),qt={title:L.title,description:L.description,amount:parseFloat(L.amount),category:Fe.name,categoryId:L.categoryId,type:L.type,status:"pending",date:L.date,imageUrl:me.url,fileName:me.fileName,fileSize:me.fileSize,mimeType:me.mimeType,tags:lt,uploadedBy:n,uploadedByName:p.name,ownerId:n,assignedAdminId:p.assignedAdminId,visibility:"admin",metadata:{vendor:L.vendor||void 0,invoiceNumber:L.invoiceNumber||void 0,taxAmount:L.taxAmount?parseFloat(L.taxAmount):void 0,notes:L.notes||void 0}};await Ir.createReceipt(qt),A(!1),_e(),await de(),alert("Receipt uploaded successfully!")}catch(me){console.error("Error uploading receipt:",me),alert("Error uploading receipt. Please try again.")}finally{I(!1)}},le=async X=>{if(confirm("Are you sure you want to delete this receipt?"))try{await Ir.deleteReceipt(X,n),await de(),alert("Receipt deleted successfully")}catch(me){console.error("Error deleting receipt:",me),alert("Error deleting receipt")}},q=async X=>{try{await Ir.approveReceipt(X,n),await de(),alert("Receipt approved successfully")}catch(me){console.error("Error approving receipt:",me),alert("Error approving receipt")}},z=async X=>{const me=prompt("Enter rejection reason:");if(me)try{await Ir.rejectReceipt(X,n,me),await de(),alert("Receipt rejected")}catch(Fe){console.error("Error rejecting receipt:",Fe),alert("Error rejecting receipt")}},ie=async X=>{try{const me=await Ir.downloadReceipt(X,n);window.open(me,"_blank")}catch(me){console.error("Error downloading receipt:",me),alert("Error downloading receipt")}},re=X=>{switch(X){case"approved":return c.jsx(Wo,{className:"w-4 h-4 text-green-600"});case"rejected":return c.jsx(yh,{className:"w-4 h-4 text-red-600"});case"pending":return c.jsx(Og,{className:"w-4 h-4 text-yellow-600"})}},ve=X=>X==="official"?c.jsx(is,{className:"w-4 h-4 text-blue-600"}):c.jsx(Uo,{className:"w-4 h-4 text-gray-600"}),Te=t.filter(X=>!(N==="official"&&X.type!=="official"||N==="unofficial"&&X.type!=="unofficial")),se=X=>e==="admin"&&X.assignedAdminId===n||e==="super_admin",we=X=>X.ownerId===n||e==="admin"&&X.assignedAdminId===n||e==="super_admin";return y?c.jsx("div",{className:"flex items-center justify-center p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-600",children:"Loading receipts..."})]})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Receipt Manager"}),c.jsx("p",{className:"text-muted-foreground",children:"Upload and manage official and unofficial receipts"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[l&&c.jsxs(je,{variant:"outline",size:"sm",onClick:()=>G(!0),children:[c.jsx(U4,{className:"w-4 h-4 mr-2"}),"Statistics"]}),c.jsxs(cl,{open:C,onOpenChange:X=>{A(X),X||_e()},children:[c.jsx(Fv,{asChild:!0,children:c.jsxs(je,{children:[c.jsx(dv,{className:"mr-2 h-4 w-4"}),"Upload Receipt"]})}),c.jsxs(ul,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[c.jsx(dl,{children:c.jsx(hl,{children:"Upload New Receipt"})}),c.jsxs("form",{onSubmit:te,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"receipt-file",children:"Receipt File *"}),c.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:fe?c.jsxs("div",{className:"space-y-2",children:[c.jsx("img",{src:fe,alt:"Receipt preview",className:"max-h-48 mx-auto rounded"}),c.jsx(je,{type:"button",variant:"outline",size:"sm",onClick:()=>{D(null),ye("")},children:"Remove File"})]}):c.jsxs("div",{children:[c.jsx(J1,{className:"mx-auto h-12 w-12 text-muted-foreground"}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("label",{htmlFor:"receipt-file",className:"cursor-pointer",children:[c.jsx("span",{className:"text-primary hover:underline",children:"Upload a file"}),c.jsx("input",{id:"receipt-file",type:"file",className:"hidden",accept:"image/*,.pdf",onChange:H,required:!0})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"title",children:"Title *"}),c.jsx(cn,{id:"title",value:L.title,onChange:X=>R({...L,title:X.target.value}),placeholder:"e.g., Office supplies purchase",required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"type",children:"Receipt Type *"}),c.jsxs(Wi,{value:L.type,onValueChange:X=>R({...L,type:X}),children:[c.jsx(Gi,{children:c.jsx(Hi,{})}),c.jsxs(Ki,{children:[c.jsx(Jt,{value:"official",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(is,{className:"w-4 h-4 text-blue-600"}),"Official Receipt"]})}),c.jsx(Jt,{value:"unofficial",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Uo,{className:"w-4 h-4 text-gray-600"}),"Unofficial Receipt"]})})]})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"description",children:"Description"}),c.jsx(Qh,{id:"description",value:L.description,onChange:X=>R({...L,description:X.target.value}),placeholder:"Additional details about this receipt",rows:2})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"amount",children:"Amount () *"}),c.jsx(cn,{id:"amount",type:"number",step:"0.01",value:L.amount,onChange:X=>R({...L,amount:X.target.value}),placeholder:"0.00",required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"date",children:"Date *"}),c.jsx(cn,{id:"date",type:"date",value:L.date,onChange:X=>R({...L,date:X.target.value}),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"category",children:"Category *"}),c.jsxs(Wi,{value:L.categoryId,onValueChange:X=>R({...L,categoryId:X}),children:[c.jsx(Gi,{children:c.jsx(Hi,{placeholder:"Select category"})}),c.jsx(Ki,{children:i.map(X=>c.jsx(Jt,{value:X.id,children:X.name},X.id))})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"vendor",children:"Vendor/Supplier"}),c.jsx(cn,{id:"vendor",value:L.vendor,onChange:X=>R({...L,vendor:X.target.value}),placeholder:"Company or person"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"invoiceNumber",children:"Invoice/Receipt Number"}),c.jsx(cn,{id:"invoiceNumber",value:L.invoiceNumber,onChange:X=>R({...L,invoiceNumber:X.target.value}),placeholder:"Receipt or invoice number"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"taxAmount",children:"Tax Amount ()"}),c.jsx(cn,{id:"taxAmount",type:"number",step:"0.01",value:L.taxAmount,onChange:X=>R({...L,taxAmount:X.target.value}),placeholder:"0.00"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"tags",children:"Tags (comma separated)"}),c.jsx(cn,{id:"tags",value:L.tags,onChange:X=>R({...L,tags:X.target.value}),placeholder:"e.g., urgent, reimbursable"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"notes",children:"Notes"}),c.jsx(Qh,{id:"notes",value:L.notes,onChange:X=>R({...L,notes:X.target.value}),placeholder:"Additional notes or comments",rows:2})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(je,{type:"button",variant:"outline",onClick:()=>A(!1),disabled:x,children:"Cancel"}),c.jsx(je,{type:"submit",disabled:x,children:x?"Uploading...":"Upload Receipt"})]})]})]})]})]})]}),l&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Receipts"}),c.jsx("p",{className:"text-2xl font-bold",children:l.totalReceipts})]}),c.jsx(Uo,{className:"h-8 w-8 text-muted-foreground"})]})})}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),c.jsxs("p",{className:"text-2xl font-bold",children:["",l.totalAmount.toLocaleString()]})]}),c.jsx(Y4,{className:"h-8 w-8 text-muted-foreground"})]})})}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Official"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.officialReceipts})]}),c.jsx(is,{className:"h-8 w-8 text-blue-600"})]})})}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending"}),c.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.pendingApprovals})]}),c.jsx(Og,{className:"h-8 w-8 text-yellow-600"})]})})})]}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs(A5,{value:N,onValueChange:X=>O(X),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(N5,{children:[c.jsx(ng,{value:"all",children:"All Receipts"}),c.jsxs(ng,{value:"official",children:[c.jsx(is,{className:"w-4 h-4 mr-2"}),"Official"]}),c.jsxs(ng,{value:"unofficial",children:[c.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Unofficial"]})]}),c.jsxs(je,{variant:"outline",size:"sm",children:[c.jsx(sL,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),c.jsx(C5,{value:N,className:"mt-0",children:Te.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Uo,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"No receipts found. Upload your first receipt to get started!"})]}):c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Te.map(X=>c.jsxs(tt,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{V(X),P(!0)},children:[c.jsxs("div",{className:"aspect-video relative overflow-hidden rounded-t-lg bg-muted",children:[c.jsx("img",{src:X.imageUrl,alt:X.title,className:"object-cover w-full h-full"}),c.jsxs("div",{className:"absolute top-2 left-2 flex gap-1",children:[ve(X.type),re(X.status)]})]}),c.jsx(At,{children:c.jsxs(Vt,{className:"text-base line-clamp-2 flex items-center justify-between",children:[c.jsx("span",{children:X.title}),c.jsx(bt,{variant:X.type==="official"?"default":"secondary",children:X.type})]})}),c.jsx(nt,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"text-2xl font-bold",children:["",X.amount.toLocaleString()]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(je,{variant:"ghost",size:"icon",onClick:me=>{me.stopPropagation(),ie(X.id)},children:c.jsx(Lg,{className:"h-4 w-4"})}),we(X)&&c.jsx(je,{variant:"ghost",size:"icon",onClick:me=>{me.stopPropagation(),le(X.id)},children:c.jsx(jf,{className:"h-4 w-4 text-destructive"})})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(bt,{variant:"outline",children:X.category}),c.jsx(bt,{variant:X.status==="approved"?"default":X.status==="rejected"?"destructive":"secondary",children:X.status})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(W1,{className:"h-3 w-3"}),new Date(X.date).toLocaleDateString()]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["By: ",X.uploadedByName]}),X.tags.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1",children:[X.tags.slice(0,2).map(me=>c.jsxs(bt,{variant:"outline",className:"text-xs",children:[c.jsx(FL,{className:"h-2 w-2 mr-1"}),me]},me)),X.tags.length>2&&c.jsxs(bt,{variant:"outline",className:"text-xs",children:["+",X.tags.length-2]})]}),se(X)&&X.status==="pending"&&c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsxs(je,{size:"sm",onClick:me=>{me.stopPropagation(),q(X.id)},className:"flex-1",children:[c.jsx(Wo,{className:"w-3 h-3 mr-1"}),"Approve"]}),c.jsxs(je,{size:"sm",variant:"destructive",onClick:me=>{me.stopPropagation(),z(X.id)},className:"flex-1",children:[c.jsx(yh,{className:"w-3 h-3 mr-1"}),"Reject"]})]})]})})]},X.id))})})]})})}),S&&c.jsx(cl,{open:M,onOpenChange:P,children:c.jsxs(ul,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c.jsx(dl,{children:c.jsxs(hl,{className:"flex items-center gap-2",children:[ve(S.type),S.title,c.jsx(bt,{variant:S.type==="official"?"default":"secondary",children:S.type}),c.jsx(bt,{variant:S.status==="approved"?"default":S.status==="rejected"?"destructive":"secondary",children:S.status})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("img",{src:S.imageUrl,alt:S.title,className:"w-full rounded-lg max-h-96 object-contain"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ue,{children:"Amount"}),c.jsxs("p",{className:"text-2xl font-bold",children:["",S.amount.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Date"}),c.jsx("p",{children:new Date(S.date).toLocaleDateString()})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Category"}),c.jsx("p",{children:S.category})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Uploaded By"}),c.jsx("p",{children:S.uploadedByName})]})]}),S.description&&c.jsxs("div",{children:[c.jsx(Ue,{children:"Description"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S.description})]}),S.metadata&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.metadata.vendor&&c.jsxs("div",{children:[c.jsx(Ue,{children:"Vendor"}),c.jsx("p",{children:S.metadata.vendor})]}),S.metadata.invoiceNumber&&c.jsxs("div",{children:[c.jsx(Ue,{children:"Invoice Number"}),c.jsx("p",{children:S.metadata.invoiceNumber})]}),S.metadata.taxAmount&&c.jsxs("div",{children:[c.jsx(Ue,{children:"Tax Amount"}),c.jsxs("p",{children:["",S.metadata.taxAmount.toLocaleString()]})]})]}),((Ee=S.metadata)==null?void 0:Ee.notes)&&c.jsxs("div",{children:[c.jsx(Ue,{children:"Notes"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S.metadata.notes})]}),S.tags.length>0&&c.jsxs("div",{children:[c.jsx(Ue,{children:"Tags"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.tags.map(X=>c.jsx(bt,{variant:"outline",children:X},X))})]}),S.status==="approved"&&S.approvedByName&&c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-800",children:[c.jsx("strong",{children:"Approved by:"})," ",S.approvedByName," on"," ",S.approvedAt&&new Date(S.approvedAt).toLocaleDateString()]})}),S.status==="rejected"&&S.rejectedByName&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-red-800",children:[c.jsx("strong",{children:"Rejected by:"})," ",S.rejectedByName," on"," ",S.rejectedAt&&new Date(S.rejectedAt).toLocaleDateString()]}),S.rejectionReason&&c.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[c.jsx("strong",{children:"Reason:"})," ",S.rejectionReason]})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsxs(je,{variant:"outline",onClick:()=>ie(S.id),children:[c.jsx(Lg,{className:"w-4 h-4 mr-2"}),"Download"]}),se(S)&&S.status==="pending"&&c.jsxs(c.Fragment,{children:[c.jsxs(je,{onClick:()=>{q(S.id),P(!1)},children:[c.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Approve"]}),c.jsxs(je,{variant:"destructive",onClick:()=>{z(S.id),P(!1)},children:[c.jsx(yh,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})]})]})}),l&&c.jsx(cl,{open:$,onOpenChange:G,children:c.jsxs(ul,{className:"max-w-2xl",children:[c.jsx(dl,{children:c.jsx(hl,{children:"Receipt Statistics"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.officialReceipts}),c.jsx("p",{className:"text-sm text-blue-800",children:"Official Receipts"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-gray-600",children:l.unofficialReceipts}),c.jsx("p",{className:"text-sm text-gray-800",children:"Unofficial Receipts"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[c.jsx("p",{className:"text-xl font-bold text-yellow-600",children:l.pendingApprovals}),c.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]}),c.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[c.jsx("p",{className:"text-xl font-bold text-green-600",children:l.approvedReceipts}),c.jsx("p",{className:"text-xs text-green-800",children:"Approved"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-xl font-bold text-red-600",children:l.rejectedReceipts}),c.jsx("p",{className:"text-xs text-red-800",children:"Rejected"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Categories Breakdown"}),c.jsx("div",{className:"space-y-2",children:Object.entries(l.categoriesBreakdown).map(([X,me])=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[c.jsx("span",{className:"text-sm",children:X}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-sm font-medium",children:[me.count," receipts"]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["",me.amount.toLocaleString()]})]})]},X))})]})]})]})})]})},oh=["Documents","Reports","Forms","Policies","Minutes","Correspondence","Other"];function k5(){const{files:n,addFile:e,deleteFile:t,user:r}=av(),[i,a]=E.useState(!1),[l,h]=E.useState(null),[p,m]=E.useState("all"),[y,w]=E.useState({name:"",category:oh[0],type:"pdf",url:""}),x=()=>{w({name:"",category:oh[0],type:"pdf",url:""})},I=P=>{var G;const $=(G=P.target.files)==null?void 0:G[0];$&&w({...y,name:$.name,type:$.type,url:URL.createObjectURL($)})},C=P=>{P.preventDefault(),e({name:y.name,type:y.type,size:Math.floor(Math.random()*5e6),url:y.url||"https://example.com/file.pdf",uploadedBy:(r==null?void 0:r.name)||"Unknown",category:y.category}),a(!1),x()},A=P=>{confirm("Are you sure you want to delete this file?")&&(t(P),(l==null?void 0:l.id)===P&&h(null))},S=p==="all"?n:n.filter(P=>P.category===p),V=P=>{if(P===0)return"0 Bytes";const $=1024,G=["Bytes","KB","MB","GB"],ee=Math.floor(Math.log(P)/Math.log($));return Math.round(P/Math.pow($,ee)*100)/100+" "+G[ee]},M=P=>c.jsx(Uo,{className:"h-8 w-8"});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"File Manager"}),c.jsx("p",{className:"text-muted-foreground",children:"Store and organize documents"})]}),c.jsxs(cl,{open:i,onOpenChange:P=>{a(P),P||x()},children:[c.jsx(Fv,{asChild:!0,children:c.jsxs(je,{children:[c.jsx(dv,{className:"mr-2 h-4 w-4"}),"Upload File"]})}),c.jsxs(ul,{className:"max-w-2xl",children:[c.jsx(dl,{children:c.jsx(hl,{children:"Upload New File"})}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"file-upload",children:"Select File"}),c.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:y.name?c.jsxs("div",{className:"space-y-2",children:[c.jsx(Uo,{className:"mx-auto h-12 w-12 text-primary"}),c.jsx("p",{className:"font-medium",children:y.name}),c.jsx(je,{type:"button",variant:"outline",size:"sm",onClick:()=>w({...y,name:"",url:""}),children:"Remove File"})]}):c.jsxs("div",{children:[c.jsx(J1,{className:"mx-auto h-12 w-12 text-muted-foreground"}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[c.jsx("span",{className:"text-primary hover:underline",children:"Upload a file"}),c.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:I})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF, DOC, DOCX, XLS, XLSX up to 50MB"})]})]})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"file-name",children:"File Name"}),c.jsx(cn,{id:"file-name",value:y.name,onChange:P=>w({...y,name:P.target.value}),placeholder:"Document name",required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"category",children:"Category"}),c.jsxs(Wi,{value:y.category,onValueChange:P=>w({...y,category:P}),children:[c.jsx(Gi,{children:c.jsx(Hi,{})}),c.jsx(Ki,{children:oh.map(P=>c.jsx(Jt,{value:P,children:P},P))})]})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(je,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),c.jsx(je,{type:"submit",children:"Upload File"})]})]})]})]})]}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ue,{children:"Filter by Category:"}),c.jsxs(Wi,{value:p,onValueChange:m,children:[c.jsx(Gi,{className:"w-48",children:c.jsx(Hi,{})}),c.jsxs(Ki,{children:[c.jsx(Jt,{value:"all",children:"All Categories"}),oh.map(P=>c.jsx(Jt,{value:P,children:P},P))]})]})]})})}),S.length===0?c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsx("p",{className:"text-center text-muted-foreground",children:"No files found. Upload your first file to get started!"})})}):c.jsx("div",{className:"grid gap-4",children:S.map(P=>c.jsx(tt,{className:"hover:shadow-md transition-shadow",children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-3 rounded-lg bg-muted",children:M(P.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-lg truncate",children:P.name}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[c.jsx(bt,{variant:"secondary",children:P.category}),c.jsx("span",{className:"text-sm text-muted-foreground",children:V(P.size)}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Uploaded by ",P.uploadedBy]}),c.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(P.uploadedAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(je,{variant:"ghost",size:"icon",onClick:()=>h(P),children:c.jsx(Vg,{className:"h-4 w-4"})}),c.jsx(je,{variant:"ghost",size:"icon",onClick:()=>A(P.id),children:c.jsx(jf,{className:"h-4 w-4 text-destructive"})})]})]})})},P.id))}),l&&c.jsx(cl,{open:!!l,onOpenChange:()=>h(null),children:c.jsxs(ul,{className:"max-w-3xl",children:[c.jsx(dl,{children:c.jsx(hl,{children:l.name})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ue,{children:"Category"}),c.jsx("p",{children:l.category})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Size"}),c.jsx("p",{children:V(l.size)})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Type"}),c.jsx("p",{children:l.type})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Uploaded By"}),c.jsx("p",{children:l.uploadedBy})]}),c.jsxs("div",{children:[c.jsx(Ue,{children:"Uploaded At"}),c.jsx("p",{children:new Date(l.uploadedAt).toLocaleString()})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(je,{className:"flex-1",children:[c.jsx(Lg,{className:"mr-2 h-4 w-4"}),"Download"]}),c.jsxs(je,{variant:"outline",className:"flex-1",children:[c.jsx(Vg,{className:"mr-2 h-4 w-4"}),"Open"]})]})]})]})})]})}function P5(){const{employees:n}=av(),[e,t]=E.useState(""),[r,i]=E.useState("all"),a=Array.from(new Set(n.map(m=>m.department))),l=n.filter(m=>{const y=m.name.toLowerCase().includes(e.toLowerCase())||m.email.toLowerCase().includes(e.toLowerCase())||m.position.toLowerCase().includes(e.toLowerCase()),w=r==="all"||m.department===r;return y&&w}),h=m=>m.split(" ").map(y=>y[0]).join("").toUpperCase(),p=m=>m==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Employee Directory"}),c.jsx("p",{className:"text-muted-foreground",children:"Browse and search staff members"})]}),c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{htmlFor:"search",children:"Search"}),c.jsx(cn,{id:"search",placeholder:"Search by name, email, or position...",value:e,onChange:m=>t(m.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ue,{children:"Filter by Department"}),c.jsxs(Wi,{value:r,onValueChange:i,children:[c.jsx(Gi,{children:c.jsx(Hi,{})}),c.jsxs(Ki,{children:[c.jsx(Jt,{value:"all",children:"All Departments"}),a.map(m=>c.jsx(Jt,{value:m,children:m},m))]})]})]})]})})}),l.length===0?c.jsx(tt,{children:c.jsx(nt,{className:"pt-6",children:c.jsx("p",{className:"text-center text-muted-foreground",children:"No employees found matching your criteria."})})}):c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(m=>c.jsxs(tt,{className:"hover:shadow-md transition-shadow",children:[c.jsx(At,{children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(iI,{className:"h-16 w-16",children:c.jsx(oI,{className:"text-lg",children:h(m.name)})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx(Vt,{className:"text-lg truncate",children:m.name}),c.jsx("p",{className:"text-sm text-muted-foreground truncate",children:m.position}),c.jsx(bt,{className:`mt-2 ${p(m.status)}`,children:m.status})]})]})}),c.jsx(nt,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(L4,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"truncate",children:m.department})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(uv,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"truncate",children:m.email})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(TL,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{children:m.phone})]})]})})]},m.id))}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsxs(tt,{children:[c.jsx(At,{children:c.jsx(Vt,{className:"text-sm",children:"Total Employees"})}),c.jsx(nt,{children:c.jsx("p",{className:"text-3xl font-bold",children:n.length})})]}),c.jsxs(tt,{children:[c.jsx(At,{children:c.jsx(Vt,{className:"text-sm",children:"Active Staff"})}),c.jsx(nt,{children:c.jsx("p",{className:"text-3xl font-bold",children:n.filter(m=>m.status==="active").length})})]}),c.jsxs(tt,{children:[c.jsx(At,{children:c.jsx(Vt,{className:"text-sm",children:"Departments"})}),c.jsx(nt,{children:c.jsx("p",{className:"text-3xl font-bold",children:a.length})})]})]})]})}class ah{static async sendMessage(e,t,r,i,a="text",l,h){try{const p={content:e,senderId:t,senderName:r,organizationId:i,timestamp:Wc(),type:a,...l&&{fileUrl:l},...h&&{fileName:h},edited:!1},m=await no(Tt(Re,"messages"),p);return await this.createMessageNotification(t,r,e,i),m.id}catch(p){throw console.error("Error sending message:",p),p}}static subscribeToMessages(e,t){const r=bn(Tt(Re,"messages"),en("organizationId","==",e),$o("timestamp","desc"),Yy(50));return Zy(r,i=>{const a=[];i.forEach(l=>{var p;const h=l.data();a.push({id:l.id,...h,timestamp:((p=h.timestamp)==null?void 0:p.toDate())||new Date})}),t(a.reverse())})}static async editMessage(e,t){try{await rs(Ye(Re,"messages",e),{content:t,edited:!0,editedAt:Wc()})}catch(r){throw console.error("Error editing message:",r),r}}static async deleteMessage(e){try{await Jo(Ye(Re,"messages",e))}catch(t){throw console.error("Error deleting message:",t),t}}static async createMessageNotification(e,t,r,i){try{const a={title:`New message from ${t}`,message:r.length>50?r.substring(0,50)+"...":r,type:"message",read:!1,createdAt:Wc(),metadata:{senderId:e,organizationId:i}};await no(Tt(Re,"notifications"),a)}catch(a){console.error("Error creating message notification:",a)}}}class Rc{static async createNotification(e,t,r,i="info",a,l){try{const h={userId:e,title:t,message:r,type:i,read:!1,createdAt:Wc(),...a&&{actionUrl:a},...l&&{metadata:l}};return(await no(Tt(Re,"notifications"),h)).id}catch(h){throw console.error("Error creating notification:",h),h}}static subscribeToNotifications(e,t){const r=bn(Tt(Re,"notifications"),en("userId","==",e),$o("createdAt","desc"),Yy(20));return Zy(r,i=>{const a=[];i.forEach(l=>{var p;const h=l.data();a.push({id:l.id,...h,createdAt:((p=h.createdAt)==null?void 0:p.toDate())||new Date})}),t(a)})}static async markAsRead(e){try{await rs(Ye(Re,"notifications",e),{read:!0})}catch(t){throw console.error("Error marking notification as read:",t),t}}static async markAllAsRead(e){try{const t=bn(Tt(Re,"notifications"),en("userId","==",e),en("read","==",!1)),r=await On(t),i=ev(Re);r.forEach(a=>{i.update(a.ref,{read:!0})}),await i.commit()}catch(t){throw console.error("Error marking all notifications as read:",t),t}}static async deleteNotification(e){try{await Jo(Ye(Re,"notifications",e))}catch(t){throw console.error("Error deleting notification:",t),t}}}const j5=n=>{const[e,t]=E.useState([]),[r,i]=E.useState(!0);E.useEffect(()=>{if(!n){i(!1);return}i(!0);const p=ah.subscribeToMessages(n,m=>{t(m),i(!1)});return()=>p()},[n]);const a=E.useCallback(async(p,m,y,w="text",x,I)=>{try{await ah.sendMessage(p,m,y,n,w,x,I)}catch(C){throw console.error("Failed to send message:",C),C}},[n]),l=E.useCallback(async(p,m)=>{try{await ah.editMessage(p,m)}catch(y){throw console.error("Failed to edit message:",y),y}},[]),h=E.useCallback(async p=>{try{await ah.deleteMessage(p)}catch(m){throw console.error("Failed to delete message:",m),m}},[]);return{messages:e,loading:r,sendMessage:a,editMessage:l,deleteMessage:h}},D5=n=>{const[e,t]=E.useState([]),[r,i]=E.useState(0),[a,l]=E.useState(!0);E.useEffect(()=>{if(!n){l(!1);return}l(!0);const w=Rc.subscribeToNotifications(n,x=>{t(x),i(x.filter(I=>!I.read).length),l(!1)});return()=>w()},[n]);const h=E.useCallback(async w=>{try{await Rc.markAsRead(w)}catch(x){throw console.error("Failed to mark notification as read:",x),x}},[]),p=E.useCallback(async()=>{try{await Rc.markAllAsRead(n)}catch(w){throw console.error("Failed to mark all notifications as read:",w),w}},[n]),m=E.useCallback(async w=>{try{await Rc.deleteNotification(w)}catch(x){throw console.error("Failed to delete notification:",x),x}},[]),y=E.useCallback(async(w,x,I="info",C,A)=>{try{await Rc.createNotification(n,w,x,I,C,A)}catch(S){throw console.error("Failed to create notification:",S),S}},[n]);return{notifications:e,unreadCount:r,loading:a,markAsRead:h,markAllAsRead:p,deleteNotification:m,createNotification:y}},M5=({organizationId:n})=>{const{user:e}=kf(),{messages:t,loading:r,sendMessage:i,editMessage:a,deleteMessage:l}=j5(n),{notifications:h,unreadCount:p,loading:m,markAsRead:y,markAllAsRead:w,deleteNotification:x}=D5((e==null?void 0:e.uid)||""),[I,C]=E.useState("chat"),[A,S]=E.useState(""),[V,M]=E.useState(null),[P,$]=E.useState(""),G=async R=>{if(R.preventDefault(),!(!A.trim()||!e))try{await i(A,e.uid,e.displayName||e.email||"Unknown"),S("")}catch(F){console.error("Failed to send message:",F)}},ee=async R=>{if(P.trim())try{await a(R,P),M(null),$("")}catch(F){console.error("Failed to edit message:",F)}},j=async R=>{if(confirm("Delete this message?"))try{await l(R)}catch(F){console.error("Failed to delete message:",F)}},N=async R=>{R.read||await y(R.id),R.actionUrl&&(window.location.href=R.actionUrl)},O=R=>{const D=new Date().getTime()-R.getTime(),fe=Math.floor(D/6e4),ye=Math.floor(D/36e5),de=Math.floor(D/864e5);return fe<1?"Just now":fe<60?`${fe}m ago`:ye<24?`${ye}h ago`:`${de}d ago`},L=R=>{switch(R){case"success":return"";case"warning":return"";case"error":return"";case"message":return"";default:return""}};return c.jsxs("div",{className:"h-full bg-white rounded-lg shadow-md flex flex-col",children:[c.jsx("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Messages & Notifications"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{onClick:()=>C("chat"),className:`flex items-center space-x-2 px-3 py-1 rounded ${I==="chat"?"bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:[c.jsx(Q1,{size:16}),c.jsx("span",{children:"Chat"})]}),c.jsxs("button",{onClick:()=>C("notifications"),className:`flex items-center space-x-2 px-3 py-1 rounded relative ${I==="notifications"?"bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:[c.jsx(M4,{size:16}),c.jsx("span",{children:"Notifications"}),p>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:p>9?"9+":p})]})]})]})}),c.jsx("div",{className:"flex-1 flex flex-col",children:I==="chat"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r?c.jsx("div",{className:"flex items-center justify-center h-32",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.length===0?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No messages yet. Start the conversation!"}):t.map(R=>c.jsx("div",{className:`flex ${R.senderId===(e==null?void 0:e.uid)?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${R.senderId===(e==null?void 0:e.uid)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[R.senderId!==(e==null?void 0:e.uid)&&c.jsx("div",{className:"text-xs font-semibold mb-1",children:R.senderName}),V===R.id?c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",value:P,onChange:F=>$(F.target.value),className:"w-full px-2 py-1 text-sm border rounded text-gray-800",onKeyPress:F=>F.key==="Enter"&&ee(R.id)}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{onClick:()=>ee(R.id),className:"text-xs bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1",children:[c.jsx(Mg,{size:12}),c.jsx("span",{children:"Save"})]}),c.jsx("button",{onClick:()=>M(null),className:"text-xs bg-gray-500 text-white px-2 py-1 rounded",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-sm",children:R.content}),R.edited&&c.jsx("div",{className:"text-xs opacity-75 mt-1",children:"(edited)"})]}),c.jsxs("div",{className:"flex items-center justify-between mt-1",children:[c.jsx("div",{className:"text-xs opacity-75",children:O(R.timestamp)}),R.senderId===(e==null?void 0:e.uid)&&V!==R.id&&c.jsxs("div",{className:"flex space-x-1 ml-2",children:[c.jsx("button",{onClick:()=>{M(R.id),$(R.content)},className:"text-xs opacity-75 hover:opacity-100",children:c.jsx(xL,{size:12})}),c.jsx("button",{onClick:()=>j(R.id),className:"text-xs opacity-75 hover:opacity-100",children:c.jsx(jf,{size:12})})]})]})]})},R.id))}),c.jsx("form",{onSubmit:G,className:"p-4 border-t",children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"text",value:A,onChange:R=>S(R.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.jsxs("button",{type:"submit",disabled:!A.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[c.jsx(kL,{size:16}),c.jsx("span",{children:"Send"})]})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your Notifications"}),p>0&&c.jsxs("button",{onClick:w,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[c.jsx(Mg,{size:16}),c.jsx("span",{children:"Mark all read"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:m?c.jsx("div",{className:"flex items-center justify-center p-8",children:c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):h.length===0?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No notifications yet"}):h.map(R=>c.jsx("div",{className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${R.read?"":"bg-blue-50"}`,onClick:()=>N(R),children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0 text-lg",children:L(R.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:`text-sm font-medium ${R.read?"text-gray-600":"text-gray-900"}`,children:R.title}),c.jsx("button",{onClick:F=>{F.stopPropagation(),x(R.id)},className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(ea,{size:16})})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:R.message}),c.jsx("p",{className:"text-xs text-gray-400 mt-2",children:O(R.createdAt)})]}),!R.read&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},R.id))})]})})]})};function O5(){const{user:n,userProfile:e,loading:t,authError:r,signOut:i,clearAuthError:a}=kf(),[l,h]=E.useState("dashboard"),[p,m]=E.useState(!1),[y,w]=E.useState(window.location.pathname),x=b1();if(Fs.useEffect(()=>{const C=()=>{w(window.location.pathname)};return window.addEventListener("popstate",C),()=>window.removeEventListener("popstate",C)},[]),t)return c.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[c.jsxs("div",{className:"w-64 border-r bg-card",children:[c.jsx("div",{className:"p-4",children:c.jsx(Kn,{className:"h-8 w-32"})}),c.jsx("div",{className:"space-y-2 p-4",children:Array.from({length:6}).map((C,A)=>c.jsx(Kn,{className:"h-10 w-full"},A))})]}),c.jsxs("div",{className:"flex flex-col flex-1",children:[c.jsx("div",{className:"border-b p-4",children:c.jsx(Kn,{className:"h-10 w-full"})}),c.jsx("div",{className:"flex-1 p-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx(Kn,{className:"h-9 w-48"}),c.jsx(Kn,{className:"h-5 w-64 mt-2"})]}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((C,A)=>c.jsx(Kn,{className:"h-32 w-full"},A))})]})})]})]});if(y==="/register")return c.jsxs(c.Fragment,{children:[c.jsx(KL,{}),c.jsx(Zd,{toasts:x.toasts,onRemove:x.removeToast})]});if(r==="pending_approval")return c.jsxs(c.Fragment,{children:[c.jsx(QL,{userEmail:(n==null?void 0:n.email)||void 0,onRetry:a,onSignOut:i}),c.jsx(Zd,{toasts:x.toasts,onRemove:x.removeToast})]});if(!n||!e)return c.jsxs(c.Fragment,{children:[c.jsx(GL,{}),c.jsx(Zd,{toasts:x.toasts,onRemove:x.removeToast})]});const I=()=>{switch(l){case"dashboard":return c.jsx(NE,{onNavigate:h});case"tasks":return c.jsx(_5,{});case"receipts":return c.jsx(R5,{currentUserId:e.uid,userRole:e.role});case"files":return c.jsx(k5,{});case"employees":return c.jsx(P5,{});case"messaging":return c.jsx(M5,{organizationId:e.organizationId||"default-org"});default:return c.jsx(NE,{onNavigate:h})}};return c.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[c.jsx(fU,{currentView:l,onViewChange:h,isOpen:p,onClose:()=>m(!1)}),c.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[c.jsx(dU,{onMenuClick:()=>m(!0)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:I()})})]}),c.jsx(Zd,{toasts:x.toasts,onRemove:x.removeToast})]})}function L5(){return c.jsx(KN,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:c.jsx(LO,{children:c.jsx(UO,{children:c.jsx(O5,{})})})})}BN.createRoot(document.getElementById("root")).render(c.jsx(L5,{}));
