function lR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function O1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mm={exports:{}},jc={},Om={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function cR(){if(P_)return nt;P_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,N={};function A(F,V,Y){this.props=F,this.context=V,this.refs=N,this.updater=Y||b}A.prototype.isReactComponent={},A.prototype.setState=function(F,V){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,V,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function L(){}L.prototype=A.prototype;function j(F,V,Y){this.props=F,this.context=V,this.refs=N,this.updater=Y||b}var k=j.prototype=new L;k.constructor=j,R(k,A.prototype),k.isPureReactComponent=!0;var U=Array.isArray,K=Object.prototype.hasOwnProperty,ee={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(F,V,Y){var te,me={},ve=null,se=null;if(V!=null)for(te in V.ref!==void 0&&(se=V.ref),V.key!==void 0&&(ve=""+V.key),V)K.call(V,te)&&!C.hasOwnProperty(te)&&(me[te]=V[te]);var ge=arguments.length-2;if(ge===1)me.children=Y;else if(1<ge){for(var le=Array(ge),de=0;de<ge;de++)le[de]=arguments[de+2];me.children=le}if(F&&F.defaultProps)for(te in ge=F.defaultProps,ge)me[te]===void 0&&(me[te]=ge[te]);return{$$typeof:n,type:F,key:ve,ref:se,props:me,_owner:ee.current}}function O(F,V){return{$$typeof:n,type:F.type,key:V,ref:F.ref,props:F.props,_owner:F._owner}}function $(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function P(F){var V={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Y){return V[Y]})}var z=/\/+/g;function M(F,V){return typeof F=="object"&&F!==null&&F.key!=null?P(""+F.key):V.toString(36)}function he(F,V,Y,te,me){var ve=typeof F;(ve==="undefined"||ve==="boolean")&&(F=null);var se=!1;if(F===null)se=!0;else switch(ve){case"string":case"number":se=!0;break;case"object":switch(F.$$typeof){case n:case e:se=!0}}if(se)return se=F,me=me(se),F=te===""?"."+M(se,0):te,U(me)?(Y="",F!=null&&(Y=F.replace(z,"$&/")+"/"),he(me,V,Y,"",function(de){return de})):me!=null&&($(me)&&(me=O(me,Y+(!me.key||se&&se.key===me.key?"":(""+me.key).replace(z,"$&/")+"/")+F)),V.push(me)),1;if(se=0,te=te===""?".":te+":",U(F))for(var ge=0;ge<F.length;ge++){ve=F[ge];var le=te+M(ve,ge);se+=he(ve,V,Y,le,me)}else if(le=_(F),typeof le=="function")for(F=le.call(F),ge=0;!(ve=F.next()).done;)ve=ve.value,le=te+M(ve,ge++),se+=he(ve,V,Y,le,me);else if(ve==="object")throw V=String(F),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return se}function xe(F,V,Y){if(F==null)return F;var te=[],me=0;return he(F,te,"","",function(ve){return V.call(Y,ve,me++)}),te}function fe(F){if(F._status===-1){var V=F._result;V=V(),V.then(function(Y){(F._status===0||F._status===-1)&&(F._status=1,F._result=Y)},function(Y){(F._status===0||F._status===-1)&&(F._status=2,F._result=Y)}),F._status===-1&&(F._status=0,F._result=V)}if(F._status===1)return F._result.default;throw F._result}var Ee={current:null},W={transition:null},q={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:W,ReactCurrentOwner:ee};function G(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:xe,forEach:function(F,V,Y){xe(F,function(){V.apply(this,arguments)},Y)},count:function(F){var V=0;return xe(F,function(){V++}),V},toArray:function(F){return xe(F,function(V){return V})||[]},only:function(F){if(!$(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},nt.Component=A,nt.Fragment=t,nt.Profiler=i,nt.PureComponent=j,nt.StrictMode=r,nt.Suspense=p,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,nt.act=G,nt.cloneElement=function(F,V,Y){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var te=R({},F.props),me=F.key,ve=F.ref,se=F._owner;if(V!=null){if(V.ref!==void 0&&(ve=V.ref,se=ee.current),V.key!==void 0&&(me=""+V.key),F.type&&F.type.defaultProps)var ge=F.type.defaultProps;for(le in V)K.call(V,le)&&!C.hasOwnProperty(le)&&(te[le]=V[le]===void 0&&ge!==void 0?ge[le]:V[le])}var le=arguments.length-2;if(le===1)te.children=Y;else if(1<le){ge=Array(le);for(var de=0;de<le;de++)ge[de]=arguments[de+2];te.children=ge}return{$$typeof:n,type:F.type,key:me,ref:ve,props:te,_owner:se}},nt.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},nt.createElement=T,nt.createFactory=function(F){var V=T.bind(null,F);return V.type=F,V},nt.createRef=function(){return{current:null}},nt.forwardRef=function(F){return{$$typeof:d,render:F}},nt.isValidElement=$,nt.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:fe}},nt.memo=function(F,V){return{$$typeof:m,type:F,compare:V===void 0?null:V}},nt.startTransition=function(F){var V=W.transition;W.transition={};try{F()}finally{W.transition=V}},nt.unstable_act=G,nt.useCallback=function(F,V){return Ee.current.useCallback(F,V)},nt.useContext=function(F){return Ee.current.useContext(F)},nt.useDebugValue=function(){},nt.useDeferredValue=function(F){return Ee.current.useDeferredValue(F)},nt.useEffect=function(F,V){return Ee.current.useEffect(F,V)},nt.useId=function(){return Ee.current.useId()},nt.useImperativeHandle=function(F,V,Y){return Ee.current.useImperativeHandle(F,V,Y)},nt.useInsertionEffect=function(F,V){return Ee.current.useInsertionEffect(F,V)},nt.useLayoutEffect=function(F,V){return Ee.current.useLayoutEffect(F,V)},nt.useMemo=function(F,V){return Ee.current.useMemo(F,V)},nt.useReducer=function(F,V,Y){return Ee.current.useReducer(F,V,Y)},nt.useRef=function(F){return Ee.current.useRef(F)},nt.useState=function(F){return Ee.current.useState(F)},nt.useSyncExternalStore=function(F,V,Y){return Ee.current.useSyncExternalStore(F,V,Y)},nt.useTransition=function(){return Ee.current.useTransition()},nt.version="18.3.1",nt}var j_;function Cy(){return j_||(j_=1,Om.exports=cR()),Om.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function uR(){if(D_)return jc;D_=1;var n=Cy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,m){var y,v={},_=null,b=null;m!==void 0&&(_=""+m),p.key!==void 0&&(_=""+p.key),p.ref!==void 0&&(b=p.ref);for(y in p)r.call(p,y)&&!a.hasOwnProperty(y)&&(v[y]=p[y]);if(d&&d.defaultProps)for(y in p=d.defaultProps,p)v[y]===void 0&&(v[y]=p[y]);return{$$typeof:e,type:d,key:_,ref:b,props:v,_owner:i.current}}return jc.Fragment=t,jc.jsx=c,jc.jsxs=c,jc}var M_;function dR(){return M_||(M_=1,Mm.exports=uR()),Mm.exports}var l=dR(),Xd={},Lm={exports:{}},Un={},Vm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function hR(){return O_||(O_=1,(function(n){function e(W,q){var G=W.length;W.push(q);e:for(;0<G;){var F=G-1>>>1,V=W[F];if(0<i(V,q))W[F]=q,W[G]=V,G=F;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var q=W[0],G=W.pop();if(G!==q){W[0]=G;e:for(var F=0,V=W.length,Y=V>>>1;F<Y;){var te=2*(F+1)-1,me=W[te],ve=te+1,se=W[ve];if(0>i(me,G))ve<V&&0>i(se,me)?(W[F]=se,W[ve]=G,F=ve):(W[F]=me,W[te]=G,F=te);else if(ve<V&&0>i(se,G))W[F]=se,W[ve]=G,F=ve;else break e}}return q}function i(W,q){var G=W.sortIndex-q.sortIndex;return G!==0?G:W.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],y=1,v=null,_=3,b=!1,R=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(W){for(var q=t(m);q!==null;){if(q.callback===null)r(m);else if(q.startTime<=W)r(m),q.sortIndex=q.expirationTime,e(p,q);else break;q=t(m)}}function U(W){if(N=!1,k(W),!R)if(t(p)!==null)R=!0,fe(K);else{var q=t(m);q!==null&&Ee(U,q.startTime-W)}}function K(W,q){R=!1,N&&(N=!1,L(T),T=-1),b=!0;var G=_;try{for(k(q),v=t(p);v!==null&&(!(v.expirationTime>q)||W&&!P());){var F=v.callback;if(typeof F=="function"){v.callback=null,_=v.priorityLevel;var V=F(v.expirationTime<=q);q=n.unstable_now(),typeof V=="function"?v.callback=V:v===t(p)&&r(p),k(q)}else r(p);v=t(p)}if(v!==null)var Y=!0;else{var te=t(m);te!==null&&Ee(U,te.startTime-q),Y=!1}return Y}finally{v=null,_=G,b=!1}}var ee=!1,C=null,T=-1,O=5,$=-1;function P(){return!(n.unstable_now()-$<O)}function z(){if(C!==null){var W=n.unstable_now();$=W;var q=!0;try{q=C(!0,W)}finally{q?M():(ee=!1,C=null)}}else ee=!1}var M;if(typeof j=="function")M=function(){j(z)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,xe=he.port2;he.port1.onmessage=z,M=function(){xe.postMessage(null)}}else M=function(){A(z,0)};function fe(W){C=W,ee||(ee=!0,M())}function Ee(W,q){T=A(function(){W(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){R||b||(R=!0,fe(K))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(W){switch(_){case 1:case 2:case 3:var q=3;break;default:q=_}var G=_;_=q;try{return W()}finally{_=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=_;_=W;try{return q()}finally{_=G}},n.unstable_scheduleCallback=function(W,q,G){var F=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?F+G:F):G=F,W){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=G+V,W={id:y++,callback:q,priorityLevel:W,startTime:G,expirationTime:V,sortIndex:-1},G>F?(W.sortIndex=G,e(m,W),t(p)===null&&W===t(m)&&(N?(L(T),T=-1):N=!0,Ee(U,G-F))):(W.sortIndex=V,e(p,W),R||b||(R=!0,fe(K))),W},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(W){var q=_;return function(){var G=_;_=q;try{return W.apply(this,arguments)}finally{_=G}}}})(Fm)),Fm}var L_;function fR(){return L_||(L_=1,Vm.exports=hR()),Vm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function pR(){if(V_)return Un;V_=1;var n=Cy(),e=fR();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){c(s,o),c(s+"Capture",o)}function c(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function _(s){return p.call(v,s)?!0:p.call(y,s)?!1:m.test(s)?v[s]=!0:(y[s]=!0,!1)}function b(s,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function R(s,o,u,f){if(o===null||typeof o>"u"||b(s,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function N(s,o,u,f,g,w,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=w,this.removeEmptyString=I}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){A[s]=new N(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];A[o]=new N(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){A[s]=new N(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){A[s]=new N(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){A[s]=new N(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){A[s]=new N(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){A[s]=new N(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){A[s]=new N(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){A[s]=new N(s,5,!1,s.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function j(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(L,j);A[o]=new N(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(L,j);A[o]=new N(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(L,j);A[o]=new N(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){A[s]=new N(s,1,!1,s.toLowerCase(),null,!1,!1)}),A.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){A[s]=new N(s,1,!1,s.toLowerCase(),null,!0,!0)});function k(s,o,u,f){var g=A.hasOwnProperty(o)?A[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(R(o,u,g,f)&&(u=null),f||g===null?_(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?s.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?s.setAttributeNS(f,o,u):s.setAttribute(o,u))))}var U=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ee=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),P=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),W=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var G=Object.assign,F;function V(s){if(F===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+s}var Y=!1;function te(s,o){if(!s||Y)return"";Y=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ne){var f=ne}Reflect.construct(s,[],o)}else{try{o.call()}catch(ne){f=ne}s.call(o.prototype)}else{try{throw Error()}catch(ne){f=ne}s()}}catch(ne){if(ne&&f&&typeof ne.stack=="string"){for(var g=ne.stack.split(`
`),w=f.stack.split(`
`),I=g.length-1,B=w.length-1;1<=I&&0<=B&&g[I]!==w[B];)B--;for(;1<=I&&0<=B;I--,B--)if(g[I]!==w[B]){if(I!==1||B!==1)do if(I--,B--,0>B||g[I]!==w[B]){var H=`
`+g[I].replace(" at new "," at ");return s.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",s.displayName)),H}while(1<=I&&0<=B);break}}}finally{Y=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?V(s):""}function me(s){switch(s.tag){case 5:return V(s.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return s=te(s.type,!1),s;case 11:return s=te(s.type.render,!1),s;case 1:return s=te(s.type,!0),s;default:return""}}function ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case ee:return"Portal";case O:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case he:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case P:return(s.displayName||"Context")+".Consumer";case $:return(s._context.displayName||"Context")+".Provider";case z:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case xe:return o=s.displayName||null,o!==null?o:ve(s.type)||"Memo";case fe:o=s._payload,s=s._init;try{return ve(s(o))}catch{}}return null}function se(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(o);case 8:return o===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ge(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function le(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function de(s){var o=le(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(I){f=""+I,w.call(this,I)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Te(s){s._valueTracker||(s._valueTracker=de(s))}function Ve(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return s&&(f=le(s)?s.checked?"true":"false":s.value),s=f,s!==u?(o.setValue(s),!0):!1}function tt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ht(s,o){var u=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Wn(s,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=ge(o.value!=null?o.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Zt(s,o){o=o.checked,o!=null&&k(s,"checked",o,!1)}function ln(s,o){Zt(s,o);var u=ge(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?mt(s,o.type,u):o.hasOwnProperty("defaultValue")&&mt(s,o.type,ge(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Wr(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function mt(s,o,u){(o!=="number"||tt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var It=Array.isArray;function Hn(s,o,u,f){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&f&&(s[u].defaultSelected=!0)}else{for(u=""+ge(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function _i(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ie(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(It(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:ge(u)}}function $e(s,o){var u=ge(o.value),f=ge(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function $t(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function yn(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sr(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?yn(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var cn,_a=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return s(o,u,f,g)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(cn=cn||document.createElement("div"),cn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=cn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function So(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fu=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(s){Fu.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ei[o]=Ei[s]})});function Si(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ei.hasOwnProperty(s)&&Ei[s]?(""+o).trim():o+"px"}function Ea(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Si(u,o[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,g):s[u]=g}}var ql=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(s,o){if(o){if(ql[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Sa(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bi=null;function ba(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Cs=null,Rs=null,Mt=null;function Wl(s){if(s=vc(s)){if(typeof Cs!="function")throw Error(t(280));var o=s.stateNode;o&&(o=hd(o),Cs(s.stateNode,s.type,o))}}function Ni(s){Rs?Mt?Mt.push(s):Mt=[s]:Rs=s}function Ti(){if(Rs){var s=Rs,o=Mt;if(Mt=Rs=null,Wl(s),o)for(s=0;s<o.length;s++)Wl(o[s])}}function Uu(s,o){return s(o)}function zu(){}var Hr=!1;function $u(s,o,u){if(Hr)return s(o,u);Hr=!0;try{return Uu(s,o,u)}finally{Hr=!1,(Rs!==null||Mt!==null)&&(zu(),Ti())}}function bo(s,o){var u=s.stateNode;if(u===null)return null;var f=hd(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Ii=!1;if(d)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{Ii=!1}function Bu(s,o,u,f,g,w,I,B,H){var ne=Array.prototype.slice.call(arguments,3);try{o.apply(u,ne)}catch(ue){this.onError(ue)}}var ks=!1,Gr=null,Na=!1,dr=null,qu={onError:function(s){ks=!0,Gr=s}};function Wu(s,o,u,f,g,w,I,B,H){ks=!1,Gr=null,Bu.apply(qu,arguments)}function Hl(s,o,u,f,g,w,I,B,H){if(Wu.apply(this,arguments),ks){if(ks){var ne=Gr;ks=!1,Gr=null}else throw Error(t(198));Na||(Na=!0,dr=ne)}}function Nr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Gl(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Hu(s){if(Nr(s)!==s)throw Error(t(188))}function Gu(s){var o=s.alternate;if(!o){if(o=Nr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,f=o;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return Hu(g),s;if(w===f)return Hu(g),o;w=w.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=w;else{for(var I=!1,B=g.child;B;){if(B===u){I=!0,u=g,f=w;break}if(B===f){I=!0,f=g,u=w;break}B=B.sibling}if(!I){for(B=w.child;B;){if(B===u){I=!0,u=w,f=g;break}if(B===f){I=!0,f=w,u=g;break}B=B.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Ku(s){return s=Gu(s),s!==null?No(s):null}function No(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=No(s);if(o!==null)return o;s=s.sibling}return null}var Kl=e.unstable_scheduleCallback,Ta=e.unstable_cancelCallback,To=e.unstable_shouldYield,Ps=e.unstable_requestPaint,bt=e.unstable_now,hp=e.unstable_getCurrentPriorityLevel,Ia=e.unstable_ImmediatePriority,Ql=e.unstable_UserBlockingPriority,Io=e.unstable_NormalPriority,Yl=e.unstable_LowPriority,Aa=e.unstable_IdlePriority,Ao=null,Gn=null;function Qu(s){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Ao,s,void 0,(s.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Co,Kr=Math.log,hr=Math.LN2;function Co(s){return s>>>=0,s===0?32:31-(Kr(s)/hr|0)|0}var Qr=64,Ci=4194304;function ut(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function js(s,o){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,w=s.pingedLanes,I=u&268435455;if(I!==0){var B=I&~g;B!==0?f=ut(B):(w&=I,w!==0&&(f=ut(w)))}else I=u&~g,I!==0?f=ut(I):w!==0&&(f=ut(w));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,w=o&-o,g>=w||g===16&&(w&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)u=31-Kn(o),g=1<<u,f|=s[u],o&=~g;return f}function Ro(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(s,o){for(var u=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,w=s.pendingLanes;0<w;){var I=31-Kn(w),B=1<<I,H=g[I];H===-1?((B&u)===0||(B&f)!==0)&&(g[I]=Ro(B,o)):H<=o&&(s.expiredLanes|=B),w&=~B}}function Xl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Jl(){var s=Qr;return Qr<<=1,(Qr&4194240)===0&&(Qr=64),s}function Zl(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Po(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Kn(o),s[o]=u}function fp(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-Kn(u),w=1<<g;o[g]=0,f[g]=-1,s[g]=-1,u&=~w}}function ec(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var f=31-Kn(u),g=1<<f;g&o|s[f]&o&&(s[f]|=o),u&=~g}}var ot=0;function Yr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var tc,Ca,nc,rc,sc,Xr=!1,Ra=[],Jr=null,Zr=null,un=null,jo=new Map,Ds=new Map,Qn=[],Yu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ri(s,o){switch(s){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":jo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(o.pointerId)}}function Tr(s,o,u,f,g,w){return s===null||s.nativeEvent!==w?(s={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[g]},o!==null&&(o=vc(o),o!==null&&Ca(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function Xu(s,o,u,f,g){switch(o){case"focusin":return Jr=Tr(Jr,s,o,u,f,g),!0;case"dragenter":return Zr=Tr(Zr,s,o,u,f,g),!0;case"mouseover":return un=Tr(un,s,o,u,f,g),!0;case"pointerover":var w=g.pointerId;return jo.set(w,Tr(jo.get(w)||null,s,o,u,f,g)),!0;case"gotpointercapture":return w=g.pointerId,Ds.set(w,Tr(Ds.get(w)||null,s,o,u,f,g)),!0}return!1}function ka(s){var o=Lo(s.target);if(o!==null){var u=Nr(o);if(u!==null){if(o=u.tag,o===13){if(o=Gl(u),o!==null){s.blockedOn=o,sc(s.priority,function(){nc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yt(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Pa(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);bi=f,u.target.dispatchEvent(f),bi=null}else return o=vc(u),o!==null&&Ca(o),s.blockedOn=u,!1;o.shift()}return!0}function Ju(s,o,u){yt(s)&&u.delete(o)}function pp(){Xr=!1,Jr!==null&&yt(Jr)&&(Jr=null),Zr!==null&&yt(Zr)&&(Zr=null),un!==null&&yt(un)&&(un=null),jo.forEach(Ju),Ds.forEach(Ju)}function ki(s,o){s.blockedOn===o&&(s.blockedOn=null,Xr||(Xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pp)))}function Pi(s){function o(g){return ki(g,s)}if(0<Ra.length){ki(Ra[0],s);for(var u=1;u<Ra.length;u++){var f=Ra[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Jr!==null&&ki(Jr,s),Zr!==null&&ki(Zr,s),un!==null&&ki(un,s),jo.forEach(o),Ds.forEach(o),u=0;u<Qn.length;u++)f=Qn[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<Qn.length&&(u=Qn[0],u.blockedOn===null);)ka(u),u.blockedOn===null&&Qn.shift()}var Ms=U.ReactCurrentBatchConfig,Os=!0;function es(s,o,u,f){var g=ot,w=Ms.transition;Ms.transition=null;try{ot=1,ic(s,o,u,f)}finally{ot=g,Ms.transition=w}}function Zu(s,o,u,f){var g=ot,w=Ms.transition;Ms.transition=null;try{ot=4,ic(s,o,u,f)}finally{ot=g,Ms.transition=w}}function ic(s,o,u,f){if(Os){var g=Pa(s,o,u,f);if(g===null)Np(s,o,f,ts,u),Ri(s,f);else if(Xu(g,s,o,u,f))f.stopPropagation();else if(Ri(s,f),o&4&&-1<Yu.indexOf(s)){for(;g!==null;){var w=vc(g);if(w!==null&&tc(w),w=Pa(s,o,u,f),w===null&&Np(s,o,f,ts,u),w===g)break;g=w}g!==null&&f.stopPropagation()}else Np(s,o,f,null,u)}}var ts=null;function Pa(s,o,u,f){if(ts=null,s=ba(f),s=Lo(s),s!==null)if(o=Nr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Gl(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return ts=s,null}function ja(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hp()){case Ia:return 1;case Ql:return 4;case Io:case Yl:return 16;case Aa:return 536870912;default:return 16}default:return 16}}var Yn=null,Da=null,Ls=null;function ed(){if(Ls)return Ls;var s,o=Da,u=o.length,f,g="value"in Yn?Yn.value:Yn.textContent,w=g.length;for(s=0;s<u&&o[s]===g[s];s++);var I=u-s;for(f=1;f<=I&&o[u-f]===g[w-f];f++);return Ls=g.slice(s,1<f?1-f:void 0)}function Do(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ns(){return!0}function oc(){return!1}function vn(s){function o(u,f,g,w,I){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(u=s[B],this[B]=u?u(w):w[B]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ns:oc,this.isPropagationStopped=oc,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ns)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ns)},persist:function(){},isPersistent:ns}),o}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mo=vn(rs),ji=G({},rs,{view:0,detail:0}),Ma=vn(ji),Oa,La,Xn,Oo=G({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ge,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Xn&&(Xn&&s.type==="mousemove"?(Oa=s.screenX-Xn.screenX,La=s.screenY-Xn.screenY):La=Oa=0,Xn=s),Oa)},movementY:function(s){return"movementY"in s?s.movementY:La}}),ac=vn(Oo),td=G({},Oo,{dataTransfer:0}),nd=vn(td),Va=G({},ji,{relatedTarget:0}),dn=vn(Va),rd=G({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),sd=vn(rd),Di=G({},rs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),h=vn(Di),x=G({},rs,{data:0}),S=vn(x),D={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},re={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function we(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=re[s])?!!o[s]:!1}function Ge(){return we}var Ft=G({},ji,{key:function(s){if(s.key){var o=D[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Do(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?J[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ge,charCode:function(s){return s.type==="keypress"?Do(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Do(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pt=vn(Ft),Bt=G({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jn=vn(Bt),Vs=G({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ge}),ss=vn(Vs),is=G({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fa=vn(is),lc=G({},Oo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),nC=vn(lc),rC=[9,13,27,32],mp=d&&"CompositionEvent"in window,cc=null;d&&"documentMode"in document&&(cc=document.documentMode);var sC=d&&"TextEvent"in window&&!cc,bw=d&&(!mp||cc&&8<cc&&11>=cc),Nw=" ",Tw=!1;function Iw(s,o){switch(s){case"keyup":return rC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aw(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ua=!1;function iC(s,o){switch(s){case"compositionend":return Aw(o);case"keypress":return o.which!==32?null:(Tw=!0,Nw);case"textInput":return s=o.data,s===Nw&&Tw?null:s;default:return null}}function oC(s,o){if(Ua)return s==="compositionend"||!mp&&Iw(s,o)?(s=ed(),Ls=Da=Yn=null,Ua=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bw&&o.locale!=="ko"?null:o.data;default:return null}}var aC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cw(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!aC[s.type]:o==="textarea"}function Rw(s,o,u,f){Ni(f),o=cd(o,"onChange"),0<o.length&&(u=new Mo("onChange","change",null,u,f),s.push({event:u,listeners:o}))}var uc=null,dc=null;function lC(s){Kw(s,0)}function id(s){var o=Wa(s);if(Ve(o))return s}function cC(s,o){if(s==="change")return o}var kw=!1;if(d){var gp;if(d){var yp="oninput"in document;if(!yp){var Pw=document.createElement("div");Pw.setAttribute("oninput","return;"),yp=typeof Pw.oninput=="function"}gp=yp}else gp=!1;kw=gp&&(!document.documentMode||9<document.documentMode)}function jw(){uc&&(uc.detachEvent("onpropertychange",Dw),dc=uc=null)}function Dw(s){if(s.propertyName==="value"&&id(dc)){var o=[];Rw(o,dc,s,ba(s)),$u(lC,o)}}function uC(s,o,u){s==="focusin"?(jw(),uc=o,dc=u,uc.attachEvent("onpropertychange",Dw)):s==="focusout"&&jw()}function dC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return id(dc)}function hC(s,o){if(s==="click")return id(o)}function fC(s,o){if(s==="input"||s==="change")return id(o)}function pC(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Ir=typeof Object.is=="function"?Object.is:pC;function hc(s,o){if(Ir(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!p.call(o,g)||!Ir(s[g],o[g]))return!1}return!0}function Mw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ow(s,o){var u=Mw(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=o&&f>=o)return{node:u,offset:o-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Mw(u)}}function Lw(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Lw(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Vw(){for(var s=window,o=tt();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=tt(s.document)}return o}function vp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function mC(s){var o=Vw(),u=s.focusedElem,f=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&Lw(u.ownerDocument.documentElement,u)){if(f!==null&&vp(u)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,w=Math.min(f.start,g);f=f.end===void 0?w:Math.min(f.end,g),!s.extend&&w>f&&(g=f,f=w,w=g),g=Ow(u,w);var I=Ow(u,f);g&&I&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==I.node||s.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),w>f?(s.addRange(o),s.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var gC=d&&"documentMode"in document&&11>=document.documentMode,za=null,wp=null,fc=null,xp=!1;function Fw(s,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;xp||za==null||za!==tt(f)||(f=za,"selectionStart"in f&&vp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),fc&&hc(fc,f)||(fc=f,f=cd(wp,"onSelect"),0<f.length&&(o=new Mo("onSelect","select",null,o,u),s.push({event:o,listeners:f}),o.target=za)))}function od(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var $a={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},_p={},Uw={};d&&(Uw=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function ad(s){if(_p[s])return _p[s];if(!$a[s])return s;var o=$a[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Uw)return _p[s]=o[u];return s}var zw=ad("animationend"),$w=ad("animationiteration"),Bw=ad("animationstart"),qw=ad("transitionend"),Ww=new Map,Hw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(s,o){Ww.set(s,o),a(o,[s])}for(var Ep=0;Ep<Hw.length;Ep++){var Sp=Hw[Ep],yC=Sp.toLowerCase(),vC=Sp[0].toUpperCase()+Sp.slice(1);Mi(yC,"on"+vC)}Mi(zw,"onAnimationEnd"),Mi($w,"onAnimationIteration"),Mi(Bw,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(qw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wC=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function Gw(s,o,u){var f=s.type||"unknown-event";s.currentTarget=u,Hl(f,o,void 0,s),s.currentTarget=null}function Kw(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],g=f.event;f=f.listeners;e:{var w=void 0;if(o)for(var I=f.length-1;0<=I;I--){var B=f[I],H=B.instance,ne=B.currentTarget;if(B=B.listener,H!==w&&g.isPropagationStopped())break e;Gw(g,B,ne),w=H}else for(I=0;I<f.length;I++){if(B=f[I],H=B.instance,ne=B.currentTarget,B=B.listener,H!==w&&g.isPropagationStopped())break e;Gw(g,B,ne),w=H}}}if(Na)throw s=dr,Na=!1,dr=null,s}function Nt(s,o){var u=o[kp];u===void 0&&(u=o[kp]=new Set);var f=s+"__bubble";u.has(f)||(Qw(o,s,2,!1),u.add(f))}function bp(s,o,u){var f=0;o&&(f|=4),Qw(u,s,f,o)}var ld="_reactListening"+Math.random().toString(36).slice(2);function mc(s){if(!s[ld]){s[ld]=!0,r.forEach(function(u){u!=="selectionchange"&&(wC.has(u)||bp(u,!1,s),bp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[ld]||(o[ld]=!0,bp("selectionchange",!1,o))}}function Qw(s,o,u,f){switch(ja(o)){case 1:var g=es;break;case 4:g=Zu;break;default:g=ic}u=g.bind(null,o,u,s),g=void 0,!Ii||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function Np(s,o,u,f,g){var w=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var I=f.tag;if(I===3||I===4){var B=f.stateNode.containerInfo;if(B===g||B.nodeType===8&&B.parentNode===g)break;if(I===4)for(I=f.return;I!==null;){var H=I.tag;if((H===3||H===4)&&(H=I.stateNode.containerInfo,H===g||H.nodeType===8&&H.parentNode===g))return;I=I.return}for(;B!==null;){if(I=Lo(B),I===null)return;if(H=I.tag,H===5||H===6){f=w=I;continue e}B=B.parentNode}}f=f.return}$u(function(){var ne=w,ue=ba(u),pe=[];e:{var ce=Ww.get(s);if(ce!==void 0){var Se=Mo,Ce=s;switch(s){case"keypress":if(Do(u)===0)break e;case"keydown":case"keyup":Se=pt;break;case"focusin":Ce="focus",Se=dn;break;case"focusout":Ce="blur",Se=dn;break;case"beforeblur":case"afterblur":Se=dn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=ss;break;case zw:case $w:case Bw:Se=sd;break;case qw:Se=Fa;break;case"scroll":Se=Ma;break;case"wheel":Se=nC;break;case"copy":case"cut":case"paste":Se=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Jn}var je=(o&4)!==0,Ut=!je&&s==="scroll",X=je?ce!==null?ce+"Capture":null:ce;je=[];for(var Q=ne,Z;Q!==null;){Z=Q;var ye=Z.stateNode;if(Z.tag===5&&ye!==null&&(Z=ye,X!==null&&(ye=bo(Q,X),ye!=null&&je.push(gc(Q,ye,Z)))),Ut)break;Q=Q.return}0<je.length&&(ce=new Se(ce,Ce,null,u,ue),pe.push({event:ce,listeners:je}))}}if((o&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",Se=s==="mouseout"||s==="pointerout",ce&&u!==bi&&(Ce=u.relatedTarget||u.fromElement)&&(Lo(Ce)||Ce[Fs]))break e;if((Se||ce)&&(ce=ue.window===ue?ue:(ce=ue.ownerDocument)?ce.defaultView||ce.parentWindow:window,Se?(Ce=u.relatedTarget||u.toElement,Se=ne,Ce=Ce?Lo(Ce):null,Ce!==null&&(Ut=Nr(Ce),Ce!==Ut||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Se=null,Ce=ne),Se!==Ce)){if(je=ac,ye="onMouseLeave",X="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(je=Jn,ye="onPointerLeave",X="onPointerEnter",Q="pointer"),Ut=Se==null?ce:Wa(Se),Z=Ce==null?ce:Wa(Ce),ce=new je(ye,Q+"leave",Se,u,ue),ce.target=Ut,ce.relatedTarget=Z,ye=null,Lo(ue)===ne&&(je=new je(X,Q+"enter",Ce,u,ue),je.target=Z,je.relatedTarget=Ut,ye=je),Ut=ye,Se&&Ce)t:{for(je=Se,X=Ce,Q=0,Z=je;Z;Z=Ba(Z))Q++;for(Z=0,ye=X;ye;ye=Ba(ye))Z++;for(;0<Q-Z;)je=Ba(je),Q--;for(;0<Z-Q;)X=Ba(X),Z--;for(;Q--;){if(je===X||X!==null&&je===X.alternate)break t;je=Ba(je),X=Ba(X)}je=null}else je=null;Se!==null&&Yw(pe,ce,Se,je,!1),Ce!==null&&Ut!==null&&Yw(pe,Ut,Ce,je,!0)}}e:{if(ce=ne?Wa(ne):window,Se=ce.nodeName&&ce.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ce.type==="file")var De=cC;else if(Cw(ce))if(kw)De=fC;else{De=dC;var Ue=uC}else(Se=ce.nodeName)&&Se.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(De=hC);if(De&&(De=De(s,ne))){Rw(pe,De,u,ue);break e}Ue&&Ue(s,ce,ne),s==="focusout"&&(Ue=ce._wrapperState)&&Ue.controlled&&ce.type==="number"&&mt(ce,"number",ce.value)}switch(Ue=ne?Wa(ne):window,s){case"focusin":(Cw(Ue)||Ue.contentEditable==="true")&&(za=Ue,wp=ne,fc=null);break;case"focusout":fc=wp=za=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,Fw(pe,u,ue);break;case"selectionchange":if(gC)break;case"keydown":case"keyup":Fw(pe,u,ue)}var ze;if(mp)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Ua?Iw(s,u)&&(We="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(We="onCompositionStart");We&&(bw&&u.locale!=="ko"&&(Ua||We!=="onCompositionStart"?We==="onCompositionEnd"&&Ua&&(ze=ed()):(Yn=ue,Da="value"in Yn?Yn.value:Yn.textContent,Ua=!0)),Ue=cd(ne,We),0<Ue.length&&(We=new S(We,s,null,u,ue),pe.push({event:We,listeners:Ue}),ze?We.data=ze:(ze=Aw(u),ze!==null&&(We.data=ze)))),(ze=sC?iC(s,u):oC(s,u))&&(ne=cd(ne,"onBeforeInput"),0<ne.length&&(ue=new S("onBeforeInput","beforeinput",null,u,ue),pe.push({event:ue,listeners:ne}),ue.data=ze))}Kw(pe,o)})}function gc(s,o,u){return{instance:s,listener:o,currentTarget:u}}function cd(s,o){for(var u=o+"Capture",f=[];s!==null;){var g=s,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=bo(s,u),w!=null&&f.unshift(gc(s,w,g)),w=bo(s,o),w!=null&&f.push(gc(s,w,g))),s=s.return}return f}function Ba(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Yw(s,o,u,f,g){for(var w=o._reactName,I=[];u!==null&&u!==f;){var B=u,H=B.alternate,ne=B.stateNode;if(H!==null&&H===f)break;B.tag===5&&ne!==null&&(B=ne,g?(H=bo(u,w),H!=null&&I.unshift(gc(u,H,B))):g||(H=bo(u,w),H!=null&&I.push(gc(u,H,B)))),u=u.return}I.length!==0&&s.push({event:o,listeners:I})}var xC=/\r\n?/g,_C=/\u0000|\uFFFD/g;function Xw(s){return(typeof s=="string"?s:""+s).replace(xC,`
`).replace(_C,"")}function ud(s,o,u){if(o=Xw(o),Xw(s)!==o&&u)throw Error(t(425))}function dd(){}var Tp=null,Ip=null;function Ap(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Cp=typeof setTimeout=="function"?setTimeout:void 0,EC=typeof clearTimeout=="function"?clearTimeout:void 0,Jw=typeof Promise=="function"?Promise:void 0,SC=typeof queueMicrotask=="function"?queueMicrotask:typeof Jw<"u"?function(s){return Jw.resolve(null).then(s).catch(bC)}:Cp;function bC(s){setTimeout(function(){throw s})}function Rp(s,o){var u=o,f=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){s.removeChild(g),Pi(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Pi(o)}function Oi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Zw(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var qa=Math.random().toString(36).slice(2),os="__reactFiber$"+qa,yc="__reactProps$"+qa,Fs="__reactContainer$"+qa,kp="__reactEvents$"+qa,NC="__reactListeners$"+qa,TC="__reactHandles$"+qa;function Lo(s){var o=s[os];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Fs]||u[os]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Zw(s);s!==null;){if(u=s[os])return u;s=Zw(s)}return o}s=u,u=s.parentNode}return null}function vc(s){return s=s[os]||s[Fs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Wa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function hd(s){return s[yc]||null}var Pp=[],Ha=-1;function Li(s){return{current:s}}function Tt(s){0>Ha||(s.current=Pp[Ha],Pp[Ha]=null,Ha--)}function wt(s,o){Ha++,Pp[Ha]=s.current,s.current=o}var Vi={},wn=Li(Vi),Mn=Li(!1),Vo=Vi;function Ga(s,o){var u=s.type.contextTypes;if(!u)return Vi;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=o[w];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function On(s){return s=s.childContextTypes,s!=null}function fd(){Tt(Mn),Tt(wn)}function ex(s,o,u){if(wn.current!==Vi)throw Error(t(168));wt(wn,o),wt(Mn,u)}function tx(s,o,u){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,se(s)||"Unknown",g));return G({},u,f)}function pd(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vi,Vo=wn.current,wt(wn,s),wt(Mn,Mn.current),!0}function nx(s,o,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=tx(s,o,Vo),f.__reactInternalMemoizedMergedChildContext=s,Tt(Mn),Tt(wn),wt(wn,s)):Tt(Mn),wt(Mn,u)}var Us=null,md=!1,jp=!1;function rx(s){Us===null?Us=[s]:Us.push(s)}function IC(s){md=!0,rx(s)}function Fi(){if(!jp&&Us!==null){jp=!0;var s=0,o=ot;try{var u=Us;for(ot=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}Us=null,md=!1}catch(g){throw Us!==null&&(Us=Us.slice(s+1)),Kl(Ia,Fi),g}finally{ot=o,jp=!1}}return null}var Ka=[],Qa=0,gd=null,yd=0,fr=[],pr=0,Fo=null,zs=1,$s="";function Uo(s,o){Ka[Qa++]=yd,Ka[Qa++]=gd,gd=s,yd=o}function sx(s,o,u){fr[pr++]=zs,fr[pr++]=$s,fr[pr++]=Fo,Fo=s;var f=zs;s=$s;var g=32-Kn(f)-1;f&=~(1<<g),u+=1;var w=32-Kn(o)+g;if(30<w){var I=g-g%5;w=(f&(1<<I)-1).toString(32),f>>=I,g-=I,zs=1<<32-Kn(o)+g|u<<g|f,$s=w+s}else zs=1<<w|u<<g|f,$s=s}function Dp(s){s.return!==null&&(Uo(s,1),sx(s,1,0))}function Mp(s){for(;s===gd;)gd=Ka[--Qa],Ka[Qa]=null,yd=Ka[--Qa],Ka[Qa]=null;for(;s===Fo;)Fo=fr[--pr],fr[pr]=null,$s=fr[--pr],fr[pr]=null,zs=fr[--pr],fr[pr]=null}var Zn=null,er=null,At=!1,Ar=null;function ix(s,o){var u=vr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function ox(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Zn=s,er=Oi(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Zn=s,er=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Fo!==null?{id:zs,overflow:$s}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=vr(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,Zn=s,er=null,!0):!1;default:return!1}}function Op(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Lp(s){if(At){var o=er;if(o){var u=o;if(!ox(s,o)){if(Op(s))throw Error(t(418));o=Oi(u.nextSibling);var f=Zn;o&&ox(s,o)?ix(f,u):(s.flags=s.flags&-4097|2,At=!1,Zn=s)}}else{if(Op(s))throw Error(t(418));s.flags=s.flags&-4097|2,At=!1,Zn=s}}}function ax(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Zn=s}function vd(s){if(s!==Zn)return!1;if(!At)return ax(s),At=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Ap(s.type,s.memoizedProps)),o&&(o=er)){if(Op(s))throw lx(),Error(t(418));for(;o;)ix(s,o),o=Oi(o.nextSibling)}if(ax(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){er=Oi(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}er=null}}else er=Zn?Oi(s.stateNode.nextSibling):null;return!0}function lx(){for(var s=er;s;)s=Oi(s.nextSibling)}function Ya(){er=Zn=null,At=!1}function Vp(s){Ar===null?Ar=[s]:Ar.push(s)}var AC=U.ReactCurrentBatchConfig;function wc(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var g=f,w=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(I){var B=g.refs;I===null?delete B[w]:B[w]=I},o._stringRef=w,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function wd(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function cx(s){var o=s._init;return o(s._payload)}function ux(s){function o(X,Q){if(s){var Z=X.deletions;Z===null?(X.deletions=[Q],X.flags|=16):Z.push(Q)}}function u(X,Q){if(!s)return null;for(;Q!==null;)o(X,Q),Q=Q.sibling;return null}function f(X,Q){for(X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function g(X,Q){return X=Gi(X,Q),X.index=0,X.sibling=null,X}function w(X,Q,Z){return X.index=Z,s?(Z=X.alternate,Z!==null?(Z=Z.index,Z<Q?(X.flags|=2,Q):Z):(X.flags|=2,Q)):(X.flags|=1048576,Q)}function I(X){return s&&X.alternate===null&&(X.flags|=2),X}function B(X,Q,Z,ye){return Q===null||Q.tag!==6?(Q=Cm(Z,X.mode,ye),Q.return=X,Q):(Q=g(Q,Z),Q.return=X,Q)}function H(X,Q,Z,ye){var De=Z.type;return De===C?ue(X,Q,Z.props.children,ye,Z.key):Q!==null&&(Q.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===fe&&cx(De)===Q.type)?(ye=g(Q,Z.props),ye.ref=wc(X,Q,Z),ye.return=X,ye):(ye=Bd(Z.type,Z.key,Z.props,null,X.mode,ye),ye.ref=wc(X,Q,Z),ye.return=X,ye)}function ne(X,Q,Z,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==Z.containerInfo||Q.stateNode.implementation!==Z.implementation?(Q=Rm(Z,X.mode,ye),Q.return=X,Q):(Q=g(Q,Z.children||[]),Q.return=X,Q)}function ue(X,Q,Z,ye,De){return Q===null||Q.tag!==7?(Q=Ko(Z,X.mode,ye,De),Q.return=X,Q):(Q=g(Q,Z),Q.return=X,Q)}function pe(X,Q,Z){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Cm(""+Q,X.mode,Z),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case K:return Z=Bd(Q.type,Q.key,Q.props,null,X.mode,Z),Z.ref=wc(X,null,Q),Z.return=X,Z;case ee:return Q=Rm(Q,X.mode,Z),Q.return=X,Q;case fe:var ye=Q._init;return pe(X,ye(Q._payload),Z)}if(It(Q)||q(Q))return Q=Ko(Q,X.mode,Z,null),Q.return=X,Q;wd(X,Q)}return null}function ce(X,Q,Z,ye){var De=Q!==null?Q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return De!==null?null:B(X,Q,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case K:return Z.key===De?H(X,Q,Z,ye):null;case ee:return Z.key===De?ne(X,Q,Z,ye):null;case fe:return De=Z._init,ce(X,Q,De(Z._payload),ye)}if(It(Z)||q(Z))return De!==null?null:ue(X,Q,Z,ye,null);wd(X,Z)}return null}function Se(X,Q,Z,ye,De){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return X=X.get(Z)||null,B(Q,X,""+ye,De);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case K:return X=X.get(ye.key===null?Z:ye.key)||null,H(Q,X,ye,De);case ee:return X=X.get(ye.key===null?Z:ye.key)||null,ne(Q,X,ye,De);case fe:var Ue=ye._init;return Se(X,Q,Z,Ue(ye._payload),De)}if(It(ye)||q(ye))return X=X.get(Z)||null,ue(Q,X,ye,De,null);wd(Q,ye)}return null}function Ce(X,Q,Z,ye){for(var De=null,Ue=null,ze=Q,We=Q=0,nn=null;ze!==null&&We<Z.length;We++){ze.index>We?(nn=ze,ze=null):nn=ze.sibling;var ct=ce(X,ze,Z[We],ye);if(ct===null){ze===null&&(ze=nn);break}s&&ze&&ct.alternate===null&&o(X,ze),Q=w(ct,Q,We),Ue===null?De=ct:Ue.sibling=ct,Ue=ct,ze=nn}if(We===Z.length)return u(X,ze),At&&Uo(X,We),De;if(ze===null){for(;We<Z.length;We++)ze=pe(X,Z[We],ye),ze!==null&&(Q=w(ze,Q,We),Ue===null?De=ze:Ue.sibling=ze,Ue=ze);return At&&Uo(X,We),De}for(ze=f(X,ze);We<Z.length;We++)nn=Se(ze,X,We,Z[We],ye),nn!==null&&(s&&nn.alternate!==null&&ze.delete(nn.key===null?We:nn.key),Q=w(nn,Q,We),Ue===null?De=nn:Ue.sibling=nn,Ue=nn);return s&&ze.forEach(function(Ki){return o(X,Ki)}),At&&Uo(X,We),De}function je(X,Q,Z,ye){var De=q(Z);if(typeof De!="function")throw Error(t(150));if(Z=De.call(Z),Z==null)throw Error(t(151));for(var Ue=De=null,ze=Q,We=Q=0,nn=null,ct=Z.next();ze!==null&&!ct.done;We++,ct=Z.next()){ze.index>We?(nn=ze,ze=null):nn=ze.sibling;var Ki=ce(X,ze,ct.value,ye);if(Ki===null){ze===null&&(ze=nn);break}s&&ze&&Ki.alternate===null&&o(X,ze),Q=w(Ki,Q,We),Ue===null?De=Ki:Ue.sibling=Ki,Ue=Ki,ze=nn}if(ct.done)return u(X,ze),At&&Uo(X,We),De;if(ze===null){for(;!ct.done;We++,ct=Z.next())ct=pe(X,ct.value,ye),ct!==null&&(Q=w(ct,Q,We),Ue===null?De=ct:Ue.sibling=ct,Ue=ct);return At&&Uo(X,We),De}for(ze=f(X,ze);!ct.done;We++,ct=Z.next())ct=Se(ze,X,We,ct.value,ye),ct!==null&&(s&&ct.alternate!==null&&ze.delete(ct.key===null?We:ct.key),Q=w(ct,Q,We),Ue===null?De=ct:Ue.sibling=ct,Ue=ct);return s&&ze.forEach(function(aR){return o(X,aR)}),At&&Uo(X,We),De}function Ut(X,Q,Z,ye){if(typeof Z=="object"&&Z!==null&&Z.type===C&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case K:e:{for(var De=Z.key,Ue=Q;Ue!==null;){if(Ue.key===De){if(De=Z.type,De===C){if(Ue.tag===7){u(X,Ue.sibling),Q=g(Ue,Z.props.children),Q.return=X,X=Q;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===fe&&cx(De)===Ue.type){u(X,Ue.sibling),Q=g(Ue,Z.props),Q.ref=wc(X,Ue,Z),Q.return=X,X=Q;break e}u(X,Ue);break}else o(X,Ue);Ue=Ue.sibling}Z.type===C?(Q=Ko(Z.props.children,X.mode,ye,Z.key),Q.return=X,X=Q):(ye=Bd(Z.type,Z.key,Z.props,null,X.mode,ye),ye.ref=wc(X,Q,Z),ye.return=X,X=ye)}return I(X);case ee:e:{for(Ue=Z.key;Q!==null;){if(Q.key===Ue)if(Q.tag===4&&Q.stateNode.containerInfo===Z.containerInfo&&Q.stateNode.implementation===Z.implementation){u(X,Q.sibling),Q=g(Q,Z.children||[]),Q.return=X,X=Q;break e}else{u(X,Q);break}else o(X,Q);Q=Q.sibling}Q=Rm(Z,X.mode,ye),Q.return=X,X=Q}return I(X);case fe:return Ue=Z._init,Ut(X,Q,Ue(Z._payload),ye)}if(It(Z))return Ce(X,Q,Z,ye);if(q(Z))return je(X,Q,Z,ye);wd(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,Q!==null&&Q.tag===6?(u(X,Q.sibling),Q=g(Q,Z),Q.return=X,X=Q):(u(X,Q),Q=Cm(Z,X.mode,ye),Q.return=X,X=Q),I(X)):u(X,Q)}return Ut}var Xa=ux(!0),dx=ux(!1),xd=Li(null),_d=null,Ja=null,Fp=null;function Up(){Fp=Ja=_d=null}function zp(s){var o=xd.current;Tt(xd),s._currentValue=o}function $p(s,o,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===u)break;s=s.return}}function Za(s,o){_d=s,Fp=Ja=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(Ln=!0),s.firstContext=null)}function mr(s){var o=s._currentValue;if(Fp!==s)if(s={context:s,memoizedValue:o,next:null},Ja===null){if(_d===null)throw Error(t(308));Ja=s,_d.dependencies={lanes:0,firstContext:s}}else Ja=Ja.next=s;return o}var zo=null;function Bp(s){zo===null?zo=[s]:zo.push(s)}function hx(s,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Bp(o)):(u.next=g.next,g.next=u),o.interleaved=u,Bs(s,f)}function Bs(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ui=!1;function qp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fx(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function qs(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function zi(s,o,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(lt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Bs(s,u)}return g=f.interleaved,g===null?(o.next=o,Bp(f)):(o.next=g.next,g.next=o),f.interleaved=o,Bs(s,u)}function Ed(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,ec(s,u)}}function px(s,o){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=I:w=w.next=I,u=u.next}while(u!==null);w===null?g=w=o:w=w.next=o}else g=w=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Sd(s,o,u,f){var g=s.updateQueue;Ui=!1;var w=g.firstBaseUpdate,I=g.lastBaseUpdate,B=g.shared.pending;if(B!==null){g.shared.pending=null;var H=B,ne=H.next;H.next=null,I===null?w=ne:I.next=ne,I=H;var ue=s.alternate;ue!==null&&(ue=ue.updateQueue,B=ue.lastBaseUpdate,B!==I&&(B===null?ue.firstBaseUpdate=ne:B.next=ne,ue.lastBaseUpdate=H))}if(w!==null){var pe=g.baseState;I=0,ue=ne=H=null,B=w;do{var ce=B.lane,Se=B.eventTime;if((f&ce)===ce){ue!==null&&(ue=ue.next={eventTime:Se,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Ce=s,je=B;switch(ce=o,Se=u,je.tag){case 1:if(Ce=je.payload,typeof Ce=="function"){pe=Ce.call(Se,pe,ce);break e}pe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=je.payload,ce=typeof Ce=="function"?Ce.call(Se,pe,ce):Ce,ce==null)break e;pe=G({},pe,ce);break e;case 2:Ui=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,ce=g.effects,ce===null?g.effects=[B]:ce.push(B))}else Se={eventTime:Se,lane:ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ue===null?(ne=ue=Se,H=pe):ue=ue.next=Se,I|=ce;if(B=B.next,B===null){if(B=g.shared.pending,B===null)break;ce=B,B=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);if(ue===null&&(H=pe),g.baseState=H,g.firstBaseUpdate=ne,g.lastBaseUpdate=ue,o=g.shared.interleaved,o!==null){g=o;do I|=g.lane,g=g.next;while(g!==o)}else w===null&&(g.shared.lanes=0);qo|=I,s.lanes=I,s.memoizedState=pe}}function mx(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var xc={},as=Li(xc),_c=Li(xc),Ec=Li(xc);function $o(s){if(s===xc)throw Error(t(174));return s}function Wp(s,o){switch(wt(Ec,o),wt(_c,s),wt(as,xc),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Sr(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Sr(o,s)}Tt(as),wt(as,o)}function el(){Tt(as),Tt(_c),Tt(Ec)}function gx(s){$o(Ec.current);var o=$o(as.current),u=Sr(o,s.type);o!==u&&(wt(_c,s),wt(as,u))}function Hp(s){_c.current===s&&(Tt(as),Tt(_c))}var kt=Li(0);function bd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Gp=[];function Kp(){for(var s=0;s<Gp.length;s++)Gp[s]._workInProgressVersionPrimary=null;Gp.length=0}var Nd=U.ReactCurrentDispatcher,Qp=U.ReactCurrentBatchConfig,Bo=0,Pt=null,Kt=null,en=null,Td=!1,Sc=!1,bc=0,CC=0;function xn(){throw Error(t(321))}function Yp(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Ir(s[u],o[u]))return!1;return!0}function Xp(s,o,u,f,g,w){if(Bo=w,Pt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Nd.current=s===null||s.memoizedState===null?jC:DC,s=u(f,g),Sc){w=0;do{if(Sc=!1,bc=0,25<=w)throw Error(t(301));w+=1,en=Kt=null,o.updateQueue=null,Nd.current=MC,s=u(f,g)}while(Sc)}if(Nd.current=Cd,o=Kt!==null&&Kt.next!==null,Bo=0,en=Kt=Pt=null,Td=!1,o)throw Error(t(300));return s}function Jp(){var s=bc!==0;return bc=0,s}function ls(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Pt.memoizedState=en=s:en=en.next=s,en}function gr(){if(Kt===null){var s=Pt.alternate;s=s!==null?s.memoizedState:null}else s=Kt.next;var o=en===null?Pt.memoizedState:en.next;if(o!==null)en=o,Kt=s;else{if(s===null)throw Error(t(310));Kt=s,s={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},en===null?Pt.memoizedState=en=s:en=en.next=s}return en}function Nc(s,o){return typeof o=="function"?o(s):o}function Zp(s){var o=gr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=Kt,g=f.baseQueue,w=u.pending;if(w!==null){if(g!==null){var I=g.next;g.next=w.next,w.next=I}f.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,f=f.baseState;var B=I=null,H=null,ne=w;do{var ue=ne.lane;if((Bo&ue)===ue)H!==null&&(H=H.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),f=ne.hasEagerState?ne.eagerState:s(f,ne.action);else{var pe={lane:ue,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};H===null?(B=H=pe,I=f):H=H.next=pe,Pt.lanes|=ue,qo|=ue}ne=ne.next}while(ne!==null&&ne!==w);H===null?I=f:H.next=B,Ir(f,o.memoizedState)||(Ln=!0),o.memoizedState=f,o.baseState=I,o.baseQueue=H,u.lastRenderedState=f}if(s=u.interleaved,s!==null){g=s;do w=g.lane,Pt.lanes|=w,qo|=w,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function em(s){var o=gr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,g=u.pending,w=o.memoizedState;if(g!==null){u.pending=null;var I=g=g.next;do w=s(w,I.action),I=I.next;while(I!==g);Ir(w,o.memoizedState)||(Ln=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,f]}function yx(){}function vx(s,o){var u=Pt,f=gr(),g=o(),w=!Ir(f.memoizedState,g);if(w&&(f.memoizedState=g,Ln=!0),f=f.queue,tm(_x.bind(null,u,f,s),[s]),f.getSnapshot!==o||w||en!==null&&en.memoizedState.tag&1){if(u.flags|=2048,Tc(9,xx.bind(null,u,f,g,o),void 0,null),tn===null)throw Error(t(349));(Bo&30)!==0||wx(u,o,g)}return g}function wx(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Pt.updateQueue,o===null?(o={lastEffect:null,stores:null},Pt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function xx(s,o,u,f){o.value=u,o.getSnapshot=f,Ex(o)&&Sx(s)}function _x(s,o,u){return u(function(){Ex(o)&&Sx(s)})}function Ex(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Ir(s,u)}catch{return!0}}function Sx(s){var o=Bs(s,1);o!==null&&Pr(o,s,1,-1)}function bx(s){var o=ls();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:s},o.queue=s,s=s.dispatch=PC.bind(null,Pt,s),[o.memoizedState,s]}function Tc(s,o,u,f){return s={tag:s,create:o,destroy:u,deps:f,next:null},o=Pt.updateQueue,o===null?(o={lastEffect:null,stores:null},Pt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,o.lastEffect=s)),s}function Nx(){return gr().memoizedState}function Id(s,o,u,f){var g=ls();Pt.flags|=s,g.memoizedState=Tc(1|o,u,void 0,f===void 0?null:f)}function Ad(s,o,u,f){var g=gr();f=f===void 0?null:f;var w=void 0;if(Kt!==null){var I=Kt.memoizedState;if(w=I.destroy,f!==null&&Yp(f,I.deps)){g.memoizedState=Tc(o,u,w,f);return}}Pt.flags|=s,g.memoizedState=Tc(1|o,u,w,f)}function Tx(s,o){return Id(8390656,8,s,o)}function tm(s,o){return Ad(2048,8,s,o)}function Ix(s,o){return Ad(4,2,s,o)}function Ax(s,o){return Ad(4,4,s,o)}function Cx(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Rx(s,o,u){return u=u!=null?u.concat([s]):null,Ad(4,4,Cx.bind(null,o,s),u)}function nm(){}function kx(s,o){var u=gr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Yp(o,f[1])?f[0]:(u.memoizedState=[s,o],s)}function Px(s,o){var u=gr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Yp(o,f[1])?f[0]:(s=s(),u.memoizedState=[s,o],s)}function jx(s,o,u){return(Bo&21)===0?(s.baseState&&(s.baseState=!1,Ln=!0),s.memoizedState=u):(Ir(u,o)||(u=Jl(),Pt.lanes|=u,qo|=u,s.baseState=!0),o)}function RC(s,o){var u=ot;ot=u!==0&&4>u?u:4,s(!0);var f=Qp.transition;Qp.transition={};try{s(!1),o()}finally{ot=u,Qp.transition=f}}function Dx(){return gr().memoizedState}function kC(s,o,u){var f=Wi(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Mx(s))Ox(o,u);else if(u=hx(s,o,u,f),u!==null){var g=Rn();Pr(u,s,f,g),Lx(u,o,f)}}function PC(s,o,u){var f=Wi(s),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Mx(s))Ox(o,g);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var I=o.lastRenderedState,B=w(I,u);if(g.hasEagerState=!0,g.eagerState=B,Ir(B,I)){var H=o.interleaved;H===null?(g.next=g,Bp(o)):(g.next=H.next,H.next=g),o.interleaved=g;return}}catch{}finally{}u=hx(s,o,g,f),u!==null&&(g=Rn(),Pr(u,s,f,g),Lx(u,o,f))}}function Mx(s){var o=s.alternate;return s===Pt||o!==null&&o===Pt}function Ox(s,o){Sc=Td=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Lx(s,o,u){if((u&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,ec(s,u)}}var Cd={readContext:mr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},jC={readContext:mr,useCallback:function(s,o){return ls().memoizedState=[s,o===void 0?null:o],s},useContext:mr,useEffect:Tx,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Id(4194308,4,Cx.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Id(4194308,4,s,o)},useInsertionEffect:function(s,o){return Id(4,2,s,o)},useMemo:function(s,o){var u=ls();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var f=ls();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=kC.bind(null,Pt,s),[f.memoizedState,s]},useRef:function(s){var o=ls();return s={current:s},o.memoizedState=s},useState:bx,useDebugValue:nm,useDeferredValue:function(s){return ls().memoizedState=s},useTransition:function(){var s=bx(!1),o=s[0];return s=RC.bind(null,s[1]),ls().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var f=Pt,g=ls();if(At){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),tn===null)throw Error(t(349));(Bo&30)!==0||wx(f,o,u)}g.memoizedState=u;var w={value:u,getSnapshot:o};return g.queue=w,Tx(_x.bind(null,f,w,s),[s]),f.flags|=2048,Tc(9,xx.bind(null,f,w,u,o),void 0,null),u},useId:function(){var s=ls(),o=tn.identifierPrefix;if(At){var u=$s,f=zs;u=(f&~(1<<32-Kn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=bc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=CC++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},DC={readContext:mr,useCallback:kx,useContext:mr,useEffect:tm,useImperativeHandle:Rx,useInsertionEffect:Ix,useLayoutEffect:Ax,useMemo:Px,useReducer:Zp,useRef:Nx,useState:function(){return Zp(Nc)},useDebugValue:nm,useDeferredValue:function(s){var o=gr();return jx(o,Kt.memoizedState,s)},useTransition:function(){var s=Zp(Nc)[0],o=gr().memoizedState;return[s,o]},useMutableSource:yx,useSyncExternalStore:vx,useId:Dx,unstable_isNewReconciler:!1},MC={readContext:mr,useCallback:kx,useContext:mr,useEffect:tm,useImperativeHandle:Rx,useInsertionEffect:Ix,useLayoutEffect:Ax,useMemo:Px,useReducer:em,useRef:Nx,useState:function(){return em(Nc)},useDebugValue:nm,useDeferredValue:function(s){var o=gr();return Kt===null?o.memoizedState=s:jx(o,Kt.memoizedState,s)},useTransition:function(){var s=em(Nc)[0],o=gr().memoizedState;return[s,o]},useMutableSource:yx,useSyncExternalStore:vx,useId:Dx,unstable_isNewReconciler:!1};function Cr(s,o){if(s&&s.defaultProps){o=G({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function rm(s,o,u,f){o=s.memoizedState,u=u(f,o),u=u==null?o:G({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Rd={isMounted:function(s){return(s=s._reactInternals)?Nr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var f=Rn(),g=Wi(s),w=qs(f,g);w.payload=o,u!=null&&(w.callback=u),o=zi(s,w,g),o!==null&&(Pr(o,s,g,f),Ed(o,s,g))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var f=Rn(),g=Wi(s),w=qs(f,g);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=zi(s,w,g),o!==null&&(Pr(o,s,g,f),Ed(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Rn(),f=Wi(s),g=qs(u,f);g.tag=2,o!=null&&(g.callback=o),o=zi(s,g,f),o!==null&&(Pr(o,s,f,u),Ed(o,s,f))}};function Vx(s,o,u,f,g,w,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,w,I):o.prototype&&o.prototype.isPureReactComponent?!hc(u,f)||!hc(g,w):!0}function Fx(s,o,u){var f=!1,g=Vi,w=o.contextType;return typeof w=="object"&&w!==null?w=mr(w):(g=On(o)?Vo:wn.current,f=o.contextTypes,w=(f=f!=null)?Ga(s,g):Vi),o=new o(u,w),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Rd,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=w),o}function Ux(s,o,u,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==s&&Rd.enqueueReplaceState(o,o.state,null)}function sm(s,o,u,f){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},qp(s);var w=o.contextType;typeof w=="object"&&w!==null?g.context=mr(w):(w=On(o)?Vo:wn.current,g.context=Ga(s,w)),g.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(rm(s,o,w,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Rd.enqueueReplaceState(g,g.state,null),Sd(s,u,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function tl(s,o){try{var u="",f=o;do u+=me(f),f=f.return;while(f);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:o,stack:g,digest:null}}function im(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function om(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var OC=typeof WeakMap=="function"?WeakMap:Map;function zx(s,o,u){u=qs(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Ld||(Ld=!0,_m=f),om(s,o)},u}function $x(s,o,u){u=qs(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){om(s,o)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){om(s,o),typeof f!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),u}function Bx(s,o,u){var f=s.pingCache;if(f===null){f=s.pingCache=new OC;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),s=YC.bind(null,s,o,u),o.then(s,s))}function qx(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Wx(s,o,u,f,g){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=qs(-1,1),o.tag=2,zi(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var LC=U.ReactCurrentOwner,Ln=!1;function Cn(s,o,u,f){o.child=s===null?dx(o,null,u,f):Xa(o,s.child,u,f)}function Hx(s,o,u,f,g){u=u.render;var w=o.ref;return Za(o,g),f=Xp(s,o,u,f,w,g),u=Jp(),s!==null&&!Ln?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Ws(s,o,g)):(At&&u&&Dp(o),o.flags|=1,Cn(s,o,f,g),o.child)}function Gx(s,o,u,f,g){if(s===null){var w=u.type;return typeof w=="function"&&!Am(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,Kx(s,o,w,f,g)):(s=Bd(u.type,null,f,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(w=s.child,(s.lanes&g)===0){var I=w.memoizedProps;if(u=u.compare,u=u!==null?u:hc,u(I,f)&&s.ref===o.ref)return Ws(s,o,g)}return o.flags|=1,s=Gi(w,f),s.ref=o.ref,s.return=o,o.child=s}function Kx(s,o,u,f,g){if(s!==null){var w=s.memoizedProps;if(hc(w,f)&&s.ref===o.ref)if(Ln=!1,o.pendingProps=f=w,(s.lanes&g)!==0)(s.flags&131072)!==0&&(Ln=!0);else return o.lanes=s.lanes,Ws(s,o,g)}return am(s,o,u,f,g)}function Qx(s,o,u){var f=o.pendingProps,g=f.children,w=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(rl,tr),tr|=u;else{if((u&1073741824)===0)return s=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,wt(rl,tr),tr|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:u,wt(rl,tr),tr|=f}else w!==null?(f=w.baseLanes|u,o.memoizedState=null):f=u,wt(rl,tr),tr|=f;return Cn(s,o,g,u),o.child}function Yx(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function am(s,o,u,f,g){var w=On(u)?Vo:wn.current;return w=Ga(o,w),Za(o,g),u=Xp(s,o,u,f,w,g),f=Jp(),s!==null&&!Ln?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Ws(s,o,g)):(At&&f&&Dp(o),o.flags|=1,Cn(s,o,u,g),o.child)}function Xx(s,o,u,f,g){if(On(u)){var w=!0;pd(o)}else w=!1;if(Za(o,g),o.stateNode===null)Pd(s,o),Fx(o,u,f),sm(o,u,f,g),f=!0;else if(s===null){var I=o.stateNode,B=o.memoizedProps;I.props=B;var H=I.context,ne=u.contextType;typeof ne=="object"&&ne!==null?ne=mr(ne):(ne=On(u)?Vo:wn.current,ne=Ga(o,ne));var ue=u.getDerivedStateFromProps,pe=typeof ue=="function"||typeof I.getSnapshotBeforeUpdate=="function";pe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(B!==f||H!==ne)&&Ux(o,I,f,ne),Ui=!1;var ce=o.memoizedState;I.state=ce,Sd(o,f,I,g),H=o.memoizedState,B!==f||ce!==H||Mn.current||Ui?(typeof ue=="function"&&(rm(o,u,ue,f),H=o.memoizedState),(B=Ui||Vx(o,u,B,f,ce,H,ne))?(pe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=H),I.props=f,I.state=H,I.context=ne,f=B):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{I=o.stateNode,fx(s,o),B=o.memoizedProps,ne=o.type===o.elementType?B:Cr(o.type,B),I.props=ne,pe=o.pendingProps,ce=I.context,H=u.contextType,typeof H=="object"&&H!==null?H=mr(H):(H=On(u)?Vo:wn.current,H=Ga(o,H));var Se=u.getDerivedStateFromProps;(ue=typeof Se=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(B!==pe||ce!==H)&&Ux(o,I,f,H),Ui=!1,ce=o.memoizedState,I.state=ce,Sd(o,f,I,g);var Ce=o.memoizedState;B!==pe||ce!==Ce||Mn.current||Ui?(typeof Se=="function"&&(rm(o,u,Se,f),Ce=o.memoizedState),(ne=Ui||Vx(o,u,ne,f,ce,Ce,H)||!1)?(ue||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(f,Ce,H),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(f,Ce,H)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||B===s.memoizedProps&&ce===s.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ce===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Ce),I.props=f,I.state=Ce,I.context=H,f=ne):(typeof I.componentDidUpdate!="function"||B===s.memoizedProps&&ce===s.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ce===s.memoizedState||(o.flags|=1024),f=!1)}return lm(s,o,u,f,w,g)}function lm(s,o,u,f,g,w){Yx(s,o);var I=(o.flags&128)!==0;if(!f&&!I)return g&&nx(o,u,!1),Ws(s,o,w);f=o.stateNode,LC.current=o;var B=I&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&I?(o.child=Xa(o,s.child,null,w),o.child=Xa(o,null,B,w)):Cn(s,o,B,w),o.memoizedState=f.state,g&&nx(o,u,!0),o.child}function Jx(s){var o=s.stateNode;o.pendingContext?ex(s,o.pendingContext,o.pendingContext!==o.context):o.context&&ex(s,o.context,!1),Wp(s,o.containerInfo)}function Zx(s,o,u,f,g){return Ya(),Vp(g),o.flags|=256,Cn(s,o,u,f),o.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function um(s){return{baseLanes:s,cachePool:null,transitions:null}}function e_(s,o,u){var f=o.pendingProps,g=kt.current,w=!1,I=(o.flags&128)!==0,B;if((B=I)||(B=s!==null&&s.memoizedState===null?!1:(g&2)!==0),B?(w=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),wt(kt,g&1),s===null)return Lp(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=f.children,s=f.fallback,w?(f=o.mode,w=o.child,I={mode:"hidden",children:I},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=I):w=qd(I,f,0,null),s=Ko(s,f,u,null),w.return=o,s.return=o,w.sibling=s,o.child=w,o.child.memoizedState=um(u),o.memoizedState=cm,s):dm(o,I));if(g=s.memoizedState,g!==null&&(B=g.dehydrated,B!==null))return VC(s,o,I,f,B,g,u);if(w){w=f.fallback,I=o.mode,g=s.child,B=g.sibling;var H={mode:"hidden",children:f.children};return(I&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=H,o.deletions=null):(f=Gi(g,H),f.subtreeFlags=g.subtreeFlags&14680064),B!==null?w=Gi(B,w):(w=Ko(w,I,u,null),w.flags|=2),w.return=o,f.return=o,f.sibling=w,o.child=f,f=w,w=o.child,I=s.child.memoizedState,I=I===null?um(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},w.memoizedState=I,w.childLanes=s.childLanes&~u,o.memoizedState=cm,f}return w=s.child,s=w.sibling,f=Gi(w,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=f,o.memoizedState=null,f}function dm(s,o){return o=qd({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function kd(s,o,u,f){return f!==null&&Vp(f),Xa(o,s.child,null,u),s=dm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function VC(s,o,u,f,g,w,I){if(u)return o.flags&256?(o.flags&=-257,f=im(Error(t(422))),kd(s,o,I,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(w=f.fallback,g=o.mode,f=qd({mode:"visible",children:f.children},g,0,null),w=Ko(w,g,I,null),w.flags|=2,f.return=o,w.return=o,f.sibling=w,o.child=f,(o.mode&1)!==0&&Xa(o,s.child,null,I),o.child.memoizedState=um(I),o.memoizedState=cm,w);if((o.mode&1)===0)return kd(s,o,I,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var B=f.dgst;return f=B,w=Error(t(419)),f=im(w,f,void 0),kd(s,o,I,f)}if(B=(I&s.childLanes)!==0,Ln||B){if(f=tn,f!==null){switch(I&-I){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|I))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,Bs(s,g),Pr(f,s,g,-1))}return Im(),f=im(Error(t(421))),kd(s,o,I,f)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=XC.bind(null,s),g._reactRetry=o,null):(s=w.treeContext,er=Oi(g.nextSibling),Zn=o,At=!0,Ar=null,s!==null&&(fr[pr++]=zs,fr[pr++]=$s,fr[pr++]=Fo,zs=s.id,$s=s.overflow,Fo=o),o=dm(o,f.children),o.flags|=4096,o)}function t_(s,o,u){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),$p(s.return,o,u)}function hm(s,o,u,f,g){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=g)}function n_(s,o,u){var f=o.pendingProps,g=f.revealOrder,w=f.tail;if(Cn(s,o,f.children,u),f=kt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&t_(s,u,o);else if(s.tag===19)t_(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(wt(kt,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&bd(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),hm(o,!1,g,u,w);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&bd(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}hm(o,!0,u,null,w);break;case"together":hm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Pd(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Ws(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),qo|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=Gi(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Gi(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function FC(s,o,u){switch(o.tag){case 3:Jx(o),Ya();break;case 5:gx(o);break;case 1:On(o.type)&&pd(o);break;case 4:Wp(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;wt(xd,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(wt(kt,kt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?e_(s,o,u):(wt(kt,kt.current&1),s=Ws(s,o,u),s!==null?s.sibling:null);wt(kt,kt.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(s.flags&128)!==0){if(f)return n_(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),wt(kt,kt.current),f)break;return null;case 22:case 23:return o.lanes=0,Qx(s,o,u)}return Ws(s,o,u)}var r_,fm,s_,i_;r_=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},fm=function(){},s_=function(s,o,u,f){var g=s.memoizedProps;if(g!==f){s=o.stateNode,$o(as.current);var w=null;switch(u){case"input":g=ht(s,g),f=ht(s,f),w=[];break;case"select":g=G({},g,{value:void 0}),f=G({},f,{value:void 0}),w=[];break;case"textarea":g=_i(s,g),f=_i(s,f),w=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=dd)}br(u,f);var I;u=null;for(ne in g)if(!f.hasOwnProperty(ne)&&g.hasOwnProperty(ne)&&g[ne]!=null)if(ne==="style"){var B=g[ne];for(I in B)B.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(i.hasOwnProperty(ne)?w||(w=[]):(w=w||[]).push(ne,null));for(ne in f){var H=f[ne];if(B=g!=null?g[ne]:void 0,f.hasOwnProperty(ne)&&H!==B&&(H!=null||B!=null))if(ne==="style")if(B){for(I in B)!B.hasOwnProperty(I)||H&&H.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in H)H.hasOwnProperty(I)&&B[I]!==H[I]&&(u||(u={}),u[I]=H[I])}else u||(w||(w=[]),w.push(ne,u)),u=H;else ne==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,B=B?B.__html:void 0,H!=null&&B!==H&&(w=w||[]).push(ne,H)):ne==="children"?typeof H!="string"&&typeof H!="number"||(w=w||[]).push(ne,""+H):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(i.hasOwnProperty(ne)?(H!=null&&ne==="onScroll"&&Nt("scroll",s),w||B===H||(w=[])):(w=w||[]).push(ne,H))}u&&(w=w||[]).push("style",u);var ne=w;(o.updateQueue=ne)&&(o.flags|=4)}},i_=function(s,o,u,f){u!==f&&(o.flags|=4)};function Ic(s,o){if(!At)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function _n(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=u,o}function UC(s,o,u){var f=o.pendingProps;switch(Mp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(o),null;case 1:return On(o.type)&&fd(),_n(o),null;case 3:return f=o.stateNode,el(),Tt(Mn),Tt(wn),Kp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(vd(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ar!==null&&(bm(Ar),Ar=null))),fm(s,o),_n(o),null;case 5:Hp(o);var g=$o(Ec.current);if(u=o.type,s!==null&&o.stateNode!=null)s_(s,o,u,f,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return _n(o),null}if(s=$o(as.current),vd(o)){f=o.stateNode,u=o.type;var w=o.memoizedProps;switch(f[os]=o,f[yc]=w,s=(o.mode&1)!==0,u){case"dialog":Nt("cancel",f),Nt("close",f);break;case"iframe":case"object":case"embed":Nt("load",f);break;case"video":case"audio":for(g=0;g<pc.length;g++)Nt(pc[g],f);break;case"source":Nt("error",f);break;case"img":case"image":case"link":Nt("error",f),Nt("load",f);break;case"details":Nt("toggle",f);break;case"input":Wn(f,w),Nt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},Nt("invalid",f);break;case"textarea":ie(f,w),Nt("invalid",f)}br(u,w),g=null;for(var I in w)if(w.hasOwnProperty(I)){var B=w[I];I==="children"?typeof B=="string"?f.textContent!==B&&(w.suppressHydrationWarning!==!0&&ud(f.textContent,B,s),g=["children",B]):typeof B=="number"&&f.textContent!==""+B&&(w.suppressHydrationWarning!==!0&&ud(f.textContent,B,s),g=["children",""+B]):i.hasOwnProperty(I)&&B!=null&&I==="onScroll"&&Nt("scroll",f)}switch(u){case"input":Te(f),Wr(f,w,!0);break;case"textarea":Te(f),$t(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=dd)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{I=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=yn(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=I.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=I.createElement(u,{is:f.is}):(s=I.createElement(u),u==="select"&&(I=s,f.multiple?I.multiple=!0:f.size&&(I.size=f.size))):s=I.createElementNS(s,u),s[os]=o,s[yc]=f,r_(s,o,!1,!1),o.stateNode=s;e:{switch(I=Sa(u,f),u){case"dialog":Nt("cancel",s),Nt("close",s),g=f;break;case"iframe":case"object":case"embed":Nt("load",s),g=f;break;case"video":case"audio":for(g=0;g<pc.length;g++)Nt(pc[g],s);g=f;break;case"source":Nt("error",s),g=f;break;case"img":case"image":case"link":Nt("error",s),Nt("load",s),g=f;break;case"details":Nt("toggle",s),g=f;break;case"input":Wn(s,f),g=ht(s,f),Nt("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=G({},f,{value:void 0}),Nt("invalid",s);break;case"textarea":ie(s,f),g=_i(s,f),Nt("invalid",s);break;default:g=f}br(u,g),B=g;for(w in B)if(B.hasOwnProperty(w)){var H=B[w];w==="style"?Ea(s,H):w==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&_a(s,H)):w==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&So(s,H):typeof H=="number"&&So(s,""+H):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?H!=null&&w==="onScroll"&&Nt("scroll",s):H!=null&&k(s,w,H,I))}switch(u){case"input":Te(s),Wr(s,f,!1);break;case"textarea":Te(s),$t(s);break;case"option":f.value!=null&&s.setAttribute("value",""+ge(f.value));break;case"select":s.multiple=!!f.multiple,w=f.value,w!=null?Hn(s,!!f.multiple,w,!1):f.defaultValue!=null&&Hn(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=dd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return _n(o),null;case 6:if(s&&o.stateNode!=null)i_(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=$o(Ec.current),$o(as.current),vd(o)){if(f=o.stateNode,u=o.memoizedProps,f[os]=o,(w=f.nodeValue!==u)&&(s=Zn,s!==null))switch(s.tag){case 3:ud(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ud(f.nodeValue,u,(s.mode&1)!==0)}w&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[os]=o,o.stateNode=f}return _n(o),null;case 13:if(Tt(kt),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(At&&er!==null&&(o.mode&1)!==0&&(o.flags&128)===0)lx(),Ya(),o.flags|=98560,w=!1;else if(w=vd(o),f!==null&&f.dehydrated!==null){if(s===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[os]=o}else Ya(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_n(o),w=!1}else Ar!==null&&(bm(Ar),Ar=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(kt.current&1)!==0?Qt===0&&(Qt=3):Im())),o.updateQueue!==null&&(o.flags|=4),_n(o),null);case 4:return el(),fm(s,o),s===null&&mc(o.stateNode.containerInfo),_n(o),null;case 10:return zp(o.type._context),_n(o),null;case 17:return On(o.type)&&fd(),_n(o),null;case 19:if(Tt(kt),w=o.memoizedState,w===null)return _n(o),null;if(f=(o.flags&128)!==0,I=w.rendering,I===null)if(f)Ic(w,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(I=bd(s),I!==null){for(o.flags|=128,Ic(w,!1),f=I.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)w=u,s=f,w.flags&=14680066,I=w.alternate,I===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=I.childLanes,w.lanes=I.lanes,w.child=I.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=I.memoizedProps,w.memoizedState=I.memoizedState,w.updateQueue=I.updateQueue,w.type=I.type,s=I.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return wt(kt,kt.current&1|2),o.child}s=s.sibling}w.tail!==null&&bt()>sl&&(o.flags|=128,f=!0,Ic(w,!1),o.lanes=4194304)}else{if(!f)if(s=bd(I),s!==null){if(o.flags|=128,f=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ic(w,!0),w.tail===null&&w.tailMode==="hidden"&&!I.alternate&&!At)return _n(o),null}else 2*bt()-w.renderingStartTime>sl&&u!==1073741824&&(o.flags|=128,f=!0,Ic(w,!1),o.lanes=4194304);w.isBackwards?(I.sibling=o.child,o.child=I):(u=w.last,u!==null?u.sibling=I:o.child=I,w.last=I)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=bt(),o.sibling=null,u=kt.current,wt(kt,f?u&1|2:u&1),o):(_n(o),null);case 22:case 23:return Tm(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(tr&1073741824)!==0&&(_n(o),o.subtreeFlags&6&&(o.flags|=8192)):_n(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function zC(s,o){switch(Mp(o),o.tag){case 1:return On(o.type)&&fd(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return el(),Tt(Mn),Tt(wn),Kp(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Hp(o),null;case 13:if(Tt(kt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ya()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Tt(kt),null;case 4:return el(),null;case 10:return zp(o.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var jd=!1,En=!1,$C=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function nl(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ot(s,o,f)}else u.current=null}function pm(s,o,u){try{u()}catch(f){Ot(s,o,f)}}var o_=!1;function BC(s,o){if(Tp=Os,s=Vw(),vp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var I=0,B=-1,H=-1,ne=0,ue=0,pe=s,ce=null;t:for(;;){for(var Se;pe!==u||g!==0&&pe.nodeType!==3||(B=I+g),pe!==w||f!==0&&pe.nodeType!==3||(H=I+f),pe.nodeType===3&&(I+=pe.nodeValue.length),(Se=pe.firstChild)!==null;)ce=pe,pe=Se;for(;;){if(pe===s)break t;if(ce===u&&++ne===g&&(B=I),ce===w&&++ue===f&&(H=I),(Se=pe.nextSibling)!==null)break;pe=ce,ce=pe.parentNode}pe=Se}u=B===-1||H===-1?null:{start:B,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ip={focusedElem:s,selectionRange:u},Os=!1,Ie=o;Ie!==null;)if(o=Ie,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Ie=s;else for(;Ie!==null;){o=Ie;try{var Ce=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var je=Ce.memoizedProps,Ut=Ce.memoizedState,X=o.stateNode,Q=X.getSnapshotBeforeUpdate(o.elementType===o.type?je:Cr(o.type,je),Ut);X.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var Z=o.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){Ot(o,o.return,ye)}if(s=o.sibling,s!==null){s.return=o.return,Ie=s;break}Ie=o.return}return Ce=o_,o_=!1,Ce}function Ac(s,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var w=g.destroy;g.destroy=void 0,w!==void 0&&pm(o,u,w)}g=g.next}while(g!==f)}}function Dd(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function mm(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function a_(s){var o=s.alternate;o!==null&&(s.alternate=null,a_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[os],delete o[yc],delete o[kp],delete o[NC],delete o[TC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function l_(s){return s.tag===5||s.tag===3||s.tag===4}function c_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||l_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gm(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=dd));else if(f!==4&&(s=s.child,s!==null))for(gm(s,o,u),s=s.sibling;s!==null;)gm(s,o,u),s=s.sibling}function ym(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(ym(s,o,u),s=s.sibling;s!==null;)ym(s,o,u),s=s.sibling}var hn=null,Rr=!1;function $i(s,o,u){for(u=u.child;u!==null;)u_(s,o,u),u=u.sibling}function u_(s,o,u){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Ao,u)}catch{}switch(u.tag){case 5:En||nl(u,o);case 6:var f=hn,g=Rr;hn=null,$i(s,o,u),hn=f,Rr=g,hn!==null&&(Rr?(s=hn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):hn.removeChild(u.stateNode));break;case 18:hn!==null&&(Rr?(s=hn,u=u.stateNode,s.nodeType===8?Rp(s.parentNode,u):s.nodeType===1&&Rp(s,u),Pi(s)):Rp(hn,u.stateNode));break;case 4:f=hn,g=Rr,hn=u.stateNode.containerInfo,Rr=!0,$i(s,o,u),hn=f,Rr=g;break;case 0:case 11:case 14:case 15:if(!En&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var w=g,I=w.destroy;w=w.tag,I!==void 0&&((w&2)!==0||(w&4)!==0)&&pm(u,o,I),g=g.next}while(g!==f)}$i(s,o,u);break;case 1:if(!En&&(nl(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(B){Ot(u,o,B)}$i(s,o,u);break;case 21:$i(s,o,u);break;case 22:u.mode&1?(En=(f=En)||u.memoizedState!==null,$i(s,o,u),En=f):$i(s,o,u);break;default:$i(s,o,u)}}function d_(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new $C),o.forEach(function(f){var g=JC.bind(null,s,f);u.has(f)||(u.add(f),f.then(g,g))})}}function kr(s,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var w=s,I=o,B=I;e:for(;B!==null;){switch(B.tag){case 5:hn=B.stateNode,Rr=!1;break e;case 3:hn=B.stateNode.containerInfo,Rr=!0;break e;case 4:hn=B.stateNode.containerInfo,Rr=!0;break e}B=B.return}if(hn===null)throw Error(t(160));u_(w,I,g),hn=null,Rr=!1;var H=g.alternate;H!==null&&(H.return=null),g.return=null}catch(ne){Ot(g,o,ne)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)h_(o,s),o=o.sibling}function h_(s,o){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(kr(o,s),cs(s),f&4){try{Ac(3,s,s.return),Dd(3,s)}catch(je){Ot(s,s.return,je)}try{Ac(5,s,s.return)}catch(je){Ot(s,s.return,je)}}break;case 1:kr(o,s),cs(s),f&512&&u!==null&&nl(u,u.return);break;case 5:if(kr(o,s),cs(s),f&512&&u!==null&&nl(u,u.return),s.flags&32){var g=s.stateNode;try{So(g,"")}catch(je){Ot(s,s.return,je)}}if(f&4&&(g=s.stateNode,g!=null)){var w=s.memoizedProps,I=u!==null?u.memoizedProps:w,B=s.type,H=s.updateQueue;if(s.updateQueue=null,H!==null)try{B==="input"&&w.type==="radio"&&w.name!=null&&Zt(g,w),Sa(B,I);var ne=Sa(B,w);for(I=0;I<H.length;I+=2){var ue=H[I],pe=H[I+1];ue==="style"?Ea(g,pe):ue==="dangerouslySetInnerHTML"?_a(g,pe):ue==="children"?So(g,pe):k(g,ue,pe,ne)}switch(B){case"input":ln(g,w);break;case"textarea":$e(g,w);break;case"select":var ce=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var Se=w.value;Se!=null?Hn(g,!!w.multiple,Se,!1):ce!==!!w.multiple&&(w.defaultValue!=null?Hn(g,!!w.multiple,w.defaultValue,!0):Hn(g,!!w.multiple,w.multiple?[]:"",!1))}g[yc]=w}catch(je){Ot(s,s.return,je)}}break;case 6:if(kr(o,s),cs(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,w=s.memoizedProps;try{g.nodeValue=w}catch(je){Ot(s,s.return,je)}}break;case 3:if(kr(o,s),cs(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Pi(o.containerInfo)}catch(je){Ot(s,s.return,je)}break;case 4:kr(o,s),cs(s);break;case 13:kr(o,s),cs(s),g=s.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(xm=bt())),f&4&&d_(s);break;case 22:if(ue=u!==null&&u.memoizedState!==null,s.mode&1?(En=(ne=En)||ue,kr(o,s),En=ne):kr(o,s),cs(s),f&8192){if(ne=s.memoizedState!==null,(s.stateNode.isHidden=ne)&&!ue&&(s.mode&1)!==0)for(Ie=s,ue=s.child;ue!==null;){for(pe=Ie=ue;Ie!==null;){switch(ce=Ie,Se=ce.child,ce.tag){case 0:case 11:case 14:case 15:Ac(4,ce,ce.return);break;case 1:nl(ce,ce.return);var Ce=ce.stateNode;if(typeof Ce.componentWillUnmount=="function"){f=ce,u=ce.return;try{o=f,Ce.props=o.memoizedProps,Ce.state=o.memoizedState,Ce.componentWillUnmount()}catch(je){Ot(f,u,je)}}break;case 5:nl(ce,ce.return);break;case 22:if(ce.memoizedState!==null){m_(pe);continue}}Se!==null?(Se.return=ce,Ie=Se):m_(pe)}ue=ue.sibling}e:for(ue=null,pe=s;;){if(pe.tag===5){if(ue===null){ue=pe;try{g=pe.stateNode,ne?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(B=pe.stateNode,H=pe.memoizedProps.style,I=H!=null&&H.hasOwnProperty("display")?H.display:null,B.style.display=Si("display",I))}catch(je){Ot(s,s.return,je)}}}else if(pe.tag===6){if(ue===null)try{pe.stateNode.nodeValue=ne?"":pe.memoizedProps}catch(je){Ot(s,s.return,je)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===s)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===s)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===s)break e;ue===pe&&(ue=null),pe=pe.return}ue===pe&&(ue=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:kr(o,s),cs(s),f&4&&d_(s);break;case 21:break;default:kr(o,s),cs(s)}}function cs(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(l_(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(So(g,""),f.flags&=-33);var w=c_(s);ym(s,w,g);break;case 3:case 4:var I=f.stateNode.containerInfo,B=c_(s);gm(s,B,I);break;default:throw Error(t(161))}}catch(H){Ot(s,s.return,H)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function qC(s,o,u){Ie=s,f_(s)}function f_(s,o,u){for(var f=(s.mode&1)!==0;Ie!==null;){var g=Ie,w=g.child;if(g.tag===22&&f){var I=g.memoizedState!==null||jd;if(!I){var B=g.alternate,H=B!==null&&B.memoizedState!==null||En;B=jd;var ne=En;if(jd=I,(En=H)&&!ne)for(Ie=g;Ie!==null;)I=Ie,H=I.child,I.tag===22&&I.memoizedState!==null?g_(g):H!==null?(H.return=I,Ie=H):g_(g);for(;w!==null;)Ie=w,f_(w),w=w.sibling;Ie=g,jd=B,En=ne}p_(s)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,Ie=w):p_(s)}}function p_(s){for(;Ie!==null;){var o=Ie;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:En||Dd(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!En)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Cr(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&mx(o,w,f);break;case 3:var I=o.updateQueue;if(I!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}mx(o,I,u)}break;case 5:var B=o.stateNode;if(u===null&&o.flags&4){u=B;var H=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ne=o.alternate;if(ne!==null){var ue=ne.memoizedState;if(ue!==null){var pe=ue.dehydrated;pe!==null&&Pi(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}En||o.flags&512&&mm(o)}catch(ce){Ot(o,o.return,ce)}}if(o===s){Ie=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function m_(s){for(;Ie!==null;){var o=Ie;if(o===s){Ie=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function g_(s){for(;Ie!==null;){var o=Ie;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Dd(4,o)}catch(H){Ot(o,u,H)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(H){Ot(o,g,H)}}var w=o.return;try{mm(o)}catch(H){Ot(o,w,H)}break;case 5:var I=o.return;try{mm(o)}catch(H){Ot(o,I,H)}}}catch(H){Ot(o,o.return,H)}if(o===s){Ie=null;break}var B=o.sibling;if(B!==null){B.return=o.return,Ie=B;break}Ie=o.return}}var WC=Math.ceil,Md=U.ReactCurrentDispatcher,vm=U.ReactCurrentOwner,yr=U.ReactCurrentBatchConfig,lt=0,tn=null,qt=null,fn=0,tr=0,rl=Li(0),Qt=0,Cc=null,qo=0,Od=0,wm=0,Rc=null,Vn=null,xm=0,sl=1/0,Hs=null,Ld=!1,_m=null,Bi=null,Vd=!1,qi=null,Fd=0,kc=0,Em=null,Ud=-1,zd=0;function Rn(){return(lt&6)!==0?bt():Ud!==-1?Ud:Ud=bt()}function Wi(s){return(s.mode&1)===0?1:(lt&2)!==0&&fn!==0?fn&-fn:AC.transition!==null?(zd===0&&(zd=Jl()),zd):(s=ot,s!==0||(s=window.event,s=s===void 0?16:ja(s.type)),s)}function Pr(s,o,u,f){if(50<kc)throw kc=0,Em=null,Error(t(185));Po(s,u,f),((lt&2)===0||s!==tn)&&(s===tn&&((lt&2)===0&&(Od|=u),Qt===4&&Hi(s,fn)),Fn(s,f),u===1&&lt===0&&(o.mode&1)===0&&(sl=bt()+500,md&&Fi()))}function Fn(s,o){var u=s.callbackNode;ko(s,o);var f=js(s,s===tn?fn:0);if(f===0)u!==null&&Ta(u),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(u!=null&&Ta(u),o===1)s.tag===0?IC(v_.bind(null,s)):rx(v_.bind(null,s)),SC(function(){(lt&6)===0&&Fi()}),u=null;else{switch(Yr(f)){case 1:u=Ia;break;case 4:u=Ql;break;case 16:u=Io;break;case 536870912:u=Aa;break;default:u=Io}u=T_(u,y_.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function y_(s,o){if(Ud=-1,zd=0,(lt&6)!==0)throw Error(t(327));var u=s.callbackNode;if(il()&&s.callbackNode!==u)return null;var f=js(s,s===tn?fn:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=$d(s,f);else{o=f;var g=lt;lt|=2;var w=x_();(tn!==s||fn!==o)&&(Hs=null,sl=bt()+500,Ho(s,o));do try{KC();break}catch(B){w_(s,B)}while(!0);Up(),Md.current=w,lt=g,qt!==null?o=0:(tn=null,fn=0,o=Qt)}if(o!==0){if(o===2&&(g=Xl(s),g!==0&&(f=g,o=Sm(s,g))),o===1)throw u=Cc,Ho(s,0),Hi(s,f),Fn(s,bt()),u;if(o===6)Hi(s,f);else{if(g=s.current.alternate,(f&30)===0&&!HC(g)&&(o=$d(s,f),o===2&&(w=Xl(s),w!==0&&(f=w,o=Sm(s,w))),o===1))throw u=Cc,Ho(s,0),Hi(s,f),Fn(s,bt()),u;switch(s.finishedWork=g,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Go(s,Vn,Hs);break;case 3:if(Hi(s,f),(f&130023424)===f&&(o=xm+500-bt(),10<o)){if(js(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){Rn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Cp(Go.bind(null,s,Vn,Hs),o);break}Go(s,Vn,Hs);break;case 4:if(Hi(s,f),(f&4194240)===f)break;for(o=s.eventTimes,g=-1;0<f;){var I=31-Kn(f);w=1<<I,I=o[I],I>g&&(g=I),f&=~w}if(f=g,f=bt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*WC(f/1960))-f,10<f){s.timeoutHandle=Cp(Go.bind(null,s,Vn,Hs),f);break}Go(s,Vn,Hs);break;case 5:Go(s,Vn,Hs);break;default:throw Error(t(329))}}}return Fn(s,bt()),s.callbackNode===u?y_.bind(null,s):null}function Sm(s,o){var u=Rc;return s.current.memoizedState.isDehydrated&&(Ho(s,o).flags|=256),s=$d(s,o),s!==2&&(o=Vn,Vn=u,o!==null&&bm(o)),s}function bm(s){Vn===null?Vn=s:Vn.push.apply(Vn,s)}function HC(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],w=g.getSnapshot;g=g.value;try{if(!Ir(w(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Hi(s,o){for(o&=~wm,o&=~Od,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-Kn(o),f=1<<u;s[u]=-1,o&=~f}}function v_(s){if((lt&6)!==0)throw Error(t(327));il();var o=js(s,0);if((o&1)===0)return Fn(s,bt()),null;var u=$d(s,o);if(s.tag!==0&&u===2){var f=Xl(s);f!==0&&(o=f,u=Sm(s,f))}if(u===1)throw u=Cc,Ho(s,0),Hi(s,o),Fn(s,bt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Go(s,Vn,Hs),Fn(s,bt()),null}function Nm(s,o){var u=lt;lt|=1;try{return s(o)}finally{lt=u,lt===0&&(sl=bt()+500,md&&Fi())}}function Wo(s){qi!==null&&qi.tag===0&&(lt&6)===0&&il();var o=lt;lt|=1;var u=yr.transition,f=ot;try{if(yr.transition=null,ot=1,s)return s()}finally{ot=f,yr.transition=u,lt=o,(lt&6)===0&&Fi()}}function Tm(){tr=rl.current,Tt(rl)}function Ho(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,EC(u)),qt!==null)for(u=qt.return;u!==null;){var f=u;switch(Mp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&fd();break;case 3:el(),Tt(Mn),Tt(wn),Kp();break;case 5:Hp(f);break;case 4:el();break;case 13:Tt(kt);break;case 19:Tt(kt);break;case 10:zp(f.type._context);break;case 22:case 23:Tm()}u=u.return}if(tn=s,qt=s=Gi(s.current,null),fn=tr=o,Qt=0,Cc=null,wm=Od=qo=0,Vn=Rc=null,zo!==null){for(o=0;o<zo.length;o++)if(u=zo[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,w=u.pending;if(w!==null){var I=w.next;w.next=g,f.next=I}u.pending=f}zo=null}return s}function w_(s,o){do{var u=qt;try{if(Up(),Nd.current=Cd,Td){for(var f=Pt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Td=!1}if(Bo=0,en=Kt=Pt=null,Sc=!1,bc=0,vm.current=null,u===null||u.return===null){Qt=1,Cc=o,qt=null;break}e:{var w=s,I=u.return,B=u,H=o;if(o=fn,B.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ne=H,ue=B,pe=ue.tag;if((ue.mode&1)===0&&(pe===0||pe===11||pe===15)){var ce=ue.alternate;ce?(ue.updateQueue=ce.updateQueue,ue.memoizedState=ce.memoizedState,ue.lanes=ce.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Se=qx(I);if(Se!==null){Se.flags&=-257,Wx(Se,I,B,w,o),Se.mode&1&&Bx(w,ne,o),o=Se,H=ne;var Ce=o.updateQueue;if(Ce===null){var je=new Set;je.add(H),o.updateQueue=je}else Ce.add(H);break e}else{if((o&1)===0){Bx(w,ne,o),Im();break e}H=Error(t(426))}}else if(At&&B.mode&1){var Ut=qx(I);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),Wx(Ut,I,B,w,o),Vp(tl(H,B));break e}}w=H=tl(H,B),Qt!==4&&(Qt=2),Rc===null?Rc=[w]:Rc.push(w),w=I;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var X=zx(w,H,o);px(w,X);break e;case 1:B=H;var Q=w.type,Z=w.stateNode;if((w.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Bi===null||!Bi.has(Z)))){w.flags|=65536,o&=-o,w.lanes|=o;var ye=$x(w,B,o);px(w,ye);break e}}w=w.return}while(w!==null)}E_(u)}catch(De){o=De,qt===u&&u!==null&&(qt=u=u.return);continue}break}while(!0)}function x_(){var s=Md.current;return Md.current=Cd,s===null?Cd:s}function Im(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),tn===null||(qo&268435455)===0&&(Od&268435455)===0||Hi(tn,fn)}function $d(s,o){var u=lt;lt|=2;var f=x_();(tn!==s||fn!==o)&&(Hs=null,Ho(s,o));do try{GC();break}catch(g){w_(s,g)}while(!0);if(Up(),lt=u,Md.current=f,qt!==null)throw Error(t(261));return tn=null,fn=0,Qt}function GC(){for(;qt!==null;)__(qt)}function KC(){for(;qt!==null&&!To();)__(qt)}function __(s){var o=N_(s.alternate,s,tr);s.memoizedProps=s.pendingProps,o===null?E_(s):qt=o,vm.current=null}function E_(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=UC(u,o,tr),u!==null){qt=u;return}}else{if(u=zC(u,o),u!==null){u.flags&=32767,qt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Qt=6,qt=null;return}}if(o=o.sibling,o!==null){qt=o;return}qt=o=s}while(o!==null);Qt===0&&(Qt=5)}function Go(s,o,u){var f=ot,g=yr.transition;try{yr.transition=null,ot=1,QC(s,o,u,f)}finally{yr.transition=g,ot=f}return null}function QC(s,o,u,f){do il();while(qi!==null);if((lt&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var w=u.lanes|u.childLanes;if(fp(s,w),s===tn&&(qt=tn=null,fn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Vd||(Vd=!0,T_(Io,function(){return il(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=yr.transition,yr.transition=null;var I=ot;ot=1;var B=lt;lt|=4,vm.current=null,BC(s,u),h_(u,s),mC(Ip),Os=!!Tp,Ip=Tp=null,s.current=u,qC(u),Ps(),lt=B,ot=I,yr.transition=w}else s.current=u;if(Vd&&(Vd=!1,qi=s,Fd=g),w=s.pendingLanes,w===0&&(Bi=null),Qu(u.stateNode),Fn(s,bt()),o!==null)for(f=s.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Ld)throw Ld=!1,s=_m,_m=null,s;return(Fd&1)!==0&&s.tag!==0&&il(),w=s.pendingLanes,(w&1)!==0?s===Em?kc++:(kc=0,Em=s):kc=0,Fi(),null}function il(){if(qi!==null){var s=Yr(Fd),o=yr.transition,u=ot;try{if(yr.transition=null,ot=16>s?16:s,qi===null)var f=!1;else{if(s=qi,qi=null,Fd=0,(lt&6)!==0)throw Error(t(331));var g=lt;for(lt|=4,Ie=s.current;Ie!==null;){var w=Ie,I=w.child;if((Ie.flags&16)!==0){var B=w.deletions;if(B!==null){for(var H=0;H<B.length;H++){var ne=B[H];for(Ie=ne;Ie!==null;){var ue=Ie;switch(ue.tag){case 0:case 11:case 15:Ac(8,ue,w)}var pe=ue.child;if(pe!==null)pe.return=ue,Ie=pe;else for(;Ie!==null;){ue=Ie;var ce=ue.sibling,Se=ue.return;if(a_(ue),ue===ne){Ie=null;break}if(ce!==null){ce.return=Se,Ie=ce;break}Ie=Se}}}var Ce=w.alternate;if(Ce!==null){var je=Ce.child;if(je!==null){Ce.child=null;do{var Ut=je.sibling;je.sibling=null,je=Ut}while(je!==null)}}Ie=w}}if((w.subtreeFlags&2064)!==0&&I!==null)I.return=w,Ie=I;else e:for(;Ie!==null;){if(w=Ie,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Ac(9,w,w.return)}var X=w.sibling;if(X!==null){X.return=w.return,Ie=X;break e}Ie=w.return}}var Q=s.current;for(Ie=Q;Ie!==null;){I=Ie;var Z=I.child;if((I.subtreeFlags&2064)!==0&&Z!==null)Z.return=I,Ie=Z;else e:for(I=Q;Ie!==null;){if(B=Ie,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Dd(9,B)}}catch(De){Ot(B,B.return,De)}if(B===I){Ie=null;break e}var ye=B.sibling;if(ye!==null){ye.return=B.return,Ie=ye;break e}Ie=B.return}}if(lt=g,Fi(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Ao,s)}catch{}f=!0}return f}finally{ot=u,yr.transition=o}}return!1}function S_(s,o,u){o=tl(u,o),o=zx(s,o,1),s=zi(s,o,1),o=Rn(),s!==null&&(Po(s,1,o),Fn(s,o))}function Ot(s,o,u){if(s.tag===3)S_(s,s,u);else for(;o!==null;){if(o.tag===3){S_(o,s,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Bi===null||!Bi.has(f))){s=tl(u,s),s=$x(o,s,1),o=zi(o,s,1),s=Rn(),o!==null&&(Po(o,1,s),Fn(o,s));break}}o=o.return}}function YC(s,o,u){var f=s.pingCache;f!==null&&f.delete(o),o=Rn(),s.pingedLanes|=s.suspendedLanes&u,tn===s&&(fn&u)===u&&(Qt===4||Qt===3&&(fn&130023424)===fn&&500>bt()-xm?Ho(s,0):wm|=u),Fn(s,o)}function b_(s,o){o===0&&((s.mode&1)===0?o=1:(o=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var u=Rn();s=Bs(s,o),s!==null&&(Po(s,o,u),Fn(s,u))}function XC(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),b_(s,u)}function JC(s,o){var u=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),b_(s,u)}var N_;N_=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Mn.current)Ln=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return Ln=!1,FC(s,o,u);Ln=(s.flags&131072)!==0}else Ln=!1,At&&(o.flags&1048576)!==0&&sx(o,yd,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Pd(s,o),s=o.pendingProps;var g=Ga(o,wn.current);Za(o,u),g=Xp(null,o,f,s,g,u);var w=Jp();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,On(f)?(w=!0,pd(o)):w=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,qp(o),g.updater=Rd,o.stateNode=g,g._reactInternals=o,sm(o,f,s,u),o=lm(null,o,f,!0,w,u)):(o.tag=0,At&&w&&Dp(o),Cn(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Pd(s,o),s=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=eR(f),s=Cr(f,s),g){case 0:o=am(null,o,f,s,u);break e;case 1:o=Xx(null,o,f,s,u);break e;case 11:o=Hx(null,o,f,s,u);break e;case 14:o=Gx(null,o,f,Cr(f.type,s),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Cr(f,g),am(s,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Cr(f,g),Xx(s,o,f,g,u);case 3:e:{if(Jx(o),s===null)throw Error(t(387));f=o.pendingProps,w=o.memoizedState,g=w.element,fx(s,o),Sd(o,f,null,u);var I=o.memoizedState;if(f=I.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){g=tl(Error(t(423)),o),o=Zx(s,o,f,u,g);break e}else if(f!==g){g=tl(Error(t(424)),o),o=Zx(s,o,f,u,g);break e}else for(er=Oi(o.stateNode.containerInfo.firstChild),Zn=o,At=!0,Ar=null,u=dx(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ya(),f===g){o=Ws(s,o,u);break e}Cn(s,o,f,u)}o=o.child}return o;case 5:return gx(o),s===null&&Lp(o),f=o.type,g=o.pendingProps,w=s!==null?s.memoizedProps:null,I=g.children,Ap(f,g)?I=null:w!==null&&Ap(f,w)&&(o.flags|=32),Yx(s,o),Cn(s,o,I,u),o.child;case 6:return s===null&&Lp(o),null;case 13:return e_(s,o,u);case 4:return Wp(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Xa(o,null,f,u):Cn(s,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Cr(f,g),Hx(s,o,f,g,u);case 7:return Cn(s,o,o.pendingProps,u),o.child;case 8:return Cn(s,o,o.pendingProps.children,u),o.child;case 12:return Cn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,w=o.memoizedProps,I=g.value,wt(xd,f._currentValue),f._currentValue=I,w!==null)if(Ir(w.value,I)){if(w.children===g.children&&!Mn.current){o=Ws(s,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var B=w.dependencies;if(B!==null){I=w.child;for(var H=B.firstContext;H!==null;){if(H.context===f){if(w.tag===1){H=qs(-1,u&-u),H.tag=2;var ne=w.updateQueue;if(ne!==null){ne=ne.shared;var ue=ne.pending;ue===null?H.next=H:(H.next=ue.next,ue.next=H),ne.pending=H}}w.lanes|=u,H=w.alternate,H!==null&&(H.lanes|=u),$p(w.return,u,o),B.lanes|=u;break}H=H.next}}else if(w.tag===10)I=w.type===o.type?null:w.child;else if(w.tag===18){if(I=w.return,I===null)throw Error(t(341));I.lanes|=u,B=I.alternate,B!==null&&(B.lanes|=u),$p(I,u,o),I=w.sibling}else I=w.child;if(I!==null)I.return=w;else for(I=w;I!==null;){if(I===o){I=null;break}if(w=I.sibling,w!==null){w.return=I.return,I=w;break}I=I.return}w=I}Cn(s,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Za(o,u),g=mr(g),f=f(g),o.flags|=1,Cn(s,o,f,u),o.child;case 14:return f=o.type,g=Cr(f,o.pendingProps),g=Cr(f.type,g),Gx(s,o,f,g,u);case 15:return Kx(s,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Cr(f,g),Pd(s,o),o.tag=1,On(f)?(s=!0,pd(o)):s=!1,Za(o,u),Fx(o,f,g),sm(o,f,g,u),lm(null,o,f,!0,s,u);case 19:return n_(s,o,u);case 22:return Qx(s,o,u)}throw Error(t(156,o.tag))};function T_(s,o){return Kl(s,o)}function ZC(s,o,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(s,o,u,f){return new ZC(s,o,u,f)}function Am(s){return s=s.prototype,!(!s||!s.isReactComponent)}function eR(s){if(typeof s=="function")return Am(s)?1:0;if(s!=null){if(s=s.$$typeof,s===z)return 11;if(s===xe)return 14}return 2}function Gi(s,o){var u=s.alternate;return u===null?(u=vr(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Bd(s,o,u,f,g,w){var I=2;if(f=s,typeof s=="function")Am(s)&&(I=1);else if(typeof s=="string")I=5;else e:switch(s){case C:return Ko(u.children,g,w,o);case T:I=8,g|=8;break;case O:return s=vr(12,u,o,g|2),s.elementType=O,s.lanes=w,s;case M:return s=vr(13,u,o,g),s.elementType=M,s.lanes=w,s;case he:return s=vr(19,u,o,g),s.elementType=he,s.lanes=w,s;case Ee:return qd(u,g,w,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:I=10;break e;case P:I=9;break e;case z:I=11;break e;case xe:I=14;break e;case fe:I=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=vr(I,u,o,g),o.elementType=s,o.type=f,o.lanes=w,o}function Ko(s,o,u,f){return s=vr(7,s,f,o),s.lanes=u,s}function qd(s,o,u,f){return s=vr(22,s,f,o),s.elementType=Ee,s.lanes=u,s.stateNode={isHidden:!1},s}function Cm(s,o,u){return s=vr(6,s,null,o),s.lanes=u,s}function Rm(s,o,u){return o=vr(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function tR(s,o,u,f,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zl(0),this.expirationTimes=Zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function km(s,o,u,f,g,w,I,B,H){return s=new tR(s,o,u,B,H),o===1?(o=1,w===!0&&(o|=8)):o=0,w=vr(3,null,null,o),s.current=w,w.stateNode=s,w.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},qp(w),s}function nR(s,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:f==null?null:""+f,children:s,containerInfo:o,implementation:u}}function I_(s){if(!s)return Vi;s=s._reactInternals;e:{if(Nr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(On(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(On(u))return tx(s,u,o)}return o}function A_(s,o,u,f,g,w,I,B,H){return s=km(u,f,!0,s,g,w,I,B,H),s.context=I_(null),u=s.current,f=Rn(),g=Wi(u),w=qs(f,g),w.callback=o??null,zi(u,w,g),s.current.lanes=g,Po(s,g,f),Fn(s,f),s}function Wd(s,o,u,f){var g=o.current,w=Rn(),I=Wi(g);return u=I_(u),o.context===null?o.context=u:o.pendingContext=u,o=qs(w,I),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=zi(g,o,I),s!==null&&(Pr(s,g,I,w),Ed(s,g,I)),I}function Hd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function C_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Pm(s,o){C_(s,o),(s=s.alternate)&&C_(s,o)}function rR(){return null}var R_=typeof reportError=="function"?reportError:function(s){console.error(s)};function jm(s){this._internalRoot=s}Gd.prototype.render=jm.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Wd(s,o,null,null)},Gd.prototype.unmount=jm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Wo(function(){Wd(null,s,null,null)}),o[Fs]=null}};function Gd(s){this._internalRoot=s}Gd.prototype.unstable_scheduleHydration=function(s){if(s){var o=rc();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Qn.length&&o!==0&&o<Qn[u].priority;u++);Qn.splice(u,0,s),u===0&&ka(s)}};function Dm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Kd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function k_(){}function sR(s,o,u,f,g){if(g){if(typeof f=="function"){var w=f;f=function(){var ne=Hd(I);w.call(ne)}}var I=A_(o,f,s,0,null,!1,!1,"",k_);return s._reactRootContainer=I,s[Fs]=I.current,mc(s.nodeType===8?s.parentNode:s),Wo(),I}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var B=f;f=function(){var ne=Hd(H);B.call(ne)}}var H=km(s,0,!1,null,null,!1,!1,"",k_);return s._reactRootContainer=H,s[Fs]=H.current,mc(s.nodeType===8?s.parentNode:s),Wo(function(){Wd(o,H,u,f)}),H}function Qd(s,o,u,f,g){var w=u._reactRootContainer;if(w){var I=w;if(typeof g=="function"){var B=g;g=function(){var H=Hd(I);B.call(H)}}Wd(o,I,s,g)}else I=sR(u,o,s,g,f);return Hd(I)}tc=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=ut(o.pendingLanes);u!==0&&(ec(o,u|1),Fn(o,bt()),(lt&6)===0&&(sl=bt()+500,Fi()))}break;case 13:Wo(function(){var f=Bs(s,1);if(f!==null){var g=Rn();Pr(f,s,1,g)}}),Pm(s,1)}},Ca=function(s){if(s.tag===13){var o=Bs(s,134217728);if(o!==null){var u=Rn();Pr(o,s,134217728,u)}Pm(s,134217728)}},nc=function(s){if(s.tag===13){var o=Wi(s),u=Bs(s,o);if(u!==null){var f=Rn();Pr(u,s,o,f)}Pm(s,o)}},rc=function(){return ot},sc=function(s,o){var u=ot;try{return ot=s,o()}finally{ot=u}},Cs=function(s,o,u){switch(o){case"input":if(ln(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==s&&f.form===s.form){var g=hd(f);if(!g)throw Error(t(90));Ve(f),ln(f,g)}}}break;case"textarea":$e(s,u);break;case"select":o=u.value,o!=null&&Hn(s,!!u.multiple,o,!1)}},Uu=Nm,zu=Wo;var iR={usingClientEntryPoint:!1,Events:[vc,Wa,hd,Ni,Ti,Nm]},Pc={findFiberByHostInstance:Lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oR={bundleType:Pc.bundleType,version:Pc.version,rendererPackageName:Pc.rendererPackageName,rendererConfig:Pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ku(s),s===null?null:s.stateNode},findFiberByHostInstance:Pc.findFiberByHostInstance||rR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Ao=Yd.inject(oR),Gn=Yd}catch{}}return Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iR,Un.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(o))throw Error(t(200));return nR(s,o,null,u)},Un.createRoot=function(s,o){if(!Dm(s))throw Error(t(299));var u=!1,f="",g=R_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=km(s,1,!1,null,null,u,!1,f,g),s[Fs]=o.current,mc(s.nodeType===8?s.parentNode:s),new jm(o)},Un.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Ku(o),s=s===null?null:s.stateNode,s},Un.flushSync=function(s){return Wo(s)},Un.hydrate=function(s,o,u){if(!Kd(o))throw Error(t(200));return Qd(null,s,o,!0,u)},Un.hydrateRoot=function(s,o,u){if(!Dm(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,w="",I=R_;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),o=A_(o,null,s,1,u??null,g,!1,w,I),s[Fs]=o.current,mc(s),f)for(s=0;s<f.length;s++)u=f[s],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Gd(o)},Un.render=function(s,o,u){if(!Kd(o))throw Error(t(200));return Qd(null,s,o,!1,u)},Un.unmountComponentAtNode=function(s){if(!Kd(s))throw Error(t(40));return s._reactRootContainer?(Wo(function(){Qd(null,null,s,!1,function(){s._reactRootContainer=null,s[Fs]=null})}),!0):!1},Un.unstable_batchedUpdates=Nm,Un.unstable_renderSubtreeIntoContainer=function(s,o,u,f){if(!Kd(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Qd(s,o,u,!1,f)},Un.version="18.3.1-next-f1338f8080-20240426",Un}var F_;function L1(){if(F_)return Lm.exports;F_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lm.exports=pR(),Lm.exports}var U_;function mR(){if(U_)return Xd;U_=1;var n=L1();return Xd.createRoot=n.createRoot,Xd.hydrateRoot=n.hydrateRoot,Xd}var gR=mR(),E=Cy();const Ks=O1(E),yR=lR({__proto__:null,default:Ks},[E]);var vR=(n,e,t,r,i,a,c,d)=>{let p=document.documentElement,m=["light","dark"];function y(b){(Array.isArray(n)?n:[n]).forEach(R=>{let N=R==="class",A=N&&a?i.map(L=>a[L]||L):i;N?(p.classList.remove(...A),p.classList.add(a&&a[b]?a[b]:b)):p.setAttribute(R,b)}),v(b)}function v(b){d&&m.includes(b)&&(p.style.colorScheme=b)}function _(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)y(r);else try{let b=localStorage.getItem(e)||t,R=c&&b==="system"?_():b;y(R)}catch{}},z_=["light","dark"],V1="(prefers-color-scheme: dark)",wR=typeof window>"u",Ry=E.createContext(void 0),xR={setTheme:n=>{},themes:[]},_R=()=>{var n;return(n=E.useContext(Ry))!=null?n:xR},ER=n=>E.useContext(Ry)?E.createElement(E.Fragment,null,n.children):E.createElement(bR,{...n}),SR=["light","dark"],bR=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=SR,defaultTheme:c=t?"system":"light",attribute:d="data-theme",value:p,children:m,nonce:y,scriptProps:v})=>{let[_,b]=E.useState(()=>TR(i,c)),[R,N]=E.useState(()=>_==="system"?Um():_),A=p?Object.values(p):a,L=E.useCallback(K=>{let ee=K;if(!ee)return;K==="system"&&t&&(ee=Um());let C=p?p[ee]:ee,T=e?IR(y):null,O=document.documentElement,$=P=>{P==="class"?(O.classList.remove(...A),C&&O.classList.add(C)):P.startsWith("data-")&&(C?O.setAttribute(P,C):O.removeAttribute(P))};if(Array.isArray(d)?d.forEach($):$(d),r){let P=z_.includes(c)?c:null,z=z_.includes(ee)?ee:P;O.style.colorScheme=z}T==null||T()},[y]),j=E.useCallback(K=>{let ee=typeof K=="function"?K(_):K;b(ee);try{localStorage.setItem(i,ee)}catch{}},[_]),k=E.useCallback(K=>{let ee=Um(K);N(ee),_==="system"&&t&&!n&&L("system")},[_,n]);E.useEffect(()=>{let K=window.matchMedia(V1);return K.addListener(k),k(K),()=>K.removeListener(k)},[k]),E.useEffect(()=>{let K=ee=>{ee.key===i&&(ee.newValue?b(ee.newValue):j(c))};return window.addEventListener("storage",K),()=>window.removeEventListener("storage",K)},[j]),E.useEffect(()=>{L(n??_)},[n,_]);let U=E.useMemo(()=>({theme:_,setTheme:j,forcedTheme:n,resolvedTheme:_==="system"?R:_,themes:t?[...a,"system"]:a,systemTheme:t?R:void 0}),[_,j,n,R,t,a]);return E.createElement(Ry.Provider,{value:U},E.createElement(NR,{forcedTheme:n,storageKey:i,attribute:d,enableSystem:t,enableColorScheme:r,defaultTheme:c,value:p,themes:a,nonce:y,scriptProps:v}),m)},NR=E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:c,themes:d,nonce:p,scriptProps:m})=>{let y=JSON.stringify([t,e,a,n,d,c,r,i]).slice(1,-1);return E.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(${vR.toString()})(${y})`}})}),TR=(n,e)=>{if(wR)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},IR=n=>{let e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Um=n=>(n||(n=window.matchMedia(V1)),n.matches?"dark":"light");const AR="modulepreload",CR=function(n){return"/"+n},$_={},B_=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(t.map(m=>{if(m=CR(m),m in $_)return;$_[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":AR,y||(_.as="script"),_.crossOrigin="",_.href=m,p&&_.setAttribute("nonce",p),document.head.appendChild(_),y)return new Promise((b,R)=>{_.addEventListener("load",b),_.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},RR=()=>{};var q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},kR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],d=n[t++],p=((i&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},U1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,d=c?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,y=a>>2,v=(a&3)<<4|d>>4;let _=(d&15)<<2|m>>6,b=m&63;p||(b=64,c||(_=64)),r.push(t[y],t[v],t[_],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(F1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||m==null||v==null)throw new PR;const _=a<<2|d>>4;if(r.push(_),m!==64){const b=d<<4&240|m>>2;if(r.push(b),v!==64){const R=m<<6&192|v;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jR=function(n){const e=F1(n);return U1.encodeByteArray(e,!0)},Ph=function(n){return jR(n).replace(/\./g,"")},z1=function(n){try{return U1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>DR().__FIREBASE_DEFAULTS__,OR=()=>{if(typeof process>"u"||typeof q_>"u")return;const n=q_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&z1(n[1]);return e&&JSON.parse(e)},df=()=>{try{return RR()||MR()||OR()||LR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$1=n=>{var e,t;return(t=(e=df())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ky=n=>{const e=$1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},B1=()=>{var n;return(n=df())==null?void 0:n.config},q1=n=>{var e;return(e=df())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hf(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ph(JSON.stringify(t)),Ph(JSON.stringify(c)),""].join(".")}const Hc={};function FR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hc))Hc[e]?n.emulator.push(e):n.prod.push(e);return n}function UR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let W_=!1;function ff(n,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||Hc[n]===e||Hc[n]||W_)return;Hc[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=FR().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function p(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{W_=!0,c()},_}function y(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=UR(r),b=t("text"),R=document.getElementById(b)||document.createElement("span"),N=t("learnmore"),A=document.getElementById(N)||document.createElement("a"),L=t("preprendIcon"),j=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const k=_.element;d(k),y(A,N);const U=m();p(j,L),k.append(j,R,A,U),document.body.appendChild(k)}a?(R.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function $R(){var e;const n=(e=df())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function WR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){const n=An();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GR(){return!$R()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KR(){try{return typeof indexedDB=="object"}catch{return!1}}function QR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="FirebaseError";class Ss extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=YR,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?XR(a,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Ss(i,d,r)}}function XR(n,e){return n.replace(JR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JR=/\{\$([^}]+)}/g;function ZR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(H_(a)&&H_(c)){if(!sa(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function H_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ek(n,e){const t=new tk(n,e);return t.subscribe.bind(t)}class tk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zm),i.error===void 0&&(i.error=zm),i.complete===void 0&&(i.complete=zm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class ci{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new VR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ik(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sk(n){return n===Xo?void 0:n}function ik(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const ak={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},lk=rt.INFO,ck={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},uk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ck[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Py{constructor(e){this.name=e,this._logLevel=lk,this._logHandler=uk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ak[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const dk=(n,e)=>e.some(t=>n instanceof t);let G_,K_;function hk(){return G_||(G_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fk(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H1=new WeakMap,Mg=new WeakMap,G1=new WeakMap,$m=new WeakMap,jy=new WeakMap;function pk(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(ro(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&H1.set(t,n)}).catch(()=>{}),jy.set(e,n),e}function mk(n){if(Mg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Mg.set(n,e)}let Og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||G1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ro(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gk(n){Og=n(Og)}function yk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bm(this),e,...t);return G1.set(r,e.sort?e.sort():[e]),ro(r)}:fk().includes(n)?function(...e){return n.apply(Bm(this),e),ro(H1.get(this))}:function(...e){return ro(n.apply(Bm(this),e))}}function vk(n){return typeof n=="function"?yk(n):(n instanceof IDBTransaction&&mk(n),dk(n,hk())?new Proxy(n,Og):n)}function ro(n){if(n instanceof IDBRequest)return pk(n);if($m.has(n))return $m.get(n);const e=vk(n);return e!==n&&($m.set(n,e),jy.set(e,n)),e}const Bm=n=>jy.get(n);function wk(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),d=ro(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ro(c.result),p.oldVersion,p.newVersion,ro(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const xk=["get","getKey","getAll","getAllKeys","count"],_k=["put","add","delete","clear"],qm=new Map;function Q_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qm.get(e))return qm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=_k.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xk.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,i?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&p.done]))[0]};return qm.set(e,a),a}gk(n=>({...n,get:(e,t,r)=>Q_(e,t)||n.get(e,t,r),has:(e,t)=>!!Q_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Sk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lg="@firebase/app",Y_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Py("@firebase/app"),bk="@firebase/app-compat",Nk="@firebase/analytics-compat",Tk="@firebase/analytics",Ik="@firebase/app-check-compat",Ak="@firebase/app-check",Ck="@firebase/auth",Rk="@firebase/auth-compat",kk="@firebase/database",Pk="@firebase/data-connect",jk="@firebase/database-compat",Dk="@firebase/functions",Mk="@firebase/functions-compat",Ok="@firebase/installations",Lk="@firebase/installations-compat",Vk="@firebase/messaging",Fk="@firebase/messaging-compat",Uk="@firebase/performance",zk="@firebase/performance-compat",$k="@firebase/remote-config",Bk="@firebase/remote-config-compat",qk="@firebase/storage",Wk="@firebase/storage-compat",Hk="@firebase/firestore",Gk="@firebase/ai",Kk="@firebase/firestore-compat",Qk="firebase",Yk="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",Xk={[Lg]:"fire-core",[bk]:"fire-core-compat",[Tk]:"fire-analytics",[Nk]:"fire-analytics-compat",[Ak]:"fire-app-check",[Ik]:"fire-app-check-compat",[Ck]:"fire-auth",[Rk]:"fire-auth-compat",[kk]:"fire-rtdb",[Pk]:"fire-data-connect",[jk]:"fire-rtdb-compat",[Dk]:"fire-fn",[Mk]:"fire-fn-compat",[Ok]:"fire-iid",[Lk]:"fire-iid-compat",[Vk]:"fire-fcm",[Fk]:"fire-fcm-compat",[Uk]:"fire-perf",[zk]:"fire-perf-compat",[$k]:"fire-rc",[Bk]:"fire-rc-compat",[qk]:"fire-gcs",[Wk]:"fire-gcs-compat",[Hk]:"fire-fst",[Kk]:"fire-fst-compat",[Gk]:"fire-vertex","fire-js":"fire-js",[Qk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,Jk=new Map,Fg=new Map;function X_(n,e){try{n.container.addComponent(e)}catch(t){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lo(n){const e=n.name;if(Fg.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;Fg.set(e,n);for(const t of jh.values())X_(t,n);for(const t of Jk.values())X_(t,n);return!0}function wu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new yu("app","Firebase",Zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=Yk;function K1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Vg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw so.create("bad-app-name",{appName:String(i)});if(t||(t=B1()),!t)throw so.create("no-options");const a=jh.get(i);if(a){if(sa(t,a.options)&&sa(r,a.config))return a;throw so.create("duplicate-app",{appName:i})}const c=new ok(i);for(const p of Fg.values())c.addComponent(p);const d=new eP(t,r,c);return jh.set(i,d),d}function pf(n=Vg){const e=jh.get(n);if(!e&&n===Vg&&B1())return K1();if(!e)throw so.create("no-app",{appName:n});return e}function xr(n,e,t){let r=Xk[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(c.join(" "));return}lo(new ci(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebase-heartbeat-database",nP=1,nu="firebase-heartbeat-store";let Wm=null;function Q1(){return Wm||(Wm=wk(tP,nP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw so.create("idb-open",{originalErrorMessage:n.message})})),Wm}async function rP(n){try{const t=(await Q1()).transaction(nu),r=await t.objectStore(nu).get(Y1(n));return await t.done,r}catch(e){if(e instanceof Ss)ui.warn(e.message);else{const t=so.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(t.message)}}}async function J_(n,e){try{const r=(await Q1()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,Y1(n)),await r.done}catch(t){if(t instanceof Ss)ui.warn(t.message);else{const r=so.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ui.warn(r.message)}}}function Y1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=1024,iP=30;class oP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Z_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>iP){const c=cP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Z_(),{heartbeatsToSend:r,unsentEntries:i}=aP(this._heartbeatsCache.heartbeats),a=Ph(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ui.warn(t),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function aP(n,e=sP){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),e0(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),e0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class lP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KR()?QR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function e0(n){return Ph(JSON.stringify({version:2,heartbeats:n})).length}function cP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n){lo(new ci("platform-logger",e=>new Ek(e),"PRIVATE")),lo(new ci("heartbeat",e=>new oP(e),"PRIVATE")),xr(Lg,Y_,n),xr(Lg,Y_,"esm2020"),xr("fire-js","")}uP("");function X1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dP=X1,J1=new yu("auth","Firebase",X1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Py("@firebase/auth");function hP(n,...e){Dh.logLevel<=rt.WARN&&Dh.warn(`Auth (${ga}): ${n}`,...e)}function vh(n,...e){Dh.logLevel<=rt.ERROR&&Dh.error(`Auth (${ga}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(n,...e){throw My(n,...e)}function Lr(n,...e){return My(n,...e)}function Dy(n,e,t){const r={...dP(),[e]:t};return new yu("auth","Firebase",r).create(e,{appName:n.name})}function ms(n){return Dy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z1(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&cr(n,"argument-error"),Dy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function My(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return J1.create(n,...e)}function Fe(n,e,...t){if(!n)throw My(e,...t)}function Ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vh(e),new Error(e)}function di(n,e){n||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function fP(){return t0()==="http:"||t0()==="https:"}function t0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fP()||qR()||"connection"in navigator)?navigator.onLine:!0}function mP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,di(t>e,"Short delay should be less than long delay!"),this.isMobile=zR()||WR()}get(){return pP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n,e){di(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vP=new xu(3e4,6e4);function bs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ns(n,e,t,r,i={}){return tS(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=vu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...a};return BR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&vi(n.emulatorConfig.host)&&(m.credentials="include"),eS.fetch()(await nS(n,n.config.apiHost,t,d),m)})}async function tS(n,e,t){n._canInitEmulator=!1;const r={...gP,...e};try{const i=new xP(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Jd(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jd(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Jd(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Jd(n,"user-disabled",c);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Dy(n,y,m);cr(n,y)}}catch(i){if(i instanceof Ss)throw i;cr(n,"network-request-failed",{message:String(i)})}}async function _u(n,e,t,r,i={}){const a=await Ns(n,e,t,r,i);return"mfaPendingCredential"in a&&cr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function nS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?Oy(n.config,i):`${n.config.apiScheme}://${i}`;return yP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function wP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),vP.get())})}}function Jd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Lr(n,e,r);return i.customData._tokenResponse=t,i}function n0(n){return n!==void 0&&n.enterprise!==void 0}class _P{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EP(n,e){return Ns(n,"GET","/v2/recaptchaConfig",bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(n,e){return Ns(n,"POST","/v1/accounts:delete",e)}async function Mh(n,e){return Ns(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bP(n,e=!1){const t=dt(n),r=await t.getIdToken(e),i=Ly(r);Fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Gc(Hm(i.auth_time)),issuedAtTime:Gc(Hm(i.iat)),expirationTime:Gc(Hm(i.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Hm(n){return Number(n)*1e3}function Ly(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const i=z1(t);return i?JSON.parse(i):(vh("Failed to decode base64 JWT payload"),null)}catch(i){return vh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function r0(n){const e=Ly(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ss&&NP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function NP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(n){var v;const e=n.auth,t=await n.getIdToken(),r=await ru(n,Mh(e,{idToken:t}));Fe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=(v=i.providerUserInfo)!=null&&v.length?rS(i.providerUserInfo):[],c=AP(n.providerData,a),d=n.isAnonymous,p=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),m=d?p:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new zg(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function IP(n){const e=dt(n);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(n,e){const t=await tS(n,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await nS(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return n.emulatorConfig&&vi(n.emulatorConfig.host)&&(p.credentials="include"),eS.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RP(n,e){return Ns(n,"POST","/v2/accounts:revokeToken",bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=r0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await CP(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new ml;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Fe(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Fe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new TP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bP(this,e)}reload(){return IP(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await ru(this,SP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:R,stsTokenManager:N}=t;Fe(v&&N,e,"internal-error");const A=ml.fromJSON(this.name,N);Fe(typeof v=="string",e,"internal-error"),Qi(r,e.name),Qi(i,e.name),Fe(typeof _=="boolean",e,"internal-error"),Fe(typeof b=="boolean",e,"internal-error"),Qi(a,e.name),Qi(c,e.name),Qi(d,e.name),Qi(p,e.name),Qi(m,e.name),Qi(y,e.name);const L=new Mr({uid:v,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:A,createdAt:m,lastLoginAt:y});return R&&Array.isArray(R)&&(L.providerData=R.map(j=>({...j}))),p&&(L._redirectEventId=p),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new ml;i.updateFromServerResponse(t);const a=new Mr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Oh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Fe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?rS(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new ml;d.updateFromIdToken(r);const p=new Mr({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new zg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new Map;function Xs(n){di(n instanceof Function,"Expected a class definition");let e=s0.get(n);return e?(di(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,s0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sS.type="NONE";const i0=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n,e,t){return`firebase:${n}:${e}:${t}`}class gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=wh(this.userKey,i.apiKey,a),this.fullPersistenceKey=wh("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mh(this.auth,{idToken:e}).catch(()=>{});return t?Mr._fromGetAccountInfoResponse(this.auth,t,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new gl(Xs(i0),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||Xs(i0);const c=wh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const _=await Mh(e,{idToken:y}).catch(()=>{});if(!_)break;v=await Mr._fromGetAccountInfoResponse(e,_,y)}else v=Mr._fromJSON(e,y);m!==a&&(d=v),a=m;break}}catch{}const p=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new gl(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new gl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uS(e))return"Blackberry";if(dS(e))return"Webos";if(oS(e))return"Safari";if((e.includes("chrome/")||aS(e))&&!e.includes("edge/"))return"Chrome";if(cS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iS(n=An()){return/firefox\//i.test(n)}function oS(n=An()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aS(n=An()){return/crios\//i.test(n)}function lS(n=An()){return/iemobile/i.test(n)}function cS(n=An()){return/android/i.test(n)}function uS(n=An()){return/blackberry/i.test(n)}function dS(n=An()){return/webos/i.test(n)}function Vy(n=An()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kP(n=An()){var e;return Vy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function PP(){return HR()&&document.documentMode===10}function hS(n=An()){return Vy(n)||cS(n)||dS(n)||uS(n)||/windows phone/i.test(n)||lS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(n,e=[]){let t;switch(n){case"Browser":t=o0(An());break;case"Worker":t=`${o0(An())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e={}){return Ns(n,"GET","/v2/passwordPolicy",bs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=6;class OP{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??MP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a0(this),this.idTokenSubscription=new a0(this),this.beforeStateQueue=new jP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mh(this,{idToken:e}),r=await Mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Tn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(ms(this));const t=e?dt(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DP(this),t=new OP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await RP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&hP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Er(n){return dt(n)}class a0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ek(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VP(n){mf=n}function pS(n){return mf.loadJS(n)}function FP(){return mf.recaptchaEnterpriseScript}function UP(){return mf.gapiScript}function zP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class $P{constructor(){this.enterprise=new BP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qP="recaptcha-enterprise",mS="NO_RECAPTCHA";class WP{constructor(e){this.type=qP,this.auth=Er(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{EP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new _P(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function i(a,c,d){const p=window.grecaptcha;n0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(mS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $P().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&n0(window.grecaptcha))i(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=FP();p.length!==0&&(p+=d),pS(p).then(()=>{i(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function l0(n,e,t,r=!1,i=!1){const a=new WP(n);let c;if(i)c=mS;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Lh(n,e,t,r,i){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await l0(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await l0(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n,e){const t=wu(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(sa(a,e??{}))return i;cr(i,"already-initialized")}return t.initialize({options:e})}function GP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Xs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KP(n,e,t){const r=Er(n);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=gS(e),{host:c,port:d}=QP(e),p=d===null?"":`:${d}`,m={url:`${a}//${c}${p}/`},y=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(sa(m,r.config.emulator)&&sa(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,vi(c)?(hf(`${a}//${c}${p}`),ff("Auth",!0)):YP()}function gS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QP(n){const e=gS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:c0(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:c0(c)}}}function c0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function YP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(n,e){return Ns(n,"POST","/v1/accounts:resetPassword",bs(n,e))}async function XP(n,e){return Ns(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(n,e){return _u(n,"POST","/v1/accounts:signInWithPassword",bs(n,e))}async function ZP(n,e){return Ns(n,"POST","/v1/accounts:sendOobCode",bs(n,e))}async function e2(n,e){return ZP(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(n,e){return _u(n,"POST","/v1/accounts:signInWithEmailLink",bs(n,e))}async function n2(n,e){return _u(n,"POST","/v1/accounts:signInWithEmailLink",bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Fy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new su(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new su(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lh(e,t,"signInWithPassword",JP);case"emailLink":return t2(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lh(e,r,"signUpPassword",XP);case"emailLink":return n2(e,{idToken:t,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n,e){return _u(n,"POST","/v1/accounts:signInWithIdp",bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="http://localhost";class ia extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new ia(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return yl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yl(e,t)}buildRequest(){const e={requestUri:r2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i2(n){const e=Vc(Fc(n)).link,t=e?Vc(Fc(e)).deep_link_id:null,r=Vc(Fc(n)).deep_link_id;return(r?Vc(Fc(r)).link:null)||r||t||e||n}class Uy{constructor(e){const t=Vc(Fc(e)),r=t.apiKey??null,i=t.oobCode??null,a=s2(t.mode??null);Fe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=i2(e);try{return new Uy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,t){return su._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Uy.parseLink(t);return Fe(r,"argument-error"),su._fromEmailAndCode(e,r.code,r.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends gf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Eu{constructor(){super("facebook.com")}static credential(e){return ia._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ia._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qs.credential(t,r)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Eu{constructor(){super("github.com")}static credential(e){return ia._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Eu{constructor(){super("twitter.com")}static credential(e,t){return ia._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return eo.credential(t,r)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(n,e){return _u(n,"POST","/v1/accounts:signUp",bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Mr._fromIdTokenResponse(e,r,i),c=u0(r);return new oa({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=u0(r);return new oa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function u0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Ss{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Vh(e,t,r,i)}}function vS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(n,a,e,r):a})}async function a2(n,e,t=!1){const r=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return oa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(n,e,t=!1){const{auth:r}=n;if(Tn(r.app))return Promise.reject(ms(r));const i="reauthenticate";try{const a=await ru(n,vS(r,i,e,n),t);Fe(a.idToken,r,"internal-error");const c=Ly(a.idToken);Fe(c,r,"internal-error");const{sub:d}=c;return Fe(n.uid===d,r,"user-mismatch"),oa._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&cr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(n,e,t=!1){if(Tn(n.app))return Promise.reject(ms(n));const r="signIn",i=await vS(n,r,e),a=await oa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function c2(n,e){return wS(Er(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?$y._fromServerResponse(e,t):"totpInfo"in t?By._fromServerResponse(e,t):cr(e,"internal-error")}}class $y extends zy{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new $y(t)}}class By extends zy{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new By(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qy(n){const e=Er(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u2(n,e,t){const r=Er(n);await Lh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",e2)}async function d2(n,e,t){await yS(dt(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qy(n),r})}async function h2(n,e){const t=dt(n),r=await yS(t,{oobCode:e}),i=r.requestType;switch(Fe(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(r.mfaInfo,t,"internal-error");default:Fe(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=zy._fromServerResponse(Er(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function f2(n,e){const{data:t}=await h2(dt(n),e);return t.email}async function Gm(n,e,t){if(Tn(n.app))return Promise.reject(ms(n));const r=Er(n),c=await Lh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&qy(n),p}),d=await oa._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function p2(n,e,t){return Tn(n.app)?Promise.reject(ms(n)):c2(dt(n),Rl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qy(n),r})}function m2(n,e,t,r){return dt(n).onIdTokenChanged(e,t,r)}function g2(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function y2(n,e,t,r){return dt(n).onAuthStateChanged(e,t,r)}function Qo(n){return dt(n).signOut()}const Fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=1e3,w2=10;class _S extends xS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);PP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,w2):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},v2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_S.type="LOCAL";const x2=_S;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends xS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ES.type="SESSION";const SS=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new yf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async m=>m(t.origin,a)),p=await _2(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const m=Wy("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(v){const _=v;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(_.data.response);break;default:clearTimeout(y),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return window}function S2(n){gs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){return typeof gs().WorkerGlobalScope<"u"&&typeof gs().importScripts=="function"}async function b2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function T2(){return bS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="firebaseLocalStorageDb",I2=1,Uh="firebaseLocalStorage",TS="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vf(n,e){return n.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function A2(){const n=indexedDB.deleteDatabase(NS);return new Su(n).toPromise()}function $g(){const n=indexedDB.open(NS,I2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Uh,{keyPath:TS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Uh)?e(r):(r.close(),await A2(),e(await $g()))})})}async function d0(n,e,t){const r=vf(n,!0).put({[TS]:e,value:t});return new Su(r).toPromise()}async function C2(n,e){const t=vf(n,!1).get(e),r=await new Su(t).toPromise();return r===void 0?null:r.value}function h0(n,e){const t=vf(n,!0).delete(e);return new Su(t).toPromise()}const R2=800,k2=3;class IS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>k2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yf._getInstance(T2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await b2(),!this.activeServiceWorker)return;this.sender=new E2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await d0(e,Fh,"1"),await h0(e,Fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>d0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>C2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>h0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=vf(i,!1).getAll();return new Su(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IS.type="LOCAL";const P2=IS;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(n,e){return e?Xs(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function j2(n){return wS(n.auth,new Gy(n),n.bypassAuthState)}function D2(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),l2(t,new Gy(n),n.bypassAuthState)}async function M2(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),a2(t,new Gy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j2;case"linkViaPopup":case"linkViaRedirect":return M2;case"reauthViaPopup":case"reauthViaRedirect":return D2;default:cr(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new xu(2e3,1e4);async function L2(n,e,t){if(Tn(n.app))return Promise.reject(Lr(n,"operation-not-supported-in-this-environment"));const r=Er(n);Z1(n,e,gf);const i=Hy(r,t);return new Zo(r,"signInViaPopup",e,i).executeNotNull()}class Zo extends AS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=Wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O2.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="pendingRedirect",xh=new Map;class F2 extends AS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xh.get(this.auth._key());if(!e){try{const r=await U2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xh.set(this.auth._key(),e)}return this.bypassAuthState||xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U2(n,e){const t=RS(e),r=CS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function z2(n,e){return CS(n)._set(RS(e),"true")}function $2(n,e){xh.set(n._key(),e)}function CS(n){return Xs(n._redirectPersistence)}function RS(n){return wh(V2,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n,e,t){return q2(n,e,t)}async function q2(n,e,t){if(Tn(n.app))return Promise.reject(ms(n));const r=Er(n);Z1(n,e,gf),await r._initializationPromise;const i=Hy(r,t);return await z2(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function W2(n,e){return await Er(n)._initializationPromise,kS(n,e,!1)}async function kS(n,e,t=!1){if(Tn(n.app))return Promise.reject(ms(n));const r=Er(n),i=Hy(r,e),c=await new F2(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=600*1e3;class G2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!PS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Lr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(f0(e))}saveEventToCache(e){this.cachedEventUids.add(f0(e)),this.lastProcessedEventTime=Date.now()}}function f0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(n,e={}){return Ns(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X2=/^https?/;async function J2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Q2(n);for(const t of e)try{if(Z2(t))return}catch{}cr(n,"unauthorized-domain")}function Z2(n){const e=Ug(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!X2.test(t))return!1;if(Y2.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new xu(3e4,6e4);function p0(){const n=gs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tj(n){return new Promise((e,t)=>{var i,a,c;function r(){p0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p0(),t(Lr(n,"network-request-failed"))},timeout:ej.get()})}if((a=(i=gs().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=gs().gapi)!=null&&c.load)r();else{const d=zP("iframefcb");return gs()[d]=()=>{gapi.load?r():t(Lr(n,"network-request-failed"))},pS(`${UP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw _h=null,e})}let _h=null;function nj(n){return _h=_h||tj(n),_h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new xu(5e3,15e3),sj="__/auth/iframe",ij="emulator/auth/iframe",oj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lj(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Oy(e,ij):`https://${n.config.authDomain}/${sj}`,r={apiKey:e.apiKey,appName:n.name,v:ga},i=aj.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${vu(r).slice(1)}`}async function cj(n){const e=await nj(n),t=gs().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:lj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oj,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Lr(n,"network-request-failed"),d=gs().setTimeout(()=>{a(c)},rj.get());function p(){gs().clearTimeout(d),i(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dj=500,hj=600,fj="_blank",pj="http://localhost";class m0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mj(n,e,t,r=dj,i=hj){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p={...uj,width:r.toString(),height:i.toString(),top:a,left:c},m=An().toLowerCase();t&&(d=aS(m)?fj:t),iS(m)&&(e=e||pj,p.scrollbars="yes");const y=Object.entries(p).reduce((_,[b,R])=>`${_}${b}=${R},`,"");if(kP(m)&&d!=="_self")return gj(e||"",d),new m0(null);const v=window.open(e||"",d,y);Fe(v,n,"popup-blocked");try{v.focus()}catch{}return new m0(v)}function gj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="__/auth/handler",vj="emulator/auth/handler",wj=encodeURIComponent("fac");async function g0(n,e,t,r,i,a){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ga,eventId:i};if(e instanceof gf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",ZR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Eu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),m=p?`#${wj}=${encodeURIComponent(p)}`:"";return`${xj(n)}?${vu(d).slice(1)}${m}`}function xj({config:n}){return n.emulator?Oy(n,vj):`https://${n.authDomain}/${yj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="webStorageSupport";class _j{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SS,this._completeRedirectFn=kS,this._overrideRedirectResult=$2}async _openPopup(e,t,r,i){var c;di((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await g0(e,t,r,Ug(),i);return mj(e,a,Wy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await g0(e,t,r,Ug(),i);return S2(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(di(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await cj(e),r=new G2(e);return t.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Km,{type:Km},i=>{var c;const a=(c=i==null?void 0:i[0])==null?void 0:c[Km];a!==void 0&&t(!!a),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=J2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hS()||oS()||Vy()}}const Ej=_j;var y0="@firebase/auth",v0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nj(n){lo(new ci("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Fe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fS(n)},m=new LP(r,i,a,p);return GP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),lo(new ci("auth-internal",e=>{const t=Er(e.getProvider("auth").getImmediate());return(r=>new Sj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(y0,v0,bj(n)),xr(y0,v0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=300,Ij=q1("authIdTokenMaxAge")||Tj;let w0=null;const Aj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ij)return;const i=t==null?void 0:t.token;w0!==i&&(w0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Cj(n=pf()){const e=wu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=HP(n,{popupRedirectResolver:Ej,persistence:[P2,x2,SS]}),r=q1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=Aj(a.toString());g2(t,c,()=>c(t.currentUser)),m2(t,d=>c(d))}}const i=$1("auth");return i&&KP(t,`http://${i}`),t}function Rj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}VP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Lr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",Rj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nj("Browser");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,jS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function O(){}O.prototype=T.prototype,C.F=T.prototype,C.prototype=new O,C.prototype.constructor=C,C.D=function($,P,z){for(var M=Array(arguments.length-2),he=2;he<arguments.length;he++)M[he-2]=arguments[he];return T.prototype[P].apply($,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,T,O){O||(O=0);const $=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)$[P]=T.charCodeAt(O++)|T.charCodeAt(O++)<<8|T.charCodeAt(O++)<<16|T.charCodeAt(O++)<<24;else for(P=0;P<16;++P)$[P]=T[O++]|T[O++]<<8|T[O++]<<16|T[O++]<<24;T=C.g[0],O=C.g[1],P=C.g[2];let z=C.g[3],M;M=T+(z^O&(P^z))+$[0]+3614090360&4294967295,T=O+(M<<7&4294967295|M>>>25),M=z+(P^T&(O^P))+$[1]+3905402710&4294967295,z=T+(M<<12&4294967295|M>>>20),M=P+(O^z&(T^O))+$[2]+606105819&4294967295,P=z+(M<<17&4294967295|M>>>15),M=O+(T^P&(z^T))+$[3]+3250441966&4294967295,O=P+(M<<22&4294967295|M>>>10),M=T+(z^O&(P^z))+$[4]+4118548399&4294967295,T=O+(M<<7&4294967295|M>>>25),M=z+(P^T&(O^P))+$[5]+1200080426&4294967295,z=T+(M<<12&4294967295|M>>>20),M=P+(O^z&(T^O))+$[6]+2821735955&4294967295,P=z+(M<<17&4294967295|M>>>15),M=O+(T^P&(z^T))+$[7]+4249261313&4294967295,O=P+(M<<22&4294967295|M>>>10),M=T+(z^O&(P^z))+$[8]+1770035416&4294967295,T=O+(M<<7&4294967295|M>>>25),M=z+(P^T&(O^P))+$[9]+2336552879&4294967295,z=T+(M<<12&4294967295|M>>>20),M=P+(O^z&(T^O))+$[10]+4294925233&4294967295,P=z+(M<<17&4294967295|M>>>15),M=O+(T^P&(z^T))+$[11]+2304563134&4294967295,O=P+(M<<22&4294967295|M>>>10),M=T+(z^O&(P^z))+$[12]+1804603682&4294967295,T=O+(M<<7&4294967295|M>>>25),M=z+(P^T&(O^P))+$[13]+4254626195&4294967295,z=T+(M<<12&4294967295|M>>>20),M=P+(O^z&(T^O))+$[14]+2792965006&4294967295,P=z+(M<<17&4294967295|M>>>15),M=O+(T^P&(z^T))+$[15]+1236535329&4294967295,O=P+(M<<22&4294967295|M>>>10),M=T+(P^z&(O^P))+$[1]+4129170786&4294967295,T=O+(M<<5&4294967295|M>>>27),M=z+(O^P&(T^O))+$[6]+3225465664&4294967295,z=T+(M<<9&4294967295|M>>>23),M=P+(T^O&(z^T))+$[11]+643717713&4294967295,P=z+(M<<14&4294967295|M>>>18),M=O+(z^T&(P^z))+$[0]+3921069994&4294967295,O=P+(M<<20&4294967295|M>>>12),M=T+(P^z&(O^P))+$[5]+3593408605&4294967295,T=O+(M<<5&4294967295|M>>>27),M=z+(O^P&(T^O))+$[10]+38016083&4294967295,z=T+(M<<9&4294967295|M>>>23),M=P+(T^O&(z^T))+$[15]+3634488961&4294967295,P=z+(M<<14&4294967295|M>>>18),M=O+(z^T&(P^z))+$[4]+3889429448&4294967295,O=P+(M<<20&4294967295|M>>>12),M=T+(P^z&(O^P))+$[9]+568446438&4294967295,T=O+(M<<5&4294967295|M>>>27),M=z+(O^P&(T^O))+$[14]+3275163606&4294967295,z=T+(M<<9&4294967295|M>>>23),M=P+(T^O&(z^T))+$[3]+4107603335&4294967295,P=z+(M<<14&4294967295|M>>>18),M=O+(z^T&(P^z))+$[8]+1163531501&4294967295,O=P+(M<<20&4294967295|M>>>12),M=T+(P^z&(O^P))+$[13]+2850285829&4294967295,T=O+(M<<5&4294967295|M>>>27),M=z+(O^P&(T^O))+$[2]+4243563512&4294967295,z=T+(M<<9&4294967295|M>>>23),M=P+(T^O&(z^T))+$[7]+1735328473&4294967295,P=z+(M<<14&4294967295|M>>>18),M=O+(z^T&(P^z))+$[12]+2368359562&4294967295,O=P+(M<<20&4294967295|M>>>12),M=T+(O^P^z)+$[5]+4294588738&4294967295,T=O+(M<<4&4294967295|M>>>28),M=z+(T^O^P)+$[8]+2272392833&4294967295,z=T+(M<<11&4294967295|M>>>21),M=P+(z^T^O)+$[11]+1839030562&4294967295,P=z+(M<<16&4294967295|M>>>16),M=O+(P^z^T)+$[14]+4259657740&4294967295,O=P+(M<<23&4294967295|M>>>9),M=T+(O^P^z)+$[1]+2763975236&4294967295,T=O+(M<<4&4294967295|M>>>28),M=z+(T^O^P)+$[4]+1272893353&4294967295,z=T+(M<<11&4294967295|M>>>21),M=P+(z^T^O)+$[7]+4139469664&4294967295,P=z+(M<<16&4294967295|M>>>16),M=O+(P^z^T)+$[10]+3200236656&4294967295,O=P+(M<<23&4294967295|M>>>9),M=T+(O^P^z)+$[13]+681279174&4294967295,T=O+(M<<4&4294967295|M>>>28),M=z+(T^O^P)+$[0]+3936430074&4294967295,z=T+(M<<11&4294967295|M>>>21),M=P+(z^T^O)+$[3]+3572445317&4294967295,P=z+(M<<16&4294967295|M>>>16),M=O+(P^z^T)+$[6]+76029189&4294967295,O=P+(M<<23&4294967295|M>>>9),M=T+(O^P^z)+$[9]+3654602809&4294967295,T=O+(M<<4&4294967295|M>>>28),M=z+(T^O^P)+$[12]+3873151461&4294967295,z=T+(M<<11&4294967295|M>>>21),M=P+(z^T^O)+$[15]+530742520&4294967295,P=z+(M<<16&4294967295|M>>>16),M=O+(P^z^T)+$[2]+3299628645&4294967295,O=P+(M<<23&4294967295|M>>>9),M=T+(P^(O|~z))+$[0]+4096336452&4294967295,T=O+(M<<6&4294967295|M>>>26),M=z+(O^(T|~P))+$[7]+1126891415&4294967295,z=T+(M<<10&4294967295|M>>>22),M=P+(T^(z|~O))+$[14]+2878612391&4294967295,P=z+(M<<15&4294967295|M>>>17),M=O+(z^(P|~T))+$[5]+4237533241&4294967295,O=P+(M<<21&4294967295|M>>>11),M=T+(P^(O|~z))+$[12]+1700485571&4294967295,T=O+(M<<6&4294967295|M>>>26),M=z+(O^(T|~P))+$[3]+2399980690&4294967295,z=T+(M<<10&4294967295|M>>>22),M=P+(T^(z|~O))+$[10]+4293915773&4294967295,P=z+(M<<15&4294967295|M>>>17),M=O+(z^(P|~T))+$[1]+2240044497&4294967295,O=P+(M<<21&4294967295|M>>>11),M=T+(P^(O|~z))+$[8]+1873313359&4294967295,T=O+(M<<6&4294967295|M>>>26),M=z+(O^(T|~P))+$[15]+4264355552&4294967295,z=T+(M<<10&4294967295|M>>>22),M=P+(T^(z|~O))+$[6]+2734768916&4294967295,P=z+(M<<15&4294967295|M>>>17),M=O+(z^(P|~T))+$[13]+1309151649&4294967295,O=P+(M<<21&4294967295|M>>>11),M=T+(P^(O|~z))+$[4]+4149444226&4294967295,T=O+(M<<6&4294967295|M>>>26),M=z+(O^(T|~P))+$[11]+3174756917&4294967295,z=T+(M<<10&4294967295|M>>>22),M=P+(T^(z|~O))+$[2]+718787259&4294967295,P=z+(M<<15&4294967295|M>>>17),M=O+(z^(P|~T))+$[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.v=function(C,T){T===void 0&&(T=C.length);const O=T-this.blockSize,$=this.C;let P=this.h,z=0;for(;z<T;){if(P==0)for(;z<=O;)i(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<T;)if($[P++]=C.charCodeAt(z++),P==this.blockSize){i(this,$),P=0;break}}else for(;z<T;)if($[P++]=C[z++],P==this.blockSize){i(this,$),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var O=C.length-8;O<C.length;++O)C[O]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,O=0;O<4;++O)for(let $=0;$<32;$+=8)C[T++]=this.g[O]>>>$&255;return C};function a(C,T){var O=d;return Object.prototype.hasOwnProperty.call(O,C)?O[C]:O[C]=T(C)}function c(C,T){this.h=T;const O=[];let $=!0;for(let P=C.length-1;P>=0;P--){const z=C[P]|0;$&&z==T||(O[P]=z,$=!1)}this.g=O}var d={};function p(C){return-128<=C&&C<128?a(C,function(T){return new c([T|0],T<0?-1:0)}):new c([C|0],C<0?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return A(m(-C));const T=[];let O=1;for(let $=0;C>=O;$++)T[$]=C/O|0,O*=4294967296;return new c(T,0)}function y(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return A(y(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=m(Math.pow(T,8));let $=v;for(let z=0;z<C.length;z+=8){var P=Math.min(8,C.length-z);const M=parseInt(C.substring(z,z+P),T);P<8?(P=m(Math.pow(T,P)),$=$.j(P).add(m(M))):($=$.j(O),$=$.add(m(M)))}return $}var v=p(0),_=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(N(this))return-A(this).m();let C=0,T=1;for(let O=0;O<this.g.length;O++){const $=this.i(O);C+=($>=0?$:4294967296+$)*T,T*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R(this))return"0";if(N(this))return"-"+A(this).toString(C);const T=m(Math.pow(C,6));var O=this;let $="";for(;;){const P=U(O,T).g;O=L(O,P.j(T));let z=((O.g.length>0?O.g[0]:O.h)>>>0).toString(C);if(O=P,R(O))return z+$;for(;z.length<6;)z="0"+z;$=z+$}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function R(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function N(C){return C.h==-1}n.l=function(C){return C=L(this,C),N(C)?-1:R(C)?0:1};function A(C){const T=C.g.length,O=[];for(let $=0;$<T;$++)O[$]=~C.g[$];return new c(O,~C.h).add(_)}n.abs=function(){return N(this)?A(this):this},n.add=function(C){const T=Math.max(this.g.length,C.g.length),O=[];let $=0;for(let P=0;P<=T;P++){let z=$+(this.i(P)&65535)+(C.i(P)&65535),M=(z>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);$=M>>>16,z&=65535,M&=65535,O[P]=M<<16|z}return new c(O,O[O.length-1]&-2147483648?-1:0)};function L(C,T){return C.add(A(T))}n.j=function(C){if(R(this)||R(C))return v;if(N(this))return N(C)?A(this).j(A(C)):A(A(this).j(C));if(N(C))return A(this.j(A(C)));if(this.l(b)<0&&C.l(b)<0)return m(this.m()*C.m());const T=this.g.length+C.g.length,O=[];for(var $=0;$<2*T;$++)O[$]=0;for($=0;$<this.g.length;$++)for(let P=0;P<C.g.length;P++){const z=this.i($)>>>16,M=this.i($)&65535,he=C.i(P)>>>16,xe=C.i(P)&65535;O[2*$+2*P]+=M*xe,j(O,2*$+2*P),O[2*$+2*P+1]+=z*xe,j(O,2*$+2*P+1),O[2*$+2*P+1]+=M*he,j(O,2*$+2*P+1),O[2*$+2*P+2]+=z*he,j(O,2*$+2*P+2)}for(C=0;C<T;C++)O[C]=O[2*C+1]<<16|O[2*C];for(C=T;C<2*T;C++)O[C]=0;return new c(O,0)};function j(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function k(C,T){this.g=C,this.h=T}function U(C,T){if(R(T))throw Error("division by zero");if(R(C))return new k(v,v);if(N(C))return T=U(A(C),T),new k(A(T.g),A(T.h));if(N(T))return T=U(C,A(T)),new k(A(T.g),T.h);if(C.g.length>30){if(N(C)||N(T))throw Error("slowDivide_ only works with positive integers.");for(var O=_,$=T;$.l(C)<=0;)O=K(O),$=K($);var P=ee(O,1),z=ee($,1);for($=ee($,2),O=ee(O,2);!R($);){var M=z.add($);M.l(C)<=0&&(P=P.add(O),z=M),$=ee($,1),O=ee(O,1)}return T=L(C,P.j(T)),new k(P,T)}for(P=v;C.l(T)>=0;){for(O=Math.max(1,Math.floor(C.m()/T.m())),$=Math.ceil(Math.log(O)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),z=m(O),M=z.j(T);N(M)||M.l(C)>0;)O-=$,z=m(O),M=z.j(T);R(z)&&(z=_),P=P.add(z),C=L(C,M)}return new k(P,C)}n.B=function(C){return U(this,C).h},n.and=function(C){const T=Math.max(this.g.length,C.g.length),O=[];for(let $=0;$<T;$++)O[$]=this.i($)&C.i($);return new c(O,this.h&C.h)},n.or=function(C){const T=Math.max(this.g.length,C.g.length),O=[];for(let $=0;$<T;$++)O[$]=this.i($)|C.i($);return new c(O,this.h|C.h)},n.xor=function(C){const T=Math.max(this.g.length,C.g.length),O=[];for(let $=0;$<T;$++)O[$]=this.i($)^C.i($);return new c(O,this.h^C.h)};function K(C){const T=C.g.length+1,O=[];for(let $=0;$<T;$++)O[$]=C.i($)<<1|C.i($-1)>>>31;return new c(O,C.h)}function ee(C,T){const O=T>>5;T%=32;const $=C.g.length-O,P=[];for(let z=0;z<$;z++)P[z]=T>0?C.i(z+O)>>>T|C.i(z+O+1)<<32-T:C.i(z+O);return new c(P,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,jS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,io=c}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DS,Uc,MS,Eh,Bg,OS,LS,VS;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zd=="object"&&Zd];for(var x=0;x<h.length;++x){var S=h[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,x){if(x)e:{var S=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var J=h[D];if(!(J in S))break e;S=S[J]}h=h[h.length-1],D=S[h],x=x(D),x!=D&&x!=null&&e(S,h,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(x){var S=[],D;for(D in x)Object.prototype.hasOwnProperty.call(x,D)&&S.push([D,x[D]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function p(h,x,S){return h.call.apply(h.bind,arguments)}function m(h,x,S){return m=p,m.apply(null,arguments)}function y(h,x){var S=Array.prototype.slice.call(arguments,1);return function(){var D=S.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function v(h,x){function S(){}S.prototype=x.prototype,h.Z=x.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(D,J,re){for(var we=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)we[Ge-2]=arguments[Ge];return x.prototype[J].apply(D,we)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function b(h){const x=h.length;if(x>0){const S=Array(x);for(let D=0;D<x;D++)S[D]=h[D];return S}return[]}function R(h,x){for(let D=1;D<arguments.length;D++){const J=arguments[D];var S=typeof J;if(S=S!="object"?S:J?Array.isArray(J)?"array":S:"null",S=="array"||S=="object"&&typeof J.length=="number"){S=h.length||0;const re=J.length||0;h.length=S+re;for(let we=0;we<re;we++)h[S+we]=J[we]}else h.push(J)}}class N{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function A(h){c.setTimeout(()=>{throw h},0)}function L(){var h=C;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class j{constructor(){this.h=this.g=null}add(x,S){const D=k.get();D.set(x,S),this.h?this.h.next=D:this.g=D,this.h=D}}var k=new N(()=>new U,h=>h.reset());class U{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let K,ee=!1,C=new j,T=()=>{const h=Promise.resolve(void 0);K=()=>{h.then(O)}};function O(){for(var h;h=L();){try{h.h.call(h.g)}catch(S){A(S)}var x=k;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}ee=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};c.addEventListener("test",S,x),c.removeEventListener("test",S,x)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function he(h,x){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}v(he,P),he.prototype.init=function(h,x){const S=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(S=="mouseover"?x=h.fromElement:S=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),fe=0;function Ee(h,x,S,D,J){this.listener=h,this.proxy=null,this.src=x,this.type=S,this.capture=!!D,this.ha=J,this.key=++fe,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function q(h,x,S){for(const D in h)x.call(S,h[D],D,h)}function G(h,x){for(const S in h)x.call(void 0,h[S],S,h)}function F(h){const x={};for(const S in h)x[S]=h[S];return x}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(h,x){let S,D;for(let J=1;J<arguments.length;J++){D=arguments[J];for(S in D)h[S]=D[S];for(let re=0;re<V.length;re++)S=V[re],Object.prototype.hasOwnProperty.call(D,S)&&(h[S]=D[S])}}function te(h){this.src=h,this.g={},this.h=0}te.prototype.add=function(h,x,S,D,J){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const we=ve(h,x,D,J);return we>-1?(x=h[we],S||(x.fa=!1)):(x=new Ee(x,this.src,re,!!D,J),x.fa=S,h.push(x)),x};function me(h,x){const S=x.type;if(S in h.g){var D=h.g[S],J=Array.prototype.indexOf.call(D,x,void 0),re;(re=J>=0)&&Array.prototype.splice.call(D,J,1),re&&(W(x),h.g[S].length==0&&(delete h.g[S],h.h--))}}function ve(h,x,S,D){for(let J=0;J<h.length;++J){const re=h[J];if(!re.da&&re.listener==x&&re.capture==!!S&&re.ha==D)return J}return-1}var se="closure_lm_"+(Math.random()*1e6|0),ge={};function le(h,x,S,D,J){if(Array.isArray(x)){for(let re=0;re<x.length;re++)le(h,x[re],S,D,J);return null}return S=Wr(S),h&&h[xe]?h.J(x,S,d(D)?!!D.capture:!1,J):de(h,x,S,!1,D,J)}function de(h,x,S,D,J,re){if(!x)throw Error("Invalid event type");const we=d(J)?!!J.capture:!!J;let Ge=Zt(h);if(Ge||(h[se]=Ge=new te(h)),S=Ge.add(x,S,D,we,re),S.proxy)return S;if(D=Te(),S.proxy=D,D.src=h,D.listener=S,h.addEventListener)z||(J=we),J===void 0&&(J=!1),h.addEventListener(x.toString(),D,J);else if(h.attachEvent)h.attachEvent(ht(x.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Te(){function h(S){return x.call(h.src,h.listener,S)}const x=Wn;return h}function Ve(h,x,S,D,J){if(Array.isArray(x))for(var re=0;re<x.length;re++)Ve(h,x[re],S,D,J);else D=d(D)?!!D.capture:!!D,S=Wr(S),h&&h[xe]?(h=h.i,re=String(x).toString(),re in h.g&&(x=h.g[re],S=ve(x,S,D,J),S>-1&&(W(x[S]),Array.prototype.splice.call(x,S,1),x.length==0&&(delete h.g[re],h.h--)))):h&&(h=Zt(h))&&(x=h.g[x.toString()],h=-1,x&&(h=ve(x,S,D,J)),(S=h>-1?x[h]:null)&&tt(S))}function tt(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[xe])me(x.i,h);else{var S=h.type,D=h.proxy;x.removeEventListener?x.removeEventListener(S,D,h.capture):x.detachEvent?x.detachEvent(ht(S),D):x.addListener&&x.removeListener&&x.removeListener(D),(S=Zt(x))?(me(S,h),S.h==0&&(S.src=null,x[se]=null)):W(h)}}}function ht(h){return h in ge?ge[h]:ge[h]="on"+h}function Wn(h,x){if(h.da)h=!0;else{x=new he(x,this);const S=h.listener,D=h.ha||h.src;h.fa&&tt(h),h=S.call(D,x)}return h}function Zt(h){return h=h[se],h instanceof te?h:null}var ln="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wr(h){return typeof h=="function"?h:(h[ln]||(h[ln]=function(x){return h.handleEvent(x)}),h[ln])}function mt(){$.call(this),this.i=new te(this),this.M=this,this.G=null}v(mt,$),mt.prototype[xe]=!0,mt.prototype.removeEventListener=function(h,x,S,D){Ve(this,h,x,S,D)};function It(h,x){var S,D=h.G;if(D)for(S=[];D;D=D.G)S.push(D);if(h=h.M,D=x.type||x,typeof x=="string")x=new P(x,h);else if(x instanceof P)x.target=x.target||h;else{var J=x;x=new P(D,h),Y(x,J)}J=!0;let re,we;if(S)for(we=S.length-1;we>=0;we--)re=x.g=S[we],J=Hn(re,D,!0,x)&&J;if(re=x.g=h,J=Hn(re,D,!0,x)&&J,J=Hn(re,D,!1,x)&&J,S)for(we=0;we<S.length;we++)re=x.g=S[we],J=Hn(re,D,!1,x)&&J}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const S=h.g[x];for(let D=0;D<S.length;D++)W(S[D]);delete h.g[x],h.h--}}this.G=null},mt.prototype.J=function(h,x,S,D){return this.i.add(String(h),x,!1,S,D)},mt.prototype.K=function(h,x,S,D){return this.i.add(String(h),x,!0,S,D)};function Hn(h,x,S,D){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let J=!0;for(let re=0;re<x.length;++re){const we=x[re];if(we&&!we.da&&we.capture==S){const Ge=we.listener,Ft=we.ha||we.src;we.fa&&me(h.i,we),J=Ge.call(Ft,D)!==!1&&J}}return J&&!D.defaultPrevented}function _i(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(h,x||0)}function ie(h){h.g=_i(()=>{h.g=null,h.i&&(h.i=!1,ie(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class $e extends ${constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(h){$.call(this),this.h=h,this.g={}}v($t,$);var yn=[];function Sr(h){q(h.g,function(x,S){this.g.hasOwnProperty(S)&&tt(x)},h),h.g={}}$t.prototype.N=function(){$t.Z.N.call(this),Sr(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cn=c.JSON.stringify,_a=c.JSON.parse,So=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ei(){}function Fu(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ea(){P.call(this,"d")}v(Ea,P);function ql(){P.call(this,"c")}v(ql,P);var br={},Sa=null;function bi(){return Sa=Sa||new mt}br.Ia="serverreachability";function ba(h){P.call(this,br.Ia,h)}v(ba,P);function Cs(h){const x=bi();It(x,new ba(x))}br.STAT_EVENT="statevent";function Rs(h,x){P.call(this,br.STAT_EVENT,h),this.stat=x}v(Rs,P);function Mt(h){const x=bi();It(x,new Rs(x,h))}br.Ja="timingevent";function Wl(h,x){P.call(this,br.Ja,h),this.size=x}v(Wl,P);function Ni(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},x)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function Uu(h,x,S,D,J,re){h.info(function(){if(h.g)if(re){var we="",Ge=re.split("&");for(let pt=0;pt<Ge.length;pt++){var Ft=Ge[pt].split("=");if(Ft.length>1){const Bt=Ft[0];Ft=Ft[1];const Jn=Bt.split("_");we=Jn.length>=2&&Jn[1]=="type"?we+(Bt+"="+Ft+"&"):we+(Bt+"=redacted&")}}}else we=null;else we=re;return"XMLHTTP REQ ("+D+") [attempt "+J+"]: "+x+`
`+S+`
`+we})}function zu(h,x,S,D,J,re,we){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+J+"]: "+x+`
`+S+`
`+re+" "+we})}function Hr(h,x,S,D){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+bo(h,S)+(D?" "+D:"")})}function $u(h,x){h.info(function(){return"TIMEOUT: "+x})}Ti.prototype.info=function(){};function bo(h,x){if(!h.g)return x;if(!x)return null;try{const re=JSON.parse(x);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var S=re[h];if(!(S.length<2)){var D=S[1];if(Array.isArray(D)&&!(D.length<1)){var J=D[0];if(J!="noop"&&J!="stop"&&J!="close")for(let we=1;we<D.length;we++)D[we]=""}}}}return cn(re)}catch{return x}}var Ii={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ai={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bu;function ks(){}v(ks,Ei),ks.prototype.g=function(){return new XMLHttpRequest},Bu=new ks;function Gr(h){return encodeURIComponent(String(h))}function Na(h){var x=1;h=h.split(":");const S=[];for(;x>0&&h.length;)S.push(h.shift()),x--;return h.length&&S.push(h.join(":")),S}function dr(h,x,S,D){this.j=h,this.i=x,this.l=S,this.S=D||1,this.V=new $t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var Wu={},Hl={};function Nr(h,x,S){h.M=1,h.A=js(hr(x)),h.u=S,h.R=!0,Gl(h,null)}function Gl(h,x){h.F=Date.now(),No(h),h.B=hr(h.A);var S=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),rc(S.i,"t",D),h.C=0,S=h.j.L,h.h=new qu,h.g=td(h.j,S?x:null,!h.u),h.P>0&&(h.O=new $e(m(h.Y,h,h.g),h.P)),x=h.V,S=h.g,D=h.ba;var J="readystatechange";Array.isArray(J)||(J&&(yn[0]=J.toString()),J=yn);for(let re=0;re<J.length;re++){const we=le(S,J[re],D||x.handleEvent,!1,x.h||x);if(!we)break;x.g[we.key]=we}x=h.J?F(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),Cs(),Uu(h.i,h.v,h.B,h.l,h.S,h.u)}dr.prototype.ba=function(h){h=h.target;const x=this.O;x&&es(h)==3?x.j():this.Y(h)},dr.prototype.Y=function(h){try{if(h==this.g)e:{const Ge=es(this.g),Ft=this.g.ya(),pt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||Zu(this.g)))){this.K||Ge!=4||Ft==7||(Ft==8||pt<=0?Cs(3):Cs(2)),Ta(this);var x=this.g.ca();this.X=x;var S=Hu(this);if(this.o=x==200,zu(this.i,this.v,this.B,this.l,this.S,Ge,x),this.o){if(this.U&&!this.L){t:{if(this.g){var D,J=this.g;if((D=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(D)){var re=D;break t}}re=null}if(h=re)Hr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bt(this,h);else{this.o=!1,this.m=3,Mt(12),Ps(this),To(this);break e}}if(this.R){h=!0;let Bt;for(;!this.K&&this.C<S.length;)if(Bt=Ku(this,S),Bt==Hl){Ge==4&&(this.m=4,Mt(14),h=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Wu){this.m=4,Mt(15),Hr(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else Hr(this.i,this.l,Bt,null),bt(this,Bt);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||S.length!=0||this.h.h||(this.m=1,Mt(16),h=!1),this.o=this.o&&h,!h)Hr(this.i,this.l,S,"[Invalid Chunked Response]"),Ps(this),To(this);else if(S.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Mo(we),we.P=!0,Mt(11))}}else Hr(this.i,this.l,S,null),bt(this,S);Ge==4&&Ps(this),this.o&&!this.K&&(Ge==4?Oa(this.j,this):(this.o=!1,No(this)))}else ic(this.g),x==400&&S.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),Ps(this),To(this)}}}catch{}finally{}};function Hu(h){if(!Gu(h))return h.g.la();const x=Zu(h.g);if(x==="")return"";let S="";const D=x.length,J=es(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ps(h),To(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,S+=h.h.i.decode(x[re],{stream:!(J&&re==D-1)});return x.length=0,h.h.g+=S,h.C=0,h.h.g}function Gu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ku(h,x){var S=h.C,D=x.indexOf(`
`,S);return D==-1?Hl:(S=Number(x.substring(S,D)),isNaN(S)?Wu:(D+=1,D+S>x.length?Hl:(x=x.slice(D,D+S),h.C=D+S,x)))}dr.prototype.cancel=function(){this.K=!0,Ps(this)};function No(h){h.T=Date.now()+h.H,Kl(h,h.H)}function Kl(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ni(m(h.aa,h),x)}function Ta(h){h.D&&(c.clearTimeout(h.D),h.D=null)}dr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?($u(this.i,this.B),this.M!=2&&(Cs(),Mt(17)),Ps(this),this.m=2,To(this)):Kl(this,this.T-h)};function To(h){h.j.I==0||h.K||Oa(h.j,h)}function Ps(h){Ta(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,Sr(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function bt(h,x){try{var S=h.j;if(S.I!=0&&(S.g==h||Yl(S.h,h))){if(!h.L&&Yl(S.h,h)&&S.I==3){try{var D=S.Ba.g.parse(x)}catch{D=null}if(Array.isArray(D)&&D.length==3){var J=D;if(J[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Ma(S),Yn(S);else break e;rs(S),Mt(18)}}else S.xa=J[1],0<S.xa-S.K&&J[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Ni(m(S.Va,S),6e3));Io(S.h)<=1&&S.ta&&(S.ta=void 0)}else Xn(S,11)}else if((h.L||S.g==h)&&Ma(S),!M(x))for(J=S.Ba.g.parse(x),x=0;x<J.length;x++){let pt=J[x];const Bt=pt[0];if(!(Bt<=S.K))if(S.K=Bt,pt=pt[1],S.I==2)if(pt[0]=="c"){S.M=pt[1],S.ba=pt[2];const Jn=pt[3];Jn!=null&&(S.ka=Jn,S.j.info("VER="+S.ka));const Vs=pt[4];Vs!=null&&(S.za=Vs,S.j.info("SVER="+S.za));const ss=pt[5];ss!=null&&typeof ss=="number"&&ss>0&&(D=1.5*ss,S.O=D,S.j.info("backChannelRequestTimeoutMs_="+D)),D=S;const is=h.g;if(is){const Fa=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var re=D.h;re.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Aa(re,re.h),re.h=null))}if(D.G){const lc=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(D.wa=lc,ut(D.J,D.G,lc))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),D=S;var we=h;if(D.na=ac(D,D.L?D.ba:null,D.W),we.L){Ao(D.h,we);var Ge=we,Ft=D.O;Ft&&(Ge.H=Ft),Ge.D&&(Ta(Ge),No(Ge)),D.g=we}else vn(D);S.i.length>0&&Ls(S)}else pt[0]!="stop"&&pt[0]!="close"||Xn(S,7);else S.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Xn(S,7):ja(S):pt[0]!="noop"&&S.l&&S.l.qa(pt),S.A=0)}}Cs(4)}catch{}}var hp=class{constructor(h,x){this.g=h,this.map=x}};function Ia(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ql(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Io(h){return h.h?1:h.g?h.g.size:0}function Yl(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function Aa(h,x){h.g?h.g.add(x):h.h=x}function Ao(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}Ia.prototype.cancel=function(){if(this.i=Gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Gn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const S of h.g.values())x=x.concat(S.G);return x}return b(h.i)}var Qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(h,x){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const D=h[S].indexOf("=");let J,re=null;D>=0?(J=h[S].substring(0,D),re=h[S].substring(D+1)):J=h[S],x(J,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Kr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof Kr?(this.l=h.l,Co(this,h.j),this.o=h.o,this.g=h.g,Qr(this,h.u),this.h=h.h,Ci(this,sc(h.i)),this.m=h.m):h&&(x=String(h).match(Qu))?(this.l=!1,Co(this,x[1]||"",!0),this.o=Ro(x[2]||""),this.g=Ro(x[3]||"",!0),Qr(this,x[4]),this.h=Ro(x[5]||"",!0),Ci(this,x[6]||"",!0),this.m=Ro(x[7]||"")):(this.l=!1,this.i=new ot(null,this.l))}Kr.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(ko(x,Jl,!0),":");var S=this.g;return(S||x=="file")&&(h.push("//"),(x=this.o)&&h.push(ko(x,Jl,!0),"@"),h.push(Gr(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(ko(S,S.charAt(0)=="/"?Po:Zl,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",ko(S,ec)),h.join("")},Kr.prototype.resolve=function(h){const x=hr(this);let S=!!h.j;S?Co(x,h.j):S=!!h.o,S?x.o=h.o:S=!!h.g,S?x.g=h.g:S=h.u!=null;var D=h.h;if(S)Qr(x,h.u);else if(S=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var J=x.h.lastIndexOf("/");J!=-1&&(D=x.h.slice(0,J+1)+D)}if(J=D,J==".."||J==".")D="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){D=J.lastIndexOf("/",0)==0,J=J.split("/");const re=[];for(let we=0;we<J.length;){const Ge=J[we++];Ge=="."?D&&we==J.length&&re.push(""):Ge==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&we==J.length&&re.push("")):(re.push(Ge),D=!0)}D=re.join("/")}else D=J}return S?x.h=D:S=h.i.toString()!=="",S?Ci(x,sc(h.i)):S=!!h.m,S&&(x.m=h.m),x};function hr(h){return new Kr(h)}function Co(h,x,S){h.j=S?Ro(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function Qr(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function Ci(h,x,S){x instanceof ot?(h.i=x,Ra(h.i,h.l)):(S||(x=ko(x,fp)),h.i=new ot(x,h.l))}function ut(h,x,S){h.i.set(x,S)}function js(h){return ut(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ro(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ko(h,x,S){return typeof h=="string"?(h=encodeURI(h).replace(x,Xl),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Jl=/[#\/\?@]/g,Zl=/[#\?:]/g,Po=/[#\?]/g,fp=/[#\?@]/g,ec=/#/g;function ot(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function Yr(h){h.g||(h.g=new Map,h.h=0,h.i&&Kn(h.i,function(x,S){h.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}n=ot.prototype,n.add=function(h,x){Yr(this),this.i=null,h=Xr(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(x),this.h+=1,this};function tc(h,x){Yr(h),x=Xr(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function Ca(h,x){return Yr(h),x=Xr(h,x),h.g.has(x)}n.forEach=function(h,x){Yr(this),this.g.forEach(function(S,D){S.forEach(function(J){h.call(x,J,D,this)},this)},this)};function nc(h,x){Yr(h);let S=[];if(typeof x=="string")Ca(h,x)&&(S=S.concat(h.g.get(Xr(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)S=S.concat(h[x]);return S}n.set=function(h,x){return Yr(this),this.i=null,h=Xr(this,h),Ca(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},n.get=function(h,x){return h?(h=nc(this,h),h.length>0?String(h[0]):x):x};function rc(h,x,S){tc(h,x),S.length>0&&(h.i=null,h.g.set(Xr(h,x),b(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let D=0;D<x.length;D++){var S=x[D];const J=Gr(S);S=nc(this,S);for(let re=0;re<S.length;re++){let we=J;S[re]!==""&&(we+="="+Gr(S[re])),h.push(we)}}return this.i=h.join("&")};function sc(h){const x=new ot;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function Xr(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Ra(h,x){x&&!h.j&&(Yr(h),h.i=null,h.g.forEach(function(S,D){const J=D.toLowerCase();D!=J&&(tc(this,D),rc(this,J,S))},h)),h.j=x}function Jr(h,x){const S=new Ti;if(c.Image){const D=new Image;D.onload=y(un,S,"TestLoadImage: loaded",!0,x,D),D.onerror=y(un,S,"TestLoadImage: error",!1,x,D),D.onabort=y(un,S,"TestLoadImage: abort",!1,x,D),D.ontimeout=y(un,S,"TestLoadImage: timeout",!1,x,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else x(!1)}function Zr(h,x){const S=new Ti,D=new AbortController,J=setTimeout(()=>{D.abort(),un(S,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(J),re.ok?un(S,"TestPingServer: ok",!0,x):un(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(J),un(S,"TestPingServer: error",!1,x)})}function un(h,x,S,D,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),D(S)}catch{}}function jo(){this.g=new So}function Ds(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Ds,Ei),Ds.prototype.g=function(){return new Qn(this.i,this.h)};function Qn(h,x){mt.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Qn,mt),n=Qn.prototype,n.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,Tr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?Ri(this):Tr(this),this.readyState==3&&Yu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Ri(this))},n.Na=function(h){this.g&&(this.response=h,Ri(this))},n.ga=function(){this.g&&Ri(this)};function Ri(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Tr(h)}n.setRequestHeader=function(h,x){this.A.append(h,x)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=x.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xu(h){let x="";return q(h,function(S,D){x+=D,x+=":",x+=S,x+=`\r
`}),x}function ka(h,x,S){e:{for(D in S){var D=!1;break e}D=!0}D||(S=Xu(S),typeof h=="string"?S!=null&&Gr(S):ut(h,x,S))}function yt(h){mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(yt,mt);var Ju=/^https?$/i,pp=["POST","PUT"];n=yt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,x,S,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bu.g(),this.g.onreadystatechange=_(m(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(re){ki(this,re);return}if(h=S||"",S=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var J in D)S.set(J,D[J]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())S.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(S.keys()).find(re=>re.toLowerCase()=="content-type"),J=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(pp,x,void 0)>=0)||D||J||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,we]of S)this.g.setRequestHeader(re,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){ki(this,re)}};function ki(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,Pi(h),Os(h)}function Pi(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,It(this,"complete"),It(this,"abort"),Os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),yt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ms(this):this.Xa())},n.Xa=function(){Ms(this)};function Ms(h){if(h.h&&typeof a<"u"){if(h.v&&es(h)==4)setTimeout(h.Ca.bind(h),0);else if(It(h,"readystatechange"),es(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var D;if(D=re===0){let we=String(h.D).match(Qu)[1]||null;!we&&c.self&&c.self.location&&(we=c.self.location.protocol.slice(0,-1)),D=!Ju.test(we?we.toLowerCase():"")}S=D}if(S)It(h,"complete"),It(h,"success");else{h.o=6;try{var J=es(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",Pi(h)}}finally{Os(h)}}}}function Os(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,x||It(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function es(h){return h.g?h.g.readyState:0}n.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),_a(x)}};function Zu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ic(h){const x={};h=(h.g&&es(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(M(h[D]))continue;var S=Na(h[D]);const J=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const re=x[J]||[];x[J]=re,re.push(S)}G(x,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(h,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||x}function Pa(h){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ts("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ts("baseRetryDelayMs",5e3,h),this.Za=ts("retryDelaySeedMs",1e4,h),this.Ta=ts("forwardChannelMaxRetries",2,h),this.va=ts("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ia(h&&h.concurrentRequestLimit),this.Ba=new jo,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Pa.prototype,n.ka=8,n.I=1,n.connect=function(h,x,S,D){Mt(0),this.W=h,this.H=x||{},S&&D!==void 0&&(this.H.OSID=S,this.H.OAID=D),this.F=this.X,this.J=ac(this,null,this.W),Ls(this)};function ja(h){if(Da(h),h.I==3){var x=h.V++,S=hr(h.J);if(ut(S,"SID",h.M),ut(S,"RID",x),ut(S,"TYPE","terminate"),ns(h,S),x=new dr(h,h.j,x),x.M=2,x.A=js(hr(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!S&&c.Image&&(new Image().src=x.A,S=!0),S||(x.g=td(x.j,null),x.g.ea(x.A)),x.F=Date.now(),No(x)}Oo(h)}function Yn(h){h.g&&(Mo(h),h.g.cancel(),h.g=null)}function Da(h){Yn(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ma(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ls(h){if(!Ql(h.h)&&!h.m){h.m=!0;var x=h.Ea;K||T(),ee||(K(),ee=!0),C.add(x,h),h.D=0}}function ed(h,x){return Io(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ni(m(h.Ea,h,x),La(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new dr(this,this.j,h);let re=this.o;if(this.U&&(re?(re=F(re),Y(re,this.U)):re=this.U),this.u!==null||this.R||(J.J=re,re=null),this.S)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var D=this.i[S];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(x+=D,x>4096){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=oc(this,J,x),S=hr(this.J),ut(S,"RID",h),ut(S,"CVER",22),this.G&&ut(S,"X-HTTP-Session-Id",this.G),ns(this,S),re&&(this.R?x="headers="+Gr(Xu(re))+"&"+x:this.u&&ka(S,this.u,re)),Aa(this.h,J),this.Ra&&ut(S,"TYPE","init"),this.S?(ut(S,"$req",x),ut(S,"SID","null"),J.U=!0,Nr(J,S,null)):Nr(J,S,x),this.I=2}}else this.I==3&&(h?Do(this,h):this.i.length==0||Ql(this.h)||Do(this))};function Do(h,x){var S;x?S=x.l:S=h.V++;const D=hr(h.J);ut(D,"SID",h.M),ut(D,"RID",S),ut(D,"AID",h.K),ns(h,D),h.u&&h.o&&ka(D,h.u,h.o),S=new dr(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),x&&(h.i=x.G.concat(h.i)),x=oc(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Aa(h.h,S),Nr(S,D,x)}function ns(h,x){h.H&&q(h.H,function(S,D){ut(x,D,S)}),h.l&&q({},function(S,D){ut(x,D,S)})}function oc(h,x,S){S=Math.min(h.i.length,S);const D=h.l?m(h.l.Ka,h.l,h):null;e:{var J=h.i;let Ge=-1;for(;;){const Ft=["count="+S];Ge==-1?S>0?(Ge=J[0].g,Ft.push("ofs="+Ge)):Ge=0:Ft.push("ofs="+Ge);let pt=!0;for(let Bt=0;Bt<S;Bt++){var re=J[Bt].g;const Jn=J[Bt].map;if(re-=Ge,re<0)Ge=Math.max(0,J[Bt].g-100),pt=!1;else try{re="req"+re+"_"||"";try{var we=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Vs,ss]of we){let is=ss;d(ss)&&(is=cn(ss)),Ft.push(re+Vs+"="+encodeURIComponent(is))}}catch(Vs){throw Ft.push(re+"type="+encodeURIComponent("_badmap")),Vs}}catch{D&&D(Jn)}}if(pt){we=Ft.join("&");break e}}we=void 0}return h=h.i.splice(0,S),x.G=h,we}function vn(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;K||T(),ee||(K(),ee=!0),C.add(x,h),h.A=0}}function rs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ni(m(h.Da,h),La(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ji(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ni(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),Yn(this),ji(this))};function Mo(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ji(h){h.g=new dr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=hr(h.na);ut(x,"RID","rpc"),ut(x,"SID",h.M),ut(x,"AID",h.K),ut(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&ut(x,"TO",h.ia),ut(x,"TYPE","xmlhttp"),ns(h,x),h.u&&h.o&&ka(x,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=js(hr(x)),S.u=null,S.R=!0,Gl(S,h)}n.Va=function(){this.C!=null&&(this.C=null,Yn(this),rs(this),Mt(19))};function Ma(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Oa(h,x){var S=null;if(h.g==x){Ma(h),Mo(h),h.g=null;var D=2}else if(Yl(h.h,x))S=x.G,Ao(h.h,x),D=1;else return;if(h.I!=0){if(x.o)if(D==1){S=x.u?x.u.length:0,x=Date.now()-x.F;var J=h.D;D=bi(),It(D,new Wl(D,S)),Ls(h)}else vn(h);else if(J=x.m,J==3||J==0&&x.X>0||!(D==1&&ed(h,x)||D==2&&rs(h)))switch(S&&S.length>0&&(x=h.h,x.i=x.i.concat(S)),J){case 1:Xn(h,5);break;case 4:Xn(h,10);break;case 3:Xn(h,6);break;default:Xn(h,2)}}}function La(h,x){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*x}function Xn(h,x){if(h.j.info("Error code "+x),x==2){var S=m(h.bb,h),D=h.Ua;const J=!D;D=new Kr(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Co(D,"https"),js(D),J?Jr(D.toString(),S):Zr(D.toString(),S)}else Mt(2);h.I=0,h.l&&h.l.pa(x),Oo(h),Da(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Oo(h){if(h.I=0,h.ja=[],h.l){const x=Gn(h.h);(x.length!=0||h.i.length!=0)&&(R(h.ja,x),R(h.ja,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.oa()}}function ac(h,x,S){var D=S instanceof Kr?hr(S):new Kr(S);if(D.g!="")x&&(D.g=x+"."+D.g),Qr(D,D.u);else{var J=c.location;D=J.protocol,x=x?x+"."+J.hostname:J.hostname,J=+J.port;const re=new Kr(null);D&&Co(re,D),x&&(re.g=x),J&&Qr(re,J),S&&(re.h=S),D=re}return S=h.G,x=h.wa,S&&x&&ut(D,S,x),ut(D,"VER",h.ka),ns(h,D),D}function td(h,x,S){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new yt(new Ds({ab:S})):new yt(h.ma),x.Fa(h.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nd(){}n=nd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Va(){}Va.prototype.g=function(h,x){return new dn(h,x)};function dn(h,x){mt.call(this),this.g=new Pa(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!M(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!M(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new Di(this)}v(dn,mt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){ja(this.g)},dn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=cn(h),h=S);x.i.push(new hp(x.Ya++,h)),x.I==3&&Ls(x)},dn.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,dn.Z.N.call(this)};function rd(h){Ea.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const S in x){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}v(rd,Ea);function sd(){ql.call(this),this.status=1}v(sd,ql);function Di(h){this.g=h}v(Di,nd),Di.prototype.ra=function(){It(this.g,"a")},Di.prototype.qa=function(h){It(this.g,new rd(h))},Di.prototype.pa=function(h){It(this.g,new sd)},Di.prototype.oa=function(){It(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,VS=function(){return new Va},LS=function(){return bi()},OS=br,Bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,Eh=Ii,Ai.COMPLETE="complete",MS=Ai,Fu.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Uc=Fu,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,DS=yt}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});const _0="@firebase/firestore",E0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Py("@firebase/firestore");function ul(){return aa.logLevel}function be(n,...e){if(aa.logLevel<=rt.DEBUG){const t=e.map(Ky);aa.debug(`Firestore (${kl}): ${n}`,...t)}}function hi(n,...e){if(aa.logLevel<=rt.ERROR){const t=e.map(Ky);aa.error(`Firestore (${kl}): ${n}`,...t)}}function la(n,...e){if(aa.logLevel<=rt.WARN){const t=e.map(Ky);aa.warn(`Firestore (${kl}): ${n}`,...t)}}function Ky(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,FS(n,r,t)}function FS(n,e,t){let r=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw hi(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||FS(e,i,r)}function Ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class kj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Pj{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Zs,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},d=p=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Zs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new US(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class jj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Dj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class S0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new S0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new S0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Oj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function st(n,e){return n<e?-1:n>e?1:0}function qg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Qm(i)===Qm(a)?st(i,a):Qm(i)?1:-1}return st(n.length,e.length)}const Lj=55296,Vj=57343;function Qm(n){const e=n.charCodeAt(0);return e>=Lj&&e<=Vj}function El(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="__name__";class us{constructor(e,t,r){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&qe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=us.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return st(e.length,t.length)}static compareSegments(e,t){const r=us.isNumericId(e),i=us.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?us.extractNumericId(e).compare(us.extractNumericId(t)):qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class xt extends us{construct(e,t,r){return new xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new xt(t)}static emptyPath(){return new xt([])}}const Fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends us{construct(e,t,r){return new on(e,t,r)}static isValidIdentifier(e){return Fj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b0}static keyField(){return new on([b0])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(xt.fromString(e))}static fromName(e){return new Le(xt.fromString(e).popFirst(5))}static empty(){return new Le(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new xt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BS(n,e,t,r){if(e===!0&&r===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function N0(n){if(!Le.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T0(n){if(Le.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xf(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Uj(n,e){if(e<=0)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!qS(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=-62135596800,A0=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*A0);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<I0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A0}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Gt("string",_t._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new _t(0,0))}static max(){return new He(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function zj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new co(i,Le.empty(),e)}function $j(n){return new co(n.readTime,n.key,iu)}class co{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new co(He.min(),Le.empty(),iu)}static max(){return new co(He.max(),Le.empty(),iu)}}function Bj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:st(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==qj)throw n;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,r)=>{t(e)}))}static reject(e){return new ae(((t,r)=>{r(e)}))}static waitFor(e){return new ae(((t,r)=>{let i=0,a=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++a,c&&a===i&&t()}),(p=>r(p)))})),c=!0,a===i&&t()}))}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next((i=>i?ae.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new ae(((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((y=>{c[m]=y,++d,d===a&&r(c)}),(y=>i(y)))}}))}static doWhile(e,t){return new ae(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function Hj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_f.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=-1;function Ef(n){return n==null}function zh(n){return n===0&&1/n==-1/0}function Gj(n){return typeof n=="number"&&Number.isInteger(n)&&!zh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="";function Kj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C0(e)),e=Qj(n.get(t),e);return C0(e)}function Qj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case WS:t+="";break;default:t+=a}}return t}function C0(n){return n+WS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??pn.RED,this.left=i??pn.EMPTY,this.right=a??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new pn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new k0(this.data.getIterator())}getIteratorFrom(e){return new k0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class k0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new or([])}unionWith(e){let t=new Jt(on.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new GS("Invalid base64 string: "+a):a}})(e);return new an(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const Yj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=Yj.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(n.seconds),nanos:zt(n.nanos)}}function zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ho(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="server_timestamp",QS="__type__",YS="__previous_value__",XS="__local_write_time__";function Yy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[QS])==null?void 0:r.stringValue)===KS}function Sf(n){const e=n.mapValue.fields[YS];return Yy(e)?Sf(e):e}function ou(n){const e=uo(n.mapValue.fields[XS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,t,r,i,a,c,d,p,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=y}}const $h="(default)";class Sl{constructor(e,t){this.projectId=e,this.database=t||$h}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="__type__",Jj="__max__",th={mapValue:{}},ZS="__vector__",Bh="value";function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yy(n)?4:eD(n)?9007199254740991:Zj(n)?10:11:qe(28295,{value:n})}function _s(n,e){if(n===e)return!0;const t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=uo(i.timestampValue),d=uo(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return ho(i.bytesValue).isEqual(ho(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return zt(i.geoPointValue.latitude)===zt(a.geoPointValue.latitude)&&zt(i.geoPointValue.longitude)===zt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return zt(i.integerValue)===zt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=zt(i.doubleValue),d=zt(a.doubleValue);return c===d?zh(c)===zh(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return El(n.arrayValue.values||[],e.arrayValue.values||[],_s);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(R0(c)!==R0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!_s(c[p],d[p])))return!1;return!0})(n,e);default:return qe(52216,{left:n})}}function au(n,e){return(n.values||[]).find((t=>_s(t,e)))!==void 0}function bl(n,e){if(n===e)return 0;const t=fo(n),r=fo(e);if(t!==r)return st(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=zt(a.integerValue||a.doubleValue),p=zt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return P0(n.timestampValue,e.timestampValue);case 4:return P0(ou(n),ou(e));case 5:return qg(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=ho(a),p=ho(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const y=st(d[m],p[m]);if(y!==0)return y}return st(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=st(zt(a.latitude),zt(c.latitude));return d!==0?d:st(zt(a.longitude),zt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return j0(n.arrayValue,e.arrayValue);case 10:return(function(a,c){var _,b,R,N;const d=a.fields||{},p=c.fields||{},m=(_=d[Bh])==null?void 0:_.arrayValue,y=(b=p[Bh])==null?void 0:b.arrayValue,v=st(((R=m==null?void 0:m.values)==null?void 0:R.length)||0,((N=y==null?void 0:y.values)==null?void 0:N.length)||0);return v!==0?v:j0(m,y)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===th.mapValue&&c===th.mapValue)return 0;if(a===th.mapValue)return 1;if(c===th.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=c.fields||{},y=Object.keys(m);p.sort(),y.sort();for(let v=0;v<p.length&&v<y.length;++v){const _=qg(p[v],y[v]);if(_!==0)return _;const b=bl(d[p[v]],m[y[v]]);if(b!==0)return b}return st(p.length,y.length)})(n.mapValue,e.mapValue);default:throw qe(23264,{he:t})}}function P0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return st(n,e);const t=uo(n),r=uo(e),i=st(t.seconds,r.seconds);return i!==0?i:st(t.nanos,r.nanos)}function j0(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=bl(t[i],r[i]);if(a)return a}return st(t.length,r.length)}function Nl(n){return Wg(n)}function Wg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=uo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ho(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Wg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Wg(t.fields[c])}`;return i+"}"})(n.mapValue):qe(61005,{value:n})}function Sh(n){switch(fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sf(n);return e?16+Sh(e):16;case 5:return 2*n.stringValue.length;case 6:return ho(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Sh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return wo(r.fields,((a,c)=>{i+=a.length+Sh(c)})),i})(n.mapValue);default:throw qe(13486,{value:n})}}function D0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hg(n){return!!n&&"integerValue"in n}function Xy(n){return!!n&&"arrayValue"in n}function M0(n){return!!n&&"nullValue"in n}function O0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bh(n){return!!n&&"mapValue"in n}function Zj(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[JS])==null?void 0:r.stringValue)===ZS}function Kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return wo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Kc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kc(n.arrayValue.values[t]);return e}return{...n}}function eD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Jj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(t)}setAll(e){let t=on.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Kc(c):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wo(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Bn(Kc(this.value))}}function eb(n){const e=[];return wo(n.fields,((t,r)=>{const i=new on([t]);if(bh(r)){const a=eb(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t,r,i,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Nn(e,0,He.min(),He.min(),He.min(),Bn.empty(),0)}static newFoundDocument(e,t,r,i){return new Nn(e,1,t,He.min(),r,i,0)}static newNoDocument(e,t){return new Nn(e,2,t,He.min(),He.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,He.min(),He.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t){this.position=e,this.inclusive=t}}function L0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(c.referenceValue),t.key):r=bl(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function V0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_s(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function tD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{}class Ht extends tb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new rD(e,t,r):t==="array-contains"?new oD(e,r):t==="in"?new aD(e,r):t==="not-in"?new lD(e,r):t==="array-contains-any"?new cD(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sD(e,r):new iD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bl(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(bl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends tb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ur(e,t)}matches(e){return nb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nb(n){return n.op==="and"}function rb(n){return nD(n)&&nb(n)}function nD(n){for(const e of n.filters)if(e instanceof Ur)return!1;return!0}function Gg(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+Nl(n.value);if(rb(n))return n.filters.map((e=>Gg(e))).join(",");{const e=n.filters.map((t=>Gg(t))).join(",");return`${n.op}(${e})`}}function sb(n,e){return n instanceof Ht?(function(r,i){return i instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&_s(r.value,i.value)})(n,e):n instanceof Ur?(function(r,i){return i instanceof Ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,d)=>a&&sb(c,i.filters[d])),!0):!1})(n,e):void qe(19439)}function ib(n){return n instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`})(n):n instanceof Ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(ib).join(" ,")+"}"})(n):"Filter"}class rD extends Ht{constructor(e,t,r){super(e,t,r),this.key=Le.fromName(r.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class sD extends Ht{constructor(e,t){super(e,"in",t),this.keys=ob("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iD extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=ob("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ob(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Le.fromName(r.referenceValue)))}class oD extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xy(t)&&au(t.arrayValue,this.value)}}class aD extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&au(this.value.arrayValue,t)}}class lD extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!au(this.value.arrayValue,t)}}class cD extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>au(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.Te=null}}function F0(n,e=null,t=[],r=[],i=null,a=null,c=null){return new uD(n,e,t,r,i,a,c)}function Jy(n){const e=Ye(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Nl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Nl(r))).join(",")),e.Te=t}return e.Te}function Zy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!V0(n.startAt,e.startAt)&&V0(n.endAt,e.endAt)}function Kg(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dD(n,e,t,r,i,a,c,d){return new Dl(n,e,t,r,i,a,c,d)}function bf(n){return new Dl(n)}function U0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ab(n){return n.collectionGroup!==null}function Qc(n){const e=Ye(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Jt(on.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lu(a,r))})),t.has(on.keyField().canonicalString())||e.Ie.push(new lu(on.keyField(),r))}return e.Ie}function ys(n){const e=Ye(n);return e.Ee||(e.Ee=hD(e,Qc(n))),e.Ee}function hD(n,e){if(n.limitType==="F")return F0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new lu(i.field,a)}));const t=n.endAt?new qh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qh(n.startAt.position,n.startAt.inclusive):null;return F0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qg(n,e){const t=n.filters.concat([e]);return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wh(n,e,t){return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nf(n,e){return Zy(ys(n),ys(e))&&n.limitType===e.limitType}function lb(n){return`${Jy(ys(n))}|lt:${n.limitType}`}function dl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>ib(i))).join(", ")}]`),Ef(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Nl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Nl(i))).join(",")),`Target(${r})`})(ys(n))}; limitType=${n.limitType})`}function Tf(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Qc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,p){const m=L0(c,d,p);return c.inclusive?m<=0:m<0})(r.startAt,Qc(r),i)||r.endAt&&!(function(c,d,p){const m=L0(c,d,p);return c.inclusive?m>=0:m>0})(r.endAt,Qc(r),i))})(n,e)}function fD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cb(n){return(e,t)=>{let r=!1;for(const i of Qc(n)){const a=pD(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function pD(n,e,t){const r=n.field.isKeyField()?Le.comparator(e.key,t.key):(function(a,c,d){const p=c.data.field(a),m=d.data.field(a);return p!==null&&m!==null?bl(p,m):qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return HS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new Dt(Le.comparator);function fi(){return mD}const ub=new Dt(Le.comparator);function zc(...n){let e=ub;for(const t of n)e=e.insert(t.key,t);return e}function db(n){let e=ub;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ea(){return Yc()}function hb(){return Yc()}function Yc(){return new ya((n=>n.toString()),((n,e)=>n.isEqual(e)))}const gD=new Dt(Le.comparator),yD=new Jt(Le.comparator);function it(...n){let e=yD;for(const t of n)e=e.add(t);return e}const vD=new Jt(st);function wD(){return vD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function fb(n){return{integerValue:""+n}}function xD(n,e){return Gj(e)?fb(e):ev(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function _D(n,e,t){return n instanceof cu?(function(i,a){const c={fields:{[QS]:{stringValue:KS},[XS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Yy(a)&&(a=Sf(a)),a&&(c.fields[YS]=a),{mapValue:c}})(t,e):n instanceof uu?mb(n,e):n instanceof du?gb(n,e):(function(i,a){const c=pb(i,a),d=z0(c)+z0(i.Ae);return Hg(c)&&Hg(i.Ae)?fb(d):ev(i.serializer,d)})(n,e)}function ED(n,e,t){return n instanceof uu?mb(n,e):n instanceof du?gb(n,e):t}function pb(n,e){return n instanceof Hh?(function(r){return Hg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class cu extends If{}class uu extends If{constructor(e){super(),this.elements=e}}function mb(n,e){const t=yb(e);for(const r of n.elements)t.some((i=>_s(i,r)))||t.push(r);return{arrayValue:{values:t}}}class du extends If{constructor(e){super(),this.elements=e}}function gb(n,e){let t=yb(e);for(const r of n.elements)t=t.filter((i=>!_s(i,r)));return{arrayValue:{values:t}}}class Hh extends If{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function z0(n){return zt(n.integerValue||n.doubleValue)}function yb(n){return Xy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.field=e,this.transform=t}}function bD(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof uu&&i instanceof uu||r instanceof du&&i instanceof du?El(r.elements,i.elements,_s):r instanceof Hh&&i instanceof Hh?_s(r.Ae,i.Ae):r instanceof cu&&i instanceof cu})(n.transform,e.transform)}class ND{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Af{}function vb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cf(n.key,jn.none()):new Nu(n.key,n.data,jn.none());{const t=n.data,r=Bn.empty();let i=new Jt(on.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new xo(n.key,r,new or(i.toArray()),jn.none())}}function TD(n,e,t){n instanceof Nu?(function(i,a,c){const d=i.value.clone(),p=B0(i.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof xo?(function(i,a,c){if(!Nh(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=B0(i.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(wb(i)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Xc(n,e,t,r){return n instanceof Nu?(function(a,c,d,p){if(!Nh(a.precondition,c))return d;const m=a.value.clone(),y=q0(a.fieldTransforms,p,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof xo?(function(a,c,d,p){if(!Nh(a.precondition,c))return d;const m=q0(a.fieldTransforms,p,c),y=c.data;return y.setAll(wb(a)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,c,d){return Nh(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function ID(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=pb(r.transform,i||null);a!=null&&(t===null&&(t=Bn.empty()),t.set(r.field,a))}return t||null}function $0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&El(r,i,((a,c)=>bD(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nu extends Af{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xo extends Af{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function wb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function B0(n,e,t){const r=new Map;ft(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,ED(c,d,t[i]))}return r}function q0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,_D(a,c,e))}return r}class Cf extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AD extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&TD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hb();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const p=vb(c,d);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),it())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((t,r)=>$0(t,r)))&&El(this.baseMutations,e.baseMutations,((t,r)=>$0(t,r)))}}class tv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return gD})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new tv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,at;function PD(n){switch(n){case oe.OK:return qe(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function xb(n){if(n===void 0)return hi("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Wt.OK:return oe.OK;case Wt.CANCELLED:return oe.CANCELLED;case Wt.UNKNOWN:return oe.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return oe.INTERNAL;case Wt.UNAVAILABLE:return oe.UNAVAILABLE;case Wt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Wt.NOT_FOUND:return oe.NOT_FOUND;case Wt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Wt.ABORTED:return oe.ABORTED;case Wt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Wt.DATA_LOSS:return oe.DATA_LOSS;default:return qe(39323,{code:n})}}(at=Wt||(Wt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new io([4294967295,4294967295],0);function W0(n){const e=jD().encode(n),t=new jS;return t.update(e),new Uint8Array(t.digest())}function H0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new io([t,r],0),new io([i,a],0)]}class nv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(r<0)throw new $c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=io.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(io.fromNumber(r)));return i.compare(DD)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=W0(e),[r,i]=H0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new nv(a,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=W0(e),[r,i]=H0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Rf(He.min(),i,new Dt(st),fi(),it())}}class Tu{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tu(r,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class _b{constructor(e,t){this.targetId=e,this.Ce=t}}class Eb{constructor(e,t,r=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class G0{constructor(){this.ve=0,this.Fe=K0(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),t=it(),r=it();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:qe(38017,{changeType:a})}})),new Tu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=K0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MD{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=nh(),this.He=nh(),this.Ye=new Dt(st)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Kg(a))if(r===0){const c=new Le(a.path);this.et(t,c,Nn.newNoDocument(c,He.min()))}else ft(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,d;try{c=ho(r).toUint8Array()}catch(p){if(p instanceof GS)return la("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new nv(c,i,a)}catch(p){return la(p instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const d=this.ot(c);if(d){if(a.current&&Kg(d.target)){const p=new Le(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Nn.newNoDocument(p,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=it();this.He.forEach(((a,c)=>{let d=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new Rf(e,t,this.Ye,this.je,r);return this.je=fi(),this.Je=nh(),this.He=nh(),this.Ye=new Dt(st),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new G0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(st),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(st),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Dt(Le.comparator)}function K0(){return new Dt(Le.comparator)}const OD={asc:"ASCENDING",desc:"DESCENDING"},LD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VD={and:"AND",or:"OR"};class FD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yg(n,e){return n.useProto3Json||Ef(e)?e:{value:e}}function Gh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UD(n,e){return Gh(n,e.toTimestamp())}function vs(n){return ft(!!n,49232),He.fromTimestamp((function(t){const r=uo(t);return new _t(r.seconds,r.nanos)})(n))}function rv(n,e){return Xg(n,e).canonicalString()}function Xg(n,e){const t=(function(i){return new xt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function bb(n){const e=xt.fromString(n);return ft(Cb(e),10190,{key:e.toString()}),e}function Jg(n,e){return rv(n.databaseId,e.path)}function Ym(n,e){const t=bb(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(Tb(t))}function Nb(n,e){return rv(n.databaseId,e)}function zD(n){const e=bb(n);return e.length===4?xt.emptyPath():Tb(e)}function Zg(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tb(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Q0(n,e,t){return{name:Jg(n,e),fields:t.value.mapValue.fields}}function $D(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:qe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(ft(y===void 0||typeof y=="string",58123),an.fromBase64String(y||"")):(ft(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),an.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const y=m.code===void 0?oe.UNKNOWN:xb(m.code);return new _e(y,m.message||"")})(c);t=new Eb(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ym(n,r.document.name),a=vs(r.document.updateTime),c=r.document.createTime?vs(r.document.createTime):He.min(),d=new Bn({mapValue:{fields:r.document.fields}}),p=Nn.newFoundDocument(i,a,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];t=new Th(m,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ym(n,r.document),a=r.readTime?vs(r.readTime):He.min(),c=Nn.newNoDocument(i,a),d=r.removedTargetIds||[];t=new Th([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ym(n,r.document),a=r.removedTargetIds||[];t=new Th([],a,i,null)}else{if(!("filter"in e))return qe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new kD(i,a),d=r.targetId;t=new _b(d,c)}}return t}function BD(n,e){let t;if(e instanceof Nu)t={update:Q0(n,e.key,e.value)};else if(e instanceof Cf)t={delete:Jg(n,e.key)};else if(e instanceof xo)t={update:Q0(n,e.key,e.data),updateMask:JD(e.fieldMask)};else{if(!(e instanceof AD))return qe(16599,{Vt:e.type});t={verify:Jg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const d=c.transform;if(d instanceof cu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof uu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof du)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Hh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw qe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:UD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:qe(27497)})(n,e.precondition)),t}function qD(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?vs(i.updateTime):vs(a);return c.isEqual(He.min())&&(c=vs(a)),new ND(c,i.transformResults||[])})(t,e)))):[]}function WD(n,e){return{documents:[Nb(n,e.path)]}}function HD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Nb(n,i);const a=(function(m){if(m.length!==0)return Ab(Ur.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(m){if(m.length!==0)return m.map((y=>(function(_){return{field:hl(_.field),direction:QD(_.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Yg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function GD(n){let e=zD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ft(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(v){const _=Ib(v);return _ instanceof Ur&&rb(_)?_.getFilters():[_]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((_=>(function(R){return new lu(fl(R.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(v){let _;return _=typeof v=="object"?v.value:v,Ef(_)?null:_})(t.limit));let p=null;t.startAt&&(p=(function(v){const _=!!v.before,b=v.values||[];return new qh(b,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const _=!v.before,b=v.values||[];return new qh(b,_)})(t.endAt)),dD(e,i,c,a,d,"F",p,m)}function KD(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ib(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fl(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fl(t.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fl(t.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=fl(t.unaryFilter.field);return Ht.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ht.create(fl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ur.create(t.compositeFilter.filters.map((r=>Ib(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(t.compositeFilter.op))})(n):qe(30097,{filter:n})}function QD(n){return OD[n]}function YD(n){return LD[n]}function XD(n){return VD[n]}function hl(n){return{fieldPath:n.canonicalString()}}function fl(n){return on.fromServerFormat(n.fieldPath)}function Ab(n){return n instanceof Ht?(function(t){if(t.op==="=="){if(O0(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NAN"}};if(M0(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(O0(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NOT_NAN"}};if(M0(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(t.field),op:YD(t.op),value:t.value}}})(n):n instanceof Ur?(function(t){const r=t.getFilters().map((i=>Ab(i)));return r.length===1?r[0]:{compositeFilter:{op:XD(t.op),filters:r}}})(n):qe(54877,{filter:n})}function JD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Cb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,r,i,a=He.min(),c=He.min(),d=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.yt=e}}function eM(n){const e=GD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.Cn=new nM}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(co.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class nM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Jt(xt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Jt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(Rb,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tl(0)}static cr(){return new Tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LruGarbageCollector",rM=1048576;function J0([n,e],[t,r]){const i=st(n,t);return i===0?st(e,r):i}class sM{constructor(e){this.Ir=e,this.buffer=new Jt(J0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();J0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(X0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jl(t)?be(X0,"Ignoring IndexedDB error during garbage collection: ",t):await Pl(t)}await this.Vr(3e5)}))}}class oM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(_f.ce);const r=new sM(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Y0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,d,p,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,c=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,d=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(m=Date.now(),ul()<=rt.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${v} documents in `+(m-p)+`ms
Total Duration: ${m-y}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v}))))}}function aM(n,e){return new oM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.changes=new ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Xc(r.mutation,i,or.empty(),_t.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,it()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=it()){const i=ea();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=zc();return a.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ea();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,it())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let a=fi();const c=Yc(),d=(function(){return Yc()})();return t.forEach(((p,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof xo)?a=a.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),Xc(y.mutation,m,y.mutation.getFieldMask(),_t.now())):c.set(m.key,or.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,y)=>c.set(m,y))),t.forEach(((m,y)=>d.set(m,new cM(y,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Yc();let i=new Dt(((c,d)=>c-d)),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let y=r.get(p)||or.empty();y=d.applyToLocalView(m,y),r.set(p,y);const v=(i.get(d.batchId)||it()).add(p);i=i.insert(d.batchId,v)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,y=p.value,v=hb();y.forEach((_=>{if(!a.has(_)){const b=vb(t.get(_),r.get(_));b!==null&&v.set(_,b),a=a.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ae.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return Le.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ab(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(ea());let d=iu,p=a;return c.next((m=>ae.forEach(m,((y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),a.get(y)?ae.resolve():this.remoteDocumentCache.getEntry(e,y).next((_=>{p=p.insert(y,_)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,it()))).next((y=>({batchId:d,changes:db(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((r=>{let i=zc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=zc();return this.indexManager.getCollectionParents(e,a).next((d=>ae.forEach(d,(p=>{const m=(function(v,_){return new Dl(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((y=>{y.forEach(((v,_)=>{c=c.insert(v,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((p,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Nn.newInvalidDocument(y)))}));let d=zc();return c.forEach(((p,m)=>{const y=a.get(p);y!==void 0&&Xc(y.mutation,m,or.empty(),_t.now()),Tf(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:vs(i.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:eM(i.bundledQuery),readTime:vs(i.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.overlays=new Dt(Le.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ea();return ae.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=ea(),a=t.length+1,c=new Le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Dt(((m,y)=>m-y));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=ea(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=ea(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,y)=>d.set(m,y))),!(d.size()>=i)););return ae.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new RD(t,r));let a=this.qr.get(t);a===void 0&&(a=it(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.Qr=new Jt(rn.$r),this.Ur=new Jt(rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new rn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new rn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Le(new xt([])),r=new rn(t,e),i=new rn(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Le(new xt([])),r=new rn(t,e),i=new rn(t,e+1);let a=it();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new rn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Le.comparator(e.key,t.key)||st(e.Yr,t.Yr)}static Kr(e,t){return st(e.Yr,t.Yr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(rn.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new CD(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new rn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Qy:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new rn(t,0),i=new rn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const d=this.Xr(c.Yr);a.push(d)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jt(st);return t.forEach((i=>{const a=new rn(i,0),c=new rn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(d=>{r=r.add(d.Yr)}))})),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const c=new rn(new Le(a),0);let d=new Jt(st);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(p.Yr)),!0)}),c),ae.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(t.mutations,(i=>{const a=new rn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new rn(t,0),i=this.Zr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.ri=e,this.docs=(function(){return new Dt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=fi();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Nn.newInvalidDocument(i))})),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=fi();const c=t.path,d=new Le(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:y}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||Bj($j(y),r)<=0||(i.has(y.key)||Tf(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,i){qe(9500)}ii(e,t){return ae.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new gM(this)}getSize(e){return ae.resolve(this.size)}}class gM extends lM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.persistence=e,this.si=new ya((t=>Jy(t)),Zy),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new sv,this.targetCount=0,this.ai=Tl.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),ae.waitFor(a).next((()=>i))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,t){this.ui={},this.overlays={},this.ci=new _f(0),this.li=!1,this.li=!0,this.hi=new fM,this.referenceDelegate=e(this),this.Pi=new yM(this),this.indexManager=new tM,this.remoteDocumentCache=(function(i){return new mM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ZD(t),this.Ii=new dM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new pM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const i=new vM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return ae.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class vM extends Wj{constructor(e){super(),this.currentSequenceNumber=e}}class iv{constructor(e){this.persistence=e,this.Ri=new sv,this.Vi=null}static mi(e){return new iv(e)}get fi(){if(this.Vi)return this.Vi;throw qe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(r=>{const i=Le.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Kh{constructor(e,t){this.persistence=e,this.pi=new ya((r=>Kj(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=aM(this,t)}static mi(e,t){return new Kh(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ae.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?ae.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,a.removeEntry(c,He.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sh(e.data.value)),t}br(e,t,r){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ae.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=it(),i=it();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ov(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GR()?8:Hj(An())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new wM;return this.Ss(e,t,c).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ul()<=rt.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",dl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(ul()<=rt.DEBUG&&be("QueryEngine","Query:",dl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ul()<=rt.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",dl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):ae.resolve())}ys(e,t){if(U0(t))return ae.resolve(null);let r=ys(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Wh(t,null,"F"),r=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=it(...a);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const m=this.Ds(t,d);return this.Cs(t,m,c,p.readTime)?this.ys(e,Wh(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,r,i){return U0(t)||i.isEqual(He.min())?ae.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?ae.resolve(null):(ul()<=rt.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dl(t)),this.vs(e,c,t,zj(i,iu)).next((d=>d)))}))}Ds(e,t){let r=new Jt(cb(e));return t.forEach(((i,a)=>{Tf(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return ul()<=rt.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",dl(t)),this.ps.getDocumentsMatchingQuery(e,t,co.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="LocalStore",_M=3e8;class EM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Dt(st),this.xs=new ya((a=>Jy(a)),Zy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function SM(n,e,t,r){return new EM(n,e,t,r)}async function Pb(n,e){const t=Ye(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],d=[];let p=it();for(const m of i){c.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}for(const m of a){d.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function bM(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,y){const v=m.batch,_=v.keys();let b=ae.resolve();return _.forEach((R=>{b=b.next((()=>y.getEntry(p,R))).next((N=>{const A=m.docVersions.get(R);ft(A!==null,48541),N.version.compareTo(A)<0&&(v.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),y.addEntry(N)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(p,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=it();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function jb(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function NM(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((y,v)=>{const _=i.get(v);if(!_)return;d.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,v))));let b=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(an.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,r)),i=i.insert(v,b),(function(N,A,L){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=_M?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(_,b,y)&&d.push(t.Pi.updateTargetData(a,b))}));let p=fi(),m=it();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),d.push(TM(a,c,e.documentUpdates).next((y=>{p=y.ks,m=y.qs}))),!r.isEqual(He.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(y)}return ae.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Ms=i,a)))}function TM(n,e,t){let r=it(),i=it();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=fi();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(He.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):be(av,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:i}}))}function IM(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Qy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function AM(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,ae.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new no(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ey(n,e,t){const r=Ye(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!jl(c))throw c;be(av,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Z0(n,e,t){const r=Ye(n);let i=He.min(),a=it();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,y){const v=Ye(p),_=v.xs.get(y);return _!==void 0?ae.resolve(v.Ms.get(_)):v.Pi.getTargetData(m,y)})(r,c,ys(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{a=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:He.min(),t?a:it()))).next((d=>(CM(r,fD(e),d),{documents:d,Qs:a})))))}function CM(n,e,t){let r=n.Os.get(e)||He.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class eE{constructor(){this.activeTargetIds=wD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RM{constructor(){this.Mo=new eE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="ConnectivityMonitor";class nE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(tE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(tE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function ty(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="RestConnection",PM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$h?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=ty(),d=this.zo(e,t.toUriEncodedString());be(Xm,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,i,a);const{host:m}=new URL(d),y=vi(m);return this.Jo(e,d,p,r,y).then((v=>(be(Xm,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw la(Xm,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",r),v}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=PM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class MM extends jM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=ty();return new Promise(((d,p)=>{const m=new DS;m.setWithCredentials(!0),m.listenOnce(MS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Eh.NO_ERROR:const v=m.getResponseJson();be(Sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Eh.TIMEOUT:be(Sn,`RPC '${e}' ${c} timed out`),p(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const _=m.getStatus();if(be(Sn,`RPC '${e}' ${c} failed with status:`,_,"response text:",m.getResponseText()),_>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b==null?void 0:b.error;if(R&&R.status&&R.message){const N=(function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(j)>=0?j:oe.UNKNOWN})(R.status);p(new _e(N,R.message))}else p(new _e(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{be(Sn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(i);be(Sn,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=ty(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=VS(),d=LS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=a.join("");be(Sn,`Creating RPC '${e}' stream ${i}: ${y}`,p);const v=c.createWebChannel(y,p);this.I_(v);let _=!1,b=!1;const R=new DM({Yo:A=>{b?be(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(be(Sn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),be(Sn,`RPC '${e}' stream ${i} sending:`,A),v.send(A))},Zo:()=>v.close()}),N=(A,L,j)=>{A.listen(L,(k=>{try{j(k)}catch(U){setTimeout((()=>{throw U}),0)}}))};return N(v,Uc.EventType.OPEN,(()=>{b||(be(Sn,`RPC '${e}' stream ${i} transport opened.`),R.o_())})),N(v,Uc.EventType.CLOSE,(()=>{b||(b=!0,be(Sn,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(v))})),N(v,Uc.EventType.ERROR,(A=>{b||(b=!0,la(Sn,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),R.a_(new _e(oe.UNAVAILABLE,"The operation could not be completed")))})),N(v,Uc.EventType.MESSAGE,(A=>{var L;if(!b){const j=A.data[0];ft(!!j,16349);const k=j,U=(k==null?void 0:k.error)||((L=k[0])==null?void 0:L.error);if(U){be(Sn,`RPC '${e}' stream ${i} received error:`,U);const K=U.status;let ee=(function(O){const $=Wt[O];if($!==void 0)return xb($)})(K),C=U.message;ee===void 0&&(ee=oe.INTERNAL,C="Unknown error status: "+K+" with message "+U.message),b=!0,R.a_(new _e(ee,C)),v.close()}else be(Sn,`RPC '${e}' stream ${i} received:`,j),R.u_(j)}})),N(d,OS.STAT_EVENT,(A=>{A.stat===Bg.PROXY?be(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Bg.NOPROXY&&be(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n){return new FD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="PersistentStream";class Mb{constructor(e,t,r,i,a,c,d,p){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Db(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new _e(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(rE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(be(rE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OM extends Mb{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=$D(this.serializer,e),r=(function(a){if(!("targetChange"in a))return He.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?vs(c.readTime):He.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Zg(this.serializer),t.addTarget=(function(a,c){let d;const p=c.target;if(d=Kg(p)?{documents:WD(a,p)}:{query:HD(a,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Sb(a,c.resumeToken);const m=Yg(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(He.min())>0){d.readTime=Gh(a,c.snapshotVersion.toTimestamp());const m=Yg(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=KD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.q_(t)}}class LM extends Mb{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qD(e.writeResults,e.commitTime),r=vs(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>BD(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{}class FM extends VM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Xg(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(oe.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Xg(t,r),i,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class UM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RemoteStore";class zM{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{va(this)&&(be(ca,"Restarting streams for network reachability change."),await(async function(p){const m=Ye(p);m.Ea.add(4),await Iu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Pf(m)})(this))}))})),this.Ra=new UM(r,i)}}async function Pf(n){if(va(n))for(const e of n.da)await e(!0)}async function Iu(n){for(const e of n.da)await e(!1)}function Ob(n,e){const t=Ye(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dv(t)?uv(t):Ml(t).O_()&&cv(t,e))}function lv(n,e){const t=Ye(n),r=Ml(t);t.Ia.delete(e),r.O_()&&Lb(t,e),t.Ia.size===0&&(r.O_()?r.L_():va(t)&&t.Ra.set("Unknown"))}function cv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(n).Y_(e)}function Lb(n,e){n.Va.Ue(e),Ml(n).Z_(e)}function uv(n){n.Va=new MD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ml(n).start(),n.Ra.ua()}function dv(n){return va(n)&&!Ml(n).x_()&&n.Ia.size>0}function va(n){return Ye(n).Ea.size===0}function Vb(n){n.Va=void 0}async function $M(n){n.Ra.set("Online")}async function BM(n){n.Ia.forEach(((e,t)=>{cv(n,e)}))}async function qM(n,e){Vb(n),dv(n)?(n.Ra.ha(e),uv(n)):n.Ra.set("Unknown")}async function WM(n,e,t){if(n.Ra.set("Online"),e instanceof Eb&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const d of a.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){be(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qh(n,r)}else if(e instanceof Th?n.Va.Ze(e):e instanceof _b?n.Va.st(e):n.Va.tt(e),!t.isEqual(He.min()))try{const r=await jb(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const d=a.Va.Tt(c);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const y=a.Ia.get(m);y&&a.Ia.set(m,y.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,m)=>{const y=a.Ia.get(p);if(!y)return;a.Ia.set(p,y.withResumeToken(an.EMPTY_BYTE_STRING,y.snapshotVersion)),Lb(a,p);const v=new no(y.target,p,m,y.sequenceNumber);cv(a,v)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){be(ca,"Failed to raise snapshot:",r),await Qh(n,r)}}async function Qh(n,e,t){if(!jl(e))throw e;n.Ea.add(1),await Iu(n),n.Ra.set("Offline"),t||(t=()=>jb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{be(ca,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Pf(n)}))}function Fb(n,e){return e().catch((t=>Qh(n,t,e)))}async function jf(n){const e=Ye(n),t=po(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qy;for(;HM(e);)try{const i=await IM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,GM(e,i)}catch(i){await Qh(e,i)}Ub(e)&&zb(e)}function HM(n){return va(n)&&n.Ta.length<10}function GM(n,e){n.Ta.push(e);const t=po(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ub(n){return va(n)&&!po(n).x_()&&n.Ta.length>0}function zb(n){po(n).start()}async function KM(n){po(n).ra()}async function QM(n){const e=po(n);for(const t of n.Ta)e.ea(t.mutations)}async function YM(n,e,t){const r=n.Ta.shift(),i=tv.from(r,e,t);await Fb(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await jf(n)}async function XM(n,e){e&&po(n).X_&&await(async function(r,i){if((function(c){return PD(c)&&c!==oe.ABORTED})(i.code)){const a=r.Ta.shift();po(r).B_(),await Fb(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await jf(r)}})(n,e),Ub(n)&&zb(n)}async function sE(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),be(ca,"RemoteStore received new credentials");const r=va(t);t.Ea.add(3),await Iu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function JM(n,e){const t=Ye(n);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Iu(t),t.Ra.set("Unknown"))}function Ml(n){return n.ma||(n.ma=(function(t,r,i){const a=Ye(t);return a.sa(),new OM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:$M.bind(null,n),t_:BM.bind(null,n),r_:qM.bind(null,n),H_:WM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),dv(n)?uv(n):n.Ra.set("Unknown")):(await n.ma.stop(),Vb(n))}))),n.ma}function po(n){return n.fa||(n.fa=(function(t,r,i){const a=Ye(t);return a.sa(),new LM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:KM.bind(null,n),r_:XM.bind(null,n),ta:QM.bind(null,n),na:YM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await jf(n)):(await n.fa.stop(),n.Ta.length>0&&(be(ca,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new hv(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fv(n,e){if(hi("AsyncQueue",`${e}: ${n}`),jl(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Le.comparator(t.key,r.key):(t,r)=>Le.comparator(t.key,r.key),this.keyedMap=zc(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new vl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.ga=new Dt(Le.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Il{constructor(e,t,r,i,a,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Il(e,t,vl.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eO{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ye(t),a=i.queries;i.queries=oE(),a.forEach(((c,d)=>{for(const p of d.Sa)p.onError(r)}))})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function oE(){return new ya((n=>lb(n)),Nf)}async function pv(n,e){const t=Ye(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new ZM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=fv(c,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&gv(t)}async function mv(n,e){const t=Ye(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tO(n,e){const t=Ye(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Fa(i)&&(r=!0);c.wa=i}}r&&gv(t)}function nO(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function gv(n){n.Ca.forEach((e=>{e.next()}))}var ny,aE;(aE=ny||(ny={})).Ma="default",aE.Cache="cache";class yv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ny.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.key=e}}class Bb{constructor(e){this.key=e}}class rO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=it(),this.mutatedKeys=it(),this.eu=cb(e),this.tu=new vl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new iE,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,v)=>{const _=i.get(y),b=Tf(this.query,v)?v:null,R=!!_&&this.mutatedKeys.has(_.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;_&&b?_.data.isEqual(b.data)?R!==N&&(r.track({type:3,doc:b}),A=!0):this.su(_,b)||(r.track({type:2,doc:b}),A=!0,(p&&this.eu(b,p)>0||m&&this.eu(b,m)<0)&&(d=!0)):!_&&b?(r.track({type:0,doc:b}),A=!0):_&&!b&&(r.track({type:1,doc:_}),A=!0,(p||m)&&(d=!0)),A&&(b?(c=c.add(b),a=N?a.add(y):a.delete(y)):(c=c.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{tu:c,iu:r,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,v)=>(function(b,R){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Rt:A})}};return N(b)-N(R)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],p=this.Xa.size===0&&this.current&&!i?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new Il(this.query,e.tu,a,c,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=it(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Bb(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new $b(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=it();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vv="SyncEngine";class sO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iO{constructor(e){this.key=e,this.hu=!1}}class oO{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ya((d=>lb(d)),Nf),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(Le.comparator),this.Au=new Map,this.Ru=new sv,this.Vu={},this.mu=new Map,this.fu=Tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aO(n,e,t=!0){const r=Qb(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await qb(r,e,t,!0),i}async function lO(n,e){const t=Qb(n);await qb(t,e,!0,!1)}async function qb(n,e,t,r){const i=await AM(n.localStore,ys(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await cO(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ob(n.remoteStore,i),d}async function cO(n,e,t,r,i){n.pu=(v,_,b)=>(async function(N,A,L,j){let k=A.view.ru(L);k.Cs&&(k=await Z0(N.localStore,A.query,!1).then((({documents:C})=>A.view.ru(C,k))));const U=j&&j.targetChanges.get(A.targetId),K=j&&j.targetMismatches.get(A.targetId)!=null,ee=A.view.applyChanges(k,N.isPrimaryClient,U,K);return cE(N,A.targetId,ee.au),ee.snapshot})(n,v,_,b);const a=await Z0(n.localStore,e,!0),c=new rO(e,a.Qs),d=c.ru(a.documents),p=Tu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=c.applyChanges(d,n.isPrimaryClient,p);cE(n,t,m.au);const y=new sO(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function uO(n,e,t){const r=Ye(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!Nf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ey(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lv(r.remoteStore,i.targetId),ry(r,i.targetId)})).catch(Pl)):(ry(r,i.targetId),await ey(r.localStore,i.targetId,!0))}async function dO(n,e){const t=Ye(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lv(t.remoteStore,r.targetId))}async function hO(n,e,t){const r=wO(n);try{const i=await(function(c,d){const p=Ye(c),m=_t.now(),y=d.reduce(((b,R)=>b.add(R.key)),it());let v,_;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let R=fi(),N=it();return p.Ns.getEntries(b,y).next((A=>{R=A,R.forEach(((L,j)=>{j.isValidDocument()||(N=N.add(L))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,R))).next((A=>{v=A;const L=[];for(const j of d){const k=ID(j,v.get(j.key).overlayedDocument);k!=null&&L.push(new xo(j.key,k,eb(k.value.mapValue),jn.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,L,d)})).next((A=>{_=A;const L=A.applyToLocalDocumentSet(v,N);return p.documentOverlayCache.saveOverlays(b,A.batchId,L)}))})).then((()=>({batchId:_.batchId,changes:db(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new Dt(st)),m=m.insert(d,p),c.Vu[c.currentUser.toKey()]=m})(r,i.batchId,t),await Au(r,i.changes),await jf(r.remoteStore)}catch(i){const a=fv(i,"Failed to persist write");t.reject(a)}}async function Wb(n,e){const t=Ye(n);try{const r=await NM(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?ft(c.hu,14607):i.removedDocuments.size>0&&(ft(c.hu,42227),c.hu=!1))})),await Au(t,r,e)}catch(r){await Pl(r)}}function lE(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const p=Ye(c);p.onlineState=d;let m=!1;p.queries.forEach(((y,v)=>{for(const _ of v.Sa)_.va(d)&&(m=!0)})),m&&gv(p)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fO(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new Dt(Le.comparator);c=c.insert(a,Nn.newNoDocument(a,He.min()));const d=it().add(a),p=new Rf(He.min(),new Map,new Dt(st),c,d);await Wb(r,p),r.du=r.du.remove(a),r.Au.delete(e),wv(r)}else await ey(r.localStore,e,!1).then((()=>ry(r,e,t))).catch(Pl)}async function pO(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=await bM(t.localStore,e);Gb(t,r,null),Hb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Au(t,i)}catch(i){await Pl(i)}}async function mO(n,e,t){const r=Ye(n);try{const i=await(function(c,d){const p=Ye(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return p.mutationQueue.lookupMutationBatch(m,d).next((v=>(ft(v!==null,37113),y=v.keys(),p.mutationQueue.removeMutationBatch(m,v)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>p.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);Gb(r,e,t),Hb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Au(r,i)}catch(i){await Pl(i)}}function Hb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Gb(n,e,t){const r=Ye(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ry(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Kb(n,r)}))}function Kb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(lv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wv(n))}function cE(n,e,t){for(const r of t)r instanceof $b?(n.Ru.addReference(r.key,e),gO(n,r)):r instanceof Bb?(be(vv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Kb(n,r.key)):qe(19791,{wu:r})}function gO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(be(vv,"New document in limbo: "+t),n.Eu.add(r),wv(n))}function wv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(xt.fromString(e)),r=n.fu.next();n.Au.set(r,new iO(t)),n.du=n.du.insert(t,r),Ob(n.remoteStore,new no(ys(bf(t.path)),r,"TargetPurposeLimboResolution",_f.ce))}}async function Au(n,e,t){const r=Ye(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,p)=>{c.push(r.pu(p,e,t).then((m=>{var y;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(m){i.push(m);const v=ov.As(p.targetId,m);a.push(v)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(p,m){const y=Ye(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ae.forEach(m,(_=>ae.forEach(_.Es,(b=>y.persistence.referenceDelegate.addReference(v,_.targetId,b))).next((()=>ae.forEach(_.ds,(b=>y.persistence.referenceDelegate.removeReference(v,_.targetId,b)))))))))}catch(v){if(!jl(v))throw v;be(av,"Failed to update sequence numbers: "+v)}for(const v of m){const _=v.targetId;if(!v.fromCache){const b=y.Ms.get(_),R=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(_,N)}}})(r.localStore,a))}async function yO(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){be(vv,"User change. New user:",e.toKey());const r=await Pb(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new _e(oe.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Au(t,r.Ls)}}function vO(n,e){const t=Ye(n),r=t.Au.get(e);if(r&&r.hu)return it().add(r.key);{let i=it();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function Qb(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fO.bind(null,e),e.Pu.H_=tO.bind(null,e.eventManager),e.Pu.yu=nO.bind(null,e.eventManager),e}function wO(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mO.bind(null,e),e}class Yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return SM(this.persistence,new xM,e.initialUser,this.serializer)}Cu(e){return new kb(iv.mi,this.serializer)}Du(e){return new RM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yh.provider={build:()=>new Yh};class xO extends Yh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof Kh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new iM(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new kb((r=>Kh.mi(r,t)),this.serializer)}}class sy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yO.bind(null,this.syncEngine),await JM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eO})()}createDatastore(e){const t=kf(e.databaseInfo.databaseId),r=(function(a){return new MM(a)})(e.databaseInfo);return(function(a,c,d,p){return new FM(a,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,d){return new zM(r,i,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>lE(this.syncEngine,t,0)),(function(){return nE.v()?new nE:new kM})())}createSyncEngine(e,t){return(function(i,a,c,d,p,m,y){const v=new oO(i,a,c,d,p,m);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=Ye(i);be(ca,"RemoteStore shutting down."),a.Ea.add(5),await Iu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}sy.provider={build:()=>new sy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class _O{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bn.UNAUTHENTICATED,this.clientId=wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{be(mo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(be(mo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Zm(n,e){n.asyncQueue.verifyOperationInProgress(),be(mo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Pb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function uE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await EO(n);be(mo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>sE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>sE(e.remoteStore,i))),n._onlineComponents=e}async function EO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be(mo,"Using user provided OfflineComponentProvider");try{await Zm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===oe.FAILED_PRECONDITION||i.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;la("Error using user provided cache. Falling back to memory cache: "+t),await Zm(n,new Yh)}}else be(mo,"Using default OfflineComponentProvider"),await Zm(n,new xO(void 0));return n._offlineComponents}async function Yb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be(mo,"Using user provided OnlineComponentProvider"),await uE(n,n._uninitializedComponentsProvider._online)):(be(mo,"Using default OnlineComponentProvider"),await uE(n,new sy))),n._onlineComponents}function SO(n){return Yb(n).then((e=>e.syncEngine))}async function Xh(n){const e=await Yb(n),t=e.eventManager;return t.onListen=aO.bind(null,e.syncEngine),t.onUnlisten=uO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dO.bind(null,e.syncEngine),t}function bO(n,e,t={}){const r=new Zs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,p,m){const y=new xv({next:_=>{y.Nu(),c.enqueueAndForget((()=>mv(a,v)));const b=_.docs.has(d);!b&&_.fromCache?m.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&p&&p.source==="server"?m.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new yv(bf(d.path),y,{includeMetadataChanges:!0,qa:!0});return pv(a,v)})(await Xh(n),n.asyncQueue,e,t,r))),r.promise}function NO(n,e,t={}){const r=new Zs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,p,m){const y=new xv({next:_=>{y.Nu(),c.enqueueAndForget((()=>mv(a,v))),_.fromCache&&p.source==="server"?m.reject(new _e(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new yv(d,y,{includeMetadataChanges:!0,qa:!0});return pv(a,v)})(await Xh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="firestore.googleapis.com",hE=!0;class fE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jb,this.ssl=hE}else this.host=e.host,this.ssl=e.ssl??hE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rM)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zS;switch(r.type){case"firstParty":return new Dj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=dE.get(t);r&&(be("ComponentProvider","Removing Datastore"),dE.delete(t),r.terminate())})(this),Promise.resolve()}}function Zb(n,e,t,r={}){var m;n=In(n,Df);const i=vi(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(hf(`https://${d}`),ff("Firestore",!0)),a.host!==Jb&&a.host!==d&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:i,emulatorOptions:r};if(!sa(p,c)&&(n._setSettings(p),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=bn.MOCK_USER;else{y=W1(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new bn(_)}n._authCredentials=new kj(new US(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class jt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bu(t,jt._jsonSchema))return new jt(e,r||null,new Le(xt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Gt("string",jt._jsonSchemaVersion),referencePath:Gt("string")};class ei extends Ts{constructor(e,t,r){super(e,t,bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Le(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function Rt(n,e,...t){if(n=dt(n),$S("collection","path",e),n instanceof Df){const r=xt.fromString(e,...t);return T0(r),new ei(n,null,r)}{if(!(n instanceof jt||n instanceof ei))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return T0(r),new ei(n.firestore,null,r)}}function Xe(n,e,...t){if(n=dt(n),arguments.length===1&&(e=wf.newId()),$S("doc","path",e),n instanceof Df){const r=xt.fromString(e,...t);return N0(r),new jt(n,null,new Le(r))}{if(!(n instanceof jt||n instanceof ei))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return N0(r),new jt(n.firestore,n instanceof ei?n.converter:null,new Le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="AsyncQueue";class mE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Db(this,"async_queue_retry"),this._c=()=>{const r=Jm();r&&be(pE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Jm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Jm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!jl(e))throw e;be(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",gE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=hv.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&qe(47125,{Pc:gE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class zr extends Df{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function eN(n,e){const t=typeof n=="object"?n:pf(),r=typeof n=="string"?n:$h,i=wu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=ky("firestore");a&&Zb(i,...a)}return i}function Ol(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||TO(n),n._firestoreClient}function TO(n){var r,i,a;const e=n._freezeSettings(),t=(function(d,p,m,y){return new Xj(d,p,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Xb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new _O(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(an.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sr(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:Gt("string",sr._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vr._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Vr._jsonSchema))return new Vr(e.latitude,e.longitude)}}Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:Gt("string",Vr._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Gt("string",Fr._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=/^__.*__$/;class AO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}class tN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{Ac:n})}}class _v{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _v({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nN(this.Ac)&&IO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kf(e)}Cc(e,t,r,i=!1){return new _v({Ac:e,methodName:t,Dc:r,path:on.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(n){const e=n._freezeSettings(),t=kf(n._databaseId);return new CO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ev(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);bv("Data must be an object, but it was:",c,r);const d=iN(r,c);let p,m;if(a.merge)p=new or(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const y=[];for(const v of a.mergeFields){const _=iy(e,v,t);if(!c.contains(_))throw new _e(oe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);aN(y,_)||y.push(_)}p=new or(y),m=c.fieldTransforms.filter((v=>p.covers(v.field)))}else p=null,m=c.fieldTransforms;return new AO(new Bn(d),p,m)}class Mf extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mf}}class Sv extends Cu{_toFieldTransform(e){return new SD(e.path,new cu)}isEqual(e){return e instanceof Sv}}function rN(n,e,t,r){const i=n.Cc(1,e,t);bv("Data must be an object, but it was:",i,r);const a=[],c=Bn.empty();wo(r,((p,m)=>{const y=Nv(e,p,t);m=dt(m);const v=i.yc(y);if(m instanceof Mf)a.push(y);else{const _=ku(m,v);_!=null&&(a.push(y),c.set(y,_))}}));const d=new or(a);return new tN(c,d,i.fieldTransforms)}function sN(n,e,t,r,i,a){const c=n.Cc(1,e,t),d=[iy(e,r,t)],p=[i];if(a.length%2!=0)throw new _e(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)d.push(iy(e,a[_])),p.push(a[_+1]);const m=[],y=Bn.empty();for(let _=d.length-1;_>=0;--_)if(!aN(m,d[_])){const b=d[_];let R=p[_];R=dt(R);const N=c.yc(b);if(R instanceof Mf)m.push(b);else{const A=ku(R,N);A!=null&&(m.push(b),y.set(b,A))}}const v=new or(m);return new tN(y,v,c.fieldTransforms)}function RO(n,e,t,r=!1){return ku(t,n.Cc(r?4:3,e))}function ku(n,e){if(oN(n=dt(n)))return bv("Unsupported field value:",e,n),iN(n,e);if(n instanceof Cu)return(function(r,i){if(!nN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const d of r){let p=ku(d,i.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:Gh(i.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gh(i.serializer,a)}}if(r instanceof Vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sr)return{bytesValue:Sb(i.serializer,r._byteString)};if(r instanceof jt){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:rv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fr)return(function(c,d){return{mapValue:{fields:{[JS]:{stringValue:ZS},[Bh]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return ev(d.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${xf(r)}`)})(n,e)}function iN(n,e){const t={};return HS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(n,((r,i)=>{const a=ku(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function oN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Vr||n instanceof sr||n instanceof jt||n instanceof Cu||n instanceof Fr)}function bv(n,e,t){if(!oN(t)||!qS(t)){const r=xf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function iy(n,e,t){if((e=dt(e))instanceof Ll)return e._internalPath;if(typeof e=="string")return Nv(n,e);throw Jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const kO=new RegExp("[~\\*/\\[\\]]");function Nv(n,e,t){if(e.search(kO)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ll(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jh(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new _e(oe.INVALID_ARGUMENT,d+n+p)}function aN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Of("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PO extends lN{data(){return super.data()}}function Of(n,e){return typeof e=="string"?Nv(n,e):e instanceof Ll?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tv{}class Lf extends Tv{}function Pn(n,e,...t){let r=[];e instanceof Tv&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((p=>p instanceof Vf)).length,d=a.filter((p=>p instanceof Pu)).length;if(c>1||c>0&&d>0)throw new _e(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Pu extends Lf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Pu(e,t,r)}_apply(e){const t=this._parse(e);return uN(e._query,t),new Ts(e.firestore,e.converter,Qg(e._query,t))}_parse(e){const t=Ru(e.firestore);return(function(a,c,d,p,m,y,v){let _;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){wE(v,y);const R=[];for(const N of v)R.push(vE(p,a,N));_={arrayValue:{values:R}}}else _=vE(p,a,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||wE(v,y),_=RO(d,c,v,y==="in"||y==="not-in");return Ht.create(m,y,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function sn(n,e,t){const r=e,i=Of("where",n);return Pu._create(i,r,t)}class Vf extends Tv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vf(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let c=i;const d=a.getFlattenedFilters();for(const p of d)uN(c,p),c=Qg(c,p)})(e._query,t),new Ts(e.firestore,e.converter,Qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ff extends Lf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ff(e,t)}_apply(e){const t=(function(i,a,c){if(i.startAt!==null)throw new _e(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _e(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(a,c)})(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,(function(i,a){const c=i.explicitOrderBy.concat([a]);return new Dl(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function ta(n,e="asc"){const t=e,r=Of("orderBy",n);return Ff._create(r,t)}class Uf extends Lf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Uf(e,t,r)}_apply(e){return new Ts(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function Iv(n){return Uj("limit",n),Uf._create("limit",n,"F")}function vE(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new _e(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ab(e)&&t.indexOf("/")!==-1)throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xt.fromString(t));if(!Le.isDocumentKey(r))throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return D0(n,new Le(r))}if(t instanceof jt)return D0(n,t._key);throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(t)}.`)}function wE(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uN(n,e){const t=(function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dN{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wo(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,i,a;const t=(a=(i=(r=e.fields)==null?void 0:r[Bh].arrayValue)==null?void 0:i.values)==null?void 0:a.map((c=>zt(c.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new Vr(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const t=uo(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xt.fromString(e);ft(Cb(r),9688,{name:e});const i=new Sl(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(t)||hi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oo extends lN{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Of("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",oo._jsonSchema={type:Gt("string",oo._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Jc extends oo{data(e={}){return super.data(e)}}class ao{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Jc(this._firestore,this._userDataWriter,r.key,r,new pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const p=new Jc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new pl(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Jc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new pl(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:jO(d.type),doc:p,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n){n=In(n,jt);const e=In(n.firestore,zr);return bO(Ol(e),n._key).then((t=>hN(e,n,t)))}ao._jsonSchemaVersion="firestore/querySnapshot/1.0",ao._jsonSchema={type:Gt("string",ao._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Cv extends dN{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function $n(n){n=In(n,Ts);const e=In(n.firestore,zr),t=Ol(e),r=new Cv(e);return cN(n._query),NO(t,n._query).then((i=>new ao(e,r,n,i)))}function Dr(n,e,t){n=In(n,jt);const r=In(n.firestore,zr),i=Av(n.converter,e,t);return Vl(r,[Ev(Ru(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,jn.none())])}function qn(n,e,t,...r){n=In(n,jt);const i=In(n.firestore,zr),a=Ru(i);let c;return c=typeof(e=dt(e))=="string"||e instanceof Ll?sN(a,"updateDoc",n._key,e,t,r):rN(a,"updateDoc",n._key,e),Vl(i,[c.toMutation(n._key,jn.exists(!0))])}function ua(n){return Vl(In(n.firestore,zr),[new Cf(n._key,jn.none())])}function go(n,e){const t=In(n.firestore,zr),r=Xe(n),i=Av(n.converter,e);return Vl(t,[Ev(Ru(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then((()=>r))}function Rv(n,...e){var p,m,y;n=dt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||yE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yE(e[r])){const v=e[r];e[r]=(p=v.next)==null?void 0:p.bind(v),e[r+1]=(m=v.error)==null?void 0:m.bind(v),e[r+2]=(y=v.complete)==null?void 0:y.bind(v)}let a,c,d;if(n instanceof jt)c=In(n.firestore,zr),d=bf(n._key.path),a={next:v=>{e[r]&&e[r](hN(c,n,v))},error:e[r+1],complete:e[r+2]};else{const v=In(n,Ts);c=In(v.firestore,zr),d=v._query;const _=new Cv(c);a={next:b=>{e[r]&&e[r](new ao(c,_,v,b))},error:e[r+1],complete:e[r+2]},cN(n._query)}return(function(_,b,R,N){const A=new xv(N),L=new yv(b,A,R);return _.asyncQueue.enqueueAndForget((async()=>pv(await Xh(_),L))),()=>{A.Nu(),_.asyncQueue.enqueueAndForget((async()=>mv(await Xh(_),L)))}})(Ol(c),d,i,a)}function Vl(n,e){return(function(r,i){const a=new Zs;return r.asyncQueue.enqueueAndForget((async()=>hO(await SO(r),i,a))),a.promise})(Ol(n),e)}function hN(n,e,t){const r=t.docs.get(e._key),i=new Cv(n);return new oo(n,i,e._key,r,new pl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ru(e)}set(e,t,r){this._verifyNotCommitted();const i=eg(e,this._firestore),a=Av(i.converter,t,r),c=Ev(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=eg(e,this._firestore);let c;return c=typeof(t=dt(t))=="string"||t instanceof Ll?sN(this._dataReader,"WriteBatch.update",a._key,t,r,i):rN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=eg(e,this._firestore);return this._mutations=this._mutations.concat(new Cf(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eg(n,e){if((n=dt(n)).firestore!==e)throw new _e(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Zc(){return new Sv("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n){return Ol(n=In(n,zr)),new fN(n,(e=>Vl(n,e)))}(function(e,t=!0){(function(i){kl=i})(ga),lo(new ci("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new zr(new Pj(r.getProvider("auth-internal")),new Mj(c,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(m.options.projectId,y)})(c,i),c);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),xr(_0,E0,e),xr(_0,E0,"esm2020")})();const DO=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:dN,Bytes:sr,CollectionReference:ei,DocumentReference:jt,DocumentSnapshot:oo,FieldPath:Ll,FieldValue:Cu,Firestore:zr,FirestoreError:_e,GeoPoint:Vr,Query:Ts,QueryCompositeFilterConstraint:Vf,QueryConstraint:Lf,QueryDocumentSnapshot:Jc,QueryFieldFilterConstraint:Pu,QueryLimitConstraint:Uf,QueryOrderByConstraint:Ff,QuerySnapshot:ao,SnapshotMetadata:pl,Timestamp:_t,VectorValue:Fr,WriteBatch:fN,_AutoId:wf,_ByteString:an,_DatabaseId:Sl,_DocumentKey:Le,_EmptyAuthCredentialsProvider:zS,_FieldPath:on,_cast:In,_logWarn:la,_validateIsNotUsedTogether:BS,addDoc:go,collection:Rt,connectFirestoreEmulator:Zb,deleteDoc:ua,doc:Xe,ensureFirestoreConfigured:Ol,executeWrite:Vl,getDoc:ir,getDocs:$n,getFirestore:eN,limit:Iv,onSnapshot:Rv,orderBy:ta,query:Pn,serverTimestamp:Zc,setDoc:Dr,updateDoc:qn,where:sn,writeBatch:kv},Symbol.toStringTag,{value:"Module"}));var MO="firebase",OO="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr(MO,OO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="firebasestorage.googleapis.com",mN="storageBucket",LO=120*1e3,VO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt extends Ss{constructor(e,t,r=0){super(tg(e),`Firebase Storage: ${t} (${tg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lt||(Lt={}));function tg(n){return"storage/"+n}function Pv(){const n="An unknown error occurred, please check the error payload for server response.";return new Vt(Lt.UNKNOWN,n)}function FO(n){return new Vt(Lt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function UO(n){return new Vt(Lt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vt(Lt.UNAUTHENTICATED,n)}function $O(){return new Vt(Lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BO(n){return new Vt(Lt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function qO(){return new Vt(Lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WO(){return new Vt(Lt.CANCELED,"User canceled the upload/download.")}function HO(n){return new Vt(Lt.INVALID_URL,"Invalid URL '"+n+"'.")}function GO(n){return new Vt(Lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function KO(){return new Vt(Lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mN+"' property when initializing the app?")}function QO(){return new Vt(Lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YO(){return new Vt(Lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XO(n){return new Vt(Lt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function oy(n){return new Vt(Lt.INVALID_ARGUMENT,n)}function gN(){return new Vt(Lt.APP_DELETED,"The Firebase app was deleted.")}function JO(n){return new Vt(Lt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eu(n,e){return new Vt(Lt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Dc(n){throw new Vt(Lt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ar.makeFromUrl(e,t)}catch{return new ar(e,"")}if(r.path==="")return r;throw GO(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),p={bucket:1,path:3};function m(U){U.path_=decodeURIComponent(U.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${y}/b/${i}/o${_}`,"i"),R={bucket:1,path:3},N=t===pN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",L=new RegExp(`^https?://${N}/${i}/${A}`,"i"),k=[{regex:d,indices:p,postModify:a},{regex:b,indices:R,postModify:m},{regex:L,indices:{bucket:1,path:2},postModify:m}];for(let U=0;U<k.length;U++){const K=k[U],ee=K.regex.exec(e);if(ee){const C=ee[K.indices.bucket];let T=ee[K.indices.path];T||(T=""),r=new ar(C,T),K.postModify(r);break}}if(r==null)throw HO(e);return r}}class ZO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(n,e,t){let r=1,i=null,a=null,c=!1,d=0;function p(){return d===2}let m=!1;function y(...A){m||(m=!0,e.apply(null,A))}function v(A){i=setTimeout(()=>{i=null,n(b,p())},A)}function _(){a&&clearTimeout(a)}function b(A,...L){if(m){_();return}if(A){_(),y.call(null,A,...L);return}if(p()||c){_(),y.call(null,A,...L);return}r<64&&(r*=2);let k;d===1?(d=2,k=0):k=(r+Math.random())*1e3,v(k)}let R=!1;function N(A){R||(R=!0,_(),!m&&(i!==null?(A||(d=2),clearTimeout(i),v(0)):A||(d=1)))}return v(0),a=setTimeout(()=>{c=!0,N(!0)},t),N}function t4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(n){return n!==void 0}function r4(n){return typeof n=="object"&&!Array.isArray(n)}function jv(n){return typeof n=="string"||n instanceof String}function xE(n){return Dv()&&n instanceof Blob}function Dv(){return typeof Blob<"u"}function _E(n,e,t,r){if(r<e)throw oy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw oy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function yN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ra;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ra||(ra={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,t,r,i,a,c,d,p,m,y,v,_=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=v,this.retry=_,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,N)=>{this.resolve_=R,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new sh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===ra.NO_ERROR,p=a.getStatus();if(!d||s4(p,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===ra.ABORT;r(!1,new sh(!1,null,y));return}const m=this.successCodes_.indexOf(p)!==-1;r(!0,new sh(m,a))})},t=(r,i)=>{const a=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());n4(p)?a(p):a()}catch(p){c(p)}else if(d!==null){const p=Pv();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(i.canceled){const p=this.appDelete_?gN():WO();c(p)}else{const p=qO();c(p)}};this.canceled_?t(!1,new sh(!1,null,!0)):this.backoffId_=e4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function o4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function a4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function c4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function u4(n,e,t,r,i,a,c=!0,d=!1){const p=yN(n.urlParams),m=n.url+p,y=Object.assign({},n.headers);return l4(y,e),o4(y,t),a4(y,a),c4(y,r),new i4(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h4(...n){const e=d4();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Dv())return new Blob(n);throw new Vt(Lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(n){if(typeof atob>"u")throw XO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ng{constructor(e,t){this.data=e,this.contentType=t||null}}function m4(n,e){switch(n){case hs.RAW:return new ng(vN(e));case hs.BASE64:case hs.BASE64URL:return new ng(wN(n,e));case hs.DATA_URL:return new ng(y4(e),v4(e))}throw Pv()}function vN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=n.charCodeAt(++t);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function g4(n){let e;try{e=decodeURIComponent(n)}catch{throw eu(hs.DATA_URL,"Malformed data URL.")}return vN(e)}function wN(n,e){switch(n){case hs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw eu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case hs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw eu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=p4(e)}catch(i){throw i.message.includes("polyfill")?i:eu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class xN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw eu(hs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=w4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function y4(n){const e=new xN(n);return e.base64?wN(hs.BASE64,e.rest):g4(e.rest)}function v4(n){return new xN(n).contentType}function w4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t){let r=0,i="";xE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(xE(this.data_)){const r=this.data_,i=f4(r,e,t);return i===null?null:new to(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new to(r,!0)}}static getBlob(...e){if(Dv()){const t=e.map(r=>r instanceof to?r.data_:r);return new to(h4.apply(null,t))}else{const t=e.map(c=>jv(c)?m4(hs.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)i[a++]=c[d]}),new to(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(n){let e;try{e=JSON.parse(n)}catch{return null}return r4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function _4(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function EN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(n,e){return e}class kn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||E4}}let ih=null;function S4(n){return!jv(n)||n.length<2?n:EN(n)}function SN(){if(ih)return ih;const n=[];n.push(new kn("bucket")),n.push(new kn("generation")),n.push(new kn("metageneration")),n.push(new kn("name","fullPath",!0));function e(a,c){return S4(c)}const t=new kn("name");t.xform=e,n.push(t);function r(a,c){return c!==void 0?Number(c):c}const i=new kn("size");return i.xform=r,n.push(i),n.push(new kn("timeCreated")),n.push(new kn("updated")),n.push(new kn("md5Hash",null,!0)),n.push(new kn("cacheControl",null,!0)),n.push(new kn("contentDisposition",null,!0)),n.push(new kn("contentEncoding",null,!0)),n.push(new kn("contentLanguage",null,!0)),n.push(new kn("contentType",null,!0)),n.push(new kn("metadata","customMetadata",!0)),ih=n,ih}function b4(n,e){function t(){const r=n.bucket,i=n.fullPath,a=new ar(r,i);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function N4(n,e,t){const r={};r.type="file";const i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return b4(r,n),r}function bN(n,e,t){const r=_N(e);return r===null?null:N4(n,r,t)}function T4(n,e,t,r){const i=_N(e);if(i===null||!jv(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,v=n.fullPath,_="/b/"+c(y)+"/o/"+c(v),b=zf(_,t,r),R=yN({alt:"media",token:m});return b+R})[0]}function I4(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Mv{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n){if(!n)throw Pv()}function A4(n,e){function t(r,i){const a=bN(n,i,e);return NN(a!==null),a}return t}function C4(n,e){function t(r,i){const a=bN(n,i,e);return NN(a!==null),T4(a,i,n.host,n._protocol)}return t}function TN(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=$O():i=zO():t.getStatus()===402?i=UO(n.bucket):t.getStatus()===403?i=BO(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function IN(n){const e=TN(n);function t(r,i){let a=e(r,i);return r.getStatus()===404&&(a=FO(n.path)),a.serverResponse=i.serverResponse,a}return t}function R4(n,e,t){const r=e.fullServerUrl(),i=zf(r,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,d=new Mv(i,a,C4(n,t),c);return d.errorHandler=IN(e),d}function k4(n,e){const t=e.fullServerUrl(),r=zf(t,n.host,n._protocol),i="DELETE",a=n.maxOperationRetryTime;function c(p,m){}const d=new Mv(r,i,c,a);return d.successCodes=[200,204],d.errorHandler=IN(e),d}function P4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function j4(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=P4(null,e)),r}function D4(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let k="";for(let U=0;U<2;U++)k=k+Math.random().toString().slice(2);return k}const p=d();c["Content-Type"]="multipart/related; boundary="+p;const m=j4(e,r,i),y=I4(m,t),v="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,_=`\r
--`+p+"--",b=to.getBlob(v,r,_);if(b===null)throw QO();const R={name:m.fullPath},N=zf(a,n.host,n._protocol),A="POST",L=n.maxUploadRetryTime,j=new Mv(N,A,A4(n,t),L);return j.urlParams=R,j.headers=c,j.body=b.uploadData(),j.errorHandler=TN(e),j}class M4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ra.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ra.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ra.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,a){if(this.sent_)throw Dc("cannot .send() more than once");if(vi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class O4 extends M4{initXhr(){this.xhr_.responseType="text"}}function Ov(){return new O4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t){this._service=e,t instanceof ar?this._location=t:this._location=ar.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new da(e,t)}get root(){const e=new ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EN(this._location.path)}get storage(){return this._service}get parent(){const e=x4(this._location.path);if(e===null)return null;const t=new ar(this._location.bucket,e);return new da(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw JO(e)}}function L4(n,e,t){n._throwIfRoot("uploadBytes");const r=D4(n.storage,n._location,SN(),new to(e,!0),t);return n.storage.makeRequestWithTokens(r,Ov).then(i=>({metadata:i,ref:n}))}function V4(n){n._throwIfRoot("getDownloadURL");const e=R4(n.storage,n._location,SN());return n.storage.makeRequestWithTokens(e,Ov).then(t=>{if(t===null)throw YO();return t})}function F4(n){n._throwIfRoot("deleteObject");const e=k4(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ov)}function U4(n,e){const t=_4(n._location.path,e),r=new ar(n._location.bucket,t);return new da(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n){return/^[A-Za-z]+:\/\//.test(n)}function $4(n,e){return new da(n,e)}function AN(n,e){if(n instanceof Lv){const t=n;if(t._bucket==null)throw KO();const r=new da(t,t._bucket);return e!=null?AN(r,e):r}else return e!==void 0?U4(n,e):n}function B4(n,e){if(e&&z4(e)){if(n instanceof Lv)return $4(n,e);throw oy("To use ref(service, url), the first argument must be a Storage instance.")}else return AN(n,e)}function EE(n,e){const t=e==null?void 0:e[mN];return t==null?null:ar.makeFromBucketSpec(t,n)}function q4(n,e,t,r={}){n.host=`${e}:${t}`;const i=vi(e);i&&(hf(`https://${n.host}/b`),ff("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:W1(a,n.app.options.projectId))}class Lv{constructor(e,t,r,i,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=pN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LO,this._maxUploadRetryTime=VO,this._requests=new Set,i!=null?this._bucket=ar.makeFromBucketSpec(i,this._host):this._bucket=EE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ar.makeFromBucketSpec(this._url,e):this._bucket=EE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_E("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_E("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new da(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new ZO(gN());{const c=u4(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const SE="@firebase/storage",bE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="storage";function W4(n,e,t){return n=dt(n),L4(n,e,t)}function H4(n){return n=dt(n),V4(n)}function G4(n){return n=dt(n),F4(n)}function NE(n,e){return n=dt(n),B4(n,e)}function RN(n=pf(),e){n=dt(n);const r=wu(n,CN).getImmediate({identifier:e}),i=ky("storage");return i&&K4(r,...i),r}function K4(n,e,t,r={}){q4(n,e,t,r)}function Q4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Lv(t,r,i,e,ga)}function Y4(){lo(new ci(CN,Q4,"PUBLIC").setMultipleInstances(!0)),xr(SE,bE,""),xr(SE,bE,"esm2020")}Y4();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Tn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="us-central1";class J4{constructor(e,t,r,i,a=ay,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new X4(e,t,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=ay}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Z4(n,e,t){const r=vi(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(hf(n.emulatorOrigin+"/backends"),ff("Functions",!0))}const TE="@firebase/functions",IE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="auth-internal",tL="app-check-internal",nL="messaging-internal";function rL(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider(eL),c=t.getProvider(nL),d=t.getProvider(tL);return new J4(i,a,c,d,r)};lo(new ci(kN,e,"PUBLIC").setMultipleInstances(!0)),xr(TE,IE,n),xr(TE,IE,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(n=pf(),e=ay){const r=wu(dt(n),kN).getImmediate({identifier:e}),i=ky("functions");return i&&iL(r,...i),r}function iL(n,e,t){Z4(dt(n),e,t)}rL();const oL={apiKey:"AIzaSyDy4jBqxKpD_B6SGAqRLyTrmGxQ9rEA0zw",authDomain:"officeofmapp.firebaseapp.com",projectId:"officeofmapp",storageBucket:"officeofmapp.firebasestorage.app",messagingSenderId:"710263745328",appId:"1:710263745328:web:a41ed7f9f6df52970db6f5"},$f=K1(oL),Ct=Cj($f),Ae=eN($f);RN($f);sL($f);const aL=Object.freeze(Object.defineProperty({__proto__:null,auth:Ct,db:Ae},Symbol.toStringTag,{value:"Module"})),AE="reycelrcentino@gmail.com",lL="kNooCkk@0228a",Me={async signIn(n,e){const t=await p2(Ct,n,e);try{if(!await this.getUserProfile(t.user.uid))throw console.error("User authenticated but no profile found:",t.user.email),await Qo(Ct),new Error("Account not properly set up. Please contact administrator.");return await this.updateLastLogin(t.user.uid),t}catch(r){throw console.error("Error verifying user profile after sign-in:",r),await Qo(Ct),r}},async signInWithGoogle(){var n;try{const e=new Qs;e.addScope("email"),e.addScope("profile"),console.log("Starting Google Sign-In...");try{console.log("Attempting popup sign-in...");const t=await L2(Ct,e);return console.log("Popup sign-in successful:",t.user.email),t}catch(t){if(console.log("Popup failed, trying redirect:",t.code),t.code==="auth/popup-blocked"||t.code==="auth/popup-closed-by-user"||t.code==="auth/cancelled-popup-request"||(n=t.message)!=null&&n.includes("popup"))return console.log("Using redirect method..."),await B2(Ct,e),null;throw t}}catch(e){throw console.error("Google sign-in error:",e),e}},async handleRedirectResult(){try{const n=await W2(Ct);if(!n)return null;if(console.log("Google redirect sign-in completed for:",n.user.email),await this.getUserProfile(n.user.uid))return await this.updateLastLogin(n.user.uid),n;{const t=await ir(Xe(Ae,"approved_google_users",n.user.email));if(t.exists()){console.log("Pre-approved Google user found, creating profile");const r=t.data(),i={...r,uid:n.user.uid,name:n.user.displayName||r.name,lastLogin:new Date};return await Dr(Xe(Ae,"users",n.user.uid),i),await ua(Xe(Ae,"approved_google_users",n.user.email)),await this.updateLastLogin(n.user.uid),n}throw await Qo(Ct),new Error("PENDING_APPROVAL")}}catch(n){throw console.error("Google redirect result error:",n),n}},async checkExistingPendingRequest(n){const e=Pn(Rt(Ae,"pending_users"),sn("email","==",n),sn("status","==","pending"));return!(await $n(e)).empty},async createGoogleUserRequest(n,e,t,r){if(await this.checkExistingPendingRequest(n))throw new Error("A request for this email is already pending approval.");const a={email:n,name:e,role:t,requestedAt:new Date,status:"pending",authProvider:"google",requestedAdminId:t==="staff"?r:void 0};return(await go(Rt(Ae,"pending_users"),a)).id},async requestUserCreation(n,e,t="staff",r){if(t==="super_admin")throw new Error("Super admin accounts cannot be requested");if(await this.checkExistingPendingRequest(n))throw new Error("A request for this email is already pending approval.");const a={email:n,name:e,role:t,requestedAt:new Date,status:"pending",authProvider:"email",requestedAdminId:t==="staff"?r:void 0};return(await go(Rt(Ae,"pending_users"),a)).id},async approveGoogleUser(n,e){const t=await this.getUserProfile(e);if(!t)throw new Error("Approver profile not found");if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only administrators and super administrators can approve user accounts");const r=await ir(Xe(Ae,"pending_users",n));if(!r.exists())throw new Error("Pending user not found");const i=r.data();if(i.status!=="pending")throw new Error("User request already processed");if(i.authProvider!=="google")throw new Error("This method is only for Google users");if(t.role==="admin"&&i.role!=="staff")throw new Error("Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");if((i.role==="admin"||i.role==="super_admin")&&t.role!=="super_admin")throw new Error("Only super administrators can approve administrator and super administrator accounts");const a={uid:`google_${i.email.replace(/[^a-zA-Z0-9]/g,"_")}`,email:i.email,role:i.role,name:i.name,createdAt:new Date,lastLogin:new Date,approvedBy:e,approvedAt:new Date,assignedAdminId:i.role==="staff"?i.requestedAdminId||e:void 0};await Dr(Xe(Ae,"approved_google_users",i.email),a),await qn(Xe(Ae,"pending_users",n),{status:"approved",approvedBy:e,approvedAt:new Date}),console.log(`Google user approved: ${i.email} with role ${i.role} by ${t.email} (${t.role})`)},async approveUser(n,e,t){const r=await this.getUserProfile(t);if(!r)throw new Error("Approver profile not found");if(r.role!=="admin"&&r.role!=="super_admin")throw new Error("Only administrators and super administrators can approve user accounts");const i=await ir(Xe(Ae,"pending_users",n));if(!i.exists())throw new Error("Pending user not found");const a=i.data();if(a.status!=="pending")throw new Error("User request already processed");if(r.role==="admin"&&a.role!=="staff")throw new Error("Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");if((a.role==="admin"||a.role==="super_admin")&&r.role!=="super_admin")throw new Error("Only super administrators can approve administrator and super administrator accounts");const c=Ct.currentUser;try{const d=await Gm(Ct,a.email,e),p={uid:d.user.uid,email:a.email,role:a.role,name:a.name,createdAt:new Date,lastLogin:new Date,approvedBy:t,approvedAt:new Date,assignedAdminId:a.role==="staff"?a.requestedAdminId||t:void 0};if(await Dr(Xe(Ae,"users",d.user.uid),p),!(await ir(Xe(Ae,"users",d.user.uid))).exists())throw new Error("Failed to create user profile in database");return console.log("User profile created successfully for:",d.user.email),await qn(Xe(Ae,"pending_users",n),{status:"approved",approvedBy:t,approvedAt:new Date}),await Qo(Ct),c&&console.warn("Admin session interrupted. Please sign in again."),d}catch(d){throw d}},async updateUserRole(n,e,t){const r=await this.getUserProfile(n);if(!r)throw new Error("User not found");if(r.role==="super_admin")throw new Error("Super administrator roles cannot be modified for security reasons");if(e==="super_admin"){const i=await this.getUserProfile(t);if(!i||i.role!=="super_admin")throw new Error("Only super administrators can assign super admin roles")}if(r.role==="super_admin"&&e!=="super_admin"&&(await this.getAllUsers()).filter(c=>c.role==="super_admin").length<=1)throw new Error("Cannot remove the last super administrator");await qn(Xe(Ae,"users",n),{role:e,updatedAt:new Date,updatedBy:t}),console.log(`User role updated: ${r.email} -> ${e}`)},async deleteUser(n,e){const t=await this.getUserProfile(n);if(!t)throw new Error("User not found");if(t.role==="super_admin")throw new Error("Super administrator accounts cannot be deleted for security reasons");const r=await this.getUserProfile(e);if(!r)throw new Error("Deleter profile not found");if(t.role==="admin"&&r.role!=="super_admin")throw new Error("Only super administrators can delete administrator accounts");await ua(Xe(Ae,"users",n)),console.log(`User deleted: ${t.email} by ${r.email}`)},async createUser(n,e,t,r,i){if(!Ct.currentUser)throw new Error("No authenticated user. Please sign in first.");const c=await this.getUserProfile(i);if(!c)throw new Error("Creator profile not found");if(c.role!=="admin"&&c.role!=="super_admin")throw new Error("Only administrators and super administrators can create user accounts");if(c.role==="admin"&&r!=="staff")throw new Error("Administrators can only create staff accounts. Contact a super admin to create administrator accounts.");if((r==="admin"||r==="super_admin")&&c.role!=="super_admin")throw new Error("Only super administrators can create administrator and super administrator accounts");r==="super_admin"&&console.log(`Super admin account creation requested by: ${c.email}`);try{const d=await Gm(Ct,n,e),p={uid:d.user.uid,email:n,role:r,name:t,createdAt:new Date,lastLogin:new Date,approvedBy:i,approvedAt:new Date,assignedAdminId:r==="staff"?i:void 0};return await Dr(Xe(Ae,"users",d.user.uid),p),console.log(`User account created: ${n} with role ${r} by ${c.email} (${c.role})`),await Qo(Ct),{...d,adminSignedOut:!0}}catch(d){throw await Qo(Ct).catch(()=>{}),d.code==="auth/email-already-in-use"?new Error("Email address is already in use"):d.code==="auth/invalid-email"?new Error("Invalid email address"):d.code==="auth/weak-password"?new Error("Password is too weak. Use at least 6 characters"):d.code==="auth/network-request-failed"?new Error("Network error. Check your internet connection"):d}},async rejectUser(n,e,t){await qn(Xe(Ae,"pending_users",n),{status:"rejected",rejectionReason:e,approvedBy:t,approvedAt:new Date})},async getPendingUsers(){const n=Pn(Rt(Ae,"pending_users"),sn("status","==","pending"));return(await $n(n)).docs.map(t=>({id:t.id,...t.data()}))},async isAdmin(n){const e=await this.getUserProfile(n);return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="super_admin"},async getAllUsers(){return(await $n(Rt(Ae,"users"))).docs.map(e=>e.data())},async getVisibleUsers(n){const e=await this.getAllUsers();return n!=="super_admin"?e.filter(t=>t.role!=="super_admin"):e},async getAdminUsers(){const n=Pn(Rt(Ae,"users"),sn("role","==","admin"));return(await $n(n)).docs.map(t=>t.data())},async getStaffForAdmin(n){const e=Pn(Rt(Ae,"users"),sn("role","==","staff"),sn("assignedAdminId","==",n));return(await $n(e)).docs.map(r=>r.data())},async getPendingUsersForAdmin(n){const e=Pn(Rt(Ae,"pending_users"),sn("status","==","pending"),sn("requestedAdminId","==",n));return(await $n(e)).docs.map(r=>({id:r.id,...r.data()}))},async initializeSuperAdmin(){const n=Pn(Rt(Ae,"users"),sn("role","==","super_admin"));if((await $n(n)).empty){const t=await Gm(Ct,AE,lL),r={uid:t.user.uid,email:AE,role:"super_admin",name:"Super Administrator",createdAt:new Date,lastLogin:new Date};return await Dr(Xe(Ae,"users",t.user.uid),r),t}return null},async signOut(){return Qo(Ct)},async getUserProfile(n){const e=Xe(Ae,"users",n),t=await ir(e);return t.exists()?t.data():null},async createUserProfile(n,e,t){const r={uid:n.uid,email:n.email,role:e,name:t,createdAt:new Date,lastLogin:new Date};return await Dr(Xe(Ae,"users",n.uid),r),r},async updateLastLogin(n){await Dr(Xe(Ae,"users",n),{lastLogin:new Date},{merge:!0})},async updateUserProfile(n,e){const t=["name"],r={};for(const i of t)e[i]!==void 0&&(r[i]=e[i]);if(Object.keys(r).length===0)throw new Error("No valid fields to update");return r.updatedAt=new Date,await Dr(Xe(Ae,"users",n),r,{merge:!0}),console.log(`User profile updated: ${n}`,r),r},onAuthStateChange(n){return y2(Ct,n)},async sendPasswordReset(n){try{return await u2(Ct,n),{success:!0,message:"Password reset email sent successfully"}}catch(e){let t="Failed to send password reset email";throw e.code==="auth/user-not-found"?t="No account found with this email address":e.code==="auth/invalid-email"?t="Invalid email address":e.code==="auth/too-many-requests"&&(t="Too many requests. Please try again later"),new Error(t)}},async confirmPasswordReset(n,e){try{return await d2(Ct,n,e),{success:!0,message:"Password reset successfully"}}catch(t){let r="Failed to reset password";throw t.code==="auth/invalid-action-code"?r="Invalid or expired reset code":t.code==="auth/weak-password"&&(r="Password is too weak. Use at least 6 characters"),new Error(r)}},async verifyPasswordResetCode(n){try{return{success:!0,email:await f2(Ct,n)}}catch(e){let t="Invalid or expired reset code";throw e.code==="auth/invalid-action-code"?t="Invalid or expired reset code":e.code==="auth/expired-action-code"&&(t="Reset code has expired. Please request a new one"),new Error(t)}},getCurrentUser(){return Ct.currentUser}},PN=()=>{const[n,e]=E.useState([]),t=E.useCallback(p=>{const m=Math.random().toString(36).substr(2,9),y={id:m,duration:5e3,...p};return e(v=>[...v,y]),y.duration&&y.duration>0&&setTimeout(()=>{r(m)},y.duration),m},[]),r=E.useCallback(p=>{e(m=>m.filter(y=>y.id!==p))},[]),i=E.useCallback((p,m)=>t({type:"success",title:p,message:m}),[t]),a=E.useCallback((p,m)=>t({type:"error",title:p,message:m,duration:7e3}),[t]),c=E.useCallback((p,m)=>t({type:"warning",title:p,message:m}),[t]),d=E.useCallback((p,m)=>t({type:"info",title:p,message:m}),[t]);return{toasts:n,addToast:t,removeToast:r,success:i,error:a,warning:c,info:d}},cL=[{name:"Office Supplies",description:"Stationery, paper, pens, and other office materials",isActive:!0},{name:"Transportation",description:"Travel expenses, fuel, public transport, taxi fares",isActive:!0},{name:"Utilities",description:"Electricity, water, internet, phone bills",isActive:!0},{name:"Meals & Entertainment",description:"Business meals, client entertainment, catering",isActive:!0},{name:"Equipment",description:"Computers, furniture, machinery, tools",isActive:!0},{name:"Services",description:"Professional services, consulting, maintenance",isActive:!0},{name:"Marketing & Advertising",description:"Promotional materials, advertising costs, marketing campaigns",isActive:!0},{name:"Training & Education",description:"Courses, seminars, training materials, certifications",isActive:!0},{name:"Medical & Health",description:"Medical expenses, health insurance, wellness programs",isActive:!0},{name:"Legal & Compliance",description:"Legal fees, permits, licenses, regulatory compliance",isActive:!0},{name:"Maintenance & Repairs",description:"Building maintenance, equipment repairs, cleaning services",isActive:!0},{name:"Other",description:"Miscellaneous expenses not covered by other categories",isActive:!0}],CE=RN(),wr={async initializeCategories(n){const e=kv(Ae);for(const t of cL){const r=Xe(Rt(Ae,"receipt_categories"));e.set(r,{...t,id:r.id,createdBy:n,createdAt:new Date})}await e.commit(),console.log("Default receipt categories initialized")},async getCategories(){const n=Pn(Rt(Ae,"receipt_categories"),sn("isActive","==",!0),ta("name"));return(await $n(n)).docs.map(t=>t.data())},async createCategory(n){return(await go(Rt(Ae,"receipt_categories"),{...n,createdAt:new Date})).id},async updateCategory(n,e){await qn(Xe(Ae,"receipt_categories",n),e)},async deleteCategory(n){await qn(Xe(Ae,"receipt_categories",n),{isActive:!1})},async uploadReceiptFile(n,e){const r=`${Date.now()}_${n.name}`,i=NE(CE,`receipts/${e}/${r}`),a=await W4(i,n);return{url:await H4(a.ref),fileName:r,fileSize:n.size,mimeType:n.type}},async deleteReceiptFile(n){const e=NE(CE,n);await G4(e)},async createReceipt(n){const e=await go(Rt(Ae,"receipts"),{...n,uploadedAt:new Date});return console.log(`Receipt created: ${n.title} by ${n.uploadedByName}`),e.id},async updateReceipt(n,e){await qn(Xe(Ae,"receipts",n),e),console.log(`Receipt updated: ${n}`)},async deleteReceipt(n,e){const t=await ir(Xe(Ae,"receipts",n));if(!t.exists())throw new Error("Receipt not found");const r=t.data(),i=await Me.getUserProfile(e);if(!i)throw new Error("User profile not found");if(!(r.ownerId===e||r.assignedAdminId===e&&i.role==="admin"||i.role==="super_admin"))throw new Error("Insufficient permissions to delete this receipt");try{await this.deleteReceiptFile(`receipts/${r.ownerId}/${r.fileName}`)}catch(c){console.warn("Failed to delete receipt file from storage:",c)}await ua(Xe(Ae,"receipts",n)),console.log(`Receipt deleted: ${n} by ${i.name}`)},async getReceipt(n){const e=await ir(Xe(Ae,"receipts",n));return e.exists()?{id:e.id,...e.data()}:null},async getUserReceipts(n,e){let t=Pn(Rt(Ae,"receipts"),sn("ownerId","==",n),ta("uploadedAt","desc")),i=(await $n(t)).docs.map(a=>({id:a.id,...a.data()}));return e&&(i=this.applyFilters(i,e)),i},async getAdminReceipts(n,e){let t=Pn(Rt(Ae,"receipts"),sn("assignedAdminId","==",n),ta("uploadedAt","desc")),i=(await $n(t)).docs.map(a=>({id:a.id,...a.data()}));return e&&(i=this.applyFilters(i,e)),i},async getAllReceipts(n,e){const t=await Me.getUserProfile(n);if(!t||t.role!=="super_admin")throw new Error("Only super administrators can view all receipts");let r=Pn(Rt(Ae,"receipts"),ta("uploadedAt","desc")),a=(await $n(r)).docs.map(c=>({id:c.id,...c.data()}));return e&&(a=this.applyFilters(a,e)),a},async getVisibleReceipts(n,e,t){const r=await Me.getUserProfile(n);if(!r)throw new Error("User profile not found");switch(r.role){case"super_admin":return this.getAllReceipts(n,e);case"admin":switch(t){case"personal":return this.getUserReceipts(n,e);case"team":return this.getAdminReceipts(n,e);case"all":default:const[i,a]=await Promise.all([this.getUserReceipts(n,e),this.getAdminReceipts(n,e)]);return[...i,...a]}case"staff":default:return this.getUserReceipts(n,e)}},async approveReceipt(n,e){const t=await Me.getUserProfile(e);if(!t||t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only administrators can approve receipts");const r=await this.getReceipt(n);if(!r)throw new Error("Receipt not found");if(t.role==="admin"&&r.assignedAdminId!==e)throw new Error("You can only approve receipts from your assigned staff");await this.updateReceipt(n,{status:"approved",approvedBy:e,approvedByName:t.name,approvedAt:new Date}),console.log(`Receipt approved: ${n} by ${t.name}`)},async rejectReceipt(n,e,t){const r=await Me.getUserProfile(e);if(!r||r.role!=="admin"&&r.role!=="super_admin")throw new Error("Only administrators can reject receipts");const i=await this.getReceipt(n);if(!i)throw new Error("Receipt not found");if(r.role==="admin"&&i.assignedAdminId!==e)throw new Error("You can only reject receipts from your assigned staff");await this.updateReceipt(n,{status:"rejected",rejectedBy:e,rejectedByName:r.name,rejectedAt:new Date,rejectionReason:t}),console.log(`Receipt rejected: ${n} by ${r.name} - Reason: ${t}`)},async getReceiptStats(n,e){const t=await this.getVisibleReceipts(n,void 0,e),r={totalReceipts:t.length,totalAmount:t.reduce((i,a)=>i+a.amount,0),officialReceipts:t.filter(i=>i.type==="official").length,unofficialReceipts:t.filter(i=>i.type==="unofficial").length,pendingApprovals:t.filter(i=>i.status==="pending").length,approvedReceipts:t.filter(i=>i.status==="approved").length,rejectedReceipts:t.filter(i=>i.status==="rejected").length,categoriesBreakdown:{}};return t.forEach(i=>{r.categoriesBreakdown[i.category]||(r.categoriesBreakdown[i.category]={count:0,amount:0}),r.categoriesBreakdown[i.category].count++,r.categoriesBreakdown[i.category].amount+=i.amount}),r},applyFilters(n,e){return n.filter(t=>!(e.category&&t.category!==e.category||e.type&&t.type!==e.type||e.status&&t.status!==e.status||e.uploadedBy&&t.uploadedBy!==e.uploadedBy||e.dateFrom&&new Date(t.date)<new Date(e.dateFrom)||e.dateTo&&new Date(t.date)>new Date(e.dateTo)||e.amountMin&&t.amount<e.amountMin||e.amountMax&&t.amount>e.amountMax||e.tags&&e.tags.length>0&&!e.tags.some(i=>t.tags.some(a=>a.toLowerCase().includes(i.toLowerCase())))))},async downloadReceipt(n,e){const t=await this.getReceipt(n);if(!t)throw new Error("Receipt not found");const r=await Me.getUserProfile(e);if(!r)throw new Error("User profile not found");if(!(t.ownerId===e||t.assignedAdminId===e&&r.role==="admin"||r.role==="super_admin"))throw new Error("Insufficient permissions to download this receipt");return t.imageUrl}},RE={async initializeApp(){try{console.log("Initializing application...");const n=Me.getCurrentUser();if(!n){console.log("No authenticated user found, skipping initialization");return}const e=await Me.getUserProfile(n.uid);if(!e){console.log("No user profile found, skipping initialization");return}e.role==="super_admin"&&await this.initializeReceiptCategories(n.uid),console.log("Application initialization completed")}catch(n){console.error("Error during app initialization:",n)}},async initializeReceiptCategories(n){try{(await wr.getCategories()).length===0?(console.log("Initializing default receipt categories..."),await wr.initializeCategories(n),console.log("Receipt categories initialized successfully")):console.log("Receipt categories already exist, skipping initialization")}catch(e){console.error("Error initializing receipt categories:",e)}}},uL=async n=>{try{const e=Ct.currentUser,t=n||(e==null?void 0:e.email);if(!t){console.log("No user email provided and no current user");return}if(console.log("=== User Profile Debug ==="),console.log("Email:",t),e){console.log("Firebase Auth User:",{uid:e.uid,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName});try{const a=await Me.getUserProfile(e.uid);console.log("Firestore Profile:",a)}catch(a){console.error("Error fetching Firestore profile:",a)}}const r=Pn(Rt(Ae,"pending_users"),sn("email","==",t)),i=await $n(r);i.empty?console.log("No pending user requests found"):(console.log("Pending User Requests:"),i.forEach(a=>{console.log("- ",a.id,a.data())}));try{const a=await ir(Xe(Ae,"approved_google_users",t));a.exists()?console.log("Approved Google User:",a.data()):console.log("No approved Google user record found")}catch(a){console.error("Error checking approved Google users:",a)}console.log("=== End Debug ===")}catch(e){console.error("Debug error:",e)}};typeof window<"u"&&(window.debugUserProfile=uL);const jN=E.createContext(void 0);function dL({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState(null),[a,c]=E.useState(!0),[d,p]=E.useState(null),m=PN();E.useEffect(()=>((async()=>{await(async()=>{try{console.log("Checking for Google Sign-In redirect result...");const L=await Me.handleRedirectResult();L?console.log("Google redirect sign-in completed for:",L.user.email):console.log("No redirect result found")}catch(L){console.error("Google redirect error:",L);try{await Me.signOut()}catch(j){console.error("Error signing out after redirect failure:",j)}L.message==="PENDING_APPROVAL"?(console.log("User needs approval after redirect"),p("pending_approval")):m.error("Authentication Failed",L.message||"Please try again.")}})()})(),Me.onAuthStateChange(async A=>{if(console.log("Auth state changed:",A?`${A.email} (${A.uid})`:"signed out"),t(A),A){console.log("User authenticated:",A.uid),await new Promise(L=>setTimeout(L,100));try{let L=null,j=0;const k=5;for(;!L&&j<k;)try{if(L=await Me.getUserProfile(A.uid),L){console.log("User profile found:",L);break}const U=100*Math.pow(2,j);console.log(`Profile not found, retrying in ${U}ms (attempt ${j+1}/${k})`),await new Promise(K=>setTimeout(K,U)),j++}catch(U){if(console.error(`Profile fetch attempt ${j+1} failed:`,U),j++,j<k){const K=100*Math.pow(2,j-1);await new Promise(ee=>setTimeout(ee,K))}}if(!L){if(console.log("No user profile found for UID after all retries:",A.uid),console.log("User details:",{uid:A.uid,email:A.email,displayName:A.displayName,emailVerified:A.emailVerified,providerData:A.providerData}),A.providerData.some(K=>K.providerId==="google.com")){console.log("Google user without profile detected - checking if user is pre-approved");try{const{getDoc:K,doc:ee,setDoc:C,deleteDoc:T}=await B_(async()=>{const{getDoc:P,doc:z,setDoc:M,deleteDoc:he}=await Promise.resolve().then(()=>DO);return{getDoc:P,doc:z,setDoc:M,deleteDoc:he}},void 0),{db:O}=await B_(async()=>{const{db:P}=await Promise.resolve().then(()=>aL);return{db:P}},void 0),$=await K(ee(O,"approved_google_users",A.email));if($.exists()){console.log("Pre-approved Google user found in AuthContext, creating profile");const P=$.data(),z={...P,uid:A.uid,name:A.displayName||P.name,lastLogin:new Date};await C(ee(O,"users",A.uid),z),await T(ee(O,"approved_google_users",A.email)),console.log("Pre-approved user profile created successfully in AuthContext"),i(z),p(null),await Me.updateLastLogin(A.uid),await RE.initializeApp(),console.log("User successfully authenticated with pre-approved profile:",{email:z.email,role:z.role,name:z.name}),c(!1);return}}catch(K){console.error("Error checking pre-approved users in AuthContext:",K)}try{if(await Me.checkExistingPendingRequest(A.email)){console.log("User has pending approval request - signing out and showing pending approval page"),await Me.signOut(),p("pending_approval");return}else{console.log("No pending request found - this user may need to go through role selection again"),await Me.signOut();return}}catch(K){console.error("Error checking pending requests:",K),console.log("Assuming user needs approval due to pending check failure"),await Me.signOut(),p("pending_approval");return}}console.log("Signing out user without profile"),await Me.signOut(),p("pending_approval");return}i(L),p(null),await RE.initializeApp(),console.log("User successfully authenticated with profile:",{email:L.email,role:L.role,name:L.name})}catch(L){console.error("Error in auth state change handler:",L),console.log("Signing out user due to profile processing error");try{await Me.signOut()}catch(j){console.error("Error signing out after profile error:",j)}m.error("Authentication Error","Please try signing in again.");return}}else i(null),p(null),console.log("User signed out, cleared profile and auth errors");c(!1)})),[]);const b={user:e,userProfile:r,loading:a,authError:d,signIn:async(R,N)=>{c(!0);try{await Me.signIn(R,N)}finally{c(!1)}},signOut:async()=>{await Me.signOut(),p(null)},clearAuthError:()=>{p(null)}};return l.jsx(jN.Provider,{value:b,children:n})}function Bf(){const n=E.useContext(jN);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const DN=E.createContext(void 0),hL=[{id:"1",name:"Fr. Juan Santos",email:"juan.santos@province.ph",position:"Provincial Minister",department:"Administration",phone:"+63 912 345 6789",status:"active"},{id:"2",name:"Br. Brendan",email:"brendan@province.ph",position:"Secretary",department:"Administration",phone:"+63 912 345 6790",status:"active"},{id:"3",name:"Sr. Maria Cruz",email:"maria.cruz@province.ph",position:"Finance Officer",department:"Finance",phone:"+63 912 345 6791",status:"active"},{id:"4",name:"Br. Miguel Torres",email:"miguel.torres@province.ph",position:"Community Coordinator",department:"Community Affairs",phone:"+63 912 345 6792",status:"active"}],fL=[{id:"1",name:"Admin User",email:"admin@province.ph",role:"admin",department:"Administration"},{id:"2",name:"Manager User",email:"manager@province.ph",role:"manager",department:"Finance"}];function pL({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState([]),[a,c]=E.useState([]),[d,p]=E.useState([]),[m]=E.useState(hL);E.useEffect(()=>{const k=localStorage.getItem("user"),U=localStorage.getItem("tasks"),K=localStorage.getItem("receipts"),ee=localStorage.getItem("files");k&&t(JSON.parse(k)),U&&i(JSON.parse(U)),K&&c(JSON.parse(K)),ee&&p(JSON.parse(ee))},[]),E.useEffect(()=>{e&&localStorage.setItem("user",JSON.stringify(e))},[e]),E.useEffect(()=>{localStorage.setItem("tasks",JSON.stringify(r))},[r]),E.useEffect(()=>{localStorage.setItem("receipts",JSON.stringify(a))},[a]),E.useEffect(()=>{localStorage.setItem("files",JSON.stringify(d))},[d]);const y=(k,U)=>{const K=fL.find(ee=>ee.email===k);return K&&U==="password"?(t(K),!0):!1},v=()=>{t(null),localStorage.removeItem("user")},_=k=>{const U={...k,id:Date.now().toString(),createdAt:new Date().toISOString()};i([...r,U])},b=(k,U)=>{i(r.map(K=>K.id===k?{...K,...U}:K))},R=k=>{i(r.filter(U=>U.id!==k))},N=k=>{const U={...k,id:Date.now().toString(),uploadedAt:new Date().toISOString()};c([...a,U])},A=k=>{c(a.filter(U=>U.id!==k))},L=k=>{const U={...k,id:Date.now().toString(),uploadedAt:new Date().toISOString()};p([...d,U])},j=k=>{p(d.filter(U=>U.id!==k))};return l.jsx(DN.Provider,{value:{user:e,tasks:r,receipts:a,files:d,employees:m,login:y,logout:v,addTask:_,updateTask:b,deleteTask:R,addReceipt:N,deleteReceipt:A,addFile:L,deleteFile:j},children:n})}function Vv(){const n=E.useContext(DN);if(n===void 0)throw new Error("useApp must be used within an AppProvider");return n}function MN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=MN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Fv(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=MN(n))&&(r&&(r+=" "),r+=e);return r}const Uv="-",mL=n=>{const e=yL(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const d=c.split(Uv);return d[0]===""&&d.length!==1&&d.shift(),ON(d,e)||gL(c)},getConflictingClassGroupIds:(c,d)=>{const p=t[c]||[];return d&&r[c]?[...p,...r[c]]:p}}},ON=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?ON(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(Uv);return(c=e.validators.find(({validator:d})=>d(a)))==null?void 0:c.classGroupId},kE=/^\[(.+)\]$/,gL=n=>{if(kE.test(n)){const e=kE.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},yL=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)ly(t[i],r,i,e);return r},ly=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:PE(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(vL(i)){ly(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,c])=>{ly(c,PE(e,a),t,r)})})},PE=(n,e)=>{let t=n;return e.split(Uv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},vL=n=>n.isThemeGetter,wL=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return i(a,c),c},set(a,c){t.has(a)?t.set(a,c):i(a,c)}}},cy="!",uy=":",xL=uy.length,_L=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const a=[];let c=0,d=0,p=0,m;for(let R=0;R<i.length;R++){let N=i[R];if(c===0&&d===0){if(N===uy){a.push(i.slice(p,R)),p=R+xL;continue}if(N==="/"){m=R;continue}}N==="["?c++:N==="]"?c--:N==="("?d++:N===")"&&d--}const y=a.length===0?i:i.substring(p),v=EL(y),_=v!==y,b=m&&m>p?m-p:void 0;return{modifiers:a,hasImportantModifier:_,baseClassName:v,maybePostfixModifierPosition:b}};if(e){const i=e+uy,a=r;r=c=>c.startsWith(i)?a(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=a=>t({className:a,parseClassName:i})}return r},EL=n=>n.endsWith(cy)?n.substring(0,n.length-1):n.startsWith(cy)?n.substring(1):n,SL=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let a=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...a.sort(),c),a=[]):a.push(c)}),i.push(...a.sort()),i}},bL=n=>({cache:wL(n.cacheSize),parseClassName:_L(n),sortModifiers:SL(n),...mL(n)}),NL=/\s+/,TL=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,c=[],d=n.trim().split(NL);let p="";for(let m=d.length-1;m>=0;m-=1){const y=d[m],{isExternal:v,modifiers:_,hasImportantModifier:b,baseClassName:R,maybePostfixModifierPosition:N}=t(y);if(v){p=y+(p.length>0?" "+p:p);continue}let A=!!N,L=r(A?R.substring(0,N):R);if(!L){if(!A){p=y+(p.length>0?" "+p:p);continue}if(L=r(R),!L){p=y+(p.length>0?" "+p:p);continue}A=!1}const j=a(_).join(":"),k=b?j+cy:j,U=k+L;if(c.includes(U))continue;c.push(U);const K=i(L,A);for(let ee=0;ee<K.length;++ee){const C=K[ee];c.push(k+C)}p=y+(p.length>0?" "+p:p)}return p};function IL(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=LN(e))&&(r&&(r+=" "),r+=t);return r}const LN=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=LN(n[r]))&&(t&&(t+=" "),t+=e);return t};function AL(n,...e){let t,r,i,a=c;function c(p){const m=e.reduce((y,v)=>v(y),n());return t=bL(m),r=t.cache.get,i=t.cache.set,a=d,d(p)}function d(p){const m=r(p);if(m)return m;const y=TL(p,t);return i(p,y),y}return function(){return a(IL.apply(null,arguments))}}const Yt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},VN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,FN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,CL=/^\d+\/\d+$/,RL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ol=n=>CL.test(n),Ze=n=>!!n&&!Number.isNaN(Number(n)),Yi=n=>!!n&&Number.isInteger(Number(n)),rg=n=>n.endsWith("%")&&Ze(n.slice(0,-1)),Gs=n=>RL.test(n),ML=()=>!0,OL=n=>kL.test(n)&&!PL.test(n),UN=()=>!1,LL=n=>jL.test(n),VL=n=>DL.test(n),FL=n=>!Re(n)&&!ke(n),UL=n=>Fl(n,BN,UN),Re=n=>VN.test(n),Yo=n=>Fl(n,qN,OL),sg=n=>Fl(n,WL,Ze),jE=n=>Fl(n,zN,UN),zL=n=>Fl(n,$N,VL),oh=n=>Fl(n,WN,LL),ke=n=>FN.test(n),Mc=n=>Ul(n,qN),$L=n=>Ul(n,HL),DE=n=>Ul(n,zN),BL=n=>Ul(n,BN),qL=n=>Ul(n,$N),ah=n=>Ul(n,WN,!0),Fl=(n,e,t)=>{const r=VN.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Ul=(n,e,t=!1)=>{const r=FN.exec(n);return r?r[1]?e(r[1]):t:!1},zN=n=>n==="position"||n==="percentage",$N=n=>n==="image"||n==="url",BN=n=>n==="length"||n==="size"||n==="bg-size",qN=n=>n==="length",WL=n=>n==="number",HL=n=>n==="family-name",WN=n=>n==="shadow",GL=()=>{const n=Yt("color"),e=Yt("font"),t=Yt("text"),r=Yt("font-weight"),i=Yt("tracking"),a=Yt("leading"),c=Yt("breakpoint"),d=Yt("container"),p=Yt("spacing"),m=Yt("radius"),y=Yt("shadow"),v=Yt("inset-shadow"),_=Yt("text-shadow"),b=Yt("drop-shadow"),R=Yt("blur"),N=Yt("perspective"),A=Yt("aspect"),L=Yt("ease"),j=Yt("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...U(),ke,Re],ee=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],T=()=>[ke,Re,p],O=()=>[ol,"full","auto",...T()],$=()=>[Yi,"none","subgrid",ke,Re],P=()=>["auto",{span:["full",Yi,ke,Re]},Yi,ke,Re],z=()=>[Yi,"auto",ke,Re],M=()=>["auto","min","max","fr",ke,Re],he=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],xe=()=>["start","end","center","stretch","center-safe","end-safe"],fe=()=>["auto",...T()],Ee=()=>[ol,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],W=()=>[n,ke,Re],q=()=>[...U(),DE,jE,{position:[ke,Re]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",BL,UL,{size:[ke,Re]}],V=()=>[rg,Mc,Yo],Y=()=>["","none","full",m,ke,Re],te=()=>["",Ze,Mc,Yo],me=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[Ze,rg,DE,jE],ge=()=>["","none",R,ke,Re],le=()=>["none",Ze,ke,Re],de=()=>["none",Ze,ke,Re],Te=()=>[Ze,ke,Re],Ve=()=>[ol,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gs],breakpoint:[Gs],color:[ML],container:[Gs],"drop-shadow":[Gs],ease:["in","out","in-out"],font:[FL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gs],shadow:[Gs],spacing:["px",Ze],text:[Gs],"text-shadow":[Gs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ol,Re,ke,A]}],container:["container"],columns:[{columns:[Ze,Re,ke,d]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Yi,"auto",ke,Re]}],basis:[{basis:[ol,"full","auto",d,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ze,ol,"auto","initial","none",Re]}],grow:[{grow:["",Ze,ke,Re]}],shrink:[{shrink:["",Ze,ke,Re]}],order:[{order:[Yi,"first","last","none",ke,Re]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...he(),"normal"]}],"justify-items":[{"justify-items":[...xe(),"normal"]}],"justify-self":[{"justify-self":["auto",...xe()]}],"align-content":[{content:["normal",...he()]}],"align-items":[{items:[...xe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...xe(),{baseline:["","last"]}]}],"place-content":[{"place-content":he()}],"place-items":[{"place-items":[...xe(),"baseline"]}],"place-self":[{"place-self":["auto",...xe()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:fe()}],mx:[{mx:fe()}],my:[{my:fe()}],ms:[{ms:fe()}],me:[{me:fe()}],mt:[{mt:fe()}],mr:[{mr:fe()}],mb:[{mb:fe()}],ml:[{ml:fe()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[d,"screen",...Ee()]}],"min-w":[{"min-w":[d,"screen","none",...Ee()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...Ee()]}],h:[{h:["screen",...Ee()]}],"min-h":[{"min-h":["screen","none",...Ee()]}],"max-h":[{"max-h":["screen",...Ee()]}],"font-size":[{text:["base",t,Mc,Yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ke,sg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",rg,Re]}],"font-family":[{font:[$L,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ke,Re]}],"line-clamp":[{"line-clamp":[Ze,"none",ke,sg]}],leading:[{leading:[a,...T()]}],"list-image":[{"list-image":["none",ke,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ze,"from-font","auto",ke,Yo]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Ze,"auto",ke,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Yi,ke,Re],radial:["",ke,Re],conic:[Yi,ke,Re]},qL,zL]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ze,ke,Re]}],"outline-w":[{outline:["",Ze,Mc,Yo]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",y,ah,oh]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",v,ah,oh]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Ze,Yo]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",_,ah,oh]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[Ze,ke,Re]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ze]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[ke,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[Ze]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,Re]}],filter:[{filter:["","none",ke,Re]}],blur:[{blur:ge()}],brightness:[{brightness:[Ze,ke,Re]}],contrast:[{contrast:[Ze,ke,Re]}],"drop-shadow":[{"drop-shadow":["","none",b,ah,oh]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",Ze,ke,Re]}],"hue-rotate":[{"hue-rotate":[Ze,ke,Re]}],invert:[{invert:["",Ze,ke,Re]}],saturate:[{saturate:[Ze,ke,Re]}],sepia:[{sepia:["",Ze,ke,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,Re]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[Ze,ke,Re]}],"backdrop-contrast":[{"backdrop-contrast":[Ze,ke,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ze,ke,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ze,ke,Re]}],"backdrop-invert":[{"backdrop-invert":["",Ze,ke,Re]}],"backdrop-opacity":[{"backdrop-opacity":[Ze,ke,Re]}],"backdrop-saturate":[{"backdrop-saturate":[Ze,ke,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",Ze,ke,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ze,"initial",ke,Re]}],ease:[{ease:["linear","initial",L,ke,Re]}],delay:[{delay:[Ze,ke,Re]}],animate:[{animate:["none",j,ke,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,ke,Re]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:Te()}],"skew-x":[{"skew-x":Te()}],"skew-y":[{"skew-y":Te()}],transform:[{transform:[ke,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ve()}],"translate-x":[{"translate-x":Ve()}],"translate-y":[{"translate-y":Ve()}],"translate-z":[{"translate-z":Ve()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,Re]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Ze,Mc,Yo,sg]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},HN=AL(GL);function St(...n){return HN(Fv(n))}function Ke({className:n,...e}){return l.jsx("div",{"data-slot":"card",className:St("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function gt({className:n,...e}){return l.jsx("div",{"data-slot":"card-header",className:St("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function Et({className:n,...e}){return l.jsx("h4",{"data-slot":"card-title",className:St("leading-none",n),...e})}function Qe({className:n,...e}){return l.jsx("div",{"data-slot":"card-content",className:St("px-6 [&:last-child]:pb-6",n),...e})}function ME(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function qf(...n){return e=>{let t=!1;const r=n.map(i=>{const a=ME(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():ME(n[i],null)}}}}function vt(...n){return E.useCallback(qf(...n),n)}var pi=E.forwardRef((n,e)=>{const{children:t,...r}=n,i=E.Children.toArray(t),a=i.find(QL);if(a){const c=a.props.children,d=i.map(p=>p===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:p);return l.jsx(dy,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,d):null})}return l.jsx(dy,{...r,ref:e,children:t})});pi.displayName="Slot";var dy=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const i=XL(t),a=YL(r,t.props);return t.type!==E.Fragment&&(a.ref=e?qf(e,i):i),E.cloneElement(t,a)}return E.Children.count(t)>1?E.Children.only(null):null});dy.displayName="SlotClone";var KL=({children:n})=>l.jsx(l.Fragment,{children:n});function QL(n){return E.isValidElement(n)&&n.type===KL}function YL(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...d)=>{a(...d),i(...d)}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function XL(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const OE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,LE=Fv,GN=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return LE(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:a}=e,c=Object.keys(i).map(m=>{const y=t==null?void 0:t[m],v=a==null?void 0:a[m];if(y===null)return null;const _=OE(y)||OE(v);return i[m][_]}),d=t&&Object.entries(t).reduce((m,y)=>{let[v,_]=y;return _===void 0||(m[v]=_),m},{}),p=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,y)=>{let{class:v,className:_,...b}=y;return Object.entries(b).every(R=>{let[N,A]=R;return Array.isArray(A)?A.includes({...a,...d}[N]):{...a,...d}[N]===A})?[...m,v,_]:m},[]);return LE(n,c,p,t==null?void 0:t.class,t==null?void 0:t.className)},JL=GN("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Ne=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},a)=>{const c=r?pi:"button";return l.jsx(c,{ref:a,"data-slot":"button",className:St(JL({variant:e,size:t,className:n})),...i})});Ne.displayName="Button";function mn({className:n,type:e,...t}){return l.jsx("input",{type:e,"data-slot":"input",className:St("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}var ju=L1();const ZL=O1(ju);var eV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=eV.reduce((n,e)=>{const t=E.forwardRef((r,i)=>{const{asChild:a,...c}=r,d=a?pi:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(d,{...c,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function KN(n,e){n&&ju.flushSync(()=>n.dispatchEvent(e))}var tV="Label",QN=E.forwardRef((n,e)=>l.jsx(Je.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));QN.displayName=tV;var nV=QN;function Be({className:n,...e}){return l.jsx(nV,{"data-slot":"label",className:St("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),VE=n=>{const e=sV(n);return e.charAt(0).toUpperCase()+e.slice(1)},YN=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...d},p)=>E.createElement("svg",{ref:p,...iV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:YN("lucide",i),...d},[...c.map(([m,y])=>E.createElement(m,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(n,e)=>{const t=E.forwardRef(({className:r,...i},a)=>E.createElement(oV,{ref:a,iconNode:e,className:YN(`lucide-${rV(VE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=VE(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],FE=Pe("activity",aV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],cV=Pe("arrow-down",lV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hy=Pe("arrow-left",uV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],hV=Pe("arrow-up",dV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],pV=Pe("bell",fV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],wl=Pe("brain",mV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],yV=Pe("briefcase",gV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],wV=Pe("building",vV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zv=Pe("calendar",xV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],fy=Pe("camera",_V);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],XN=Pe("chart-column",EV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],bV=Pe("chart-pie",SV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hu=Pe("check",NV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$v=Pe("chevron-down",TV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],AV=Pe("chevron-right",IV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RV=Pe("chevron-up",CV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Js=Pe("circle-alert",kV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Or=Pe("circle-check-big",PV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ih=Pe("circle-x",jV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MV=Pe("circle",DV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],py=Pe("clock",OV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],JN=Pe("dollar-sign",LV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],my=Pe("download",VV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UV=Pe("eye-off",FV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ha=Pe("eye",zV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jo=Pe("file-text",$V);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ZN=Pe("folder-open",BV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],WV=Pe("funnel",qV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GV=Pe("info",HV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],QV=Pe("layout-dashboard",KV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],UE=Pe("lightbulb",YV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],eT=Pe("list-checks",XV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gy=Pe("loader-circle",JV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],e3=Pe("log-out",ZV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Bv=Pe("mail",t3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],r3=Pe("menu",n3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],tT=Pe("message-circle",s3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M5 12h14",key:"1ays0h"}]],zE=Pe("minus",i3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],a3=Pe("moon",o3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Ah=Pe("pen-line",l3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],u3=Pe("pen",c3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],h3=Pe("phone",d3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qv=Pe("plus",f3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],nT=Pe("receipt",p3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],g3=Pe("refresh-cw",m3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],v3=Pe("rotate-ccw",y3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],x3=Pe("save",w3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],$E=Pe("scan",_3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],S3=Pe("send",E3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wf=Pe("settings",b3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fs=Pe("shield",N3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],I3=Pe("square-pen",T3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],C3=Pe("sun",A3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],k3=Pe("tag",R3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],rT=Pe("target",P3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Hf=Pe("trash-2",j3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],M3=Pe("trending-down",D3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],L3=Pe("trending-up",O3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tu=Pe("triangle-alert",V3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],sT=Pe("upload",F3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Du=Pe("user",U3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Gf=Pe("users",z3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mi=Pe("x",$3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],iT=Pe("zap",B3),q3=({isOpen:n,userEmail:e,userName:t,onRoleSelect:r,onCancel:i,loading:a=!1})=>{var L;const[c,d]=E.useState("staff"),[p,m]=E.useState(""),[y,v]=E.useState([]),[_,b]=E.useState(!1);E.useEffect(()=>{n&&R()},[n]);const R=async()=>{b(!0);try{const j=await Me.getAdminUsers();v(j),j.length>0&&m(j[0].uid)}catch(j){console.error("Error loading admin users:",j)}finally{b(!1)}};if(!n)return null;const N=[{value:"staff",label:"Staff Member",description:"Basic access to tasks, receipts, and files. Will be assigned to a specific administrator.",icon:Du,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{value:"admin",label:"Administrator",description:"Full access including user management and system settings",icon:Wf,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"}],A=()=>{r(c,c==="staff"?p:void 0)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"relative",children:[l.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:a,children:l.jsx(mi,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx(Or,{className:"w-5 h-5 text-green-600"})}),l.jsxs("div",{children:[l.jsx(Et,{className:"text-lg",children:"Google Sign-In Successful"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Choose your requested role"})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:t}),l.jsx("p",{className:"text-xs text-gray-500",children:e})]})]}),l.jsxs(Qe,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Be,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select the role you're requesting:"}),l.jsx("div",{className:"space-y-3",children:N.map(j=>{const k=j.icon,U=c===j.value;return l.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 p-4 transition-all ${U?`${j.borderColor} ${j.bgColor}`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>d(j.value),children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${U?j.bgColor:"bg-gray-50"}`,children:l.jsx(k,{className:`w-5 h-5 ${U?j.color:"text-gray-600"}`})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:`font-medium ${U?j.color:"text-gray-900"}`,children:j.label}),U&&l.jsx("div",{className:`w-2 h-2 rounded-full ${j.color.replace("text-","bg-")}`})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description})]})]}),l.jsx("input",{type:"radio",name:"role",value:j.value,checked:U,onChange:()=>d(j.value),className:"absolute top-4 right-4 w-4 h-4 text-blue-600"})]},j.value)})})]}),c==="staff"&&l.jsxs("div",{children:[l.jsx(Be,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select the administrator you'd like to work under:"}),_?l.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading administrators..."}):y.length===0?l.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsx("p",{className:"text-sm text-yellow-800",children:"No administrators available. Your request will be assigned to the approving administrator."})}):l.jsx("div",{className:"space-y-2",children:y.map(j=>l.jsx("div",{className:`relative cursor-pointer rounded-lg border-2 p-3 transition-all ${p===j.uid?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>m(j.uid),children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${p===j.uid?"bg-blue-100":"bg-gray-50"}`,children:l.jsx(Gf,{className:`w-4 h-4 ${p===j.uid?"text-blue-600":"text-gray-600"}`})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-medium ${p===j.uid?"text-blue-900":"text-gray-900"}`,children:j.name}),l.jsx("p",{className:"text-sm text-gray-600",children:j.email})]}),l.jsx("input",{type:"radio",name:"admin",value:j.uid,checked:p===j.uid,onChange:()=>m(j.uid),className:"w-4 h-4 text-blue-600"})]})},j.uid))})]}),l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"Note:"})," Your request will be reviewed by an administrator.",c==="staff"&&p&&l.jsxs("span",{children:[" You will be assigned to ",(L=y.find(j=>j.uid===p))==null?void 0:L.name,"."]}),c==="admin"&&l.jsx("span",{children:" Administrator requests require additional approval."})]})}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx(Ne,{onClick:A,disabled:a,className:"flex-1",children:a?"Submitting...":"Submit Request"}),l.jsx(Ne,{onClick:i,variant:"outline",disabled:a,className:"flex-1",children:"Cancel"})]})]})]})})},oT=({onSuccess:n,onError:e})=>{const[t,r]=E.useState(!1),[i,a]=E.useState(!1),[c,d]=E.useState(null),p=async()=>{r(!0);try{console.log("Starting Google Sign-In..."),a(!1),d(null);const v=await Me.signInWithGoogle();if(v){console.log("Google Sign-In popup completed, checking user profile...");try{if(await new Promise(b=>setTimeout(b,100)),await Me.getUserProfile(v.user.uid)){console.log("Existing user signed in successfully"),await Me.updateLastLogin(v.user.uid),n==null||n();return}else{console.log("No profile found, checking if user is pre-approved...");try{const b=await ir(Xe(Ae,"approved_google_users",v.user.email));if(b.exists()){console.log("Pre-approved Google user found, creating profile");const R=b.data(),N={...R,uid:v.user.uid,name:v.user.displayName||R.name,lastLogin:new Date};await Dr(Xe(Ae,"users",v.user.uid),N),await ua(Xe(Ae,"approved_google_users",v.user.email)),console.log("Pre-approved user profile created successfully"),await Me.updateLastLogin(v.user.uid),n==null||n();return}}catch(b){console.error("Error checking pre-approved users:",b)}console.log("New user detected, checking for existing requests..."),await Me.signOut();try{if(await Me.checkExistingPendingRequest(v.user.email)){console.log("User already has pending request"),e==null||e("Your access request is already pending approval. Please wait for admin approval.");return}}catch(b){console.error("Error checking pending requests:",b)}console.log("Showing role selection modal for new user"),d({email:v.user.email,name:v.user.displayName||v.user.email.split("@")[0]}),a(!0);return}}catch(_){console.error("Error checking user profile:",_),await Me.signOut(),console.log("Profile check failed, checking if user is pre-approved...");try{if((await ir(Xe(Ae,"approved_google_users",v.user.email))).exists()){console.log("Pre-approved Google user found after profile error"),e==null||e("Authentication error occurred. Please try signing in again.");return}}catch(b){console.error("Error checking pre-approved users after profile error:",b)}try{if(await Me.checkExistingPendingRequest(v.user.email)){e==null||e("Your access request is already pending approval. Please wait for admin approval.");return}}catch(b){console.error("Error checking pending requests:",b)}d({email:v.user.email,name:v.user.displayName||v.user.email.split("@")[0]}),a(!0);return}}console.log("Google Sign-In using redirect method, will be handled on page reload")}catch(v){console.error("Google Sign-In error:",v);let _="Google Sign-In failed";if(v.code==="auth/popup-blocked")_="Popup was blocked. Please allow popups for this site and try again.";else if(v.code==="auth/popup-closed-by-user")_="Sign-in was cancelled. Please try again.";else if(v.code==="auth/unauthorized-domain")_="This domain is not authorized for Google Sign-In. Please contact support.";else if(v.code==="auth/operation-not-allowed")_="Google Sign-In is not enabled. Please contact support.";else if(v.code==="auth/network-request-failed")_="Network error. Please check your connection and try again.";else if(v.message==="PENDING_APPROVAL"){console.log("User needs approval, will be handled by AuthContext");return}else v.message&&(_=v.message);e==null||e(_)}finally{r(!1)}},m=async(v,_)=>{if(c){r(!0);try{console.log(`Creating Google user request for ${c.email} with role ${v}${_?` assigned to admin ${_}`:""}`),await Me.createGoogleUserRequest(c.email,c.name,v,_),console.log("Google user request created successfully"),a(!1),d(null),console.log("Role selection complete, triggering success callback"),n==null||n()}catch(b){console.error("Error creating Google user request:",b),e==null||e(b.message||"Failed to submit request")}finally{r(!1)}}},y=()=>{a(!1),d(null),r(!1)};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:p,disabled:t,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Signing in...":"Continue with Google"]}),l.jsx(q3,{isOpen:i,userEmail:(c==null?void 0:c.email)||"",userName:(c==null?void 0:c.name)||"",onRoleSelect:m,onCancel:y,loading:t})]})},Wv="/assets/bb626b016a1517c6cfff6c8c45abb0b9ac8e523c-CvVptfcF.png";function W3(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,a]=E.useState(!1),[c,d]=E.useState(""),[p,m]=E.useState(!1),[y,v]=E.useState(!1),[_,b]=E.useState(""),[R,N]=E.useState(null),[A,L]=E.useState(""),[j,k]=E.useState(""),U=z=>{const M=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return z?M.test(z)?(L(""),!0):(L("Please enter a valid email address"),!1):(L("Email is required"),!1)},K=z=>z?z.length<6?(k("Password must be at least 6 characters"),!1):(k(""),!0):(k("Password is required"),!1);E.useEffect(()=>{const z=Me.getCurrentUser();N(z),typeof window<"u"&&(window.forceSignOut=async()=>{try{await Me.signOut(),localStorage.clear(),sessionStorage.clear(),window.location.reload()}catch(M){console.error("Error signing out:",M)}},window.debugAuth=()=>{const M=Me.getCurrentUser();return console.log("Current user:",M),M})},[]);const ee=async()=>{try{await Me.signOut(),N(null),d(""),b("Signed out successfully. You can now sign in as a different user.")}catch(z){console.error("Sign out error:",z),d("Error signing out. Please try again.")}},C=async z=>{z.preventDefault(),d("");const M=U(n),he=K(t);if(!(!M||!he)){m(!0);try{const xe=await Me.signIn(n,t);console.log("Sign in successful:",xe.user.uid)}catch(xe){console.error("Sign in error:",xe);let fe="An error occurred during sign in";xe.code==="auth/invalid-credential"?fe="Invalid email or password. Please check your credentials and try again.":xe.code==="auth/user-not-found"?fe="No account found with this email address.":xe.code==="auth/wrong-password"?fe="Incorrect password. Please try again.":xe.code==="auth/invalid-email"?fe="Please enter a valid email address.":xe.code==="auth/user-disabled"?fe="This account has been disabled. Contact administrator.":xe.code==="auth/too-many-requests"?fe="Too many failed attempts. Please try again later or reset your password.":xe.code==="auth/network-request-failed"?fe="Network error. Please check your internet connection.":xe.message&&(fe=xe.message),d(fe)}finally{m(!1)}}},T=async z=>{if(z.preventDefault(),!U(n)){d("Please enter a valid email address first");return}m(!0),d(""),b("");try{await Me.sendPasswordReset(n),b("Password reset email sent! Check your inbox and spam folder."),v(!1)}catch(M){let he="Failed to send password reset email";M.code==="auth/user-not-found"?he="No account found with this email address":M.code==="auth/too-many-requests"?he="Too many requests. Please try again later":M.message&&(he=M.message),d(he)}finally{m(!1)}},O=()=>{console.log("Google Sign-In success callback triggered")},$=z=>{console.error("Google Sign-In error:",z),d(z)},P=()=>{a(!i)};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"space-y-4 text-center",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("img",{src:Wv,alt:"Province Logo",className:"h-24 w-24 object-contain"})}),l.jsx(Et,{className:"text-2xl font-bold",children:"Province of San Antonio de Padua"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Office Management System"})]}),l.jsxs(Qe,{children:[R&&l.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-yellow-800",children:["Already signed in as: ",l.jsx("strong",{children:R.email})]}),l.jsx("p",{className:"text-xs text-yellow-600",children:"Sign out to login as a different user"})]}),l.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:ee,disabled:p,children:"Sign Out"})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(oT,{onSuccess:O,onError:$}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),l.jsxs("form",{onSubmit:C,className:"space-y-4",noValidate:!0,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"email",children:"Email Address"}),l.jsxs("div",{className:"relative",children:[l.jsx(mn,{id:"email",type:"email",placeholder:"your.email@province.ph",value:n,onChange:z=>{e(z.target.value),A&&U(z.target.value)},onBlur:()=>U(n),className:A?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"email"}),A&&l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l.jsx(Js,{className:"h-4 w-4 text-red-500"})})]}),A&&l.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[l.jsx(Js,{className:"h-3 w-3"}),A]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(mn,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:t,onChange:z=>{r(z.target.value),j&&K(z.target.value)},onBlur:()=>K(t),className:j?"border-red-500 focus:border-red-500 pr-10":"pr-10",required:!0,autoComplete:"current-password"}),l.jsx("button",{type:"button",onClick:P,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:-1,children:i?l.jsx(UV,{className:"h-4 w-4"}):l.jsx(ha,{className:"h-4 w-4"})})]}),j&&l.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[l.jsx(Js,{className:"h-3 w-3"}),j]})]}),c&&l.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:l.jsxs("p",{className:"text-sm text-red-700 flex items-center gap-2",children:[l.jsx(Js,{className:"h-4 w-4"}),c]})}),_&&l.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:l.jsxs("p",{className:"text-sm text-green-700 flex items-center gap-2",children:[l.jsx(Or,{className:"h-4 w-4"}),_]})}),l.jsx(Ne,{type:"submit",className:"w-full",disabled:p,children:p?l.jsxs(l.Fragment,{children:[l.jsx(gy,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):"Sign In"}),l.jsx("div",{className:"flex items-center justify-between",children:l.jsx(Ne,{type:"button",variant:"link",className:"text-sm p-0 h-auto",onClick:()=>v(!y),children:"Forgot Password?"})}),y&&l.jsxs("div",{className:"p-4 border rounded-md bg-gray-50",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enter your email address and we'll send you a password reset link."}),l.jsx(Ne,{type:"button",onClick:T,disabled:p||!n||!!A,className:"w-full",children:p?l.jsxs(l.Fragment,{children:[l.jsx(gy,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Email"})]}),l.jsx(Ne,{type:"button",variant:"outline",className:"w-full",onClick:()=>window.location.href="/register",children:"Request Account Access"}),l.jsx("div",{className:"text-xs text-muted-foreground text-center mt-4",children:"Contact administrator for account access"})]})]})]})]})})}const H3=()=>{const[n,e]=E.useState({email:"",name:"",role:"staff"}),[t,r]=E.useState(!1),[i,a]=E.useState(!1),[c,d]=E.useState(""),[p,m]=E.useState({email:"",name:""}),y=L=>{const j=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return L?j.test(L)?"":"Please enter a valid email address":"Email is required"},v=L=>L.trim()?L.trim().length<2?"Name must be at least 2 characters":/^[a-zA-Z\s]+$/.test(L.trim())?"":"Name can only contain letters and spaces":"Full name is required",_=(L,j)=>{e({...n,[L]:j}),p[L]&&m({...p,[L]:""}),c&&d("")},b=()=>{const L=y(n.email),j=v(n.name);return m({email:L,name:j}),!L&&!j},R=async L=>{var j,k;if(L.preventDefault(),d(""),!!b()){r(!0);try{console.log("Submitting registration request:",n),await Me.requestUserCreation(n.email,n.name,n.role),a(!0)}catch(U){console.error("Error submitting request:",U);let K="Error submitting request. Please try again.";U.code==="permission-denied"?K="Permission denied. Please try again or contact support.":(j=U.message)!=null&&j.includes("already pending")?K="A request for this email is already pending approval.":(k=U.message)!=null&&k.includes("already exists")?K="An account with this email already exists.":U.message&&(K=U.message),d(K)}finally{r(!1)}}},N=()=>{a(!0)},A=L=>{d(L)};return i?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:l.jsx(Or,{className:"w-6 h-6 text-green-600"})}),l.jsx(Et,{className:"text-xl text-green-800",children:"Request Submitted Successfully"})]}),l.jsxs(Qe,{className:"space-y-4",children:[l.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:l.jsx("p",{className:"text-green-700 text-sm text-center",children:"Your account request has been submitted for approval. You will be notified via email once it's processed by an administrator."})}),l.jsx("div",{className:"text-center text-sm text-muted-foreground",children:l.jsx("p",{children:"Please check your email for updates on your request status."})}),l.jsxs(Ne,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",children:[l.jsx(hy,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"text-center",children:[l.jsx(Et,{className:"text-2xl font-bold",children:"Create Account"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Request access to the Office Management System"})]}),l.jsxs(Qe,{className:"space-y-4",children:[c&&l.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:l.jsxs("p",{className:"text-red-700 text-sm flex items-center gap-2",children:[l.jsx(Js,{className:"h-4 w-4"}),c]})}),l.jsx("div",{children:l.jsx(oT,{onSuccess:N,onError:A})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or register with email"})})]}),l.jsxs("form",{onSubmit:R,className:"space-y-4",noValidate:!0,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Be,{htmlFor:"name",className:"flex items-center gap-2",children:[l.jsx(Du,{className:"h-4 w-4"}),"Full Name"]}),l.jsx(mn,{id:"name",type:"text",placeholder:"Enter your full name",value:n.name,onChange:L=>_("name",L.target.value),onBlur:()=>{const L=v(n.name);m({...p,name:L})},className:p.name?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"name"}),p.name&&l.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[l.jsx(Js,{className:"h-3 w-3"}),p.name]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Be,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(Bv,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(mn,{id:"email",type:"email",placeholder:"Enter your email",value:n.email,onChange:L=>_("email",L.target.value),onBlur:()=>{const L=y(n.email);m({...p,email:L})},className:p.email?"border-red-500 focus:border-red-500":"",required:!0,autoComplete:"email"}),p.email&&l.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[l.jsx(Js,{className:"h-3 w-3"}),p.email]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Be,{htmlFor:"role",className:"flex items-center gap-2",children:[l.jsx(fs,{className:"h-4 w-4"}),"Requested Role"]}),l.jsxs("select",{id:"role",value:n.role,onChange:L=>_("role",L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"staff",children:"Staff Member"}),l.jsx("option",{value:"admin",children:"Administrator"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator requests require additional approval"})]}),l.jsx(Ne,{type:"submit",className:"w-full",disabled:t||!!p.email||!!p.name,children:t?l.jsxs(l.Fragment,{children:[l.jsx(gy,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting Request..."]}):"Submit Request"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ne,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",disabled:t,children:[l.jsx(hy,{className:"mr-2 h-4 w-4"}),"Back to Login"]}),l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"Note:"})," All account requests must be approved by an administrator before access is granted. You will receive an email notification once your request is processed."]})})]})]})]})})},G3=({userEmail:n,onRetry:e,onSignOut:t})=>l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#C9B59A] to-[#6B5447] p-4",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"text-center space-y-4",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("img",{src:Wv,alt:"Province Logo",className:"h-20 w-20 object-contain"})}),l.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:l.jsx(py,{className:"w-8 h-8 text-yellow-600"})}),l.jsx(Et,{className:"text-xl text-yellow-800",children:"Waiting for Admin Approval"})]}),l.jsxs(Qe,{className:"space-y-6",children:[l.jsxs("div",{className:"text-center space-y-3",children:[l.jsx("p",{className:"text-gray-700",children:"Your account request is currently being reviewed by an administrator."}),n&&l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700",children:[l.jsx(Bv,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:n})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[l.jsx(fs,{className:"w-5 h-5 text-gray-600 mt-0.5"}),l.jsxs("div",{className:"text-sm text-gray-700",children:[l.jsx("p",{className:"font-medium mb-1",children:"What happens next?"}),l.jsxs("ul",{className:"space-y-1 text-xs",children:[l.jsx("li",{children:" An administrator will review your request"}),l.jsx("li",{children:" You'll receive an email notification when approved"}),l.jsx("li",{children:" Once approved, you can sign in normally"})]})]})]}),l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"Need immediate access?"})," Contact your administrator directly."]})})]}),l.jsxs("div",{className:"space-y-3",children:[e&&l.jsxs(Ne,{onClick:e,variant:"outline",className:"w-full",children:[l.jsx(g3,{className:"mr-2 h-4 w-4"}),"Check Again"]}),l.jsxs(Ne,{onClick:t||(()=>window.location.href="/"),variant:"outline",className:"w-full",children:[l.jsx(hy,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"This page will automatically refresh when your account is approved."})})]})]})}),K3=({toast:n,onRemove:e})=>{const t=()=>{switch(n.type){case"success":return l.jsx(Or,{className:"w-5 h-5 text-green-600"});case"error":return l.jsx(Ih,{className:"w-5 h-5 text-red-600"});case"warning":return l.jsx(tu,{className:"w-5 h-5 text-yellow-600"});case"info":return l.jsx(GV,{className:"w-5 h-5 text-blue-600"})}},r=()=>{switch(n.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}},i=()=>{switch(n.type){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800"}};return l.jsx("div",{className:`max-w-sm w-full ${r()} border rounded-lg shadow-lg p-4 mb-3 animate-in slide-in-from-right duration-300`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:t()}),l.jsxs("div",{className:"ml-3 w-0 flex-1",children:[l.jsx("p",{className:`text-sm font-medium ${i()}`,children:n.title}),n.message&&l.jsx("p",{className:`mt-1 text-sm ${i()} opacity-90`,children:n.message})]}),l.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:l.jsxs("button",{className:`inline-flex ${i()} hover:opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current rounded`,onClick:()=>e(n.id),children:[l.jsx("span",{className:"sr-only",children:"Close"}),l.jsx(mi,{className:"w-4 h-4"})]})})]})})},lh=({toasts:n,onRemove:e})=>n.length===0?null:l.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(t=>l.jsx(K3,{toast:t,onRemove:e},t.id))});function Q3(n,e){const t=E.createContext(e),r=a=>{const{children:c,...d}=a,p=E.useMemo(()=>d,Object.values(d));return l.jsx(t.Provider,{value:p,children:c})};r.displayName=n+"Provider";function i(a){const c=E.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,i]}function wi(n,e=[]){let t=[];function r(a,c){const d=E.createContext(c),p=t.length;t=[...t,c];const m=v=>{var L;const{scope:_,children:b,...R}=v,N=((L=_==null?void 0:_[n])==null?void 0:L[p])||d,A=E.useMemo(()=>R,Object.values(R));return l.jsx(N.Provider,{value:A,children:b})};m.displayName=a+"Provider";function y(v,_){var N;const b=((N=_==null?void 0:_[n])==null?void 0:N[p])||d,R=E.useContext(b);if(R)return R;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,y]}const i=()=>{const a=t.map(c=>E.createContext(c));return function(d){const p=(d==null?void 0:d[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...d,[n]:p}}),[d,p])}};return i.scopeName=n,[r,Y3(i,...e)]}function Y3(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=r.reduce((d,{useScope:p,scopeName:m})=>{const v=p(a)[`__scope${m}`];return{...d,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function ur(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}var gn=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},Hv="Avatar",[X3]=wi(Hv),[J3,aT]=X3(Hv),lT=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,a]=E.useState("idle");return l.jsx(J3,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:l.jsx(Je.span,{...r,ref:e})})});lT.displayName=Hv;var cT="AvatarImage",Z3=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...a}=n,c=aT(cT,t),d=e6(r,a.referrerPolicy),p=ur(m=>{i(m),c.onImageLoadingStatusChange(m)});return gn(()=>{d!=="idle"&&p(d)},[d,p]),d==="loaded"?l.jsx(Je.img,{...a,ref:e,src:r}):null});Z3.displayName=cT;var uT="AvatarFallback",dT=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,a=aT(uT,t),[c,d]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const p=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(p)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(Je.span,{...i,ref:e}):null});dT.displayName=uT;function e6(n,e){const[t,r]=E.useState("idle");return gn(()=>{if(!n){r("error");return}let i=!0;const a=new window.Image,c=d=>()=>{i&&r(d)};return r("loading"),a.onload=c("loaded"),a.onerror=c("error"),a.src=n,e&&(a.referrerPolicy=e),()=>{i=!1}},[n,e]),t}var t6=lT,n6=dT;function hT({className:n,...e}){return l.jsx(t6,{"data-slot":"avatar",className:St("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function fT({className:n,...e}){return l.jsx(n6,{"data-slot":"avatar-fallback",className:St("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}function Oe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Al({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=r6({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,d=ur(t),p=E.useCallback(m=>{if(a){const v=typeof m=="function"?m(n):m;v!==n&&d(v)}else i(m)},[a,n,i,d]);return[c,p]}function r6({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,i=E.useRef(r),a=ur(e);return E.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),t}function Gv(n){const e=n+"CollectionProvider",[t,r]=wi(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:R,children:N}=b,A=Ks.useRef(null),L=Ks.useRef(new Map).current;return l.jsx(i,{scope:R,itemMap:L,collectionRef:A,children:N})};c.displayName=e;const d=n+"CollectionSlot",p=Ks.forwardRef((b,R)=>{const{scope:N,children:A}=b,L=a(d,N),j=vt(R,L.collectionRef);return l.jsx(pi,{ref:j,children:A})});p.displayName=d;const m=n+"CollectionItemSlot",y="data-radix-collection-item",v=Ks.forwardRef((b,R)=>{const{scope:N,children:A,...L}=b,j=Ks.useRef(null),k=vt(R,j),U=a(m,N);return Ks.useEffect(()=>(U.itemMap.set(j,{ref:j,...L}),()=>void U.itemMap.delete(j))),l.jsx(pi,{[y]:"",ref:k,children:A})});v.displayName=m;function _(b){const R=a(n+"CollectionConsumer",b);return Ks.useCallback(()=>{const A=R.collectionRef.current;if(!A)return[];const L=Array.from(A.querySelectorAll(`[${y}]`));return Array.from(R.itemMap.values()).sort((U,K)=>L.indexOf(U.ref.current)-L.indexOf(K.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:c,Slot:p,ItemSlot:v},_,r]}var s6=E.createContext(void 0);function Kf(n){const e=E.useContext(s6);return n||e||"ltr"}function i6(n,e=globalThis==null?void 0:globalThis.document){const t=ur(n);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var o6="DismissableLayer",yy="dismissableLayer.update",a6="dismissableLayer.pointerDownOutside",l6="dismissableLayer.focusOutside",BE,pT=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qf=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...p}=n,m=E.useContext(pT),[y,v]=E.useState(null),_=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),R=vt(e,C=>v(C)),N=Array.from(m.layers),[A]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),L=N.indexOf(A),j=y?N.indexOf(y):-1,k=m.layersWithOutsidePointerEventsDisabled.size>0,U=j>=L,K=d6(C=>{const T=C.target,O=[...m.branches].some($=>$.contains(T));!U||O||(i==null||i(C),c==null||c(C),C.defaultPrevented||d==null||d())},_),ee=h6(C=>{const T=C.target;[...m.branches].some($=>$.contains(T))||(a==null||a(C),c==null||c(C),C.defaultPrevented||d==null||d())},_);return i6(C=>{j===m.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&d&&(C.preventDefault(),d()))},_),E.useEffect(()=>{if(y)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(BE=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(y)),m.layers.add(y),qE(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=BE)}},[y,_,t,m]),E.useEffect(()=>()=>{y&&(m.layers.delete(y),m.layersWithOutsidePointerEventsDisabled.delete(y),qE())},[y,m]),E.useEffect(()=>{const C=()=>b({});return document.addEventListener(yy,C),()=>document.removeEventListener(yy,C)},[]),l.jsx(Je.div,{...p,ref:R,style:{pointerEvents:k?U?"auto":"none":void 0,...n.style},onFocusCapture:Oe(n.onFocusCapture,ee.onFocusCapture),onBlurCapture:Oe(n.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:Oe(n.onPointerDownCapture,K.onPointerDownCapture)})});Qf.displayName=o6;var c6="DismissableLayerBranch",u6=E.forwardRef((n,e)=>{const t=E.useContext(pT),r=E.useRef(null),i=vt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Je.div,{...n,ref:i})});u6.displayName=c6;function d6(n,e=globalThis==null?void 0:globalThis.document){const t=ur(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let p=function(){mT(a6,t,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=p,e.addEventListener("click",i.current,{once:!0})):p()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function h6(n,e=globalThis==null?void 0:globalThis.document){const t=ur(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&mT(l6,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qE(){const n=new CustomEvent(yy);document.dispatchEvent(n)}function mT(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?KN(i,a):i.dispatchEvent(a)}var ig=0;function Kv(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??WE()),document.body.insertAdjacentElement("beforeend",n[1]??WE()),ig++,()=>{ig===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ig--}},[])}function WE(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var og="focusScope.autoFocusOnMount",ag="focusScope.autoFocusOnUnmount",HE={bubbles:!1,cancelable:!0},f6="FocusScope",Yf=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...c}=n,[d,p]=E.useState(null),m=ur(i),y=ur(a),v=E.useRef(null),_=vt(e,N=>p(N)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let N=function(k){if(b.paused||!d)return;const U=k.target;d.contains(U)?v.current=U:Xi(v.current,{select:!0})},A=function(k){if(b.paused||!d)return;const U=k.relatedTarget;U!==null&&(d.contains(U)||Xi(v.current,{select:!0}))},L=function(k){if(document.activeElement===document.body)for(const K of k)K.removedNodes.length>0&&Xi(d)};document.addEventListener("focusin",N),document.addEventListener("focusout",A);const j=new MutationObserver(L);return d&&j.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",A),j.disconnect()}}},[r,d,b.paused]),E.useEffect(()=>{if(d){KE.add(b);const N=document.activeElement;if(!d.contains(N)){const L=new CustomEvent(og,HE);d.addEventListener(og,m),d.dispatchEvent(L),L.defaultPrevented||(p6(w6(gT(d)),{select:!0}),document.activeElement===N&&Xi(d))}return()=>{d.removeEventListener(og,m),setTimeout(()=>{const L=new CustomEvent(ag,HE);d.addEventListener(ag,y),d.dispatchEvent(L),L.defaultPrevented||Xi(N??document.body,{select:!0}),d.removeEventListener(ag,y),KE.remove(b)},0)}}},[d,m,y,b]);const R=E.useCallback(N=>{if(!t&&!r||b.paused)return;const A=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,L=document.activeElement;if(A&&L){const j=N.currentTarget,[k,U]=m6(j);k&&U?!N.shiftKey&&L===U?(N.preventDefault(),t&&Xi(k,{select:!0})):N.shiftKey&&L===k&&(N.preventDefault(),t&&Xi(U,{select:!0})):L===j&&N.preventDefault()}},[t,r,b.paused]);return l.jsx(Je.div,{tabIndex:-1,...c,ref:_,onKeyDown:R})});Yf.displayName=f6;function p6(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Xi(r,{select:e}),document.activeElement!==t)return}function m6(n){const e=gT(n),t=GE(e,n),r=GE(e.reverse(),n);return[t,r]}function gT(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function GE(n,e){for(const t of n)if(!g6(t,{upTo:e}))return t}function g6(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function y6(n){return n instanceof HTMLInputElement&&"select"in n}function Xi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&y6(n)&&e&&n.select()}}var KE=v6();function v6(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=QE(n,e),n.unshift(e)},remove(e){var t;n=QE(n,e),(t=n[0])==null||t.resume()}}}function QE(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function w6(n){return n.filter(e=>e.tagName!=="A")}var x6=yR.useId||(()=>{}),_6=0;function ws(n){const[e,t]=E.useState(x6());return gn(()=>{t(r=>r??String(_6++))},[n]),e?`radix-${e}`:""}const E6=["top","right","bottom","left"],yo=Math.min,rr=Math.max,Zh=Math.round,ch=Math.floor,xs=n=>({x:n,y:n}),S6={left:"right",right:"left",bottom:"top",top:"bottom"},b6={start:"end",end:"start"};function vy(n,e,t){return rr(n,yo(e,t))}function gi(n,e){return typeof n=="function"?n(e):n}function yi(n){return n.split("-")[0]}function zl(n){return n.split("-")[1]}function Qv(n){return n==="x"?"y":"x"}function Yv(n){return n==="y"?"height":"width"}const N6=new Set(["top","bottom"]);function ps(n){return N6.has(yi(n))?"y":"x"}function Xv(n){return Qv(ps(n))}function T6(n,e,t){t===void 0&&(t=!1);const r=zl(n),i=Xv(n),a=Yv(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=ef(c)),[c,ef(c)]}function I6(n){const e=ef(n);return[wy(n),e,wy(e)]}function wy(n){return n.replace(/start|end/g,e=>b6[e])}const YE=["left","right"],XE=["right","left"],A6=["top","bottom"],C6=["bottom","top"];function R6(n,e,t){switch(n){case"top":case"bottom":return t?e?XE:YE:e?YE:XE;case"left":case"right":return e?A6:C6;default:return[]}}function k6(n,e,t,r){const i=zl(n);let a=R6(yi(n),t==="start",r);return i&&(a=a.map(c=>c+"-"+i),e&&(a=a.concat(a.map(wy)))),a}function ef(n){return n.replace(/left|right|bottom|top/g,e=>S6[e])}function P6(n){return{top:0,right:0,bottom:0,left:0,...n}}function yT(n){return typeof n!="number"?P6(n):{top:n,right:n,bottom:n,left:n}}function tf(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function JE(n,e,t){let{reference:r,floating:i}=n;const a=ps(e),c=Xv(e),d=Yv(c),p=yi(e),m=a==="y",y=r.x+r.width/2-i.width/2,v=r.y+r.height/2-i.height/2,_=r[d]/2-i[d]/2;let b;switch(p){case"top":b={x:y,y:r.y-i.height};break;case"bottom":b={x:y,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:v};break;case"left":b={x:r.x-i.width,y:v};break;default:b={x:r.x,y:r.y}}switch(zl(e)){case"start":b[c]-=_*(t&&m?-1:1);break;case"end":b[c]+=_*(t&&m?-1:1);break}return b}const j6=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:c}=t,d=a.filter(Boolean),p=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:y,y:v}=JE(m,r,p),_=r,b={},R=0;for(let N=0;N<d.length;N++){const{name:A,fn:L}=d[N],{x:j,y:k,data:U,reset:K}=await L({x:y,y:v,initialPlacement:r,placement:_,strategy:i,middlewareData:b,rects:m,platform:c,elements:{reference:n,floating:e}});y=j??y,v=k??v,b={...b,[A]:{...b[A],...U}},K&&R<=50&&(R++,typeof K=="object"&&(K.placement&&(_=K.placement),K.rects&&(m=K.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):K.rects),{x:y,y:v}=JE(m,_,p)),N=-1)}return{x:y,y:v,placement:_,strategy:i,middlewareData:b}};async function fu(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:c,elements:d,strategy:p}=n,{boundary:m="clippingAncestors",rootBoundary:y="viewport",elementContext:v="floating",altBoundary:_=!1,padding:b=0}=gi(e,n),R=yT(b),A=d[_?v==="floating"?"reference":"floating":v],L=tf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(A)))==null||t?A:A.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:m,rootBoundary:y,strategy:p})),j=v==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),U=await(a.isElement==null?void 0:a.isElement(k))?await(a.getScale==null?void 0:a.getScale(k))||{x:1,y:1}:{x:1,y:1},K=tf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:j,offsetParent:k,strategy:p}):j);return{top:(L.top-K.top+R.top)/U.y,bottom:(K.bottom-L.bottom+R.bottom)/U.y,left:(L.left-K.left+R.left)/U.x,right:(K.right-L.right+R.right)/U.x}}const D6=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:c,elements:d,middlewareData:p}=e,{element:m,padding:y=0}=gi(n,e)||{};if(m==null)return{};const v=yT(y),_={x:t,y:r},b=Xv(i),R=Yv(b),N=await c.getDimensions(m),A=b==="y",L=A?"top":"left",j=A?"bottom":"right",k=A?"clientHeight":"clientWidth",U=a.reference[R]+a.reference[b]-_[b]-a.floating[R],K=_[b]-a.reference[b],ee=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let C=ee?ee[k]:0;(!C||!await(c.isElement==null?void 0:c.isElement(ee)))&&(C=d.floating[k]||a.floating[R]);const T=U/2-K/2,O=C/2-N[R]/2-1,$=yo(v[L],O),P=yo(v[j],O),z=$,M=C-N[R]-P,he=C/2-N[R]/2+T,xe=vy(z,he,M),fe=!p.arrow&&zl(i)!=null&&he!==xe&&a.reference[R]/2-(he<z?$:P)-N[R]/2<0,Ee=fe?he<z?he-z:he-M:0;return{[b]:_[b]+Ee,data:{[b]:xe,centerOffset:he-xe-Ee,...fe&&{alignmentOffset:Ee}},reset:fe}}}),M6=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:c,initialPlacement:d,platform:p,elements:m}=e,{mainAxis:y=!0,crossAxis:v=!0,fallbackPlacements:_,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:N=!0,...A}=gi(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const L=yi(i),j=ps(d),k=yi(d)===d,U=await(p.isRTL==null?void 0:p.isRTL(m.floating)),K=_||(k||!N?[ef(d)]:I6(d)),ee=R!=="none";!_&&ee&&K.push(...k6(d,N,R,U));const C=[d,...K],T=await fu(e,A),O=[];let $=((r=a.flip)==null?void 0:r.overflows)||[];if(y&&O.push(T[L]),v){const he=T6(i,c,U);O.push(T[he[0]],T[he[1]])}if($=[...$,{placement:i,overflows:O}],!O.every(he=>he<=0)){var P,z;const he=(((P=a.flip)==null?void 0:P.index)||0)+1,xe=C[he];if(xe&&(!(v==="alignment"?j!==ps(xe):!1)||$.every(W=>ps(W.placement)===j?W.overflows[0]>0:!0)))return{data:{index:he,overflows:$},reset:{placement:xe}};let fe=(z=$.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,W)=>Ee.overflows[1]-W.overflows[1])[0])==null?void 0:z.placement;if(!fe)switch(b){case"bestFit":{var M;const Ee=(M=$.filter(W=>{if(ee){const q=ps(W.placement);return q===j||q==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(q=>q>0).reduce((q,G)=>q+G,0)]).sort((W,q)=>W[1]-q[1])[0])==null?void 0:M[0];Ee&&(fe=Ee);break}case"initialPlacement":fe=d;break}if(i!==fe)return{reset:{placement:fe}}}return{}}}};function ZE(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function e1(n){return E6.some(e=>n[e]>=0)}const O6=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=gi(n,e);switch(r){case"referenceHidden":{const a=await fu(e,{...i,elementContext:"reference"}),c=ZE(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:e1(c)}}}case"escaped":{const a=await fu(e,{...i,altBoundary:!0}),c=ZE(a,t.floating);return{data:{escapedOffsets:c,escaped:e1(c)}}}default:return{}}}}},vT=new Set(["left","top"]);async function L6(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=yi(t),d=zl(t),p=ps(t)==="y",m=vT.has(c)?-1:1,y=a&&p?-1:1,v=gi(e,n);let{mainAxis:_,crossAxis:b,alignmentAxis:R}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return d&&typeof R=="number"&&(b=d==="end"?R*-1:R),p?{x:b*y,y:_*m}:{x:_*m,y:b*y}}const V6=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:c,middlewareData:d}=e,p=await L6(e,n);return c===((t=d.offset)==null?void 0:t.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:a+p.y,data:{...p,placement:c}}}}},F6=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:d={fn:A=>{let{x:L,y:j}=A;return{x:L,y:j}}},...p}=gi(n,e),m={x:t,y:r},y=await fu(e,p),v=ps(yi(i)),_=Qv(v);let b=m[_],R=m[v];if(a){const A=_==="y"?"top":"left",L=_==="y"?"bottom":"right",j=b+y[A],k=b-y[L];b=vy(j,b,k)}if(c){const A=v==="y"?"top":"left",L=v==="y"?"bottom":"right",j=R+y[A],k=R-y[L];R=vy(j,R,k)}const N=d.fn({...e,[_]:b,[v]:R});return{...N,data:{x:N.x-t,y:N.y-r,enabled:{[_]:a,[v]:c}}}}}},U6=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:c}=e,{offset:d=0,mainAxis:p=!0,crossAxis:m=!0}=gi(n,e),y={x:t,y:r},v=ps(i),_=Qv(v);let b=y[_],R=y[v];const N=gi(d,e),A=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(p){const k=_==="y"?"height":"width",U=a.reference[_]-a.floating[k]+A.mainAxis,K=a.reference[_]+a.reference[k]-A.mainAxis;b<U?b=U:b>K&&(b=K)}if(m){var L,j;const k=_==="y"?"width":"height",U=vT.has(yi(i)),K=a.reference[v]-a.floating[k]+(U&&((L=c.offset)==null?void 0:L[v])||0)+(U?0:A.crossAxis),ee=a.reference[v]+a.reference[k]+(U?0:((j=c.offset)==null?void 0:j[v])||0)-(U?A.crossAxis:0);R<K?R=K:R>ee&&(R=ee)}return{[_]:b,[v]:R}}}},z6=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:c,elements:d}=e,{apply:p=()=>{},...m}=gi(n,e),y=await fu(e,m),v=yi(i),_=zl(i),b=ps(i)==="y",{width:R,height:N}=a.floating;let A,L;v==="top"||v==="bottom"?(A=v,L=_===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(L=v,A=_==="end"?"top":"bottom");const j=N-y.top-y.bottom,k=R-y.left-y.right,U=yo(N-y[A],j),K=yo(R-y[L],k),ee=!e.middlewareData.shift;let C=U,T=K;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=j),ee&&!_){const $=rr(y.left,0),P=rr(y.right,0),z=rr(y.top,0),M=rr(y.bottom,0);b?T=R-2*($!==0||P!==0?$+P:rr(y.left,y.right)):C=N-2*(z!==0||M!==0?z+M:rr(y.top,y.bottom))}await p({...e,availableWidth:T,availableHeight:C});const O=await c.getDimensions(d.floating);return R!==O.width||N!==O.height?{reset:{rects:!0}}:{}}}};function Xf(){return typeof window<"u"}function $l(n){return wT(n)?(n.nodeName||"").toLowerCase():"#document"}function lr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Is(n){var e;return(e=(wT(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function wT(n){return Xf()?n instanceof Node||n instanceof lr(n).Node:!1}function $r(n){return Xf()?n instanceof Element||n instanceof lr(n).Element:!1}function Es(n){return Xf()?n instanceof HTMLElement||n instanceof lr(n).HTMLElement:!1}function t1(n){return!Xf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof lr(n).ShadowRoot}const $6=new Set(["inline","contents"]);function Mu(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Br(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!$6.has(i)}const B6=new Set(["table","td","th"]);function q6(n){return B6.has($l(n))}const W6=[":popover-open",":modal"];function Jf(n){return W6.some(e=>{try{return n.matches(e)}catch{return!1}})}const H6=["transform","translate","scale","rotate","perspective"],G6=["transform","translate","scale","rotate","perspective","filter"],K6=["paint","layout","strict","content"];function Jv(n){const e=Zv(),t=$r(n)?Br(n):n;return H6.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||G6.some(r=>(t.willChange||"").includes(r))||K6.some(r=>(t.contain||"").includes(r))}function Q6(n){let e=vo(n);for(;Es(e)&&!Cl(e);){if(Jv(e))return e;if(Jf(e))return null;e=vo(e)}return null}function Zv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Y6=new Set(["html","body","#document"]);function Cl(n){return Y6.has($l(n))}function Br(n){return lr(n).getComputedStyle(n)}function Zf(n){return $r(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function vo(n){if($l(n)==="html")return n;const e=n.assignedSlot||n.parentNode||t1(n)&&n.host||Is(n);return t1(e)?e.host:e}function xT(n){const e=vo(n);return Cl(e)?n.ownerDocument?n.ownerDocument.body:n.body:Es(e)&&Mu(e)?e:xT(e)}function pu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=xT(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),c=lr(i);if(a){const d=xy(c);return e.concat(c,c.visualViewport||[],Mu(i)?i:[],d&&t?pu(d):[])}return e.concat(i,pu(i,[],t))}function xy(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function _T(n){const e=Br(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Es(n),a=i?n.offsetWidth:t,c=i?n.offsetHeight:r,d=Zh(t)!==a||Zh(r)!==c;return d&&(t=a,r=c),{width:t,height:r,$:d}}function ew(n){return $r(n)?n:n.contextElement}function xl(n){const e=ew(n);if(!Es(e))return xs(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=_T(e);let c=(a?Zh(t.width):t.width)/r,d=(a?Zh(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const X6=xs(0);function ET(n){const e=lr(n);return!Zv()||!e.visualViewport?X6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function J6(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==lr(n)?!1:e}function fa(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=ew(n);let c=xs(1);e&&(r?$r(r)&&(c=xl(r)):c=xl(n));const d=J6(a,t,r)?ET(a):xs(0);let p=(i.left+d.x)/c.x,m=(i.top+d.y)/c.y,y=i.width/c.x,v=i.height/c.y;if(a){const _=lr(a),b=r&&$r(r)?lr(r):r;let R=_,N=xy(R);for(;N&&r&&b!==R;){const A=xl(N),L=N.getBoundingClientRect(),j=Br(N),k=L.left+(N.clientLeft+parseFloat(j.paddingLeft))*A.x,U=L.top+(N.clientTop+parseFloat(j.paddingTop))*A.y;p*=A.x,m*=A.y,y*=A.x,v*=A.y,p+=k,m+=U,R=lr(N),N=xy(R)}}return tf({width:y,height:v,x:p,y:m})}function ep(n,e){const t=Zf(n).scrollLeft;return e?e.left+t:fa(Is(n)).left+t}function ST(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-ep(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function Z6(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",c=Is(r),d=e?Jf(e.floating):!1;if(r===c||d&&a)return t;let p={scrollLeft:0,scrollTop:0},m=xs(1);const y=xs(0),v=Es(r);if((v||!v&&!a)&&(($l(r)!=="body"||Mu(c))&&(p=Zf(r)),Es(r))){const b=fa(r);m=xl(r),y.x=b.x+r.clientLeft,y.y=b.y+r.clientTop}const _=c&&!v&&!a?ST(c,p):xs(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-p.scrollLeft*m.x+y.x+_.x,y:t.y*m.y-p.scrollTop*m.y+y.y+_.y}}function eF(n){return Array.from(n.getClientRects())}function tF(n){const e=Is(n),t=Zf(n),r=n.ownerDocument.body,i=rr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=rr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+ep(n);const d=-t.scrollTop;return Br(r).direction==="rtl"&&(c+=rr(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:c,y:d}}const n1=25;function nF(n,e){const t=lr(n),r=Is(n),i=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,d=0,p=0;if(i){a=i.width,c=i.height;const y=Zv();(!y||y&&e==="fixed")&&(d=i.offsetLeft,p=i.offsetTop)}const m=ep(r);if(m<=0){const y=r.ownerDocument,v=y.body,_=getComputedStyle(v),b=y.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,R=Math.abs(r.clientWidth-v.clientWidth-b);R<=n1&&(a-=R)}else m<=n1&&(a+=m);return{width:a,height:c,x:d,y:p}}const rF=new Set(["absolute","fixed"]);function sF(n,e){const t=fa(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=Es(n)?xl(n):xs(1),c=n.clientWidth*a.x,d=n.clientHeight*a.y,p=i*a.x,m=r*a.y;return{width:c,height:d,x:p,y:m}}function r1(n,e,t){let r;if(e==="viewport")r=nF(n,t);else if(e==="document")r=tF(Is(n));else if($r(e))r=sF(e,t);else{const i=ET(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return tf(r)}function bT(n,e){const t=vo(n);return t===e||!$r(t)||Cl(t)?!1:Br(t).position==="fixed"||bT(t,e)}function iF(n,e){const t=e.get(n);if(t)return t;let r=pu(n,[],!1).filter(d=>$r(d)&&$l(d)!=="body"),i=null;const a=Br(n).position==="fixed";let c=a?vo(n):n;for(;$r(c)&&!Cl(c);){const d=Br(c),p=Jv(c);!p&&d.position==="fixed"&&(i=null),(a?!p&&!i:!p&&d.position==="static"&&!!i&&rF.has(i.position)||Mu(c)&&!p&&bT(n,c))?r=r.filter(y=>y!==c):i=d,c=vo(c)}return e.set(n,r),r}function oF(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Jf(e)?[]:iF(e,this._c):[].concat(t),r],d=c[0],p=c.reduce((m,y)=>{const v=r1(e,y,i);return m.top=rr(v.top,m.top),m.right=yo(v.right,m.right),m.bottom=yo(v.bottom,m.bottom),m.left=rr(v.left,m.left),m},r1(e,d,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function aF(n){const{width:e,height:t}=_T(n);return{width:e,height:t}}function lF(n,e,t){const r=Es(e),i=Is(e),a=t==="fixed",c=fa(n,!0,a,e);let d={scrollLeft:0,scrollTop:0};const p=xs(0);function m(){p.x=ep(i)}if(r||!r&&!a)if(($l(e)!=="body"||Mu(i))&&(d=Zf(e)),r){const b=fa(e,!0,a,e);p.x=b.x+e.clientLeft,p.y=b.y+e.clientTop}else i&&m();a&&!r&&i&&m();const y=i&&!r&&!a?ST(i,d):xs(0),v=c.left+d.scrollLeft-p.x-y.x,_=c.top+d.scrollTop-p.y-y.y;return{x:v,y:_,width:c.width,height:c.height}}function lg(n){return Br(n).position==="static"}function s1(n,e){if(!Es(n)||Br(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Is(n)===t&&(t=t.ownerDocument.body),t}function NT(n,e){const t=lr(n);if(Jf(n))return t;if(!Es(n)){let i=vo(n);for(;i&&!Cl(i);){if($r(i)&&!lg(i))return i;i=vo(i)}return t}let r=s1(n,e);for(;r&&q6(r)&&lg(r);)r=s1(r,e);return r&&Cl(r)&&lg(r)&&!Jv(r)?t:r||Q6(n)||t}const cF=async function(n){const e=this.getOffsetParent||NT,t=this.getDimensions,r=await t(n.floating);return{reference:lF(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uF(n){return Br(n).direction==="rtl"}const dF={convertOffsetParentRelativeRectToViewportRelativeRect:Z6,getDocumentElement:Is,getClippingRect:oF,getOffsetParent:NT,getElementRects:cF,getClientRects:eF,getDimensions:aF,getScale:xl,isElement:$r,isRTL:uF};function TT(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function hF(n,e){let t=null,r;const i=Is(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function c(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),a();const m=n.getBoundingClientRect(),{left:y,top:v,width:_,height:b}=m;if(d||e(),!_||!b)return;const R=ch(v),N=ch(i.clientWidth-(y+_)),A=ch(i.clientHeight-(v+b)),L=ch(y),k={rootMargin:-R+"px "+-N+"px "+-A+"px "+-L+"px",threshold:rr(0,yo(1,p))||1};let U=!0;function K(ee){const C=ee[0].intersectionRatio;if(C!==p){if(!U)return c();C?c(!1,C):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C===1&&!TT(m,n.getBoundingClientRect())&&c(),U=!1}try{t=new IntersectionObserver(K,{...k,root:i.ownerDocument})}catch{t=new IntersectionObserver(K,k)}t.observe(n)}return c(!0),a}function fF(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,m=ew(n),y=i||a?[...m?pu(m):[],...pu(e)]:[];y.forEach(L=>{i&&L.addEventListener("scroll",t,{passive:!0}),a&&L.addEventListener("resize",t)});const v=m&&d?hF(m,t):null;let _=-1,b=null;c&&(b=new ResizeObserver(L=>{let[j]=L;j&&j.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var k;(k=b)==null||k.observe(e)})),t()}),m&&!p&&b.observe(m),b.observe(e));let R,N=p?fa(n):null;p&&A();function A(){const L=fa(n);N&&!TT(N,L)&&t(),N=L,R=requestAnimationFrame(A)}return t(),()=>{var L;y.forEach(j=>{i&&j.removeEventListener("scroll",t),a&&j.removeEventListener("resize",t)}),v==null||v(),(L=b)==null||L.disconnect(),b=null,p&&cancelAnimationFrame(R)}}const pF=V6,mF=F6,gF=M6,yF=z6,vF=O6,i1=D6,wF=U6,xF=(n,e,t)=>{const r=new Map,i={platform:dF,...t},a={...i.platform,_c:r};return j6(n,e,{...i,platform:a})};var _F=typeof document<"u",EF=function(){},Ch=_F?E.useLayoutEffect:EF;function nf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!nf(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!nf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function IT(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function o1(n,e){const t=IT(n);return Math.round(e*t)/t}function cg(n){const e=E.useRef(n);return Ch(()=>{e.current=n}),e}function SF(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:c}={},transform:d=!0,whileElementsMounted:p,open:m}=n,[y,v]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[_,b]=E.useState(r);nf(_,r)||b(r);const[R,N]=E.useState(null),[A,L]=E.useState(null),j=E.useCallback(W=>{W!==ee.current&&(ee.current=W,N(W))},[]),k=E.useCallback(W=>{W!==C.current&&(C.current=W,L(W))},[]),U=a||R,K=c||A,ee=E.useRef(null),C=E.useRef(null),T=E.useRef(y),O=p!=null,$=cg(p),P=cg(i),z=cg(m),M=E.useCallback(()=>{if(!ee.current||!C.current)return;const W={placement:e,strategy:t,middleware:_};P.current&&(W.platform=P.current),xF(ee.current,C.current,W).then(q=>{const G={...q,isPositioned:z.current!==!1};he.current&&!nf(T.current,G)&&(T.current=G,ju.flushSync(()=>{v(G)}))})},[_,e,t,P,z]);Ch(()=>{m===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,v(W=>({...W,isPositioned:!1})))},[m]);const he=E.useRef(!1);Ch(()=>(he.current=!0,()=>{he.current=!1}),[]),Ch(()=>{if(U&&(ee.current=U),K&&(C.current=K),U&&K){if($.current)return $.current(U,K,M);M()}},[U,K,M,$,O]);const xe=E.useMemo(()=>({reference:ee,floating:C,setReference:j,setFloating:k}),[j,k]),fe=E.useMemo(()=>({reference:U,floating:K}),[U,K]),Ee=E.useMemo(()=>{const W={position:t,left:0,top:0};if(!fe.floating)return W;const q=o1(fe.floating,y.x),G=o1(fe.floating,y.y);return d?{...W,transform:"translate("+q+"px, "+G+"px)",...IT(fe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:q,top:G}},[t,d,fe.floating,y.x,y.y]);return E.useMemo(()=>({...y,update:M,refs:xe,elements:fe,floatingStyles:Ee}),[y,M,xe,fe,Ee])}const bF=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?i1({element:r.current,padding:i}).fn(t):{}:r?i1({element:r,padding:i}).fn(t):{}}}},NF=(n,e)=>({...pF(n),options:[n,e]}),TF=(n,e)=>({...mF(n),options:[n,e]}),IF=(n,e)=>({...wF(n),options:[n,e]}),AF=(n,e)=>({...gF(n),options:[n,e]}),CF=(n,e)=>({...yF(n),options:[n,e]}),RF=(n,e)=>({...vF(n),options:[n,e]}),kF=(n,e)=>({...bF(n),options:[n,e]});var PF="Arrow",AT=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return l.jsx(Je.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});AT.displayName=PF;var jF=AT;function DF(n){const[e,t]=E.useState(void 0);return gn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let c,d;if("borderBoxSize"in a){const p=a.borderBoxSize,m=Array.isArray(p)?p[0]:p;c=m.inlineSize,d=m.blockSize}else c=n.offsetWidth,d=n.offsetHeight;t({width:c,height:d})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var tw="Popper",[CT,tp]=wi(tw),[MF,RT]=CT(tw),kT=n=>{const{__scopePopper:e,children:t}=n,[r,i]=E.useState(null);return l.jsx(MF,{scope:e,anchor:r,onAnchorChange:i,children:t})};kT.displayName=tw;var PT="PopperAnchor",jT=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=RT(PT,t),c=E.useRef(null),d=vt(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(Je.div,{...i,ref:d})});jT.displayName=PT;var nw="PopperContent",[OF,LF]=CT(nw),DT=E.forwardRef((n,e)=>{var se,ge,le,de,Te,Ve;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:y=0,sticky:v="partial",hideWhenDetached:_=!1,updatePositionStrategy:b="optimized",onPlaced:R,...N}=n,A=RT(nw,t),[L,j]=E.useState(null),k=vt(e,tt=>j(tt)),[U,K]=E.useState(null),ee=DF(U),C=(ee==null?void 0:ee.width)??0,T=(ee==null?void 0:ee.height)??0,O=r+(a!=="center"?"-"+a:""),$=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},P=Array.isArray(m)?m:[m],z=P.length>0,M={padding:$,boundary:P.filter(FF),altBoundary:z},{refs:he,floatingStyles:xe,placement:fe,isPositioned:Ee,middlewareData:W}=SF({strategy:"fixed",placement:O,whileElementsMounted:(...tt)=>fF(...tt,{animationFrame:b==="always"}),elements:{reference:A.anchor},middleware:[NF({mainAxis:i+T,alignmentAxis:c}),p&&TF({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?IF():void 0,...M}),p&&AF({...M}),CF({...M,apply:({elements:tt,rects:ht,availableWidth:Wn,availableHeight:Zt})=>{const{width:ln,height:Wr}=ht.reference,mt=tt.floating.style;mt.setProperty("--radix-popper-available-width",`${Wn}px`),mt.setProperty("--radix-popper-available-height",`${Zt}px`),mt.setProperty("--radix-popper-anchor-width",`${ln}px`),mt.setProperty("--radix-popper-anchor-height",`${Wr}px`)}}),U&&kF({element:U,padding:d}),UF({arrowWidth:C,arrowHeight:T}),_&&RF({strategy:"referenceHidden",...M})]}),[q,G]=LT(fe),F=ur(R);gn(()=>{Ee&&(F==null||F())},[Ee,F]);const V=(se=W.arrow)==null?void 0:se.x,Y=(ge=W.arrow)==null?void 0:ge.y,te=((le=W.arrow)==null?void 0:le.centerOffset)!==0,[me,ve]=E.useState();return gn(()=>{L&&ve(window.getComputedStyle(L).zIndex)},[L]),l.jsx("div",{ref:he.setFloating,"data-radix-popper-content-wrapper":"",style:{...xe,transform:Ee?xe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(de=W.transformOrigin)==null?void 0:de.x,(Te=W.transformOrigin)==null?void 0:Te.y].join(" "),...((Ve=W.hide)==null?void 0:Ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(OF,{scope:t,placedSide:q,onArrowChange:K,arrowX:V,arrowY:Y,shouldHideArrow:te,children:l.jsx(Je.div,{"data-side":q,"data-align":G,...N,ref:k,style:{...N.style,animation:Ee?void 0:"none"}})})})});DT.displayName=nw;var MT="PopperArrow",VF={top:"bottom",right:"left",bottom:"top",left:"right"},OT=E.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=LF(MT,r),c=VF[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(jF,{...i,ref:t,style:{...i.style,display:"block"}})})});OT.displayName=MT;function FF(n){return n!==null}var UF=n=>({name:"transformOrigin",options:n,fn(e){var A,L,j;const{placement:t,rects:r,middlewareData:i}=e,c=((A=i.arrow)==null?void 0:A.centerOffset)!==0,d=c?0:n.arrowWidth,p=c?0:n.arrowHeight,[m,y]=LT(t),v={start:"0%",center:"50%",end:"100%"}[y],_=(((L=i.arrow)==null?void 0:L.x)??0)+d/2,b=(((j=i.arrow)==null?void 0:j.y)??0)+p/2;let R="",N="";return m==="bottom"?(R=c?v:`${_}px`,N=`${-p}px`):m==="top"?(R=c?v:`${_}px`,N=`${r.floating.height+p}px`):m==="right"?(R=`${-p}px`,N=c?v:`${b}px`):m==="left"&&(R=`${r.floating.width+p}px`,N=c?v:`${b}px`),{data:{x:R,y:N}}}});function LT(n){const[e,t="center"]=n.split("-");return[e,t]}var VT=kT,FT=jT,UT=DT,zT=OT,zF="Portal",np=E.forwardRef((n,e)=>{var d;const{container:t,...r}=n,[i,a]=E.useState(!1);gn(()=>a(!0),[]);const c=t||i&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?ZL.createPortal(l.jsx(Je.div,{...r,ref:e}),c):null});np.displayName=zF;function $F(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var xi=n=>{const{present:e,children:t}=n,r=BF(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=vt(r.ref,qF(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:a}):null};xi.displayName="Presence";function BF(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[d,p]=$F(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=uh(r.current);a.current=d==="mounted"?m:"none"},[d]),gn(()=>{const m=r.current,y=i.current;if(y!==n){const _=a.current,b=uh(m);n?p("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?p("UNMOUNT"):p(y&&_!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,p]),gn(()=>{if(e){let m;const y=e.ownerDocument.defaultView??window,v=b=>{const N=uh(r.current).includes(b.animationName);if(b.target===e&&N&&(p("ANIMATION_END"),!i.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",m=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},_=b=>{b.target===e&&(a.current=uh(r.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{y.clearTimeout(m),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else p("ANIMATION_END")},[e,p]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function uh(n){return(n==null?void 0:n.animationName)||"none"}function qF(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var ug="rovingFocusGroup.onEntryFocus",WF={bubbles:!1,cancelable:!0},rp="RovingFocusGroup",[_y,$T,HF]=Gv(rp),[GF,sp]=wi(rp,[HF]),[KF,QF]=GF(rp),BT=E.forwardRef((n,e)=>l.jsx(_y.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(_y.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(YF,{...n,ref:e})})}));BT.displayName=rp;var YF=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:y=!1,...v}=n,_=E.useRef(null),b=vt(e,_),R=Kf(a),[N=null,A]=Al({prop:c,defaultProp:d,onChange:p}),[L,j]=E.useState(!1),k=ur(m),U=$T(t),K=E.useRef(!1),[ee,C]=E.useState(0);return E.useEffect(()=>{const T=_.current;if(T)return T.addEventListener(ug,k),()=>T.removeEventListener(ug,k)},[k]),l.jsx(KF,{scope:t,orientation:r,dir:R,loop:i,currentTabStopId:N,onItemFocus:E.useCallback(T=>A(T),[A]),onItemShiftTab:E.useCallback(()=>j(!0),[]),onFocusableItemAdd:E.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:E.useCallback(()=>C(T=>T-1),[]),children:l.jsx(Je.div,{tabIndex:L||ee===0?-1:0,"data-orientation":r,...v,ref:b,style:{outline:"none",...n.style},onMouseDown:Oe(n.onMouseDown,()=>{K.current=!0}),onFocus:Oe(n.onFocus,T=>{const O=!K.current;if(T.target===T.currentTarget&&O&&!L){const $=new CustomEvent(ug,WF);if(T.currentTarget.dispatchEvent($),!$.defaultPrevented){const P=U().filter(fe=>fe.focusable),z=P.find(fe=>fe.active),M=P.find(fe=>fe.id===N),xe=[z,M,...P].filter(Boolean).map(fe=>fe.ref.current);HT(xe,y)}}K.current=!1}),onBlur:Oe(n.onBlur,()=>j(!1))})})}),qT="RovingFocusGroupItem",WT=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,...c}=n,d=ws(),p=a||d,m=QF(qT,t),y=m.currentTabStopId===p,v=$T(t),{onFocusableItemAdd:_,onFocusableItemRemove:b}=m;return E.useEffect(()=>{if(r)return _(),()=>b()},[r,_,b]),l.jsx(_y.ItemSlot,{scope:t,id:p,focusable:r,active:i,children:l.jsx(Je.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:Oe(n.onMouseDown,R=>{r?m.onItemFocus(p):R.preventDefault()}),onFocus:Oe(n.onFocus,()=>m.onItemFocus(p)),onKeyDown:Oe(n.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){m.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const N=ZF(R,m.orientation,m.dir);if(N!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let L=v().filter(j=>j.focusable).map(j=>j.ref.current);if(N==="last")L.reverse();else if(N==="prev"||N==="next"){N==="prev"&&L.reverse();const j=L.indexOf(R.currentTarget);L=m.loop?e5(L,j+1):L.slice(j+1)}setTimeout(()=>HT(L))}})})})});WT.displayName=qT;var XF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JF(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function ZF(n,e,t){const r=JF(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return XF[r]}function HT(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function e5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var GT=BT,KT=WT,t5=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},al=new WeakMap,dh=new WeakMap,hh={},dg=0,QT=function(n){return n&&(n.host||QT(n.parentNode))},n5=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=QT(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},r5=function(n,e,t,r){var i=n5(e,Array.isArray(n)?n:[n]);hh[t]||(hh[t]=new WeakMap);var a=hh[t],c=[],d=new Set,p=new Set(i),m=function(v){!v||d.has(v)||(d.add(v),m(v.parentNode))};i.forEach(m);var y=function(v){!v||p.has(v)||Array.prototype.forEach.call(v.children,function(_){if(d.has(_))y(_);else try{var b=_.getAttribute(r),R=b!==null&&b!=="false",N=(al.get(_)||0)+1,A=(a.get(_)||0)+1;al.set(_,N),a.set(_,A),c.push(_),N===1&&R&&dh.set(_,!0),A===1&&_.setAttribute(t,"true"),R||_.setAttribute(r,"true")}catch(L){console.error("aria-hidden: cannot operate on ",_,L)}})};return y(e),d.clear(),dg++,function(){c.forEach(function(v){var _=al.get(v)-1,b=a.get(v)-1;al.set(v,_),a.set(v,b),_||(dh.has(v)||v.removeAttribute(r),dh.delete(v)),b||v.removeAttribute(t)}),dg--,dg||(al=new WeakMap,al=new WeakMap,dh=new WeakMap,hh={})}},rw=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=t5(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),r5(r,i,t,"aria-hidden")):function(){return null}},ds=function(){return ds=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ds.apply(this,arguments)};function YT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function s5(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}var Rh="right-scroll-bar-position",kh="width-before-scroll-bar",i5="with-scroll-bars-hidden",o5="--removed-body-scroll-bar-size";function hg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function a5(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var l5=typeof window<"u"?E.useLayoutEffect:E.useEffect,a1=new WeakMap;function c5(n,e){var t=a5(null,function(r){return n.forEach(function(i){return hg(i,r)})});return l5(function(){var r=a1.get(t);if(r){var i=new Set(r),a=new Set(n),c=t.current;i.forEach(function(d){a.has(d)||hg(d,null)}),a.forEach(function(d){i.has(d)||hg(d,c)})}a1.set(t,n)},[n]),t}function u5(n){return n}function d5(n,e){e===void 0&&(e=u5);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(d){return d!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(d){return a(d)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var d=t;t=[],d.forEach(a),c=t}var p=function(){var y=c;c=[],y.forEach(a)},m=function(){return Promise.resolve().then(p)};m(),t={push:function(y){c.push(y),m()},filter:function(y){return c=c.filter(y),t}}}};return i}function h5(n){n===void 0&&(n={});var e=d5(null);return e.options=ds({async:!0,ssr:!1},n),e}var XT=function(n){var e=n.sideCar,t=YT(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,ds({},t))};XT.isSideCarExport=!0;function f5(n,e){return n.useMedium(e),XT}var JT=h5(),fg=function(){},ip=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:fg,onWheelCapture:fg,onTouchMoveCapture:fg}),i=r[0],a=r[1],c=n.forwardProps,d=n.children,p=n.className,m=n.removeScrollBar,y=n.enabled,v=n.shards,_=n.sideCar,b=n.noRelative,R=n.noIsolation,N=n.inert,A=n.allowPinchZoom,L=n.as,j=L===void 0?"div":L,k=n.gapMode,U=YT(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),K=_,ee=c5([t,e]),C=ds(ds({},U),i);return E.createElement(E.Fragment,null,y&&E.createElement(K,{sideCar:JT,removeScrollBar:m,shards:v,noRelative:b,noIsolation:R,inert:N,setCallbacks:a,allowPinchZoom:!!A,lockRef:t,gapMode:k}),c?E.cloneElement(E.Children.only(d),ds(ds({},C),{ref:ee})):E.createElement(j,ds({},C,{className:p,ref:ee}),d))});ip.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ip.classNames={fullWidth:kh,zeroRight:Rh};var p5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function m5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=p5();return e&&n.setAttribute("nonce",e),n}function g5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function y5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var v5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=m5())&&(g5(e,t),y5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},w5=function(){var n=v5();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},ZT=function(){var n=w5(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},x5={left:0,top:0,right:0,gap:0},pg=function(n){return parseInt(n||"",10)||0},_5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[pg(t),pg(r),pg(i)]},E5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return x5;var e=_5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},S5=ZT(),_l="data-scroll-locked",b5=function(n,e,t,r){var i=n.left,a=n.top,c=n.right,d=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(i5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(d,"px ").concat(r,`;
  }
  body[`).concat(_l,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rh,` {
    right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(kh,` {
    margin-right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(Rh," .").concat(Rh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kh," .").concat(kh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_l,`] {
    `).concat(o5,": ").concat(d,`px;
  }
`)},l1=function(){var n=parseInt(document.body.getAttribute(_l)||"0",10);return isFinite(n)?n:0},N5=function(){E.useEffect(function(){return document.body.setAttribute(_l,(l1()+1).toString()),function(){var n=l1()-1;n<=0?document.body.removeAttribute(_l):document.body.setAttribute(_l,n.toString())}},[])},T5=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;N5();var a=E.useMemo(function(){return E5(i)},[i]);return E.createElement(S5,{styles:b5(a,!e,i,t?"":"!important")})},Ey=!1;if(typeof window<"u")try{var fh=Object.defineProperty({},"passive",{get:function(){return Ey=!0,!0}});window.addEventListener("test",fh,fh),window.removeEventListener("test",fh,fh)}catch{Ey=!1}var ll=Ey?{passive:!1}:!1,I5=function(n){return n.tagName==="TEXTAREA"},eI=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!I5(n)&&t[e]==="visible")},A5=function(n){return eI(n,"overflowY")},C5=function(n){return eI(n,"overflowX")},c1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=tI(n,r);if(i){var a=nI(n,r),c=a[1],d=a[2];if(c>d)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},R5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},k5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},tI=function(n,e){return n==="v"?A5(e):C5(e)},nI=function(n,e){return n==="v"?R5(e):k5(e)},P5=function(n,e){return n==="h"&&e==="rtl"?-1:1},j5=function(n,e,t,r,i){var a=P5(n,window.getComputedStyle(e).direction),c=a*r,d=t.target,p=e.contains(d),m=!1,y=c>0,v=0,_=0;do{if(!d)break;var b=nI(n,d),R=b[0],N=b[1],A=b[2],L=N-A-a*R;(R||L)&&tI(n,d)&&(v+=L,_+=R);var j=d.parentNode;d=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!p&&d!==document.body||p&&(e.contains(d)||e===d));return(y&&Math.abs(v)<1||!y&&Math.abs(_)<1)&&(m=!0),m},ph=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},u1=function(n){return[n.deltaX,n.deltaY]},d1=function(n){return n&&"current"in n?n.current:n},D5=function(n,e){return n[0]===e[0]&&n[1]===e[1]},M5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},O5=0,cl=[];function L5(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),i=E.useState(O5++)[0],a=E.useState(ZT)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var N=s5([n.lockRef.current],(n.shards||[]).map(d1),!0).filter(Boolean);return N.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),N.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var d=E.useCallback(function(N,A){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!c.current.allowPinchZoom;var L=ph(N),j=t.current,k="deltaX"in N?N.deltaX:j[0]-L[0],U="deltaY"in N?N.deltaY:j[1]-L[1],K,ee=N.target,C=Math.abs(k)>Math.abs(U)?"h":"v";if("touches"in N&&C==="h"&&ee.type==="range")return!1;var T=window.getSelection(),O=T&&T.anchorNode,$=O?O===ee||O.contains(ee):!1;if($)return!1;var P=c1(C,ee);if(!P)return!0;if(P?K=C:(K=C==="v"?"h":"v",P=c1(C,ee)),!P)return!1;if(!r.current&&"changedTouches"in N&&(k||U)&&(r.current=K),!K)return!0;var z=r.current||K;return j5(z,A,N,z==="h"?k:U)},[]),p=E.useCallback(function(N){var A=N;if(!(!cl.length||cl[cl.length-1]!==a)){var L="deltaY"in A?u1(A):ph(A),j=e.current.filter(function(K){return K.name===A.type&&(K.target===A.target||A.target===K.shadowParent)&&D5(K.delta,L)})[0];if(j&&j.should){A.cancelable&&A.preventDefault();return}if(!j){var k=(c.current.shards||[]).map(d1).filter(Boolean).filter(function(K){return K.contains(A.target)}),U=k.length>0?d(A,k[0]):!c.current.noIsolation;U&&A.cancelable&&A.preventDefault()}}},[]),m=E.useCallback(function(N,A,L,j){var k={name:N,delta:A,target:L,should:j,shadowParent:V5(L)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(U){return U!==k})},1)},[]),y=E.useCallback(function(N){t.current=ph(N),r.current=void 0},[]),v=E.useCallback(function(N){m(N.type,u1(N),N.target,d(N,n.lockRef.current))},[]),_=E.useCallback(function(N){m(N.type,ph(N),N.target,d(N,n.lockRef.current))},[]);E.useEffect(function(){return cl.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:_}),document.addEventListener("wheel",p,ll),document.addEventListener("touchmove",p,ll),document.addEventListener("touchstart",y,ll),function(){cl=cl.filter(function(N){return N!==a}),document.removeEventListener("wheel",p,ll),document.removeEventListener("touchmove",p,ll),document.removeEventListener("touchstart",y,ll)}},[]);var b=n.removeScrollBar,R=n.inert;return E.createElement(E.Fragment,null,R?E.createElement(a,{styles:M5(i)}):null,b?E.createElement(T5,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function V5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const F5=f5(JT,L5);var op=E.forwardRef(function(n,e){return E.createElement(ip,ds({},n,{ref:e,sideCar:F5}))});op.classNames=ip.classNames;var Sy=["Enter"," "],U5=["ArrowDown","PageUp","Home"],rI=["ArrowUp","PageDown","End"],z5=[...U5,...rI],$5={ltr:[...Sy,"ArrowRight"],rtl:[...Sy,"ArrowLeft"]},B5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ou="Menu",[mu,q5,W5]=Gv(Ou),[wa,sI]=wi(Ou,[W5,tp,sp]),ap=tp(),iI=sp(),[H5,xa]=wa(Ou),[G5,Lu]=wa(Ou),oI=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:a,modal:c=!0}=n,d=ap(e),[p,m]=E.useState(null),y=E.useRef(!1),v=ur(a),_=Kf(i);return E.useEffect(()=>{const b=()=>{y.current=!0,document.addEventListener("pointerdown",R,{capture:!0,once:!0}),document.addEventListener("pointermove",R,{capture:!0,once:!0})},R=()=>y.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",R,{capture:!0}),document.removeEventListener("pointermove",R,{capture:!0})}},[]),l.jsx(VT,{...d,children:l.jsx(H5,{scope:e,open:t,onOpenChange:v,content:p,onContentChange:m,children:l.jsx(G5,{scope:e,onClose:E.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:y,dir:_,modal:c,children:r})})})};oI.displayName=Ou;var K5="MenuAnchor",sw=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=ap(t);return l.jsx(FT,{...i,...r,ref:e})});sw.displayName=K5;var iw="MenuPortal",[Q5,aI]=wa(iw,{forceMount:void 0}),lI=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,a=xa(iw,e);return l.jsx(Q5,{scope:e,forceMount:t,children:l.jsx(xi,{present:t||a.open,children:l.jsx(np,{asChild:!0,container:i,children:r})})})};lI.displayName=iw;var _r="MenuContent",[Y5,ow]=wa(_r),cI=E.forwardRef((n,e)=>{const t=aI(_r,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=xa(_r,n.__scopeMenu),c=Lu(_r,n.__scopeMenu);return l.jsx(mu.Provider,{scope:n.__scopeMenu,children:l.jsx(xi,{present:r||a.open,children:l.jsx(mu.Slot,{scope:n.__scopeMenu,children:c.modal?l.jsx(X5,{...i,ref:e}):l.jsx(J5,{...i,ref:e})})})})}),X5=E.forwardRef((n,e)=>{const t=xa(_r,n.__scopeMenu),r=E.useRef(null),i=vt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return rw(a)},[]),l.jsx(aw,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Oe(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),J5=E.forwardRef((n,e)=>{const t=xa(_r,n.__scopeMenu);return l.jsx(aw,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),aw=E.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEntryFocus:p,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:_,onDismiss:b,disableOutsideScroll:R,...N}=n,A=xa(_r,t),L=Lu(_r,t),j=ap(t),k=iI(t),U=q5(t),[K,ee]=E.useState(null),C=E.useRef(null),T=vt(e,C,A.onContentChange),O=E.useRef(0),$=E.useRef(""),P=E.useRef(0),z=E.useRef(null),M=E.useRef("right"),he=E.useRef(0),xe=R?op:E.Fragment,fe=R?{as:pi,allowPinchZoom:!0}:void 0,Ee=q=>{var se,ge;const G=$.current+q,F=U().filter(le=>!le.disabled),V=document.activeElement,Y=(se=F.find(le=>le.ref.current===V))==null?void 0:se.textValue,te=F.map(le=>le.textValue),me=uU(te,G,Y),ve=(ge=F.find(le=>le.textValue===me))==null?void 0:ge.ref.current;(function le(de){$.current=de,window.clearTimeout(O.current),de!==""&&(O.current=window.setTimeout(()=>le(""),1e3))})(G),ve&&setTimeout(()=>ve.focus())};E.useEffect(()=>()=>window.clearTimeout(O.current),[]),Kv();const W=E.useCallback(q=>{var F,V;return M.current===((F=z.current)==null?void 0:F.side)&&hU(q,(V=z.current)==null?void 0:V.area)},[]);return l.jsx(Y5,{scope:t,searchRef:$,onItemEnter:E.useCallback(q=>{W(q)&&q.preventDefault()},[W]),onItemLeave:E.useCallback(q=>{var G;W(q)||((G=C.current)==null||G.focus(),ee(null))},[W]),onTriggerLeave:E.useCallback(q=>{W(q)&&q.preventDefault()},[W]),pointerGraceTimerRef:P,onPointerGraceIntentChange:E.useCallback(q=>{z.current=q},[]),children:l.jsx(xe,{...fe,children:l.jsx(Yf,{asChild:!0,trapped:i,onMountAutoFocus:Oe(a,q=>{var G;q.preventDefault(),(G=C.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:l.jsx(Qf,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:_,onDismiss:b,children:l.jsx(GT,{asChild:!0,...k,dir:L.dir,orientation:"vertical",loop:r,currentTabStopId:K,onCurrentTabStopIdChange:ee,onEntryFocus:Oe(p,q=>{L.isUsingKeyboardRef.current||q.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(UT,{role:"menu","aria-orientation":"vertical","data-state":NI(A.open),"data-radix-menu-content":"",dir:L.dir,...j,...N,ref:T,style:{outline:"none",...N.style},onKeyDown:Oe(N.onKeyDown,q=>{const F=q.target.closest("[data-radix-menu-content]")===q.currentTarget,V=q.ctrlKey||q.altKey||q.metaKey,Y=q.key.length===1;F&&(q.key==="Tab"&&q.preventDefault(),!V&&Y&&Ee(q.key));const te=C.current;if(q.target!==te||!z5.includes(q.key))return;q.preventDefault();const ve=U().filter(se=>!se.disabled).map(se=>se.ref.current);rI.includes(q.key)&&ve.reverse(),lU(ve)}),onBlur:Oe(n.onBlur,q=>{q.currentTarget.contains(q.target)||(window.clearTimeout(O.current),$.current="")}),onPointerMove:Oe(n.onPointerMove,gu(q=>{const G=q.target,F=he.current!==q.clientX;if(q.currentTarget.contains(G)&&F){const V=q.clientX>he.current?"right":"left";M.current=V,he.current=q.clientX}}))})})})})})})});cI.displayName=_r;var Z5="MenuGroup",lw=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return l.jsx(Je.div,{role:"group",...r,ref:e})});lw.displayName=Z5;var eU="MenuLabel",uI=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return l.jsx(Je.div,{...r,ref:e})});uI.displayName=eU;var rf="MenuItem",h1="menu.itemSelect",lp=E.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,a=E.useRef(null),c=Lu(rf,n.__scopeMenu),d=ow(rf,n.__scopeMenu),p=vt(e,a),m=E.useRef(!1),y=()=>{const v=a.current;if(!t&&v){const _=new CustomEvent(h1,{bubbles:!0,cancelable:!0});v.addEventListener(h1,b=>r==null?void 0:r(b),{once:!0}),KN(v,_),_.defaultPrevented?m.current=!1:c.onClose()}};return l.jsx(dI,{...i,ref:p,disabled:t,onClick:Oe(n.onClick,y),onPointerDown:v=>{var _;(_=n.onPointerDown)==null||_.call(n,v),m.current=!0},onPointerUp:Oe(n.onPointerUp,v=>{var _;m.current||(_=v.currentTarget)==null||_.click()}),onKeyDown:Oe(n.onKeyDown,v=>{const _=d.searchRef.current!=="";t||_&&v.key===" "||Sy.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})})});lp.displayName=rf;var dI=E.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...a}=n,c=ow(rf,t),d=iI(t),p=E.useRef(null),m=vt(e,p),[y,v]=E.useState(!1),[_,b]=E.useState("");return E.useEffect(()=>{const R=p.current;R&&b((R.textContent??"").trim())},[a.children]),l.jsx(mu.ItemSlot,{scope:t,disabled:r,textValue:i??_,children:l.jsx(KT,{asChild:!0,...d,focusable:!r,children:l.jsx(Je.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:m,onPointerMove:Oe(n.onPointerMove,gu(R=>{r?c.onItemLeave(R):(c.onItemEnter(R),R.defaultPrevented||R.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Oe(n.onPointerLeave,gu(R=>c.onItemLeave(R))),onFocus:Oe(n.onFocus,()=>v(!0)),onBlur:Oe(n.onBlur,()=>v(!1))})})})}),tU="MenuCheckboxItem",hI=E.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return l.jsx(yI,{scope:n.__scopeMenu,checked:t,children:l.jsx(lp,{role:"menuitemcheckbox","aria-checked":sf(t)?"mixed":t,...i,ref:e,"data-state":uw(t),onSelect:Oe(i.onSelect,()=>r==null?void 0:r(sf(t)?!0:!t),{checkForDefaultPrevented:!1})})})});hI.displayName=tU;var fI="MenuRadioGroup",[nU,rU]=wa(fI,{value:void 0,onValueChange:()=>{}}),pI=E.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,a=ur(r);return l.jsx(nU,{scope:n.__scopeMenu,value:t,onValueChange:a,children:l.jsx(lw,{...i,ref:e})})});pI.displayName=fI;var mI="MenuRadioItem",gI=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=rU(mI,n.__scopeMenu),a=t===i.value;return l.jsx(yI,{scope:n.__scopeMenu,checked:a,children:l.jsx(lp,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":uw(a),onSelect:Oe(r.onSelect,()=>{var c;return(c=i.onValueChange)==null?void 0:c.call(i,t)},{checkForDefaultPrevented:!1})})})});gI.displayName=mI;var cw="MenuItemIndicator",[yI,sU]=wa(cw,{checked:!1}),vI=E.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,a=sU(cw,t);return l.jsx(xi,{present:r||sf(a.checked)||a.checked===!0,children:l.jsx(Je.span,{...i,ref:e,"data-state":uw(a.checked)})})});vI.displayName=cw;var iU="MenuSeparator",wI=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return l.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});wI.displayName=iU;var oU="MenuArrow",xI=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=ap(t);return l.jsx(zT,{...i,...r,ref:e})});xI.displayName=oU;var aU="MenuSub",[Yz,_I]=wa(aU),Bc="MenuSubTrigger",EI=E.forwardRef((n,e)=>{const t=xa(Bc,n.__scopeMenu),r=Lu(Bc,n.__scopeMenu),i=_I(Bc,n.__scopeMenu),a=ow(Bc,n.__scopeMenu),c=E.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:p}=a,m={__scopeMenu:n.__scopeMenu},y=E.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return E.useEffect(()=>y,[y]),E.useEffect(()=>{const v=d.current;return()=>{window.clearTimeout(v),p(null)}},[d,p]),l.jsx(sw,{asChild:!0,...m,children:l.jsx(dI,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":NI(t.open),...n,ref:qf(e,i.onTriggerChange),onClick:v=>{var _;(_=n.onClick)==null||_.call(n,v),!(n.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Oe(n.onPointerMove,gu(v=>{a.onItemEnter(v),!v.defaultPrevented&&!n.disabled&&!t.open&&!c.current&&(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),y()},100))})),onPointerLeave:Oe(n.onPointerLeave,gu(v=>{var b,R;y();const _=(b=t.content)==null?void 0:b.getBoundingClientRect();if(_){const N=(R=t.content)==null?void 0:R.dataset.side,A=N==="right",L=A?-5:5,j=_[A?"left":"right"],k=_[A?"right":"left"];a.onPointerGraceIntentChange({area:[{x:v.clientX+L,y:v.clientY},{x:j,y:_.top},{x:k,y:_.top},{x:k,y:_.bottom},{x:j,y:_.bottom}],side:N}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(v),v.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Oe(n.onKeyDown,v=>{var b;const _=a.searchRef.current!=="";n.disabled||_&&v.key===" "||$5[r.dir].includes(v.key)&&(t.onOpenChange(!0),(b=t.content)==null||b.focus(),v.preventDefault())})})})});EI.displayName=Bc;var SI="MenuSubContent",bI=E.forwardRef((n,e)=>{const t=aI(_r,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=xa(_r,n.__scopeMenu),c=Lu(_r,n.__scopeMenu),d=_I(SI,n.__scopeMenu),p=E.useRef(null),m=vt(e,p);return l.jsx(mu.Provider,{scope:n.__scopeMenu,children:l.jsx(xi,{present:r||a.open,children:l.jsx(mu.Slot,{scope:n.__scopeMenu,children:l.jsx(aw,{id:d.contentId,"aria-labelledby":d.triggerId,...i,ref:m,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{var v;c.isUsingKeyboardRef.current&&((v=p.current)==null||v.focus()),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:Oe(n.onFocusOutside,y=>{y.target!==d.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Oe(n.onEscapeKeyDown,y=>{c.onClose(),y.preventDefault()}),onKeyDown:Oe(n.onKeyDown,y=>{var b;const v=y.currentTarget.contains(y.target),_=B5[c.dir].includes(y.key);v&&_&&(a.onOpenChange(!1),(b=d.trigger)==null||b.focus(),y.preventDefault())})})})})})});bI.displayName=SI;function NI(n){return n?"open":"closed"}function sf(n){return n==="indeterminate"}function uw(n){return sf(n)?"indeterminate":n?"checked":"unchecked"}function lU(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function cU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function uU(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=cU(n,Math.max(a,0));i.length===1&&(c=c.filter(m=>m!==t));const p=c.find(m=>m.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function dU(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const d=e[a].x,p=e[a].y,m=e[c].x,y=e[c].y;p>r!=y>r&&t<(m-d)*(r-p)/(y-p)+d&&(i=!i)}return i}function hU(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return dU(t,e)}function gu(n){return e=>e.pointerType==="mouse"?n(e):void 0}var fU=oI,pU=sw,mU=lI,gU=cI,yU=lw,vU=uI,wU=lp,xU=hI,_U=pI,EU=gI,SU=vI,bU=wI,NU=xI,TU=EI,IU=bI,dw="DropdownMenu",[AU]=wi(dw,[sI]),Dn=sI(),[CU,TI]=AU(dw),II=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:a,onOpenChange:c,modal:d=!0}=n,p=Dn(e),m=E.useRef(null),[y=!1,v]=Al({prop:i,defaultProp:a,onChange:c});return l.jsx(CU,{scope:e,triggerId:ws(),triggerRef:m,contentId:ws(),open:y,onOpenChange:v,onOpenToggle:E.useCallback(()=>v(_=>!_),[v]),modal:d,children:l.jsx(fU,{...p,open:y,onOpenChange:v,dir:r,modal:d,children:t})})};II.displayName=dw;var AI="DropdownMenuTrigger",CI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,a=TI(AI,t),c=Dn(t);return l.jsx(pU,{asChild:!0,...c,children:l.jsx(Je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:qf(e,a.triggerRef),onPointerDown:Oe(n.onPointerDown,d=>{!r&&d.button===0&&d.ctrlKey===!1&&(a.onOpenToggle(),a.open||d.preventDefault())}),onKeyDown:Oe(n.onKeyDown,d=>{r||(["Enter"," "].includes(d.key)&&a.onOpenToggle(),d.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});CI.displayName=AI;var RU="DropdownMenuPortal",RI=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Dn(e);return l.jsx(mU,{...r,...t})};RI.displayName=RU;var kI="DropdownMenuContent",PI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=TI(kI,t),a=Dn(t),c=E.useRef(!1);return l.jsx(gU,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Oe(n.onCloseAutoFocus,d=>{var p;c.current||(p=i.triggerRef.current)==null||p.focus(),c.current=!1,d.preventDefault()}),onInteractOutside:Oe(n.onInteractOutside,d=>{const p=d.detail.originalEvent,m=p.button===0&&p.ctrlKey===!0,y=p.button===2||m;(!i.modal||y)&&(c.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PI.displayName=kI;var kU="DropdownMenuGroup",PU=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(yU,{...i,...r,ref:e})});PU.displayName=kU;var jU="DropdownMenuLabel",jI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(vU,{...i,...r,ref:e})});jI.displayName=jU;var DU="DropdownMenuItem",DI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(wU,{...i,...r,ref:e})});DI.displayName=DU;var MU="DropdownMenuCheckboxItem",MI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(xU,{...i,...r,ref:e})});MI.displayName=MU;var OU="DropdownMenuRadioGroup",LU=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(_U,{...i,...r,ref:e})});LU.displayName=OU;var VU="DropdownMenuRadioItem",OI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(EU,{...i,...r,ref:e})});OI.displayName=VU;var FU="DropdownMenuItemIndicator",LI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(SU,{...i,...r,ref:e})});LI.displayName=FU;var UU="DropdownMenuSeparator",VI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(bU,{...i,...r,ref:e})});VI.displayName=UU;var zU="DropdownMenuArrow",$U=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(NU,{...i,...r,ref:e})});$U.displayName=zU;var BU="DropdownMenuSubTrigger",FI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(TU,{...i,...r,ref:e})});FI.displayName=BU;var qU="DropdownMenuSubContent",UI=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Dn(t);return l.jsx(IU,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UI.displayName=qU;var WU=II,HU=CI,GU=RI,zI=PI,$I=jI,BI=DI,qI=MI,WI=OI,HI=LI,GI=VI,KI=FI,QI=UI;function As(...n){return HN(Fv(n))}const YI=WU,XI=HU,KU=E.forwardRef(({className:n,inset:e,children:t,...r},i)=>l.jsxs(KI,{ref:i,className:As("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,l.jsx(AV,{className:"ml-auto h-4 w-4"})]}));KU.displayName=KI.displayName;const QU=E.forwardRef(({className:n,...e},t)=>l.jsx(QI,{ref:t,className:As("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));QU.displayName=QI.displayName;const hw=E.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(GU,{children:l.jsx(zI,{ref:r,sideOffset:e,className:As("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));hw.displayName=zI.displayName;const of=E.forwardRef(({className:n,inset:e,...t},r)=>l.jsx(BI,{ref:r,className:As("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));of.displayName=BI.displayName;const YU=E.forwardRef(({className:n,children:e,checked:t,...r},i)=>l.jsxs(qI,{ref:i,className:As("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(HI,{children:l.jsx(hu,{className:"h-4 w-4"})})}),e]}));YU.displayName=qI.displayName;const XU=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(WI,{ref:r,className:As("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(HI,{children:l.jsx(MV,{className:"h-2 w-2 fill-current"})})}),e]}));XU.displayName=WI.displayName;const fw=E.forwardRef(({className:n,inset:e,...t},r)=>l.jsx($I,{ref:r,className:As("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));fw.displayName=$I.displayName;const af=E.forwardRef(({className:n,...e},t)=>l.jsx(GI,{ref:t,className:As("-mx-1 my-1 h-px bg-muted",n),...e}));af.displayName=GI.displayName;function JU({onMenuClick:n}){const{userProfile:e}=Bf(),{theme:t,setTheme:r}=_R(),i=c=>c?c.split(" ").map(d=>d[0]).join("").toUpperCase():"U",a=async()=>{try{await Me.signOut()}catch(c){console.error("Logout error:",c)}};return e?l.jsx("header",{className:"sticky top-0 z-40 border-b bg-background",children:l.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:[l.jsx(Ne,{variant:"ghost",size:"icon",className:"md:hidden",onClick:n,children:l.jsx(r3,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Province of San Antonio de Padua"})}),l.jsxs(Ne,{variant:"ghost",size:"icon",onClick:()=>r(t==="dark"?"light":"dark"),children:[l.jsx(C3,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),l.jsx(a3,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),l.jsxs(YI,{children:[l.jsx(XI,{asChild:!0,children:l.jsx(Ne,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:l.jsx(hT,{children:l.jsx(fT,{children:e?i(e.name):"U"})})})}),l.jsxs(hw,{align:"end",className:"w-56",children:[l.jsx(fw,{children:l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:e==null?void 0:e.name}),l.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e==null?void 0:e.email}),l.jsx("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:e==null?void 0:e.role})]})}),l.jsx(af,{}),l.jsxs(of,{onClick:a,children:[l.jsx(e3,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Log out"})]})]})]})]})}):l.jsx("header",{className:"sticky top-0 z-40 border-b bg-background",children:l.jsx("div",{className:"flex h-16 items-center gap-4 px-4 md:px-6",children:l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Province of San Antonio de Padua"})})})})}const ZU=[{name:"Dashboard",view:"dashboard",icon:QV},{name:"Tasks",view:"tasks",icon:eT},{name:"Receipts",view:"receipts",icon:nT},{name:"Files",view:"files",icon:ZN},{name:"Employees",view:"employees",icon:Gf},{name:"Messages",view:"messaging",icon:tT}];function e9({currentView:n,onViewChange:e,isOpen:t,onClose:r}){return l.jsxs(l.Fragment,{children:[t&&l.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:r}),l.jsx("aside",{className:St("fixed top-0 left-0 z-50 h-screen w-64 border-r bg-background transition-transform duration-300 md:relative md:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:l.jsxs("div",{className:"flex h-full flex-col",children:[l.jsxs("div",{className:"flex h-16 items-center gap-3 border-b px-6",children:[l.jsx("img",{src:Wv,alt:"Province Logo",className:"h-10 w-10 object-contain"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-semibold",children:"San Antonio"}),l.jsx("span",{className:"text-xs text-muted-foreground",children:"de Padua"})]})]}),l.jsx("nav",{className:"flex-1 space-y-1 p-4",children:ZU.map(i=>{const a=i.icon,c=n===i.view;return l.jsxs(Ne,{variant:c?"secondary":"ghost",className:St("w-full justify-start",c&&"bg-secondary"),onClick:()=>{e(i.view),r()},children:[l.jsx(a,{className:"mr-3 h-5 w-5"}),i.name]},i.view)})}),l.jsx("div",{className:"border-t p-4",children:l.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Philippines Province"})})]})})]})}function nr({className:n,...e}){return l.jsx("div",{className:As("animate-pulse rounded-md bg-muted",n),...e})}const t9=GN("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function et({className:n,variant:e,asChild:t=!1,...r}){const i=t?pi:"span";return l.jsx(i,{"data-slot":"badge",className:St(t9({variant:e}),n),...r})}const n9=({isOpen:n,user:e,currentUserRole:t,onRoleUpdate:r,onClose:i,loading:a=!1})=>{const[c,d]=E.useState(e.role),[p,m]=E.useState(!1);if(!n)return null;const y=[{value:"staff",label:"Staff Member",description:"Basic access to tasks, receipts, and files",icon:Du,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",canAssign:!0},{value:"admin",label:"Administrator",description:"Full access including user management and system settings",icon:Wf,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",canAssign:!0},{value:"super_admin",label:"Super Administrator",description:"Complete system control and user management",icon:fs,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",canAssign:t==="super_admin"}],v=async()=>{if(c===e.role){i();return}m(!0);try{await r(e.uid,c),i()}catch(N){console.error("Error updating user role:",N)}finally{m(!1)}},_=e.role==="super_admin"&&t==="super_admin",b=c!==e.role;return e.role==="super_admin"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"relative",children:[l.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",children:l.jsx(mi,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:l.jsx(fs,{className:"w-5 h-5 text-red-600"})}),l.jsxs("div",{children:[l.jsx(Et,{className:"text-lg",children:"Super Administrator"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Role cannot be modified"})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.name}),l.jsx("p",{className:"text-xs text-gray-500",children:e.email}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Role:"}),l.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-700",children:"Super Administrator"})]})]})]}),l.jsxs(Qe,{className:"space-y-4",children:[l.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(fs,{className:"w-5 h-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Role Protected"}),l.jsx("p",{className:"text-sm text-red-700",children:"Super administrator roles cannot be modified for security reasons. This ensures system integrity and prevents accidental privilege escalation."})]})]})}),l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Security Best Practice:"})," Super admin privileges are permanent and cannot be changed through the user interface."]})}),l.jsx(Ne,{onClick:i,className:"w-full",children:"Close"})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"relative",children:[l.jsx("button",{onClick:i,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:a||p,children:l.jsx(mi,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Ah,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx(Et,{className:"text-lg",children:"Edit User Role"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Change user permissions"})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.name}),l.jsx("p",{className:"text-xs text-gray-500",children:e.email}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Current role:"}),l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.role==="super_admin"?"bg-red-100 text-red-700":e.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:e.role==="super_admin"?"Super Admin":e.role==="admin"?"Administrator":"Staff Member"})]})]})]}),l.jsxs(Qe,{className:"space-y-4",children:[_&&l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(tu,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"Warning:"})," You are editing your own super admin role. Be careful not to remove your own access."]})]})}),l.jsxs("div",{children:[l.jsx(Be,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select new role:"}),l.jsx("div",{className:"space-y-3",children:y.map(N=>{const A=N.icon,L=c===N.value,j=!N.canAssign;return l.jsxs("div",{className:`relative rounded-lg border-2 p-4 transition-all ${j?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":L?`${N.borderColor} ${N.bgColor} cursor-pointer`:"border-gray-200 hover:border-gray-300 cursor-pointer"}`,onClick:()=>!j&&d(N.value),children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${j?"bg-gray-100":L?N.bgColor:"bg-gray-50"}`,children:l.jsx(A,{className:`w-5 h-5 ${j?"text-gray-400":L?N.color:"text-gray-600"}`})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:`font-medium ${j?"text-gray-400":L?N.color:"text-gray-900"}`,children:N.label}),L&&!j&&l.jsx("div",{className:`w-2 h-2 rounded-full ${N.color.replace("text-","bg-")}`}),j&&l.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Restricted"})]}),l.jsx("p",{className:`text-sm mt-1 ${j?"text-gray-400":"text-gray-600"}`,children:N.description})]})]}),!j&&l.jsx("input",{type:"radio",name:"role",value:N.value,checked:L,onChange:()=>d(N.value),className:"absolute top-4 right-4 w-4 h-4 text-blue-600"})]},N.value)})})]}),t!=="super_admin"&&l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Note:"})," Only super administrators can assign super admin roles."]})}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx(Ne,{onClick:v,disabled:a||p||!b,className:"flex-1",children:p?"Updating...":b?"Update Role":"No Changes"}),l.jsx(Ne,{onClick:i,variant:"outline",disabled:a||p,className:"flex-1",children:"Cancel"})]})]})]})})},r9=({isOpen:n,userProfile:e,onProfileUpdate:t,onClose:r})=>{const[i,a]=E.useState(e.name),[c,d]=E.useState(!1),[p,m]=E.useState(null);if(!n)return null;const y=async b=>{b.preventDefault(),d(!0),m(null);try{if(!i.trim())throw new Error("Name cannot be empty");if(i.trim().length<2)throw new Error("Name must be at least 2 characters long");if(i.trim().length>50)throw new Error("Name cannot exceed 50 characters");await Me.updateUserProfile(e.uid,{name:i.trim()});const R={...e,name:i.trim(),updatedAt:new Date};t(R),r()}catch(R){console.error("Error updating profile:",R),m(R instanceof Error?R.message:"Failed to update profile")}finally{d(!1)}},v=()=>{a(e.name),m(null),r()},_=i.trim()!==e.name;return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(Ke,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(gt,{className:"relative",children:[l.jsx("button",{onClick:v,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",disabled:c,children:l.jsx(mi,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Du,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx(Et,{className:"text-lg",children:"Edit Profile"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Update your personal information"})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.email}),l.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.role==="super_admin"?"Super Administrator":e.role==="admin"?"Administrator":"Staff Member"})]})]}),l.jsx(Qe,{children:l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p&&l.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[l.jsx(Js,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),l.jsx("p",{className:"text-sm text-red-700",children:p})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Full Name"}),l.jsx(mn,{id:"name",type:"text",value:i,onChange:b=>a(b.target.value),placeholder:"Enter your full name",disabled:c,className:"w-full",maxLength:50,required:!0}),l.jsx("p",{className:"text-xs text-gray-500",children:"This name will be displayed throughout the application"})]}),l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:l.jsx("span",{className:"text-blue-600 text-xs",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Profile Information"}),l.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Your email address and role cannot be changed. Contact a super administrator if you need to modify these details."})]})]})}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsxs(Ne,{type:"submit",disabled:c||!_,className:"flex-1 flex items-center gap-2",children:[l.jsx(x3,{className:"w-4 h-4"}),c?"Saving...":"Save Changes"]}),l.jsx(Ne,{type:"button",variant:"outline",onClick:v,disabled:c,className:"flex-1",children:"Cancel"})]}),_&&l.jsx("p",{className:"text-xs text-amber-600 text-center",children:"You have unsaved changes"})]})})]})})},s9=async()=>{const n=Ct.currentUser;if(console.log("Current user:",n==null?void 0:n.uid,n==null?void 0:n.email),n)try{const e=await ir(Xe(Ae,"users",n.uid));console.log("User profile exists:",e.exists()),e.exists()&&console.log("User profile data:",e.data())}catch(e){console.error("Error fetching user profile:",e)}},i9=({currentUserUid:n,userRole:e})=>{const[t,r]=E.useState("users"),[i,a]=E.useState([]),[c,d]=E.useState([]),[p,m]=E.useState([]),[y,v]=E.useState(null),[_,b]=E.useState(!0),[R,N]=E.useState(!1),[A,L]=E.useState({email:"",name:"",password:"",role:"staff"}),[j,k]=E.useState(!1),[U,K]=E.useState(null),[ee,C]=E.useState(!1),[T,O]=E.useState(!1);E.useEffect(()=>{$()},[]);const $=async()=>{try{if(await s9(),!e||e!=="admin"&&e!=="super_admin"){console.error("Insufficient privileges for admin panel");return}const V=Me.getCurrentUser();if(!V){console.error("No authenticated user found");return}const Y=await Me.getUserProfile(V.uid);if(!Y){console.error("User profile not found in Firestore"),alert("User profile not found. Please contact administrator.");return}if(console.log("User profile verified:",Y.role),v(Y),e==="super_admin"){const[te,me,ve]=await Promise.all([Me.getPendingUsers().catch(se=>(console.error("Error loading pending users:",se),[])),Me.getVisibleUsers(e).catch(se=>(console.error("Error loading visible users:",se),[])),Me.getAdminUsers().catch(se=>(console.error("Error loading admin users:",se),[]))]);a(te),d(me),m(ve)}else{const[te,me,ve,se]=await Promise.all([Me.getPendingUsersForAdmin(V.uid).catch(de=>(console.error("Error loading pending users for admin:",de),[])),Me.getStaffForAdmin(V.uid).catch(de=>(console.error("Error loading staff for admin:",de),[])),Me.getVisibleUsers(e).catch(de=>(console.error("Error loading visible users:",de),[])),Me.getAdminUsers().catch(de=>(console.error("Error loading admin users:",de),[]))]);a(te);const ge=ve.filter(de=>de.role==="admin"),le=[...me,...ge];d(le),m(se)}}catch(V){console.error("Error loading admin data:",V)}finally{b(!1)}},P=async V=>{if(e!=="admin"&&e!=="super_admin"){alert("Error: Only administrators and super administrators can approve user accounts");return}const Y=i.find(te=>te.id===V);if(Y){if(e==="admin"&&Y.role!=="staff"){alert("Error: Administrators can only approve staff accounts. Contact a super admin to approve administrator accounts.");return}try{if(Y.authProvider==="google"){await Me.approveGoogleUser(V,n);const te=Y.role==="super_admin"?"Super Administrator":Y.role==="admin"?"Administrator":"Staff Member";alert(`Google ${te} approved successfully. They can now sign in with their Google account.`)}else{const te=prompt("Enter password for new user:");if(!te)return;await Me.approveUser(V,te,n);const me=Y.role==="super_admin"?"Super Administrator":Y.role==="admin"?"Administrator":"Staff Member";alert(`${me} approved successfully. They can now sign in with their email and the password you set.`)}await $()}catch(te){console.error("Error approving user:",te);const me=te instanceof Error?te.message:"Unknown error occurred";alert(`Error approving user: ${me}`)}}},z=async V=>{const Y=prompt("Enter rejection reason (optional):");try{await Me.rejectUser(V,Y||"Request denied",n),alert("User request rejected"),await $()}catch(te){console.error("Error rejecting user:",te),alert("Error rejecting user")}},M=async V=>{V.preventDefault(),k(!0);try{if(e!=="admin"&&e!=="super_admin")throw new Error("Only administrators and super administrators can create user accounts");if(e==="admin"&&A.role!=="staff")throw new Error("Administrators can only create staff accounts. Contact a super admin to create administrator accounts.");const Y=Me.getCurrentUser();if(!Y)throw new Error("No authenticated user found. Please sign in again.");await Me.createUser(A.email,A.password,A.name,A.role,Y.uid),L({email:"",name:"",password:"",role:"staff"}),N(!1);const te=A.role==="super_admin"?"Super Administrator":A.role==="admin"?"Administrator":"Staff Member";alert(`${te} account created successfully. Admin needs to sign in again.`),await $()}catch(Y){console.error("Error creating user:",Y);const te=Y instanceof Error?Y.message:"Unknown error occurred";alert(`Error creating user: ${te}`)}finally{k(!1)}},he=async V=>{const Y=c.find(te=>te.uid===V);if((Y==null?void 0:Y.role)==="super_admin"&&e!=="super_admin"){alert("Error: Insufficient privileges to delete super administrator accounts");return}if(confirm("Are you sure you want to delete this user?"))try{const te=Me.getCurrentUser();if(!te)throw new Error("No authenticated user found. Please sign in again.");await Me.deleteUser(V,te.uid),alert("User deleted successfully"),await $()}catch(te){console.error("Error deleting user:",te),alert("Error deleting user")}},xe=V=>{if(!(e==="super_admin"||e==="admin"&&(V.role==="staff"||V.uid===n))){alert("Error: You can only edit staff profiles and your own profile.");return}K(V),C(!0)},fe=async(V,Y)=>{try{const te=Me.getCurrentUser();if(!te)throw new Error("No authenticated user found. Please sign in again.");const me=c.find(ve=>ve.uid===V);if((me==null?void 0:me.role)==="super_admin"&&e!=="super_admin")throw new Error("Insufficient privileges to modify super administrator accounts");await Me.updateUserRole(V,Y,te.uid),await $()}catch(te){throw console.error("Error updating user role:",te),te}},Ee=()=>{C(!1),K(null)},W=V=>{v(V),$()},q=()=>{O(!0)},G=()=>{O(!1)};if(_||!y)return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),l.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})});const F=()=>t==="users"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs(Ke,{children:[l.jsxs(gt,{children:[l.jsxs(Et,{children:["Pending User Approvals (",i.length,")"]}),e==="admin"&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"As an admin, you can approve staff requests. Super admin requests require super admin approval."})]}),l.jsx(Qe,{children:e!=="admin"&&e!=="super_admin"?l.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-blue-600 text-sm",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Admin Required"}),l.jsx("p",{className:"text-sm text-blue-700",children:"User approval requires administrator privileges. Contact an admin to approve pending requests."}),i.length>0&&l.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[l.jsx("strong",{children:i.length})," user",i.length!==1?"s":""," waiting for approval."]})]})]})}):i.length===0?l.jsx("p",{className:"text-muted-foreground",children:"No pending user requests"}):l.jsx("div",{className:"space-y-4",children:i.map((V,Y)=>{const te=e==="super_admin"||e==="admin"&&V.role==="staff",me=V.role==="staff"&&V.requestedAdminId?p.find(se=>se.uid===V.requestedAdminId):null,ve=V.role==="staff"&&V.requestedAdminId===n;return l.jsxs("div",{className:`flex items-center justify-between p-4 border rounded transition-all ${ve?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"font-medium",children:V.name}),ve&&l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:" For You"})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:V.email}),l.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[l.jsx(et,{variant:V.role==="super_admin"?"destructive":V.role==="admin"?"default":"secondary",children:V.role==="super_admin"?"Super Admin":V.role==="admin"?"Admin":"Staff Member"}),V.authProvider&&l.jsx(et,{variant:"secondary",children:V.authProvider==="google"?" Google":" Email"}),V.role==="staff"&&me&&l.jsxs(et,{variant:"outline",className:"text-xs",children:[" Wants to work under: ",me.name]}),V.role==="staff"&&!me&&V.requestedAdminId&&l.jsx(et,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-700",children:" Admin not found"}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:["Requested: ",new Date(V.requestedAt).toLocaleDateString()]}),!te&&l.jsx(et,{variant:"outline",className:"text-xs",children:"Requires Super Admin"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ne,{size:"sm",onClick:()=>P(V.id),disabled:!te,title:te?"":"Only super admins can approve admin/super admin requests",children:"Approve"}),l.jsx(Ne,{size:"sm",variant:"destructive",onClick:()=>z(V.id),children:"Reject"})]})]},V.id||`pending-user-${Y}-${V.email}`)})})})]}),e==="super_admin"&&l.jsxs(Ke,{children:[l.jsxs(gt,{children:[l.jsx(Et,{children:"Staff Assignment Overview"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Overview of staff assignments across all administrators"})]}),l.jsx(Qe,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.map(V=>{const Y=c.filter(te=>te.role==="staff"&&te.assignedAdminId===V.uid);return l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-blue-600 text-sm",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:V.name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:V.email})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Assigned Staff:"}),l.jsx(et,{variant:"outline",children:Y.length})]}),Y.length>0&&l.jsxs("div",{className:"text-xs text-gray-500",children:[Y.slice(0,3).map(te=>te.name).join(", "),Y.length>3&&` +${Y.length-3} more`]})]})]},V.uid)}),(()=>{const V=c.filter(Y=>Y.role==="staff"&&!Y.assignedAdminId);return V.length>0&&l.jsxs("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-yellow-600 text-sm",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-yellow-800",children:"Unassigned Staff"}),l.jsx("p",{className:"text-xs text-yellow-600",children:"Need admin assignment"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-yellow-700",children:"Count:"}),l.jsx(et,{variant:"outline",className:"border-yellow-300",children:V.length})]}),V.length>0&&l.jsxs("div",{className:"text-xs text-yellow-600",children:[V.slice(0,3).map(Y=>Y.name).join(", "),V.length>3&&` +${V.length-3} more`]})]})]})})()]})})]}),l.jsxs(Ke,{children:[l.jsxs(gt,{children:[l.jsxs(Et,{children:["All Users (",c.length,")"]}),e==="admin"&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.jsx("p",{children:"You can see your assigned staff and other administrators."}),l.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-200 rounded"}),"Your Staff (",c.filter(V=>V.role==="staff"&&V.assignedAdminId===n).length,")"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 bg-yellow-100 border border-yellow-200 rounded"}),"Unassigned Staff (",c.filter(V=>V.role==="staff"&&!V.assignedAdminId).length,")"]})]})]})]}),l.jsx(Qe,{children:l.jsx("div",{className:"space-y-4",children:c.map((V,Y)=>{const te=e==="super_admin"||e==="admin"&&(V.role==="staff"||V.uid===n),me=e==="super_admin"||e==="admin"&&V.role==="staff"&&V.uid!==n,ve=V.role==="staff"&&V.assignedAdminId?p.find(le=>le.uid===V.assignedAdminId):null,se=V.role==="staff"&&V.assignedAdminId===n,ge=V.role==="staff"&&!V.assignedAdminId;return l.jsxs("div",{className:`flex items-center justify-between p-4 border rounded transition-all ${se?"border-green-200 bg-green-50":ge?"border-yellow-200 bg-yellow-50":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"font-medium",children:[V.name,V.uid===n&&l.jsx("span",{className:"text-xs text-blue-600 ml-2",children:"(You)"})]}),se&&l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Your Staff"}),ge&&l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" Unassigned"})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:V.email}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(et,{variant:V.role==="super_admin"?"destructive":V.role==="admin"?"default":"secondary",children:V.role==="super_admin"?"Super Admin":V.role==="admin"?"Administrator":"Staff Member"}),V.role==="staff"&&ve&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-xs text-gray-500",children:""}),l.jsxs(et,{variant:"outline",className:"text-xs",children:[" Reports to: ",ve.name]})]}),ge&&l.jsx(et,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-700",children:" Needs Assignment"}),V.role==="admin"&&l.jsxs(et,{variant:"outline",className:"text-xs",children:[" ",c.filter(le=>le.role==="staff"&&le.assignedAdminId===V.uid).length," Staff"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[te&&V.role!=="super_admin"&&l.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>xe(V),children:[l.jsx(Ah,{className:"h-4 w-4 mr-1"}),"Edit Role"]}),V.role==="super_admin"&&l.jsxs(Ne,{variant:"outline",size:"sm",disabled:!0,title:"Super admin roles cannot be modified for security reasons",children:[l.jsx(Ah,{className:"h-4 w-4 mr-1"}),"Protected"]}),!te&&V.role!=="super_admin"&&l.jsxs(Ne,{variant:"outline",size:"sm",disabled:!0,title:e==="admin"?"You can only edit staff profiles and your own profile":"Insufficient privileges",children:[l.jsx(Ah,{className:"h-4 w-4 mr-1"}),"Restricted"]}),me&&l.jsx(Ne,{variant:"destructive",size:"sm",onClick:()=>he(V.uid),children:"Delete"}),!me&&V.role!=="super_admin"&&V.uid!==n&&l.jsx(Ne,{variant:"destructive",size:"sm",disabled:!0,title:e==="admin"?"You can only delete staff accounts":"Insufficient privileges",children:"Delete"})]})]},V.uid||`user-${Y}-${V.email}`)})})})]})]}):t==="create"?e!=="admin"&&e!=="super_admin"?l.jsx("div",{children:l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsx(Et,{children:"Access Restricted"})}),l.jsx(Qe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-red-600 text-sm",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Admin Privileges Required"}),l.jsx("p",{className:"text-sm text-red-700",children:"Only administrators and super administrators can create user accounts."})]})]})}),l.jsx("p",{className:"text-muted-foreground text-sm",children:"If you need to create a user account, please contact an administrator."})]})})]})}):l.jsx("div",{children:l.jsxs(Ke,{children:[l.jsxs(gt,{children:[l.jsx(Et,{children:"Create New User"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="super_admin"?"Super Admin Privilege - Create accounts with any role":"Admin Privilege - Create staff accounts"})]}),l.jsx(Qe,{children:R?l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),l.jsx("input",{type:"text",required:!0,value:A.name,onChange:V=>L({...A,name:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),l.jsx("input",{type:"email",required:!0,value:A.email,onChange:V=>L({...A,email:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Password"}),l.jsx("input",{type:"password",required:!0,value:A.password,onChange:V=>L({...A,password:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password",minLength:6})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Role"}),l.jsxs("select",{value:A.role,onChange:V=>L({...A,role:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"staff",children:"Staff Member"}),e==="super_admin"&&l.jsxs(l.Fragment,{children:[l.jsx("option",{value:"admin",children:"Administrator"}),l.jsx("option",{value:"super_admin",children:"Super Administrator"})]})]}),e==="admin"&&l.jsx("p",{className:"text-xs text-muted-foreground",children:"As an admin, you can only create staff accounts. Contact a super admin to create administrator accounts."})]})]}),A.role==="super_admin"&&l.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-yellow-600 text-xs",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-yellow-800 mb-1",children:"Creating Super Administrator"}),l.jsx("p",{className:"text-sm text-yellow-700",children:"You are creating another super administrator account. This user will have complete system access including the ability to manage other super admins."})]})]})}),A.role==="admin"&&l.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-purple-600 text-xs",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-purple-800 mb-1",children:"Creating Administrator"}),l.jsx("p",{className:"text-sm text-purple-700",children:"You are creating an administrator account. This user will be able to manage staff accounts and create new staff members."})]})]})}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx(Ne,{type:"submit",disabled:j,children:j?"Creating...":"Create User"}),l.jsx(Ne,{type:"button",variant:"outline",onClick:()=>{N(!1),L({email:"",name:"",password:"",role:"staff"})},children:"Cancel"})]})]}):l.jsxs("div",{className:"space-y-4",children:[e==="super_admin"?l.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-blue-600 text-sm",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"Super Admin Privileges"}),l.jsx("p",{className:"text-sm text-blue-700",children:"As a super administrator, you can create accounts with any role including other super admins and administrators."})]})]})}):l.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 text-sm",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-green-800 mb-1",children:"Admin Privileges"}),l.jsx("p",{className:"text-sm text-green-700",children:"As an administrator, you can create staff member accounts. Contact a super admin to create administrator accounts."})]})]})}),l.jsx("p",{className:"text-muted-foreground",children:"Create a new user account with email and password authentication."}),l.jsx(Ne,{onClick:()=>N(!0),children:"Create New User"})]})})]})}):null;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold",children:[e==="super_admin"?"Super Admin Panel":"Admin Panel",y&&l.jsxs("span",{className:"text-lg font-medium text-gray-600 ml-2",children:["- ",y.name]})]}),l.jsx("p",{className:"text-muted-foreground",children:y?l.jsxs(l.Fragment,{children:["Welcome back, ",l.jsx("span",{className:"font-medium",children:y.name})," (",y.email,")  Manage users and system settings"]}):"Manage users and system settings"})]}),y&&l.jsxs(Ne,{variant:"outline",size:"sm",onClick:q,className:"flex items-center gap-2",children:[l.jsx(Wf,{className:"w-4 h-4"}),"Edit Profile"]})]}),l.jsx("div",{className:"flex space-x-4 border-b",children:[{id:"users",label:"User Management"},...e==="admin"||e==="super_admin"?[{id:"create",label:"Create User"}]:[]].map(V=>l.jsx("button",{onClick:()=>r(V.id),className:`px-4 py-2 ${t===V.id?"border-b-2 border-blue-500":""}`,children:V.label},V.id))}),F(),U&&l.jsx(n9,{isOpen:ee,user:U,currentUserRole:e,onRoleUpdate:fe,onClose:Ee}),y&&l.jsx(r9,{isOpen:T,userProfile:y,onProfileUpdate:W,onClose:G})]})};function f1({onNavigate:n}){const{userProfile:e}=Bf();if(!e)return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx(nr,{className:"h-9 w-48"}),l.jsx(nr,{className:"h-5 w-64 mt-2"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((r,i)=>l.jsxs(Ke,{children:[l.jsxs(gt,{className:"flex flex-row items-center justify-between pb-2",children:[l.jsx(nr,{className:"h-4 w-20"}),l.jsx(nr,{className:"h-9 w-9 rounded-lg"})]}),l.jsx(Qe,{children:l.jsx(nr,{className:"h-8 w-12"})})]},i))}),l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsx(nr,{className:"h-6 w-32"})}),l.jsx(Qe,{children:l.jsx(nr,{className:"h-4 w-full"})})]})]});if(e.role==="admin"||e.role==="super_admin")return l.jsx(i9,{currentUserUid:e.uid,userRole:e.role});const t=[{title:"My Tasks",value:0,icon:eT,onClick:()=>n("tasks")},{title:"My Receipts",value:0,icon:nT,onClick:()=>n("receipts")},{title:"Files",value:0,icon:ZN,onClick:()=>n("files")},{title:"Directory",value:0,icon:Gf,onClick:()=>n("employees")}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),l.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e==null?void 0:e.name,"!",l.jsxs("span",{className:"ml-2 inline-flex items-center gap-1",children:[l.jsx(fs,{className:"h-4 w-4"}),e==null?void 0:e.role]})]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.map(r=>{const i=r.icon;return l.jsxs(Ke,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:r.onClick,children:[l.jsxs(gt,{className:"flex flex-row items-center justify-between pb-2",children:[l.jsx(Et,{className:"text-sm font-medium",children:r.title}),l.jsx("div",{className:"p-2 rounded-lg bg-gray-50 dark:bg-gray-950",children:l.jsx(i,{className:"h-5 w-5"})})]}),l.jsx(Qe,{children:l.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title)})}),l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsx(Et,{children:"Getting Started"})}),l.jsx(Qe,{children:l.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to the Office Management System. Use the navigation menu to access your tasks, receipts, and files."})})]})]})}const lf=E.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:As("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));lf.displayName="Textarea";var pw="Dialog",[JI]=wi(pw),[o9,qr]=JI(pw),ZI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:a,modal:c=!0}=n,d=E.useRef(null),p=E.useRef(null),[m=!1,y]=Al({prop:r,defaultProp:i,onChange:a});return l.jsx(o9,{scope:e,triggerRef:d,contentRef:p,contentId:ws(),titleId:ws(),descriptionId:ws(),open:m,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(v=>!v),[y]),modal:c,children:t})};ZI.displayName=pw;var eA="DialogTrigger",tA=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=qr(eA,t),a=vt(e,i.triggerRef);return l.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":yw(i.open),...r,ref:a,onClick:Oe(n.onClick,i.onOpenToggle)})});tA.displayName=eA;var mw="DialogPortal",[a9,nA]=JI(mw,{forceMount:void 0}),rA=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,a=qr(mw,e);return l.jsx(a9,{scope:e,forceMount:t,children:E.Children.map(r,c=>l.jsx(xi,{present:t||a.open,children:l.jsx(np,{asChild:!0,container:i,children:c})}))})};rA.displayName=mw;var cf="DialogOverlay",sA=E.forwardRef((n,e)=>{const t=nA(cf,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=qr(cf,n.__scopeDialog);return a.modal?l.jsx(xi,{present:r||a.open,children:l.jsx(l9,{...i,ref:e})}):null});sA.displayName=cf;var l9=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=qr(cf,t);return l.jsx(op,{as:pi,allowPinchZoom:!0,shards:[i.contentRef],children:l.jsx(Je.div,{"data-state":yw(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),pa="DialogContent",iA=E.forwardRef((n,e)=>{const t=nA(pa,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=qr(pa,n.__scopeDialog);return l.jsx(xi,{present:r||a.open,children:a.modal?l.jsx(c9,{...i,ref:e}):l.jsx(u9,{...i,ref:e})})});iA.displayName=pa;var c9=E.forwardRef((n,e)=>{const t=qr(pa,n.__scopeDialog),r=E.useRef(null),i=vt(e,t.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return rw(a)},[]),l.jsx(oA,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(n.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Oe(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&a.preventDefault()}),onFocusOutside:Oe(n.onFocusOutside,a=>a.preventDefault())})}),u9=E.forwardRef((n,e)=>{const t=qr(pa,n.__scopeDialog),r=E.useRef(!1),i=E.useRef(!1);return l.jsx(oA,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,d;(c=n.onCloseAutoFocus)==null||c.call(n,a),a.defaultPrevented||(r.current||(d=t.triggerRef.current)==null||d.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var p,m;(p=n.onInteractOutside)==null||p.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),oA=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...c}=n,d=qr(pa,t),p=E.useRef(null),m=vt(e,p);return Kv(),l.jsxs(l.Fragment,{children:[l.jsx(Yf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:l.jsx(Qf,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":yw(d.open),...c,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(h9,{titleId:d.titleId}),l.jsx(p9,{contentRef:p,descriptionId:d.descriptionId})]})]})}),gw="DialogTitle",aA=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=qr(gw,t);return l.jsx(Je.h2,{id:i.titleId,...r,ref:e})});aA.displayName=gw;var lA="DialogDescription",d9=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=qr(lA,t);return l.jsx(Je.p,{id:i.descriptionId,...r,ref:e})});d9.displayName=lA;var cA="DialogClose",uA=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=qr(cA,t);return l.jsx(Je.button,{type:"button",...r,ref:e,onClick:Oe(n.onClick,()=>i.onOpenChange(!1))})});uA.displayName=cA;function yw(n){return n?"open":"closed"}var dA="DialogTitleWarning",[Xz,hA]=Q3(dA,{contentName:pa,titleName:gw,docsSlug:"dialog"}),h9=({titleId:n})=>{const e=hA(dA),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},f9="DialogDescriptionWarning",p9=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hA(f9).contentName}}.`;return E.useEffect(()=>{var a;const i=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},m9=ZI,g9=tA,y9=rA,v9=sA,w9=iA,x9=aA,_9=uA;function ti({...n}){return l.jsx(m9,{"data-slot":"dialog",...n})}function vw({...n}){return l.jsx(g9,{"data-slot":"dialog-trigger",...n})}function E9({...n}){return l.jsx(y9,{"data-slot":"dialog-portal",...n})}function S9({className:n,...e}){return l.jsx(v9,{"data-slot":"dialog-overlay",className:St("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function ni({className:n,children:e,...t}){return l.jsxs(E9,{"data-slot":"dialog-portal",children:[l.jsx(S9,{}),l.jsxs(w9,{"data-slot":"dialog-content",className:St("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,l.jsxs(_9,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[l.jsx(mi,{}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ri({className:n,...e}){return l.jsx("div",{"data-slot":"dialog-header",className:St("flex flex-col gap-2 text-center sm:text-left",n),...e})}function si({className:n,...e}){return l.jsx(x9,{"data-slot":"dialog-title",className:St("text-lg leading-none font-semibold",n),...e})}function p1(n,[e,t]){return Math.min(t,Math.max(e,n))}function b9(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var N9="VisuallyHidden",fA=E.forwardRef((n,e)=>l.jsx(Je.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));fA.displayName=N9;var T9=[" ","Enter","ArrowUp","ArrowDown"],I9=[" ","Enter"],Vu="Select",[cp,up,A9]=Gv(Vu),[Bl]=wi(Vu,[A9,tp]),dp=tp(),[C9,_o]=Bl(Vu),[R9,k9]=Bl(Vu),pA=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:a,value:c,defaultValue:d,onValueChange:p,dir:m,name:y,autoComplete:v,disabled:_,required:b,form:R}=n,N=dp(e),[A,L]=E.useState(null),[j,k]=E.useState(null),[U,K]=E.useState(!1),ee=Kf(m),[C=!1,T]=Al({prop:r,defaultProp:i,onChange:a}),[O,$]=Al({prop:c,defaultProp:d,onChange:p}),P=E.useRef(null),z=A?R||!!A.closest("form"):!0,[M,he]=E.useState(new Set),xe=Array.from(M).map(fe=>fe.props.value).join(";");return l.jsx(VT,{...N,children:l.jsxs(C9,{required:b,scope:e,trigger:A,onTriggerChange:L,valueNode:j,onValueNodeChange:k,valueNodeHasChildren:U,onValueNodeHasChildrenChange:K,contentId:ws(),value:O,onValueChange:$,open:C,onOpenChange:T,dir:ee,triggerPointerDownPosRef:P,disabled:_,children:[l.jsx(cp.Provider,{scope:e,children:l.jsx(R9,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(fe=>{he(Ee=>new Set(Ee).add(fe))},[]),onNativeOptionRemove:E.useCallback(fe=>{he(Ee=>{const W=new Set(Ee);return W.delete(fe),W})},[]),children:t})}),z?l.jsxs(LA,{"aria-hidden":!0,required:b,tabIndex:-1,name:y,autoComplete:v,value:O,onChange:fe=>$(fe.target.value),disabled:_,form:R,children:[O===void 0?l.jsx("option",{value:""}):null,Array.from(M)]},xe):null]})})};pA.displayName=Vu;var mA="SelectTrigger",gA=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,a=dp(t),c=_o(mA,t),d=c.disabled||r,p=vt(e,c.onTriggerChange),m=up(t),y=E.useRef("touch"),[v,_,b]=VA(N=>{const A=m().filter(k=>!k.disabled),L=A.find(k=>k.value===c.value),j=FA(A,N,L);j!==void 0&&c.onValueChange(j.value)}),R=N=>{d||(c.onOpenChange(!0),b()),N&&(c.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return l.jsx(FT,{asChild:!0,...a,children:l.jsx(Je.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":OA(c.value)?"":void 0,...i,ref:p,onClick:Oe(i.onClick,N=>{N.currentTarget.focus(),y.current!=="mouse"&&R(N)}),onPointerDown:Oe(i.onPointerDown,N=>{y.current=N.pointerType;const A=N.target;A.hasPointerCapture(N.pointerId)&&A.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(R(N),N.preventDefault())}),onKeyDown:Oe(i.onKeyDown,N=>{const A=v.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&_(N.key),!(A&&N.key===" ")&&T9.includes(N.key)&&(R(),N.preventDefault())})})})});gA.displayName=mA;var yA="SelectValue",vA=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:a,placeholder:c="",...d}=n,p=_o(yA,t),{onValueNodeHasChildrenChange:m}=p,y=a!==void 0,v=vt(e,p.onValueNodeChange);return gn(()=>{m(y)},[m,y]),l.jsx(Je.span,{...d,ref:v,style:{pointerEvents:"none"},children:OA(p.value)?l.jsx(l.Fragment,{children:c}):a})});vA.displayName=yA;var P9="SelectIcon",wA=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return l.jsx(Je.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});wA.displayName=P9;var j9="SelectPortal",xA=n=>l.jsx(np,{asChild:!0,...n});xA.displayName=j9;var ma="SelectContent",_A=E.forwardRef((n,e)=>{const t=_o(ma,n.__scopeSelect),[r,i]=E.useState();if(gn(()=>{i(new DocumentFragment)},[]),!t.open){const a=r;return a?ju.createPortal(l.jsx(EA,{scope:n.__scopeSelect,children:l.jsx(cp.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(SA,{...n,ref:e})});_A.displayName=ma;var jr=10,[EA,Eo]=Bl(ma),D9="SelectContentImpl",SA=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:c,side:d,sideOffset:p,align:m,alignOffset:y,arrowPadding:v,collisionBoundary:_,collisionPadding:b,sticky:R,hideWhenDetached:N,avoidCollisions:A,...L}=n,j=_o(ma,t),[k,U]=E.useState(null),[K,ee]=E.useState(null),C=vt(e,se=>U(se)),[T,O]=E.useState(null),[$,P]=E.useState(null),z=up(t),[M,he]=E.useState(!1),xe=E.useRef(!1);E.useEffect(()=>{if(k)return rw(k)},[k]),Kv();const fe=E.useCallback(se=>{const[ge,...le]=z().map(Ve=>Ve.ref.current),[de]=le.slice(-1),Te=document.activeElement;for(const Ve of se)if(Ve===Te||(Ve==null||Ve.scrollIntoView({block:"nearest"}),Ve===ge&&K&&(K.scrollTop=0),Ve===de&&K&&(K.scrollTop=K.scrollHeight),Ve==null||Ve.focus(),document.activeElement!==Te))return},[z,K]),Ee=E.useCallback(()=>fe([T,k]),[fe,T,k]);E.useEffect(()=>{M&&Ee()},[M,Ee]);const{onOpenChange:W,triggerPointerDownPosRef:q}=j;E.useEffect(()=>{if(k){let se={x:0,y:0};const ge=de=>{var Te,Ve;se={x:Math.abs(Math.round(de.pageX)-(((Te=q.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Ve=q.current)==null?void 0:Ve.y)??0))}},le=de=>{se.x<=10&&se.y<=10?de.preventDefault():k.contains(de.target)||W(!1),document.removeEventListener("pointermove",ge),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",le,{capture:!0})}}},[k,W,q]),E.useEffect(()=>{const se=()=>W(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[W]);const[G,F]=VA(se=>{const ge=z().filter(Te=>!Te.disabled),le=ge.find(Te=>Te.ref.current===document.activeElement),de=FA(ge,se,le);de&&setTimeout(()=>de.ref.current.focus())}),V=E.useCallback((se,ge,le)=>{const de=!xe.current&&!le;(j.value!==void 0&&j.value===ge||de)&&(O(se),de&&(xe.current=!0))},[j.value]),Y=E.useCallback(()=>k==null?void 0:k.focus(),[k]),te=E.useCallback((se,ge,le)=>{const de=!xe.current&&!le;(j.value!==void 0&&j.value===ge||de)&&P(se)},[j.value]),me=r==="popper"?by:bA,ve=me===by?{side:d,sideOffset:p,align:m,alignOffset:y,arrowPadding:v,collisionBoundary:_,collisionPadding:b,sticky:R,hideWhenDetached:N,avoidCollisions:A}:{};return l.jsx(EA,{scope:t,content:k,viewport:K,onViewportChange:ee,itemRefCallback:V,selectedItem:T,onItemLeave:Y,itemTextRefCallback:te,focusSelectedItem:Ee,selectedItemText:$,position:r,isPositioned:M,searchRef:G,children:l.jsx(op,{as:pi,allowPinchZoom:!0,children:l.jsx(Yf,{asChild:!0,trapped:j.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Oe(i,se=>{var ge;(ge=j.trigger)==null||ge.focus({preventScroll:!0}),se.preventDefault()}),children:l.jsx(Qf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:l.jsx(me,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:se=>se.preventDefault(),...L,...ve,onPlaced:()=>he(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:Oe(L.onKeyDown,se=>{const ge=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!ge&&se.key.length===1&&F(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let de=z().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(se.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Te=se.target,Ve=de.indexOf(Te);de=de.slice(Ve+1)}setTimeout(()=>fe(de)),se.preventDefault()}})})})})})})});SA.displayName=D9;var M9="SelectItemAlignedPosition",bA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,a=_o(ma,t),c=Eo(ma,t),[d,p]=E.useState(null),[m,y]=E.useState(null),v=vt(e,C=>y(C)),_=up(t),b=E.useRef(!1),R=E.useRef(!0),{viewport:N,selectedItem:A,selectedItemText:L,focusSelectedItem:j}=c,k=E.useCallback(()=>{if(a.trigger&&a.valueNode&&d&&m&&N&&A&&L){const C=a.trigger.getBoundingClientRect(),T=m.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),$=L.getBoundingClientRect();if(a.dir!=="rtl"){const Te=$.left-T.left,Ve=O.left-Te,tt=C.left-Ve,ht=C.width+tt,Wn=Math.max(ht,T.width),Zt=window.innerWidth-jr,ln=p1(Ve,[jr,Math.max(jr,Zt-Wn)]);d.style.minWidth=ht+"px",d.style.left=ln+"px"}else{const Te=T.right-$.right,Ve=window.innerWidth-O.right-Te,tt=window.innerWidth-C.right-Ve,ht=C.width+tt,Wn=Math.max(ht,T.width),Zt=window.innerWidth-jr,ln=p1(Ve,[jr,Math.max(jr,Zt-Wn)]);d.style.minWidth=ht+"px",d.style.right=ln+"px"}const P=_(),z=window.innerHeight-jr*2,M=N.scrollHeight,he=window.getComputedStyle(m),xe=parseInt(he.borderTopWidth,10),fe=parseInt(he.paddingTop,10),Ee=parseInt(he.borderBottomWidth,10),W=parseInt(he.paddingBottom,10),q=xe+fe+M+W+Ee,G=Math.min(A.offsetHeight*5,q),F=window.getComputedStyle(N),V=parseInt(F.paddingTop,10),Y=parseInt(F.paddingBottom,10),te=C.top+C.height/2-jr,me=z-te,ve=A.offsetHeight/2,se=A.offsetTop+ve,ge=xe+fe+se,le=q-ge;if(ge<=te){const Te=P.length>0&&A===P[P.length-1].ref.current;d.style.bottom="0px";const Ve=m.clientHeight-N.offsetTop-N.offsetHeight,tt=Math.max(me,ve+(Te?Y:0)+Ve+Ee),ht=ge+tt;d.style.height=ht+"px"}else{const Te=P.length>0&&A===P[0].ref.current;d.style.top="0px";const tt=Math.max(te,xe+N.offsetTop+(Te?V:0)+ve)+le;d.style.height=tt+"px",N.scrollTop=ge-te+N.offsetTop}d.style.margin=`${jr}px 0`,d.style.minHeight=G+"px",d.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[_,a.trigger,a.valueNode,d,m,N,A,L,a.dir,r]);gn(()=>k(),[k]);const[U,K]=E.useState();gn(()=>{m&&K(window.getComputedStyle(m).zIndex)},[m]);const ee=E.useCallback(C=>{C&&R.current===!0&&(k(),j==null||j(),R.current=!1)},[k,j]);return l.jsx(L9,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:b,onScrollButtonChange:ee,children:l.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:l.jsx(Je.div,{...i,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});bA.displayName=M9;var O9="SelectPopperPosition",by=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=jr,...a}=n,c=dp(t);return l.jsx(UT,{...c,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});by.displayName=O9;var[L9,ww]=Bl(ma,{}),Ny="SelectViewport",NA=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,a=Eo(Ny,t),c=ww(Ny,t),d=vt(e,a.onViewportChange),p=E.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(cp.Slot,{scope:t,children:l.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Oe(i.onScroll,m=>{const y=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:_}=c;if(_!=null&&_.current&&v){const b=Math.abs(p.current-y.scrollTop);if(b>0){const R=window.innerHeight-jr*2,N=parseFloat(v.style.minHeight),A=parseFloat(v.style.height),L=Math.max(N,A);if(L<R){const j=L+b,k=Math.min(R,j),U=j-k;v.style.height=k+"px",v.style.bottom==="0px"&&(y.scrollTop=U>0?U:0,v.style.justifyContent="flex-end")}}}p.current=y.scrollTop})})})]})});NA.displayName=Ny;var TA="SelectGroup",[V9,F9]=Bl(TA),U9=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=ws();return l.jsx(V9,{scope:t,id:i,children:l.jsx(Je.div,{role:"group","aria-labelledby":i,...r,ref:e})})});U9.displayName=TA;var IA="SelectLabel",z9=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=F9(IA,t);return l.jsx(Je.div,{id:i.id,...r,ref:e})});z9.displayName=IA;var uf="SelectItem",[$9,AA]=Bl(uf),CA=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:a,...c}=n,d=_o(uf,t),p=Eo(uf,t),m=d.value===r,[y,v]=E.useState(a??""),[_,b]=E.useState(!1),R=vt(e,j=>{var k;return(k=p.itemRefCallback)==null?void 0:k.call(p,j,r,i)}),N=ws(),A=E.useRef("touch"),L=()=>{i||(d.onValueChange(r),d.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx($9,{scope:t,value:r,disabled:i,textId:N,isSelected:m,onItemTextChange:E.useCallback(j=>{v(k=>k||((j==null?void 0:j.textContent)??"").trim())},[]),children:l.jsx(cp.ItemSlot,{scope:t,value:r,disabled:i,textValue:y,children:l.jsx(Je.div,{role:"option","aria-labelledby":N,"data-highlighted":_?"":void 0,"aria-selected":m&&_,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:R,onFocus:Oe(c.onFocus,()=>b(!0)),onBlur:Oe(c.onBlur,()=>b(!1)),onClick:Oe(c.onClick,()=>{A.current!=="mouse"&&L()}),onPointerUp:Oe(c.onPointerUp,()=>{A.current==="mouse"&&L()}),onPointerDown:Oe(c.onPointerDown,j=>{A.current=j.pointerType}),onPointerMove:Oe(c.onPointerMove,j=>{var k;A.current=j.pointerType,i?(k=p.onItemLeave)==null||k.call(p):A.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Oe(c.onPointerLeave,j=>{var k;j.currentTarget===document.activeElement&&((k=p.onItemLeave)==null||k.call(p))}),onKeyDown:Oe(c.onKeyDown,j=>{var U;((U=p.searchRef)==null?void 0:U.current)!==""&&j.key===" "||(I9.includes(j.key)&&L(),j.key===" "&&j.preventDefault())})})})})});CA.displayName=uf;var qc="SelectItemText",RA=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...a}=n,c=_o(qc,t),d=Eo(qc,t),p=AA(qc,t),m=k9(qc,t),[y,v]=E.useState(null),_=vt(e,L=>v(L),p.onItemTextChange,L=>{var j;return(j=d.itemTextRefCallback)==null?void 0:j.call(d,L,p.value,p.disabled)}),b=y==null?void 0:y.textContent,R=E.useMemo(()=>l.jsx("option",{value:p.value,disabled:p.disabled,children:b},p.value),[p.disabled,p.value,b]),{onNativeOptionAdd:N,onNativeOptionRemove:A}=m;return gn(()=>(N(R),()=>A(R)),[N,A,R]),l.jsxs(l.Fragment,{children:[l.jsx(Je.span,{id:p.textId,...a,ref:_}),p.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ju.createPortal(a.children,c.valueNode):null]})});RA.displayName=qc;var kA="SelectItemIndicator",PA=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return AA(kA,t).isSelected?l.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});PA.displayName=kA;var Ty="SelectScrollUpButton",jA=E.forwardRef((n,e)=>{const t=Eo(Ty,n.__scopeSelect),r=ww(Ty,n.__scopeSelect),[i,a]=E.useState(!1),c=vt(e,r.onScrollButtonChange);return gn(()=>{if(t.viewport&&t.isPositioned){let d=function(){const m=p.scrollTop>0;a(m)};const p=t.viewport;return d(),p.addEventListener("scroll",d),()=>p.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?l.jsx(MA,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:p}=t;d&&p&&(d.scrollTop=d.scrollTop-p.offsetHeight)}}):null});jA.displayName=Ty;var Iy="SelectScrollDownButton",DA=E.forwardRef((n,e)=>{const t=Eo(Iy,n.__scopeSelect),r=ww(Iy,n.__scopeSelect),[i,a]=E.useState(!1),c=vt(e,r.onScrollButtonChange);return gn(()=>{if(t.viewport&&t.isPositioned){let d=function(){const m=p.scrollHeight-p.clientHeight,y=Math.ceil(p.scrollTop)<m;a(y)};const p=t.viewport;return d(),p.addEventListener("scroll",d),()=>p.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?l.jsx(MA,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:p}=t;d&&p&&(d.scrollTop=d.scrollTop+p.offsetHeight)}}):null});DA.displayName=Iy;var MA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,a=Eo("SelectScrollButton",t),c=E.useRef(null),d=up(t),p=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>p(),[p]),gn(()=>{var y;const m=d().find(v=>v.ref.current===document.activeElement);(y=m==null?void 0:m.ref.current)==null||y.scrollIntoView({block:"nearest"})},[d]),l.jsx(Je.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Oe(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Oe(i.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Oe(i.onPointerLeave,()=>{p()})})}),B9="SelectSeparator",q9=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});q9.displayName=B9;var Ay="SelectArrow",W9=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=dp(t),a=_o(Ay,t),c=Eo(Ay,t);return a.open&&c.position==="popper"?l.jsx(zT,{...i,...r,ref:e}):null});W9.displayName=Ay;function OA(n){return n===""||n===void 0}var LA=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=E.useRef(null),a=vt(e,i),c=b9(t);return E.useEffect(()=>{const d=i.current,p=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(p,"value").set;if(c!==t&&y){const v=new Event("change",{bubbles:!0});y.call(d,t),d.dispatchEvent(v)}},[c,t]),l.jsx(fA,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});LA.displayName="BubbleSelect";function VA(n){const e=ur(n),t=E.useRef(""),r=E.useRef(0),i=E.useCallback(c=>{const d=t.current+c;e(d),(function p(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>p(""),1e3))})(d)},[e]),a=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,a]}function FA(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=H9(n,Math.max(a,0));i.length===1&&(c=c.filter(m=>m!==t));const p=c.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function H9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var G9=pA,K9=gA,Q9=vA,Y9=wA,X9=xA,J9=_A,Z9=NA,ez=CA,tz=RA,nz=PA,rz=jA,sz=DA;function ii({...n}){return l.jsx(G9,{"data-slot":"select",...n})}function oi({...n}){return l.jsx(Q9,{"data-slot":"select-value",...n})}function ai({className:n,size:e="default",children:t,...r}){return l.jsxs(K9,{"data-slot":"select-trigger","data-size":e,className:St("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,l.jsx(Y9,{asChild:!0,children:l.jsx($v,{className:"size-4 opacity-50"})})]})}function li({className:n,children:e,position:t="popper",...r}){return l.jsx(X9,{children:l.jsxs(J9,{"data-slot":"select-content",className:St("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(iz,{}),l.jsx(Z9,{className:St("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),l.jsx(oz,{})]})})}function Xt({className:n,children:e,...t}){return l.jsxs(ez,{"data-slot":"select-item",className:St("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[l.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:l.jsx(nz,{children:l.jsx(hu,{className:"size-4"})})}),l.jsx(tz,{children:e})]})}function iz({className:n,...e}){return l.jsx(rz,{"data-slot":"select-scroll-up-button",className:St("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(RV,{className:"size-4"})})}function oz({className:n,...e}){return l.jsx(sz,{"data-slot":"select-scroll-down-button",className:St("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx($v,{className:"size-4"})})}function az(){const{tasks:n,addTask:e,updateTask:t,deleteTask:r}=Vv(),[i,a]=E.useState(!1),[c,d]=E.useState(null),[p,m]=E.useState("all"),[y,v]=E.useState({title:"",description:"",status:"pending",priority:"medium",assignee:"",dueDate:new Date().toISOString().split("T")[0]}),_=()=>{v({title:"",description:"",status:"pending",priority:"medium",assignee:"",dueDate:new Date().toISOString().split("T")[0]}),d(null)},b=k=>{k.preventDefault(),c?t(c.id,y):e(y),a(!1),_()},R=k=>{d(k),v({title:k.title,description:k.description,status:k.status,priority:k.priority,assignee:k.assignee,dueDate:k.dueDate}),a(!0)},N=k=>{confirm("Are you sure you want to delete this task?")&&r(k)},A=p==="all"?n:n.filter(k=>k.status===p),L=k=>{switch(k){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"in-progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}},j=k=>{switch(k){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Task Manager"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage and track your tasks"})]}),l.jsxs(ti,{open:i,onOpenChange:k=>{a(k),k||_()},children:[l.jsx(vw,{asChild:!0,children:l.jsxs(Ne,{children:[l.jsx(qv,{className:"mr-2 h-4 w-4"}),"Add Task"]})}),l.jsxs(ni,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(ri,{children:l.jsx(si,{children:c?"Edit Task":"Create New Task"})}),l.jsxs("form",{onSubmit:b,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"title",children:"Title"}),l.jsx(mn,{id:"title",value:y.title,onChange:k=>v({...y,title:k.target.value}),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"description",children:"Description"}),l.jsx(lf,{id:"description",value:y.description,onChange:k=>v({...y,description:k.target.value}),rows:4})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"status",children:"Status"}),l.jsxs(ii,{value:y.status,onValueChange:k=>v({...y,status:k}),children:[l.jsx(ai,{children:l.jsx(oi,{})}),l.jsxs(li,{children:[l.jsx(Xt,{value:"pending",children:"Pending"}),l.jsx(Xt,{value:"in-progress",children:"In Progress"}),l.jsx(Xt,{value:"completed",children:"Completed"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"priority",children:"Priority"}),l.jsxs(ii,{value:y.priority,onValueChange:k=>v({...y,priority:k}),children:[l.jsx(ai,{children:l.jsx(oi,{})}),l.jsxs(li,{children:[l.jsx(Xt,{value:"low",children:"Low"}),l.jsx(Xt,{value:"medium",children:"Medium"}),l.jsx(Xt,{value:"high",children:"High"})]})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"assignee",children:"Assignee"}),l.jsx(mn,{id:"assignee",value:y.assignee,onChange:k=>v({...y,assignee:k.target.value}),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"dueDate",children:"Due Date"}),l.jsx(mn,{id:"dueDate",type:"date",value:y.dueDate,onChange:k=>v({...y,dueDate:k.target.value}),required:!0})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(Ne,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),l.jsxs(Ne,{type:"submit",children:[c?"Update":"Create"," Task"]})]})]})]})]})]}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Be,{children:"Filter by Status:"}),l.jsxs(ii,{value:p,onValueChange:m,children:[l.jsx(ai,{className:"w-48",children:l.jsx(oi,{})}),l.jsxs(li,{children:[l.jsx(Xt,{value:"all",children:"All Tasks"}),l.jsx(Xt,{value:"pending",children:"Pending"}),l.jsx(Xt,{value:"in-progress",children:"In Progress"}),l.jsx(Xt,{value:"completed",children:"Completed"})]})]})]})})}),l.jsx("div",{className:"grid gap-4",children:A.length===0?l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsx("p",{className:"text-center text-muted-foreground",children:"No tasks found. Create your first task to get started!"})})}):A.map(k=>l.jsxs(Ke,{className:"hover:shadow-md transition-shadow",children:[l.jsx(gt,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(Et,{className:"text-lg",children:k.title}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.description})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>R(k),children:l.jsx(I3,{className:"h-4 w-4"})}),l.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>N(k.id),children:l.jsx(Hf,{className:"h-4 w-4 text-destructive"})})]})]})}),l.jsx(Qe,{children:l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx(et,{className:L(k.status),children:k.status}),l.jsxs(et,{className:j(k.priority),children:[k.priority," priority"]}),l.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[l.jsx(zv,{className:"h-3 w-3"}),new Date(k.dueDate).toLocaleDateString()]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assigned to: ",k.assignee]})]})})]},k.id))})]})}var xw="Tabs",[lz]=wi(xw,[sp]),UA=sp(),[cz,_w]=lz(xw),zA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:a,orientation:c="horizontal",dir:d,activationMode:p="automatic",...m}=n,y=Kf(d),[v,_]=Al({prop:r,onChange:i,defaultProp:a});return l.jsx(cz,{scope:t,baseId:ws(),value:v,onValueChange:_,orientation:c,dir:y,activationMode:p,children:l.jsx(Je.div,{dir:y,"data-orientation":c,...m,ref:e})})});zA.displayName=xw;var $A="TabsList",BA=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,a=_w($A,t),c=UA(t);return l.jsx(GT,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});BA.displayName=$A;var qA="TabsTrigger",WA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...a}=n,c=_w(qA,t),d=UA(t),p=KA(c.baseId,r),m=QA(c.baseId,r),y=r===c.value;return l.jsx(KT,{asChild:!0,...d,focusable:!i,active:y,children:l.jsx(Je.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":m,"data-state":y?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:p,...a,ref:e,onMouseDown:Oe(n.onMouseDown,v=>{!i&&v.button===0&&v.ctrlKey===!1?c.onValueChange(r):v.preventDefault()}),onKeyDown:Oe(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(r)}),onFocus:Oe(n.onFocus,()=>{const v=c.activationMode!=="manual";!y&&!i&&v&&c.onValueChange(r)})})})});WA.displayName=qA;var HA="TabsContent",GA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:a,...c}=n,d=_w(HA,t),p=KA(d.baseId,r),m=QA(d.baseId,r),y=r===d.value,v=E.useRef(y);return E.useEffect(()=>{const _=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(_)},[]),l.jsx(xi,{present:i||y,children:({present:_})=>l.jsx(Je.div,{"data-state":y?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":p,hidden:!_,id:m,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:_&&a})})});GA.displayName=HA;function KA(n,e){return`${n}-trigger-${e}`}function QA(n,e){return`${n}-content-${e}`}var uz=zA,dz=BA,hz=WA,fz=GA;function YA({className:n,...e}){return l.jsx(uz,{"data-slot":"tabs",className:St("flex flex-col gap-2",n),...e})}function XA({className:n,...e}){return l.jsx(dz,{"data-slot":"tabs-list",className:St("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",n),...e})}function na({className:n,...e}){return l.jsx(hz,{"data-slot":"tabs-trigger",className:St("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function Wc({className:n,...e}){return l.jsx(fz,{"data-slot":"tabs-content",className:St("flex-1 outline-none",n),...e})}const mh={async getUserPreferences(n){try{const e=Xe(Ae,"user_preferences",n),t=await ir(e);if(t.exists())return t.data();{const r={uid:n,receiptViewScope:"all",defaultReceiptView:"all",aiDashboardViewScope:"all",createdAt:new Date,updatedAt:new Date};return await Dr(e,r),r}}catch(e){return console.error("Error getting user preferences:",e),{uid:n,receiptViewScope:"all",defaultReceiptView:"all",aiDashboardViewScope:"all",createdAt:new Date,updatedAt:new Date}}},async updateReceiptViewScope(n,e){try{const t=Xe(Ae,"user_preferences",n);await qn(t,{receiptViewScope:e,updatedAt:new Date}),console.log(`Updated receipt view scope for ${n}: ${e}`)}catch(t){throw console.error("Error updating receipt view scope:",t),t}},async updateAIDashboardViewScope(n,e){try{const t=Xe(Ae,"user_preferences",n);await qn(t,{aiDashboardViewScope:e,updatedAt:new Date}),console.log(`Updated AI dashboard view scope for ${n}: ${e}`)}catch(t){throw console.error("Error updating AI dashboard view scope:",t),t}},async updateDefaultReceiptView(n,e){try{const t=Xe(Ae,"user_preferences",n);await qn(t,{defaultReceiptView:e,receiptViewScope:e,updatedAt:new Date}),console.log(`Updated default receipt view for ${n}: ${e}`)}catch(t){throw console.error("Error updating default receipt view:",t),t}},async updatePreferences(n,e){try{const t=Xe(Ae,"user_preferences",n);await qn(t,{...e,updatedAt:new Date}),console.log(`Updated preferences for ${n}:`,e)}catch(t){throw console.error("Error updating preferences:",t),t}}};var mg={exports:{}},m1;function pz(){return m1||(m1=1,(function(n){var e=(function(t){var r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(q,G,F){q[G]=F.value},c,d=typeof Symbol=="function"?Symbol:{},p=d.iterator||"@@iterator",m=d.asyncIterator||"@@asyncIterator",y=d.toStringTag||"@@toStringTag";function v(q,G,F){return Object.defineProperty(q,G,{value:F,enumerable:!0,configurable:!0,writable:!0}),q[G]}try{v({},"")}catch{v=function(G,F,V){return G[F]=V}}function _(q,G,F,V){var Y=G&&G.prototype instanceof k?G:k,te=Object.create(Y.prototype),me=new fe(V||[]);return a(te,"_invoke",{value:z(q,F,me)}),te}t.wrap=_;function b(q,G,F){try{return{type:"normal",arg:q.call(G,F)}}catch(V){return{type:"throw",arg:V}}}var R="suspendedStart",N="suspendedYield",A="executing",L="completed",j={};function k(){}function U(){}function K(){}var ee={};v(ee,p,function(){return this});var C=Object.getPrototypeOf,T=C&&C(C(Ee([])));T&&T!==r&&i.call(T,p)&&(ee=T);var O=K.prototype=k.prototype=Object.create(ee);U.prototype=K,a(O,"constructor",{value:K,configurable:!0}),a(K,"constructor",{value:U,configurable:!0}),U.displayName=v(K,y,"GeneratorFunction");function $(q){["next","throw","return"].forEach(function(G){v(q,G,function(F){return this._invoke(G,F)})})}t.isGeneratorFunction=function(q){var G=typeof q=="function"&&q.constructor;return G?G===U||(G.displayName||G.name)==="GeneratorFunction":!1},t.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,K):(q.__proto__=K,v(q,y,"GeneratorFunction")),q.prototype=Object.create(O),q},t.awrap=function(q){return{__await:q}};function P(q,G){function F(te,me,ve,se){var ge=b(q[te],q,me);if(ge.type==="throw")se(ge.arg);else{var le=ge.arg,de=le.value;return de&&typeof de=="object"&&i.call(de,"__await")?G.resolve(de.__await).then(function(Te){F("next",Te,ve,se)},function(Te){F("throw",Te,ve,se)}):G.resolve(de).then(function(Te){le.value=Te,ve(le)},function(Te){return F("throw",Te,ve,se)})}}var V;function Y(te,me){function ve(){return new G(function(se,ge){F(te,me,se,ge)})}return V=V?V.then(ve,ve):ve()}a(this,"_invoke",{value:Y})}$(P.prototype),v(P.prototype,m,function(){return this}),t.AsyncIterator=P,t.async=function(q,G,F,V,Y){Y===void 0&&(Y=Promise);var te=new P(_(q,G,F,V),Y);return t.isGeneratorFunction(G)?te:te.next().then(function(me){return me.done?me.value:te.next()})};function z(q,G,F){var V=R;return function(te,me){if(V===A)throw new Error("Generator is already running");if(V===L){if(te==="throw")throw me;return W()}for(F.method=te,F.arg=me;;){var ve=F.delegate;if(ve){var se=M(ve,F);if(se){if(se===j)continue;return se}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(V===R)throw V=L,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);V=A;var ge=b(q,G,F);if(ge.type==="normal"){if(V=F.done?L:N,ge.arg===j)continue;return{value:ge.arg,done:F.done}}else ge.type==="throw"&&(V=L,F.method="throw",F.arg=ge.arg)}}}function M(q,G){var F=G.method,V=q.iterator[F];if(V===c)return G.delegate=null,F==="throw"&&q.iterator.return&&(G.method="return",G.arg=c,M(q,G),G.method==="throw")||F!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+F+"' method")),j;var Y=b(V,q.iterator,G.arg);if(Y.type==="throw")return G.method="throw",G.arg=Y.arg,G.delegate=null,j;var te=Y.arg;if(!te)return G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,j;if(te.done)G[q.resultName]=te.value,G.next=q.nextLoc,G.method!=="return"&&(G.method="next",G.arg=c);else return te;return G.delegate=null,j}$(O),v(O,y,"Generator"),v(O,p,function(){return this}),v(O,"toString",function(){return"[object Generator]"});function he(q){var G={tryLoc:q[0]};1 in q&&(G.catchLoc=q[1]),2 in q&&(G.finallyLoc=q[2],G.afterLoc=q[3]),this.tryEntries.push(G)}function xe(q){var G=q.completion||{};G.type="normal",delete G.arg,q.completion=G}function fe(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(he,this),this.reset(!0)}t.keys=function(q){var G=Object(q),F=[];for(var V in G)F.push(V);return F.reverse(),function Y(){for(;F.length;){var te=F.pop();if(te in G)return Y.value=te,Y.done=!1,Y}return Y.done=!0,Y}};function Ee(q){if(q){var G=q[p];if(G)return G.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var F=-1,V=function Y(){for(;++F<q.length;)if(i.call(q,F))return Y.value=q[F],Y.done=!1,Y;return Y.value=c,Y.done=!0,Y};return V.next=V}}return{next:W}}t.values=Ee;function W(){return{value:c,done:!0}}return fe.prototype={constructor:fe,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(xe),!q)for(var G in this)G.charAt(0)==="t"&&i.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=c)},stop:function(){this.done=!0;var q=this.tryEntries[0],G=q.completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var G=this;function F(se,ge){return te.type="throw",te.arg=q,G.next=se,ge&&(G.method="next",G.arg=c),!!ge}for(var V=this.tryEntries.length-1;V>=0;--V){var Y=this.tryEntries[V],te=Y.completion;if(Y.tryLoc==="root")return F("end");if(Y.tryLoc<=this.prev){var me=i.call(Y,"catchLoc"),ve=i.call(Y,"finallyLoc");if(me&&ve){if(this.prev<Y.catchLoc)return F(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return F(Y.finallyLoc)}else if(me){if(this.prev<Y.catchLoc)return F(Y.catchLoc,!0)}else if(ve){if(this.prev<Y.finallyLoc)return F(Y.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(q,G){for(var F=this.tryEntries.length-1;F>=0;--F){var V=this.tryEntries[F];if(V.tryLoc<=this.prev&&i.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var Y=V;break}}Y&&(q==="break"||q==="continue")&&Y.tryLoc<=G&&G<=Y.finallyLoc&&(Y=null);var te=Y?Y.completion:{};return te.type=q,te.arg=G,Y?(this.method="next",this.next=Y.finallyLoc,j):this.complete(te)},complete:function(q,G){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&G&&(this.next=G),j},finish:function(q){for(var G=this.tryEntries.length-1;G>=0;--G){var F=this.tryEntries[G];if(F.finallyLoc===q)return this.complete(F.completion,F.afterLoc),xe(F),j}},catch:function(q){for(var G=this.tryEntries.length-1;G>=0;--G){var F=this.tryEntries[G];if(F.tryLoc===q){var V=F.completion;if(V.type==="throw"){var Y=V.arg;xe(F)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function(q,G,F){return this.delegate={iterator:Ee(q),resultName:G,nextLoc:F},this.method==="next"&&(this.arg=c),j}},t})(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(mg)),mg.exports}var gg,g1;function Ew(){return g1||(g1=1,gg=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`),gg}var yg,y1;function JA(){if(y1)return yg;y1=1;const n=Ew();let e=0;return yg=({id:t,action:r,payload:i={}})=>{let a=t;return typeof a>"u"&&(a=n("Job",e),e+=1),{id:a,action:r,payload:i}},yg}var Oc={},v1;function Sw(){if(v1)return Oc;v1=1;let n=!1;return Oc.logging=n,Oc.setLogging=e=>{n=e},Oc.log=(...e)=>n?console.log.apply(this,e):null,Oc}var vg,w1;function mz(){if(w1)return vg;w1=1;const n=JA(),{log:e}=Sw(),t=Ew();let r=0;return vg=()=>{const i=t("Scheduler",r),a={},c={};let d=[];r+=1;const p=()=>d.length,m=()=>Object.keys(a).length,y=()=>{if(d.length!==0){const N=Object.keys(a);for(let A=0;A<N.length;A+=1)if(typeof c[N[A]]>"u"){d[0](a[N[A]]);break}}},v=(N,A)=>new Promise((L,j)=>{const k=n({action:N,payload:A});d.push(async U=>{d.shift(),c[U.id]=k;try{L(await U[N].apply(this,[...A,k.id]))}catch(K){j(K)}finally{delete c[U.id],y()}}),e(`[${i}]: Add ${k.id} to JobQueue`),e(`[${i}]: JobQueue length=${d.length}`),y()});return{addWorker:N=>(a[N.id]=N,e(`[${i}]: Add ${N.id}`),e(`[${i}]: Number of workers=${m()}`),y(),N.id),addJob:async(N,...A)=>{if(m()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return v(N,A)},terminate:async()=>{Object.keys(a).forEach(async N=>{await a[N].terminate()}),d=[]},getQueueLen:p,getNumWorkers:m}},vg}function gz(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wg,x1;function yz(){return x1||(x1=1,wg=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof gz=="function"&&(e.type="node"),typeof n>"u"?e:e[n]}),wg}var xg,_1;function vz(){if(_1)return xg;_1=1;const e=yz()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return xg=t=>{const r={...t};return["corePath","workerPath","langPath"].forEach(i=>{t[i]&&(r[i]=e(r[i]))}),r},xg}var _g,E1;function ZA(){return E1||(E1=1,_g={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),_g}const wz="7.0.0",xz={version:wz};var Eg,S1;function _z(){return S1||(S1=1,Eg={workerBlobURL:!0,logger:()=>{}}),Eg}var Sg,b1;function Ez(){if(b1)return Sg;b1=1;const n=xz.version;return Sg={..._z(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Sg}var bg,N1;function Sz(){return N1||(N1=1,bg=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(r))}else t=new Worker(n);return t}),bg}var Ng,T1;function bz(){return T1||(T1=1,Ng=n=>{n.terminate()}),Ng}var Tg,I1;function Nz(){return I1||(I1=1,Tg=(n,e)=>{n.onmessage=({data:t})=>{e(t)}}),Tg}var Ig,A1;function Tz(){return A1||(A1=1,Ig=async(n,e)=>{n.postMessage(e)}),Ig}var Ag,C1;function Iz(){if(C1)return Ag;C1=1;const n=t=>new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{r(a.result)},a.onerror=({target:{error:{code:c}}})=>{i(Error(`File could not be read! Code=${c}`))},a.readAsArrayBuffer(t)}),e=async t=>{let r=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?r=atob(t.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(r=await e(t.src)),t.tagName==="VIDEO"&&(r=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(i=>{t.toBlob(async a=>{r=await n(a),i()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const i=await t.convertToBlob();r=await n(i)}else(t instanceof File||t instanceof Blob)&&(r=await n(t));return new Uint8Array(r)};return Ag=e,Ag}var Cg,R1;function Az(){if(R1)return Cg;R1=1;const n=Ez(),e=Sz(),t=bz(),r=Nz(),i=Tz(),a=Iz();return Cg={defaultOptions:n,spawnWorker:e,terminateWorker:t,onMessage:r,send:i,loadImage:a},Cg}var Rg,k1;function eC(){if(k1)return Rg;k1=1;const n=vz(),e=JA(),{log:t}=Sw(),r=Ew(),i=ZA(),{defaultOptions:a,spawnWorker:c,terminateWorker:d,onMessage:p,loadImage:m,send:y}=Az();let v=0;return Rg=async(_="eng",b=i.LSTM_ONLY,R={},N={})=>{const A=r("Worker",v),{logger:L,errorHandler:j,...k}=n({...a,...R}),U={},K=typeof _=="string"?_.split("+"):_;let ee=b,C=N;const T=[i.DEFAULT,i.LSTM_ONLY].includes(b)&&!k.legacyCore;let O,$;const P=new Promise((le,de)=>{$=le,O=de}),z=le=>{O(le.message)};let M=c(k);M.onerror=z,v+=1;const he=({id:le,action:de,payload:Te})=>new Promise((Ve,tt)=>{t(`[${A}]: Start ${le}, action=${de}`);const ht=`${de}-${le}`;U[ht]={resolve:Ve,reject:tt},y(M,{workerId:A,jobId:le,action:de,payload:Te})}),xe=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),fe=le=>he(e({id:le,action:"load",payload:{options:{lstmOnly:T,corePath:k.corePath,logging:k.logging}}})),Ee=(le,de,Te)=>he(e({id:Te,action:"FS",payload:{method:"writeFile",args:[le,de]}})),W=(le,de)=>he(e({id:de,action:"FS",payload:{method:"readFile",args:[le,{encoding:"utf8"}]}})),q=(le,de)=>he(e({id:de,action:"FS",payload:{method:"unlink",args:[le]}})),G=(le,de,Te)=>he(e({id:Te,action:"FS",payload:{method:le,args:de}})),F=(le,de)=>he(e({id:de,action:"loadLanguage",payload:{langs:le,options:{langPath:k.langPath,dataPath:k.dataPath,cachePath:k.cachePath,cacheMethod:k.cacheMethod,gzip:k.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(ee)&&!k.legacyLang}}})),V=(le,de,Te,Ve)=>he(e({id:Ve,action:"initialize",payload:{langs:le,oem:de,config:Te}})),Y=(le="eng",de,Te,Ve)=>{if(T&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(de))throw Error("Legacy model requested but code missing.");const tt=de||ee;ee=tt;const ht=Te||C;C=ht;const Zt=(typeof le=="string"?le.split("+"):le).filter(ln=>!K.includes(ln));return K.push(...Zt),Zt.length>0?F(Zt,Ve).then(()=>V(le,tt,ht,Ve)):V(le,tt,ht,Ve)},te=(le={},de)=>he(e({id:de,action:"setParameters",payload:{params:le}})),me=async(le,de={},Te={text:!0},Ve)=>he(e({id:Ve,action:"recognize",payload:{image:await m(le),options:de,output:Te}})),ve=async(le,de)=>{if(T)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return he(e({id:de,action:"detect",payload:{image:await m(le)}}))},se=async()=>(M!==null&&(d(M),M=null),Promise.resolve());p(M,({workerId:le,jobId:de,status:Te,action:Ve,data:tt})=>{const ht=`${Ve}-${de}`;if(Te==="resolve")t(`[${le}]: Complete ${de}`),U[ht].resolve({jobId:de,data:tt}),delete U[ht];else if(Te==="reject")if(U[ht].reject(tt),delete U[ht],Ve==="load"&&O(tt),j)j(tt);else throw Error(tt);else Te==="progress"&&L({...tt,userJobId:de})});const ge={id:A,worker:M,load:xe,writeText:Ee,readText:W,removeFile:q,FS:G,reinitialize:Y,setParameters:te,recognize:me,detect:ve,terminate:se};return fe().then(()=>F(_)).then(()=>V(_,b,N)).then(()=>$(ge)).catch(()=>{}),P},Rg}var kg,P1;function Cz(){if(P1)return kg;P1=1;const n=eC();return kg={recognize:async(r,i,a)=>{const c=await n(i,1,a);return c.recognize(r).finally(async()=>{await c.terminate()})},detect:async(r,i)=>{const a=await n("osd",0,i);return a.detect(r).finally(async()=>{await a.terminate()})}},kg}var Pg,j1;function Rz(){return j1||(j1=1,Pg={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Pg}var jg,D1;function kz(){return D1||(D1=1,jg={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),jg}var Dg,M1;function Pz(){if(M1)return Dg;M1=1,pz();const n=mz(),e=eC(),t=Cz(),r=Rz(),i=ZA(),a=kz(),{setLogging:c}=Sw();return Dg={languages:r,OEM:i,PSM:a,createScheduler:n,createWorker:e,setLogging:c,...t},Dg}var jz=Pz();class Dz{constructor(){this.worker=null,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{this.worker=await jz.createWorker("eng"),await this.worker.setParameters({tessedit_char_whitelist:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.,/$-: ",tessedit_pageseg_mode:"6"}),this.isInitialized=!0,console.log("AI Receipt Scanner initialized successfully")}catch(e){throw console.error("Failed to initialize AI Receipt Scanner:",e),new Error("Failed to initialize OCR engine")}}async scanImage(e){(!this.isInitialized||!this.worker)&&await this.initialize();try{console.log("Starting OCR scan...");const{data:t}=await this.worker.recognize(e),r=this.extractReceiptData(t.text),i=this.categorizeReceipt(t.text,r);return{text:t.text,confidence:t.confidence,extractedData:r,suggestedCategory:i.category,categoryConfidence:i.confidence}}catch(t){throw console.error("OCR scanning failed:",t),new Error("Failed to scan receipt")}}extractReceiptData(e){const t=e.split(`
`).map(r=>r.trim()).filter(r=>r.length>0);return{amount:this.extractAmount(e),date:this.extractDate(e),vendor:this.extractVendor(t),items:this.extractItems(t),taxAmount:this.extractTaxAmount(e),invoiceNumber:this.extractInvoiceNumber(e)}}extractAmount(e){const t=[/\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/g,/PHP\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/gi,/\$\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/g,/TOTAL[:\s]*?\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/gi,/AMOUNT[:\s]*?\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/gi,/(\d{1,3}(?:,\d{3})*\.\d{2})\s*(?:|PHP|TOTAL|AMOUNT)/gi],r=[];for(const i of t){let a;for(;(a=i.exec(e))!==null;){const c=parseFloat(a[1].replace(/,/g,""));!isNaN(c)&&c>0&&r.push(c)}}return r.length>0?Math.max(...r):void 0}extractDate(e){const t=[/(\d{1,2}\/\d{1,2}\/\d{4})/g,/(\d{1,2}-\d{1,2}-\d{4})/g,/(\d{4}-\d{1,2}-\d{1,2})/g,/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+\d{1,2},?\s+\d{4}/gi,/\d{1,2}\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+\d{4}/gi];for(const r of t){const i=e.match(r);if(i){const a=i[0],c=new Date(a);if(!isNaN(c.getTime()))return c.toISOString().split("T")[0]}}}extractVendor(e){const t=e.slice(0,5),r=["receipt","invoice","total","amount","date","time","cashier","thank you"];for(const i of t)if(i.length>3&&i.length<50&&!r.some(c=>i.toLowerCase().includes(c))&&!/^\d+$/.test(i))return i}extractItems(e){const t=[];for(const r of e)if(this.looksLikeItemLine(r)){const i=this.extractItemName(r);i&&t.push(i)}return t}looksLikeItemLine(e){return[/\d+\.\d{2}/,/\s*\d+/,/\d+\s*/].some(r=>r.test(e))}extractItemName(e){const t=e.replace(/\s*\d+(?:\.\d{2})?/g,"").replace(/\d+\.\d{2}/g,"").replace(/\s+/g," ").trim();return t.length>2?t:void 0}extractTaxAmount(e){const t=[/TAX[:\s]*?\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/gi,/VAT[:\s]*?\s*(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)/gi,/(\d{1,3}(?:,\d{3})*\.\d{2})\s*(?:TAX|VAT)/gi];for(const r of t){const i=e.match(r);if(i){const a=parseFloat(i[1].replace(/,/g,""));if(!isNaN(a))return a}}}extractInvoiceNumber(e){const t=[/(?:INVOICE|RECEIPT|REF|NO)[:\s#]*([A-Z0-9-]+)/gi,/(?:INV|RCT|REF)[:\s#]*([A-Z0-9-]+)/gi,/#([A-Z0-9-]{3,})/g];for(const r of t){const i=e.match(r);if(i)return i[1]}}categorizeReceipt(e,t){var d;const r=[{name:"Office Supplies",keywords:["paper","pen","stapler","folder","notebook","office","supplies","stationery"],confidence:0},{name:"Transportation",keywords:["gas","fuel","taxi","uber","grab","bus","train","parking","toll"],confidence:0},{name:"Utilities",keywords:["electric","water","internet","phone","meralco","pldt","globe","smart"],confidence:0},{name:"Meals & Entertainment",keywords:["restaurant","food","coffee","lunch","dinner","catering","mcdonalds","jollibee"],confidence:0},{name:"Equipment",keywords:["computer","laptop","printer","monitor","keyboard","mouse","furniture"],confidence:0},{name:"Services",keywords:["consulting","service","maintenance","repair","cleaning","security"],confidence:0},{name:"Medical & Health",keywords:["hospital","clinic","medicine","pharmacy","medical","health","doctor"],confidence:0}],i=e.toLowerCase(),a=((d=t.vendor)==null?void 0:d.toLowerCase())||"";r.forEach(p=>{let m=0;p.keywords.forEach(y=>{(i.includes(y)||a.includes(y))&&m++}),p.confidence=m/p.keywords.length});const c=r.reduce((p,m)=>m.confidence>p.confidence?m:p);return{category:c.confidence>.1?c.name:"Other",confidence:c.confidence}}async cleanup(){this.worker&&(await this.worker.terminate(),this.worker=null,this.isInitialized=!1)}}class Mz{constructor(){this.stream=null,this.video=null}async startCamera(e={width:1280,height:720,facingMode:"environment",quality:.8}){try{return this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:e.width},height:{ideal:e.height},facingMode:e.facingMode}}),this.video=document.createElement("video"),this.video.srcObject=this.stream,this.video.autoplay=!0,this.video.playsInline=!0,new Promise((t,r)=>{this.video.onloadedmetadata=()=>{t(this.video)},this.video.onerror=r})}catch(t){throw console.error("Failed to start camera:",t),new Error("Camera access denied or not available")}}captureImage(e=.8){if(!this.video)throw new Error("Camera not started");return new Promise(t=>{const r=document.createElement("canvas"),i=r.getContext("2d");r.width=this.video.videoWidth,r.height=this.video.videoHeight,i.drawImage(this.video,0,0),r.toBlob(a=>{const c=new File([a],`receipt_${Date.now()}.jpg`,{type:"image/jpeg"});t(c)},"image/jpeg",e)})}stopCamera(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.video&&(this.video.srcObject=null,this.video=null)}}const Oz=({isOpen:n,onClose:e,onScanComplete:t})=>{const[r,i]=E.useState(!1),[a,c]=E.useState(!1),[d,p]=E.useState(null),[m,y]=E.useState(null),[v,_]=E.useState(null),[b,R]=E.useState(""),N=E.useRef(null);E.useRef(null);const A=E.useRef(new Mz),L=E.useRef(new Dz);E.useEffect(()=>(n?j():T(),()=>T()),[n]);const j=async()=>{try{y(null),await L.current.initialize()}catch(P){console.error("Failed to initialize AI scanner:",P),y("Failed to initialize AI scanner. Please try again.")}},k=async()=>{try{y(null);const P=await A.current.startCamera({width:1280,height:720,facingMode:"environment",quality:.8});N.current&&(N.current.srcObject=P.srcObject,c(!0))}catch(P){console.error("Failed to start camera:",P),y("Camera access denied or not available. Please check permissions.")}},U=async()=>{if(!a){await k();return}try{i(!0),y(null);const P=await A.current.captureImage(.8);_(P);const z=URL.createObjectURL(P);R(z),A.current.stopCamera(),c(!1);const M=await L.current.scanImage(P);p(M)}catch(P){console.error("Failed to capture and scan:",P),y("Failed to scan receipt. Please try again.")}finally{i(!1)}},K=()=>{p(null),_(null),b&&(URL.revokeObjectURL(b),R("")),k()},ee=()=>{d&&v&&(t(d,v),C())},C=()=>{T(),e()},T=()=>{A.current.stopCamera(),c(!1),i(!1),p(null),_(null),y(null),b&&(URL.revokeObjectURL(b),R(""))},O=P=>P>=.8?"text-green-600":P>=.6?"text-yellow-600":"text-red-600",$=P=>P>=.8?"default":P>=.6?"secondary":"destructive";return n?l.jsx(ti,{open:n,onOpenChange:C,children:l.jsxs(ni,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx(ri,{children:l.jsxs(si,{className:"flex items-center gap-2",children:[l.jsx(wl,{className:"w-5 h-5 text-blue-600"}),"AI Receipt Scanner",l.jsxs(et,{variant:"outline",className:"ml-2",children:[l.jsx(iT,{className:"w-3 h-3 mr-1"}),"Powered by AI"]})]})}),l.jsxs("div",{className:"space-y-4",children:[m&&l.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[l.jsx(Js,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),l.jsx("p",{className:"text-sm text-red-700",children:m})]}),d?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Captured Receipt"}),l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:b,alt:"Captured receipt",className:"w-full rounded-lg border"}),l.jsx("div",{className:"absolute top-2 right-2",children:l.jsxs(et,{variant:$(d.confidence),children:[Math.round(d.confidence),"% confidence"]})})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[l.jsx(wl,{className:"w-4 h-4 text-blue-600"}),"AI Extracted Data"]}),l.jsxs("div",{className:"space-y-3",children:[d.extractedData.amount&&l.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-green-800",children:"Amount"}),l.jsx(Or,{className:"w-4 h-4 text-green-600"})]}),l.jsxs("p",{className:"text-lg font-bold text-green-900",children:["",d.extractedData.amount.toLocaleString()]})]}),d.extractedData.date&&l.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Date"}),l.jsx(Or,{className:"w-4 h-4 text-blue-600"})]}),l.jsx("p",{className:"font-medium text-blue-900",children:new Date(d.extractedData.date).toLocaleDateString()})]}),d.extractedData.vendor&&l.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Vendor"}),l.jsx(Or,{className:"w-4 h-4 text-purple-600"})]}),l.jsx("p",{className:"font-medium text-purple-900",children:d.extractedData.vendor})]}),d.suggestedCategory&&l.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Suggested Category"}),l.jsxs(et,{variant:"outline",className:O(d.categoryConfidence||0),children:[Math.round((d.categoryConfidence||0)*100),"%"]})]}),l.jsx("p",{className:"font-medium text-yellow-900",children:d.suggestedCategory})]}),d.extractedData.invoiceNumber&&l.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Invoice #"}),l.jsx("p",{className:"font-medium text-gray-900",children:d.extractedData.invoiceNumber})]}),d.extractedData.taxAmount&&l.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Tax Amount"}),l.jsxs("p",{className:"font-medium text-gray-900",children:["",d.extractedData.taxAmount.toLocaleString()]})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Raw OCR Text"}),l.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg max-h-32 overflow-y-auto",children:l.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:d.text})})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsxs(Ne,{onClick:K,variant:"outline",children:[l.jsx(v3,{className:"w-4 h-4 mr-2"}),"Retake Photo"]}),l.jsxs(Ne,{onClick:ee,className:"bg-green-600 hover:bg-green-700",children:[l.jsx(Or,{className:"w-4 h-4 mr-2"}),"Use This Data"]})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden",style:{aspectRatio:"16/9"},children:[a?l.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}):l.jsx("div",{className:"flex items-center justify-center h-full text-white",children:l.jsxs("div",{className:"text-center",children:[l.jsx(fy,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"AI Receipt Scanner Ready"}),l.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Position your receipt in good lighting for best results"}),l.jsxs(Ne,{onClick:k,className:"bg-blue-600 hover:bg-blue-700",children:[l.jsx(fy,{className:"w-4 h-4 mr-2"}),"Start Camera"]})]})}),a&&l.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[l.jsx("div",{className:"absolute inset-4 border-2 border-white border-dashed rounded-lg opacity-50"}),l.jsxs("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:[l.jsx(rT,{className:"w-3 h-3 inline mr-1"}),"Align receipt within frame"]})]})]}),l.jsx("div",{className:"flex justify-center gap-3",children:a?l.jsxs(l.Fragment,{children:[l.jsx(Ne,{onClick:U,disabled:r,size:"lg",className:"bg-green-600 hover:bg-green-700",children:r?l.jsxs(l.Fragment,{children:[l.jsx($E,{className:"w-4 h-4 mr-2 animate-pulse"}),"Scanning..."]}):l.jsxs(l.Fragment,{children:[l.jsx($E,{className:"w-4 h-4 mr-2"}),"Capture & Scan"]})}),l.jsxs(Ne,{onClick:()=>{A.current.stopCamera(),c(!1)},variant:"outline",size:"lg",children:[l.jsx(mi,{className:"w-4 h-4 mr-2"}),"Stop Camera"]})]}):l.jsxs(Ne,{onClick:C,variant:"outline",size:"lg",children:[l.jsx(mi,{className:"w-4 h-4 mr-2"}),"Cancel"]})}),l.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(ha,{className:"w-5 h-5 text-blue-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"AI Scanning Tips"}),l.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[l.jsx("li",{children:" Ensure good lighting and avoid shadows"}),l.jsx("li",{children:" Keep the receipt flat and fully visible"}),l.jsx("li",{children:" Hold the camera steady for best OCR results"}),l.jsx("li",{children:" The AI will automatically extract amount, date, and vendor"})]})]})]})})]})]})]})}):null};class Lz{constructor(){this.receipts=[],this.historicalData={}}setData(e){this.receipts=e,this.organizeHistoricalData()}organizeHistoricalData(){this.historicalData={},this.receipts.forEach(e=>{const t=new Date(e.date),r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;this.historicalData[r]||(this.historicalData[r]=[]),this.historicalData[r].push(e)})}generateAnalytics(){const e=this.calculateTotalSpending(),t=this.calculateAveragePerReceipt(),r=this.calculateSpendingByCategory(),i=this.calculateSpendingByMonth(),a=this.analyzeSpendingPatterns(),c=this.generateBudgetAlerts(),d=this.generateInsights(),p=this.generatePredictions();return{totalSpending:e,averagePerReceipt:t,spendingByCategory:r,spendingByMonth:i,spendingPatterns:a,budgetAlerts:c,insights:d,predictions:p}}calculateTotalSpending(){return this.receipts.reduce((e,t)=>e+t.amount,0)}calculateAveragePerReceipt(){return this.receipts.length>0?this.calculateTotalSpending()/this.receipts.length:0}calculateSpendingByCategory(){const e={};return this.receipts.forEach(t=>{e[t.category]=(e[t.category]||0)+t.amount}),e}calculateSpendingByMonth(){const e={};return Object.entries(this.historicalData).forEach(([t,r])=>{e[t]=r.reduce((i,a)=>i+a.amount,0)}),e}analyzeSpendingPatterns(){const e=[],t=this.calculateSpendingByCategory();return Object.entries(t).forEach(([r,i])=>{const a=this.receipts.filter(y=>y.category===r),c=this.calculateTrend(r),d=i/a.length,p=a.length,m=this.analyzeSeasonality(r);e.push({category:r,trend:c.direction,changePercentage:c.percentage,averageAmount:d,frequency:p,seasonality:m})}),e.sort((r,i)=>i.averageAmount-r.averageAmount)}calculateTrend(e){const t=this.getMonthlySpendingForCategory(e),r=Object.keys(t).sort();if(r.length<2)return{direction:"stable",percentage:0};const i=r.slice(-3),a=r.slice(-6,-3),c=i.reduce((y,v)=>y+(t[v]||0),0)/i.length,d=a.length>0?a.reduce((y,v)=>y+(t[v]||0),0)/a.length:c,p=d>0?(c-d)/d*100:0;let m;return Math.abs(p)<10?m="stable":p>0?m="increasing":m="decreasing",{direction:m,percentage:Math.abs(p)}}getMonthlySpendingForCategory(e){const t={};return Object.entries(this.historicalData).forEach(([r,i])=>{t[r]=i.filter(a=>a.category===e).reduce((a,c)=>a+c.amount,0)}),t}analyzeSeasonality(e){const t=this.getMonthlySpendingForCategory(e),r=Object.values(t);if(r.length<3)return"low";const i=r.reduce((p,m)=>p+m,0)/r.length,a=r.reduce((p,m)=>p+Math.pow(m-i,2),0)/r.length,c=Math.sqrt(a),d=i>0?c/i:0;return d>.5?"high":d>.25?"medium":"low"}generateBudgetAlerts(){const e=[];this.calculateSpendingByCategory();const t=this.analyzeSpendingPatterns();return t.forEach(i=>{i.trend==="increasing"&&i.changePercentage>50&&e.push({id:`overspend_${i.category}`,type:"overspend",severity:i.changePercentage>100?"high":"medium",category:i.category,message:`${i.category} spending has increased by ${i.changePercentage.toFixed(1)}%`,recommendation:`Review ${i.category} expenses and consider cost optimization measures`,confidence:.8}),i.averageAmount>5e3&&i.frequency<3&&e.push({id:`unusual_${i.category}`,type:"unusual_pattern",severity:"medium",category:i.category,message:`Infrequent but high-value ${i.category} expenses detected`,recommendation:`Consider bulk purchasing or negotiating better rates for ${i.category}`,confidence:.7})}),t.slice(0,3).forEach(i=>{i.averageAmount>1e3&&e.push({id:`optimization_${i.category}`,type:"cost_optimization",severity:"low",category:i.category,message:`${i.category} is a major expense category`,recommendation:`Explore vendor negotiations or alternative suppliers for ${i.category}`,confidence:.6})}),e}generateInsights(){const e=[];this.calculateSpendingByCategory();const t=this.analyzeSpendingPatterns(),r=this.analyzeVendors();r.duplicateCategories.length>0&&e.push({id:"vendor_consolidation",type:"vendor_analysis",title:"Vendor Consolidation Opportunity",description:`You have multiple vendors in ${r.duplicateCategories.join(", ")}. Consolidating could reduce costs.`,impact:"medium",potentialSavings:r.potentialSavings,actionItems:["Review vendor contracts in duplicate categories","Negotiate volume discounts with preferred vendors","Standardize procurement processes"],confidence:.7,dataPoints:r.duplicateCategories});const i=t.filter(c=>c.seasonality==="high");i.length>0&&e.push({id:"spending_variability",type:"spending_pattern",title:"High Spending Variability Detected",description:`Categories like ${i.map(c=>c.category).join(", ")} show high variability. Better planning could reduce costs.`,impact:"medium",actionItems:["Implement budget planning for variable categories","Consider bulk purchasing during low-cost periods","Set up spending alerts for these categories"],confidence:.8,dataPoints:i});const a=t.filter(c=>c.averageAmount>2e3);if(a.length>0){const c=a.reduce((d,p)=>d+p.averageAmount*.1,0);e.push({id:"cost_saving",type:"cost_saving",title:"Cost Reduction Opportunities",description:"High-value categories could benefit from strategic sourcing and negotiation.",impact:"high",potentialSavings:c,actionItems:["Conduct market research for alternative suppliers","Negotiate annual contracts for better rates","Implement approval workflows for high-value purchases"],confidence:.9,dataPoints:a})}return e}analyzeVendors(){const e={};this.receipts.forEach(i=>{var a;(a=i.metadata)!=null&&a.vendor&&(e[i.category]||(e[i.category]=new Set),e[i.category].add(i.metadata.vendor))});const t=Object.entries(e).filter(([i,a])=>a.size>2).map(([i,a])=>i),r=t.length*500;return{duplicateCategories:t,potentialSavings:r}}generatePredictions(){const e=this.calculateSpendingByMonth(),t=Object.keys(e).sort();if(t.length<3)return{nextMonthSpending:0,yearEndProjection:0,confidence:.1};const r=t.slice(-6),i=r.map(R=>e[R]||0),a=i.reduce((R,N)=>R+N,0)/i.length,c=this.calculateLinearTrend(i),d=Math.max(0,a+c),p=new Date().getFullYear(),m=t.filter(R=>R.startsWith(p.toString())),y=m.reduce((R,N)=>R+(e[N]||0),0),v=12-m.length,_=y+d*v,b=Math.min(.9,r.length/6);return{nextMonthSpending:d,yearEndProjection:_,confidence:b}}calculateLinearTrend(e){if(e.length<2)return 0;const t=e.length,r=t*(t-1)/2,i=e.reduce((p,m)=>p+m,0),a=e.reduce((p,m,y)=>p+m*y,0),c=e.reduce((p,m,y)=>p+y*y,0);return(t*a-r*i)/(t*c-r*r)}suggestCategory(e,t,r){this.analyzeSpendingPatterns();const i={};this.receipts.forEach(m=>{var y;if(i[m.category]||(i[m.category]=[]),(y=m.metadata)!=null&&y.vendor&&i[m.category].push(m.metadata.vendor.toLowerCase()),m.title){const v=m.title.toLowerCase().split(" ");i[m.category].push(...v)}});const a={},c=e.toLowerCase(),d=(t==null?void 0:t.toLowerCase())||"";Object.entries(i).forEach(([m,y])=>{let v=0;y.forEach(_=>{(c.includes(_)||d.includes(_))&&(v+=1)}),a[m]=v/y.length});const p=Object.entries(a).reduce((m,[y,v])=>v>m.score?{category:y,score:v}:m,{category:"Other",score:0});return{category:p.category,confidence:Math.min(.95,p.score)}}}const tC=({currentScope:n,userRole:e,onScopeChange:t,onSetAsDefault:r,showSetAsDefault:i=!1,compact:a=!1,className:c=""})=>{const d=_=>{switch(_){case"personal":return l.jsx(Du,{className:"w-4 h-4"});case"team":return l.jsx(Gf,{className:"w-4 h-4"});case"all":return l.jsx(wV,{className:"w-4 h-4"})}},p=_=>{switch(_){case"personal":return"My Expenses";case"team":return"Team Expenses";case"all":return"All Expenses"}},m=_=>{switch(_){case"personal":return"Only your personal receipts";case"team":return"Only receipts from your assigned staff";case"all":return"Your receipts + assigned staff receipts"}},v=(()=>{switch(e){case"staff":return["personal"];case"admin":return["personal","team","all"];case"super_admin":return["all"];default:return["personal"]}})();return v.length<=1?l.jsx("div",{className:`flex items-center gap-2 ${c}`,children:l.jsxs(et,{variant:"outline",className:"flex items-center gap-1",children:[d(n),p(n)]})}):a?l.jsxs(ii,{value:n,onValueChange:t,children:[l.jsx(ai,{className:`w-auto min-w-[140px] ${c}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[d(n),l.jsx(oi,{})]})}),l.jsx(li,{children:v.map(_=>l.jsx(Xt,{value:_,children:l.jsxs("div",{className:"flex items-center gap-2",children:[d(_),l.jsx("span",{children:p(_)})]})},_))})]}):l.jsx("div",{className:`flex items-center gap-2 ${c}`,children:l.jsxs(YI,{children:[l.jsx(XI,{asChild:!0,children:l.jsxs(Ne,{variant:"outline",className:"flex items-center gap-2",children:[d(n),p(n),l.jsx($v,{className:"w-4 h-4"})]})}),l.jsxs(hw,{align:"end",className:"w-64",children:[l.jsxs(fw,{className:"flex items-center gap-2",children:[l.jsx(ha,{className:"w-4 h-4"}),"View Scope"]}),l.jsx(af,{}),v.map(_=>l.jsx(of,{onClick:()=>t(_),className:"flex items-start gap-3 p-3 cursor-pointer",children:l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d(_),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:p(_)}),n===_&&l.jsx(hu,{className:"w-4 h-4 text-green-600"})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m(_)})]})]})},_)),i&&r&&l.jsxs(l.Fragment,{children:[l.jsx(af,{}),l.jsxs(of,{onClick:()=>r(n),className:"flex items-center gap-2 text-blue-600",children:[l.jsx(Wf,{className:"w-4 h-4"}),"Set as Default View"]})]})]})]})})},Vz=({receipts:n,isOpen:e,onClose:t,currentUserId:r,userRole:i,initialViewScope:a="all",onViewScopeChange:c})=>{const[d,p]=E.useState(null),[m,y]=E.useState(!0),[v,_]=E.useState(null),[b,R]=E.useState(a),[N,A]=E.useState(n);E.useEffect(()=>{e&&L(b)},[e,b]),E.useEffect(()=>{R(a)},[a]);const L=async C=>{try{y(!0);const T=await wr.getVisibleReceipts(r,void 0,C);A(T),T.length>0?await k(T):p(null)}catch(T){console.error("Failed to load receipts for scope:",T),p(null)}finally{y(!1)}},j=C=>{R(C),c&&c(C)},k=async C=>{try{const T=new Lz;T.setData(C);const O=T.generateAnalytics();p(O)}catch(T){console.error("Failed to generate analytics:",T),p(null)}},U=C=>{switch(C){case"increasing":return l.jsx(L3,{className:"w-4 h-4 text-red-500"});case"decreasing":return l.jsx(M3,{className:"w-4 h-4 text-green-500"});default:return l.jsx(zE,{className:"w-4 h-4 text-gray-500"})}},K=C=>{switch(C){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}},ee=C=>{switch(C){case"high":return l.jsx(hV,{className:"w-4 h-4 text-red-500"});case"medium":return l.jsx(zE,{className:"w-4 h-4 text-yellow-500"});default:return l.jsx(cV,{className:"w-4 h-4 text-green-500"})}};return e?l.jsx(ti,{open:e,onOpenChange:t,children:l.jsxs(ni,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[l.jsx(ri,{children:l.jsxs(si,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wl,{className:"w-6 h-6 text-blue-600"}),"AI Financial Intelligence Dashboard",l.jsxs(et,{variant:"outline",className:"ml-2",children:[l.jsx(iT,{className:"w-3 h-3 mr-1"}),"AI Powered"]})]}),i==="admin"&&l.jsx(tC,{currentScope:b,userRole:i,onScopeChange:j,compact:!0})]})}),m?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx(wl,{className:"w-12 h-12 mx-auto mb-4 text-blue-600 animate-pulse"}),l.jsx("p",{className:"text-lg font-medium",children:"AI is analyzing your expenses..."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"This may take a few moments"})]})}):d?l.jsxs("div",{className:"space-y-4",children:[i==="admin"&&l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[l.jsx(ha,{className:"w-4 h-4"}),l.jsxs("span",{className:"text-sm font-medium",children:["Analyzing: ",b==="personal"?"Your Personal Expenses":b==="team"?"Your Team's Expenses":"Combined Expenses (You + Team)"]}),l.jsxs(et,{variant:"outline",className:"text-xs",children:[N.length," receipts"]})]})}),l.jsxs(YA,{defaultValue:"overview",className:"space-y-4",children:[l.jsxs(XA,{className:"grid w-full grid-cols-4",children:[l.jsx(na,{value:"overview",children:"Overview"}),l.jsx(na,{value:"patterns",children:"Patterns"}),l.jsx(na,{value:"alerts",children:"Alerts"}),l.jsx(na,{value:"insights",children:"Insights"})]}),l.jsxs(Wc,{value:"overview",className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Spending"}),l.jsxs("p",{className:"text-2xl font-bold",children:["",d.totalSpending.toLocaleString()]})]}),l.jsx(JN,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg per Receipt"}),l.jsxs("p",{className:"text-2xl font-bold",children:["",d.averagePerReceipt.toLocaleString()]})]}),l.jsx(XN,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Next Month Prediction"}),l.jsxs("p",{className:"text-2xl font-bold",children:["",d.predictions.nextMonthSpending.toLocaleString()]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(d.predictions.confidence*100),"% confidence"]})]}),l.jsx(FE,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Year-End Projection"}),l.jsxs("p",{className:"text-2xl font-bold",children:["",d.predictions.yearEndProjection.toLocaleString()]})]}),l.jsx(rT,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsxs(Et,{className:"flex items-center gap-2",children:[l.jsx(bV,{className:"w-5 h-5"}),"Spending by Category"]})}),l.jsx(Qe,{children:l.jsx("div",{className:"space-y-3",children:Object.entries(d.spendingByCategory).sort(([,C],[,T])=>T-C).slice(0,8).map(([C,T])=>{const O=T/d.totalSpending*100;return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),l.jsx("span",{className:"text-sm font-medium",children:C}),l.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 ml-3",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${O}%`}})})]}),l.jsxs("div",{className:"text-right ml-3",children:[l.jsxs("p",{className:"text-sm font-bold",children:["",T.toLocaleString()]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[O.toFixed(1),"%"]})]})]},C)})})})]}),l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsxs(Et,{className:"flex items-center gap-2",children:[l.jsx(zv,{className:"w-5 h-5"}),"Monthly Spending Trend"]})}),l.jsx(Qe,{children:l.jsx("div",{className:"space-y-2",children:Object.entries(d.spendingByMonth).sort(([C],[T])=>C.localeCompare(T)).slice(-6).map(([C,T])=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[l.jsx("span",{className:"text-sm font-medium",children:C}),l.jsxs("span",{className:"text-sm font-bold",children:["",T.toLocaleString()]})]},C))})})]})]}),l.jsx(Wc,{value:"patterns",className:"space-y-4",children:l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsxs(Et,{className:"flex items-center gap-2",children:[l.jsx(FE,{className:"w-5 h-5"}),"AI-Detected Spending Patterns"]})}),l.jsx(Qe,{children:l.jsx("div",{className:"space-y-4",children:d.spendingPatterns.map((C,T)=>l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"font-medium",children:C.category}),l.jsxs("div",{className:"flex items-center gap-2",children:[U(C.trend),l.jsx(et,{variant:C.trend==="increasing"?"destructive":C.trend==="decreasing"?"default":"secondary",children:C.trend})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Change"}),l.jsxs("p",{className:"font-medium",children:[C.changePercentage.toFixed(1),"%"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Avg Amount"}),l.jsxs("p",{className:"font-medium",children:["",C.averageAmount.toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Frequency"}),l.jsxs("p",{className:"font-medium",children:[C.frequency," receipts"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-muted-foreground",children:"Seasonality"}),l.jsx(et,{variant:"outline",className:"text-xs",children:C.seasonality})]})]})]},T))})})]})}),l.jsx(Wc,{value:"alerts",className:"space-y-4",children:l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsxs(Et,{className:"flex items-center gap-2",children:[l.jsx(tu,{className:"w-5 h-5"}),"Budget Alerts & Warnings"]})}),l.jsx(Qe,{children:d.budgetAlerts.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ha,{className:"w-12 h-12 mx-auto mb-4 text-green-600"}),l.jsx("p",{className:"text-lg font-medium text-green-800",children:"All Clear!"}),l.jsx("p",{className:"text-sm text-green-600",children:"No budget alerts detected"})]}):l.jsx("div",{className:"space-y-4",children:d.budgetAlerts.map((C,T)=>l.jsxs("div",{className:`p-4 border rounded-lg ${K(C.severity)}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(tu,{className:"w-5 h-5"}),l.jsx("h3",{className:"font-medium",children:C.category})]}),l.jsxs(et,{variant:C.severity==="high"?"destructive":C.severity==="medium"?"secondary":"default",children:[C.severity," priority"]})]}),l.jsx("p",{className:"text-sm mb-2",children:C.message}),l.jsxs("p",{className:"text-sm font-medium",children:[l.jsx("strong",{children:"Recommendation:"})," ",C.recommendation]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx(et,{variant:"outline",className:"text-xs",children:C.type.replace("_"," ")}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(C.confidence*100),"% confidence"]})]})]},T))})})]})}),l.jsx(Wc,{value:"insights",className:"space-y-4",children:l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsxs(Et,{className:"flex items-center gap-2",children:[l.jsx(UE,{className:"w-5 h-5"}),"AI-Generated Financial Insights"]})}),l.jsx(Qe,{children:d.insights.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(wl,{className:"w-12 h-12 mx-auto mb-4 text-blue-600"}),l.jsx("p",{className:"text-lg font-medium",children:"Analyzing Patterns..."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"More data needed for insights"})]}):l.jsx("div",{className:"space-y-4",children:d.insights.map((C,T)=>l.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>_(C),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[ee(C.impact),l.jsx("h3",{className:"font-medium",children:C.title})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(et,{variant:C.impact==="high"?"default":C.impact==="medium"?"secondary":"outline",children:[C.impact," impact"]}),C.potentialSavings&&l.jsxs(et,{variant:"outline",className:"text-green-600",children:["",C.potentialSavings.toLocaleString()," savings"]})]})]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(et,{variant:"outline",className:"text-xs",children:C.type.replace("_"," ")}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(C.confidence*100),"% confidence"]})]})]},T))})})]})})]})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(tu,{className:"w-12 h-12 mx-auto mb-4 text-yellow-600"}),l.jsx("p",{className:"text-lg font-medium",children:"No Data Available"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload some receipts to see AI insights"})]}),v&&l.jsx(ti,{open:!!v,onOpenChange:()=>_(null),children:l.jsxs(ni,{className:"max-w-2xl",children:[l.jsx(ri,{children:l.jsxs(si,{className:"flex items-center gap-2",children:[l.jsx(UE,{className:"w-5 h-5 text-yellow-500"}),v.title]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(et,{variant:v.impact==="high"?"default":v.impact==="medium"?"secondary":"outline",children:[v.impact," impact"]}),v.potentialSavings&&l.jsxs(et,{variant:"outline",className:"text-green-600",children:["Potential Savings: ",v.potentialSavings.toLocaleString()]}),l.jsxs(et,{variant:"outline",children:[Math.round(v.confidence*100),"% confidence"]})]}),l.jsx("p",{className:"text-muted-foreground",children:v.description}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Recommended Actions:"}),l.jsx("ul",{className:"space-y-1",children:v.actionItems.map((C,T)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),C]},T))})]})]})]})})]})}):null},Fz=({currentUserId:n,userRole:e})=>{var _i;const[t,r]=E.useState([]),[i,a]=E.useState([]),[c,d]=E.useState(null),[p,m]=E.useState(null),[y,v]=E.useState(!0),[_,b]=E.useState(!1),[R,N]=E.useState("all"),[A,L]=E.useState("all"),[j,k]=E.useState(!1),[U,K]=E.useState(null),[ee,C]=E.useState(!1),[T,O]=E.useState(!1),[$,P]=E.useState(!1),[z,M]=E.useState(!1),[he,xe]=E.useState({}),[fe,Ee]=E.useState("all"),[W,q]=E.useState({title:"",description:"",amount:"",categoryId:"",type:"unofficial",date:new Date().toISOString().split("T")[0],tags:"",vendor:"",invoiceNumber:"",taxAmount:"",notes:""}),[G,F]=E.useState(null),[V,Y]=E.useState("");E.useEffect(()=>{me(),te()},[n]),E.useEffect(()=>{me()},[R]);const te=async()=>{try{const ie=await mh.getUserPreferences(n);N(ie.receiptViewScope),L(ie.aiDashboardViewScope)}catch(ie){console.error("Error loading user preferences:",ie)}},me=async()=>{try{v(!0);const[ie,$e,$t,yn]=await Promise.all([wr.getVisibleReceipts(n,he,R),wr.getCategories(),Me.getUserProfile(n),wr.getReceiptStats(n,R)]);r(ie),a($e),m($t),d(yn)}catch(ie){console.error("Error loading receipt data:",ie)}finally{v(!1)}},ve=()=>{q({title:"",description:"",amount:"",categoryId:"",type:"unofficial",date:new Date().toISOString().split("T")[0],tags:"",vendor:"",invoiceNumber:"",taxAmount:"",notes:""}),F(null),Y("")},se=ie=>{var $t;const $e=($t=ie.target.files)==null?void 0:$t[0];if($e){F($e);const yn=new FileReader;yn.onloadend=()=>{Y(yn.result)},yn.readAsDataURL($e)}},ge=async ie=>{if(ie.preventDefault(),!G||!p){alert("Please select a file and ensure you are logged in");return}b(!0);try{const $e=await wr.uploadReceiptFile(G,n),$t=i.find(cn=>cn.id===W.categoryId);if(!$t)throw new Error("Invalid category selected");const yn=W.tags.split(",").map(cn=>cn.trim()).filter(cn=>cn),Sr={title:W.title,description:W.description,amount:parseFloat(W.amount),category:$t.name,categoryId:W.categoryId,type:W.type,status:"pending",date:W.date,imageUrl:$e.url,fileName:$e.fileName,fileSize:$e.fileSize,mimeType:$e.mimeType,tags:yn,uploadedBy:n,uploadedByName:p.name,ownerId:n,assignedAdminId:p.assignedAdminId,visibility:"admin",metadata:{vendor:W.vendor||void 0,invoiceNumber:W.invoiceNumber||void 0,taxAmount:W.taxAmount?parseFloat(W.taxAmount):void 0,notes:W.notes||void 0}};await wr.createReceipt(Sr),k(!1),ve(),await me(),alert("Receipt uploaded successfully!")}catch($e){console.error("Error uploading receipt:",$e),alert("Error uploading receipt. Please try again.")}finally{b(!1)}},le=async ie=>{if(confirm("Are you sure you want to delete this receipt?"))try{await wr.deleteReceipt(ie,n),await me(),alert("Receipt deleted successfully")}catch($e){console.error("Error deleting receipt:",$e),alert("Error deleting receipt")}},de=(ie,$e)=>{var yn,Sr,cn;q({title:ie.extractedData.vendor||"AI Scanned Receipt",description:`Scanned receipt from ${ie.extractedData.vendor||"unknown vendor"}`,amount:((yn=ie.extractedData.amount)==null?void 0:yn.toString())||"",categoryId:((Sr=i.find(_a=>_a.name===ie.suggestedCategory))==null?void 0:Sr.id)||"",type:"unofficial",date:ie.extractedData.date||new Date().toISOString().split("T")[0],tags:"ai-scanned",vendor:ie.extractedData.vendor||"",invoiceNumber:ie.extractedData.invoiceNumber||"",taxAmount:((cn=ie.extractedData.taxAmount)==null?void 0:cn.toString())||"",notes:`AI Confidence: ${Math.round(ie.confidence)}%`}),F($e);const $t=URL.createObjectURL($e);Y($t),P(!1),k(!0)},Te=async ie=>{try{await wr.approveReceipt(ie,n),await me(),alert("Receipt approved successfully")}catch($e){console.error("Error approving receipt:",$e),alert("Error approving receipt")}},Ve=async ie=>{const $e=prompt("Enter rejection reason:");if($e)try{await wr.rejectReceipt(ie,n,$e),await me(),alert("Receipt rejected")}catch($t){console.error("Error rejecting receipt:",$t),alert("Error rejecting receipt")}},tt=async ie=>{try{const $e=await wr.downloadReceipt(ie,n);window.open($e,"_blank")}catch($e){console.error("Error downloading receipt:",$e),alert("Error downloading receipt")}},ht=async ie=>{try{N(ie),await mh.updateReceiptViewScope(n,ie)}catch($e){console.error("Error updating view scope:",$e)}},Wn=async ie=>{try{L(ie),await mh.updateAIDashboardViewScope(n,ie)}catch($e){console.error("Error updating AI dashboard view scope:",$e)}},Zt=async ie=>{try{await mh.updateDefaultReceiptView(n,ie),alert("Default view updated successfully!")}catch($e){console.error("Error setting default view:",$e),alert("Error updating default view")}},ln=ie=>{switch(ie){case"approved":return l.jsx(Or,{className:"w-4 h-4 text-green-600"});case"rejected":return l.jsx(Ih,{className:"w-4 h-4 text-red-600"});case"pending":return l.jsx(py,{className:"w-4 h-4 text-yellow-600"})}},Wr=ie=>ie==="official"?l.jsx(fs,{className:"w-4 h-4 text-blue-600"}):l.jsx(Jo,{className:"w-4 h-4 text-gray-600"}),mt=t.filter(ie=>!(fe==="official"&&ie.type!=="official"||fe==="unofficial"&&ie.type!=="unofficial")),It=ie=>e==="admin"&&ie.assignedAdminId===n||e==="super_admin",Hn=ie=>ie.ownerId===n||e==="admin"&&ie.assignedAdminId===n||e==="super_admin";return y?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),l.jsx("p",{className:"text-gray-600",children:"Loading receipts..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Receipt Manager"}),l.jsx("p",{className:"text-muted-foreground",children:"Upload and manage official and unofficial receipts"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e==="admin"&&l.jsx(tC,{currentScope:R,userRole:e,onScopeChange:ht,onSetAsDefault:Zt,showSetAsDefault:!0}),c&&l.jsxs(l.Fragment,{children:[l.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>M(!0),children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),"AI Insights"]}),l.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>O(!0),children:[l.jsx(XN,{className:"w-4 h-4 mr-2"}),"Statistics"]})]}),l.jsxs(Ne,{variant:"outline",onClick:()=>P(!0),children:[l.jsx(fy,{className:"mr-2 h-4 w-4"}),"AI Scan"]}),l.jsxs(ti,{open:j,onOpenChange:ie=>{k(ie),ie||ve()},children:[l.jsx(vw,{asChild:!0,children:l.jsxs(Ne,{children:[l.jsx(qv,{className:"mr-2 h-4 w-4"}),"Upload Receipt"]})}),l.jsxs(ni,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsx(ri,{children:l.jsx(si,{children:"Upload New Receipt"})}),l.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"receipt-file",children:"Receipt File *"}),l.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:V?l.jsxs("div",{className:"space-y-2",children:[l.jsx("img",{src:V,alt:"Receipt preview",className:"max-h-48 mx-auto rounded"}),l.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{F(null),Y("")},children:"Remove File"})]}):l.jsxs("div",{children:[l.jsx(sT,{className:"mx-auto h-12 w-12 text-muted-foreground"}),l.jsxs("div",{className:"mt-2",children:[l.jsxs("label",{htmlFor:"receipt-file",className:"cursor-pointer",children:[l.jsx("span",{className:"text-primary hover:underline",children:"Upload a file"}),l.jsx("input",{id:"receipt-file",type:"file",className:"hidden",accept:"image/*,.pdf",onChange:se,required:!0})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"title",children:"Title *"}),l.jsx(mn,{id:"title",value:W.title,onChange:ie=>q({...W,title:ie.target.value}),placeholder:"e.g., Office supplies purchase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"type",children:"Receipt Type *"}),l.jsxs(ii,{value:W.type,onValueChange:ie=>q({...W,type:ie}),children:[l.jsx(ai,{children:l.jsx(oi,{})}),l.jsxs(li,{children:[l.jsx(Xt,{value:"official",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fs,{className:"w-4 h-4 text-blue-600"}),"Official Receipt"]})}),l.jsx(Xt,{value:"unofficial",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Jo,{className:"w-4 h-4 text-gray-600"}),"Unofficial Receipt"]})})]})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"description",children:"Description"}),l.jsx(lf,{id:"description",value:W.description,onChange:ie=>q({...W,description:ie.target.value}),placeholder:"Additional details about this receipt",rows:2})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"amount",children:"Amount () *"}),l.jsx(mn,{id:"amount",type:"number",step:"0.01",value:W.amount,onChange:ie=>q({...W,amount:ie.target.value}),placeholder:"0.00",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"date",children:"Date *"}),l.jsx(mn,{id:"date",type:"date",value:W.date,onChange:ie=>q({...W,date:ie.target.value}),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"category",children:"Category *"}),l.jsxs(ii,{value:W.categoryId,onValueChange:ie=>q({...W,categoryId:ie}),children:[l.jsx(ai,{children:l.jsx(oi,{placeholder:"Select category"})}),l.jsx(li,{children:i.map(ie=>l.jsx(Xt,{value:ie.id,children:ie.name},ie.id))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"vendor",children:"Vendor/Supplier"}),l.jsx(mn,{id:"vendor",value:W.vendor,onChange:ie=>q({...W,vendor:ie.target.value}),placeholder:"Company or person"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"invoiceNumber",children:"Invoice/Receipt Number"}),l.jsx(mn,{id:"invoiceNumber",value:W.invoiceNumber,onChange:ie=>q({...W,invoiceNumber:ie.target.value}),placeholder:"Receipt or invoice number"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"taxAmount",children:"Tax Amount ()"}),l.jsx(mn,{id:"taxAmount",type:"number",step:"0.01",value:W.taxAmount,onChange:ie=>q({...W,taxAmount:ie.target.value}),placeholder:"0.00"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"tags",children:"Tags (comma separated)"}),l.jsx(mn,{id:"tags",value:W.tags,onChange:ie=>q({...W,tags:ie.target.value}),placeholder:"e.g., urgent, reimbursable"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"notes",children:"Notes"}),l.jsx(lf,{id:"notes",value:W.notes,onChange:ie=>q({...W,notes:ie.target.value}),placeholder:"Additional notes or comments",rows:2})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(Ne,{type:"button",variant:"outline",onClick:()=>k(!1),disabled:_,children:"Cancel"}),l.jsx(Ne,{type:"submit",disabled:_,children:_?"Uploading...":"Upload Receipt"})]})]})]})]})]})]}),c&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Receipts"}),l.jsx("p",{className:"text-2xl font-bold",children:c.totalReceipts})]}),l.jsx(Jo,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),l.jsxs("p",{className:"text-2xl font-bold",children:["",c.totalAmount.toLocaleString()]})]}),l.jsx(JN,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Official"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.officialReceipts})]}),l.jsx(fs,{className:"h-8 w-8 text-blue-600"})]})})}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending"}),l.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.pendingApprovals})]}),l.jsx(py,{className:"h-8 w-8 text-yellow-600"})]})})})]}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs(YA,{value:fe,onValueChange:ie=>Ee(ie),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs(XA,{children:[l.jsx(na,{value:"all",children:"All Receipts"}),l.jsxs(na,{value:"official",children:[l.jsx(fs,{className:"w-4 h-4 mr-2"}),"Official"]}),l.jsxs(na,{value:"unofficial",children:[l.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Unofficial"]})]}),l.jsxs(Ne,{variant:"outline",size:"sm",children:[l.jsx(WV,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),l.jsx(Wc,{value:fe,className:"mt-0",children:mt.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Jo,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No receipts found. Upload your first receipt to get started!"})]}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:mt.map(ie=>l.jsxs(Ke,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{K(ie),C(!0)},children:[l.jsxs("div",{className:"aspect-video relative overflow-hidden rounded-t-lg bg-muted",children:[l.jsx("img",{src:ie.imageUrl,alt:ie.title,className:"object-cover w-full h-full"}),l.jsxs("div",{className:"absolute top-2 left-2 flex gap-1",children:[Wr(ie.type),ln(ie.status)]})]}),l.jsx(gt,{children:l.jsxs(Et,{className:"text-base line-clamp-2 flex items-center justify-between",children:[l.jsx("span",{children:ie.title}),l.jsx(et,{variant:ie.type==="official"?"default":"secondary",children:ie.type})]})}),l.jsx(Qe,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-2xl font-bold",children:["",ie.amount.toLocaleString()]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:$e=>{$e.stopPropagation(),tt(ie.id)},children:l.jsx(my,{className:"h-4 w-4"})}),Hn(ie)&&l.jsx(Ne,{variant:"ghost",size:"icon",onClick:$e=>{$e.stopPropagation(),le(ie.id)},children:l.jsx(Hf,{className:"h-4 w-4 text-destructive"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(et,{variant:"outline",children:ie.category}),l.jsx(et,{variant:ie.status==="approved"?"default":ie.status==="rejected"?"destructive":"secondary",children:ie.status})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[l.jsx(zv,{className:"h-3 w-3"}),new Date(ie.date).toLocaleDateString()]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["By: ",ie.uploadedByName]}),ie.tags.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.tags.slice(0,2).map($e=>l.jsxs(et,{variant:"outline",className:"text-xs",children:[l.jsx(k3,{className:"h-2 w-2 mr-1"}),$e]},$e)),ie.tags.length>2&&l.jsxs(et,{variant:"outline",className:"text-xs",children:["+",ie.tags.length-2]})]}),It(ie)&&ie.status==="pending"&&l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs(Ne,{size:"sm",onClick:$e=>{$e.stopPropagation(),Te(ie.id)},className:"flex-1",children:[l.jsx(Or,{className:"w-3 h-3 mr-1"}),"Approve"]}),l.jsxs(Ne,{size:"sm",variant:"destructive",onClick:$e=>{$e.stopPropagation(),Ve(ie.id)},className:"flex-1",children:[l.jsx(Ih,{className:"w-3 h-3 mr-1"}),"Reject"]})]})]})})]},ie.id))})})]})})}),U&&l.jsx(ti,{open:ee,onOpenChange:C,children:l.jsxs(ni,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx(ri,{children:l.jsxs(si,{className:"flex items-center gap-2",children:[Wr(U.type),U.title,l.jsx(et,{variant:U.type==="official"?"default":"secondary",children:U.type}),l.jsx(et,{variant:U.status==="approved"?"default":U.status==="rejected"?"destructive":"secondary",children:U.status})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("img",{src:U.imageUrl,alt:U.title,className:"w-full rounded-lg max-h-96 object-contain"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Be,{children:"Amount"}),l.jsxs("p",{className:"text-2xl font-bold",children:["",U.amount.toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Date"}),l.jsx("p",{children:new Date(U.date).toLocaleDateString()})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Category"}),l.jsx("p",{children:U.category})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Uploaded By"}),l.jsx("p",{children:U.uploadedByName})]})]}),U.description&&l.jsxs("div",{children:[l.jsx(Be,{children:"Description"}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:U.description})]}),U.metadata&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[U.metadata.vendor&&l.jsxs("div",{children:[l.jsx(Be,{children:"Vendor"}),l.jsx("p",{children:U.metadata.vendor})]}),U.metadata.invoiceNumber&&l.jsxs("div",{children:[l.jsx(Be,{children:"Invoice Number"}),l.jsx("p",{children:U.metadata.invoiceNumber})]}),U.metadata.taxAmount&&l.jsxs("div",{children:[l.jsx(Be,{children:"Tax Amount"}),l.jsxs("p",{children:["",U.metadata.taxAmount.toLocaleString()]})]})]}),((_i=U.metadata)==null?void 0:_i.notes)&&l.jsxs("div",{children:[l.jsx(Be,{children:"Notes"}),l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:U.metadata.notes})]}),U.tags.length>0&&l.jsxs("div",{children:[l.jsx(Be,{children:"Tags"}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:U.tags.map(ie=>l.jsx(et,{variant:"outline",children:ie},ie))})]}),U.status==="approved"&&U.approvedByName&&l.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-green-800",children:[l.jsx("strong",{children:"Approved by:"})," ",U.approvedByName," on"," ",U.approvedAt&&new Date(U.approvedAt).toLocaleDateString()]})}),U.status==="rejected"&&U.rejectedByName&&l.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[l.jsxs("p",{className:"text-sm text-red-800",children:[l.jsx("strong",{children:"Rejected by:"})," ",U.rejectedByName," on"," ",U.rejectedAt&&new Date(U.rejectedAt).toLocaleDateString()]}),U.rejectionReason&&l.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[l.jsx("strong",{children:"Reason:"})," ",U.rejectionReason]})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsxs(Ne,{variant:"outline",onClick:()=>tt(U.id),children:[l.jsx(my,{className:"w-4 h-4 mr-2"}),"Download"]}),It(U)&&U.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsxs(Ne,{onClick:()=>{Te(U.id),C(!1)},children:[l.jsx(Or,{className:"w-4 h-4 mr-2"}),"Approve"]}),l.jsxs(Ne,{variant:"destructive",onClick:()=>{Ve(U.id),C(!1)},children:[l.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})]})]})}),c&&l.jsx(ti,{open:T,onOpenChange:O,children:l.jsxs(ni,{className:"max-w-2xl",children:[l.jsx(ri,{children:l.jsx(si,{children:"Receipt Statistics"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.officialReceipts}),l.jsx("p",{className:"text-sm text-blue-800",children:"Official Receipts"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-gray-600",children:c.unofficialReceipts}),l.jsx("p",{className:"text-sm text-gray-800",children:"Unofficial Receipts"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[l.jsx("p",{className:"text-xl font-bold text-yellow-600",children:c.pendingApprovals}),l.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]}),l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[l.jsx("p",{className:"text-xl font-bold text-green-600",children:c.approvedReceipts}),l.jsx("p",{className:"text-xs text-green-800",children:"Approved"})]}),l.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[l.jsx("p",{className:"text-xl font-bold text-red-600",children:c.rejectedReceipts}),l.jsx("p",{className:"text-xs text-red-800",children:"Rejected"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Categories Breakdown"}),l.jsx("div",{className:"space-y-2",children:Object.entries(c.categoriesBreakdown).map(([ie,$e])=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[l.jsx("span",{className:"text-sm",children:ie}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm font-medium",children:[$e.count," receipts"]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["",$e.amount.toLocaleString()]})]})]},ie))})]})]})]})}),l.jsx(Oz,{isOpen:$,onClose:()=>P(!1),onScanComplete:de}),l.jsx(Vz,{receipts:t,isOpen:z,onClose:()=>M(!1),currentUserId:n,userRole:e,initialViewScope:A,onViewScopeChange:Wn})]})},gh=["Documents","Reports","Forms","Policies","Minutes","Correspondence","Other"];function Uz(){const{files:n,addFile:e,deleteFile:t,user:r}=Vv(),[i,a]=E.useState(!1),[c,d]=E.useState(null),[p,m]=E.useState("all"),[y,v]=E.useState({name:"",category:gh[0],type:"pdf",url:""}),_=()=>{v({name:"",category:gh[0],type:"pdf",url:""})},b=k=>{var K;const U=(K=k.target.files)==null?void 0:K[0];U&&v({...y,name:U.name,type:U.type,url:URL.createObjectURL(U)})},R=k=>{k.preventDefault(),e({name:y.name,type:y.type,size:Math.floor(Math.random()*5e6),url:y.url||"https://example.com/file.pdf",uploadedBy:(r==null?void 0:r.name)||"Unknown",category:y.category}),a(!1),_()},N=k=>{confirm("Are you sure you want to delete this file?")&&(t(k),(c==null?void 0:c.id)===k&&d(null))},A=p==="all"?n:n.filter(k=>k.category===p),L=k=>{if(k===0)return"0 Bytes";const U=1024,K=["Bytes","KB","MB","GB"],ee=Math.floor(Math.log(k)/Math.log(U));return Math.round(k/Math.pow(U,ee)*100)/100+" "+K[ee]},j=k=>l.jsx(Jo,{className:"h-8 w-8"});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"File Manager"}),l.jsx("p",{className:"text-muted-foreground",children:"Store and organize documents"})]}),l.jsxs(ti,{open:i,onOpenChange:k=>{a(k),k||_()},children:[l.jsx(vw,{asChild:!0,children:l.jsxs(Ne,{children:[l.jsx(qv,{className:"mr-2 h-4 w-4"}),"Upload File"]})}),l.jsxs(ni,{className:"max-w-2xl",children:[l.jsx(ri,{children:l.jsx(si,{children:"Upload New File"})}),l.jsxs("form",{onSubmit:R,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"file-upload",children:"Select File"}),l.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:y.name?l.jsxs("div",{className:"space-y-2",children:[l.jsx(Jo,{className:"mx-auto h-12 w-12 text-primary"}),l.jsx("p",{className:"font-medium",children:y.name}),l.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>v({...y,name:"",url:""}),children:"Remove File"})]}):l.jsxs("div",{children:[l.jsx(sT,{className:"mx-auto h-12 w-12 text-muted-foreground"}),l.jsxs("div",{className:"mt-2",children:[l.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[l.jsx("span",{className:"text-primary hover:underline",children:"Upload a file"}),l.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:b})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF, DOC, DOCX, XLS, XLSX up to 50MB"})]})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"file-name",children:"File Name"}),l.jsx(mn,{id:"file-name",value:y.name,onChange:k=>v({...y,name:k.target.value}),placeholder:"Document name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"category",children:"Category"}),l.jsxs(ii,{value:y.category,onValueChange:k=>v({...y,category:k}),children:[l.jsx(ai,{children:l.jsx(oi,{})}),l.jsx(li,{children:gh.map(k=>l.jsx(Xt,{value:k,children:k},k))})]})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(Ne,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),l.jsx(Ne,{type:"submit",children:"Upload File"})]})]})]})]})]}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Be,{children:"Filter by Category:"}),l.jsxs(ii,{value:p,onValueChange:m,children:[l.jsx(ai,{className:"w-48",children:l.jsx(oi,{})}),l.jsxs(li,{children:[l.jsx(Xt,{value:"all",children:"All Categories"}),gh.map(k=>l.jsx(Xt,{value:k,children:k},k))]})]})]})})}),A.length===0?l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsx("p",{className:"text-center text-muted-foreground",children:"No files found. Upload your first file to get started!"})})}):l.jsx("div",{className:"grid gap-4",children:A.map(k=>l.jsx(Ke,{className:"hover:shadow-md transition-shadow",children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 rounded-lg bg-muted",children:j(k.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-lg truncate",children:k.name}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[l.jsx(et,{variant:"secondary",children:k.category}),l.jsx("span",{className:"text-sm text-muted-foreground",children:L(k.size)}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:["Uploaded by ",k.uploadedBy]}),l.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(k.uploadedAt).toLocaleDateString()})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>d(k),children:l.jsx(ha,{className:"h-4 w-4"})}),l.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>N(k.id),children:l.jsx(Hf,{className:"h-4 w-4 text-destructive"})})]})]})})},k.id))}),c&&l.jsx(ti,{open:!!c,onOpenChange:()=>d(null),children:l.jsxs(ni,{className:"max-w-3xl",children:[l.jsx(ri,{children:l.jsx(si,{children:c.name})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Be,{children:"Category"}),l.jsx("p",{children:c.category})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Size"}),l.jsx("p",{children:L(c.size)})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Type"}),l.jsx("p",{children:c.type})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Uploaded By"}),l.jsx("p",{children:c.uploadedBy})]}),l.jsxs("div",{children:[l.jsx(Be,{children:"Uploaded At"}),l.jsx("p",{children:new Date(c.uploadedAt).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Ne,{className:"flex-1",children:[l.jsx(my,{className:"mr-2 h-4 w-4"}),"Download"]}),l.jsxs(Ne,{variant:"outline",className:"flex-1",children:[l.jsx(ha,{className:"mr-2 h-4 w-4"}),"Open"]})]})]})]})})]})}function zz(){const{employees:n}=Vv(),[e,t]=E.useState(""),[r,i]=E.useState("all"),a=Array.from(new Set(n.map(m=>m.department))),c=n.filter(m=>{const y=m.name.toLowerCase().includes(e.toLowerCase())||m.email.toLowerCase().includes(e.toLowerCase())||m.position.toLowerCase().includes(e.toLowerCase()),v=r==="all"||m.department===r;return y&&v}),d=m=>m.split(" ").map(y=>y[0]).join("").toUpperCase(),p=m=>m==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Employee Directory"}),l.jsx("p",{className:"text-muted-foreground",children:"Browse and search staff members"})]}),l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{htmlFor:"search",children:"Search"}),l.jsx(mn,{id:"search",placeholder:"Search by name, email, or position...",value:e,onChange:m=>t(m.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Be,{children:"Filter by Department"}),l.jsxs(ii,{value:r,onValueChange:i,children:[l.jsx(ai,{children:l.jsx(oi,{})}),l.jsxs(li,{children:[l.jsx(Xt,{value:"all",children:"All Departments"}),a.map(m=>l.jsx(Xt,{value:m,children:m},m))]})]})]})]})})}),c.length===0?l.jsx(Ke,{children:l.jsx(Qe,{className:"pt-6",children:l.jsx("p",{className:"text-center text-muted-foreground",children:"No employees found matching your criteria."})})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(m=>l.jsxs(Ke,{className:"hover:shadow-md transition-shadow",children:[l.jsx(gt,{children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx(hT,{className:"h-16 w-16",children:l.jsx(fT,{className:"text-lg",children:d(m.name)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx(Et,{className:"text-lg truncate",children:m.name}),l.jsx("p",{className:"text-sm text-muted-foreground truncate",children:m.position}),l.jsx(et,{className:`mt-2 ${p(m.status)}`,children:m.status})]})]})}),l.jsx(Qe,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(yV,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"truncate",children:m.department})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Bv,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"truncate",children:m.email})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(h3,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{children:m.phone})]})]})})]},m.id))}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsx(Et,{className:"text-sm",children:"Total Employees"})}),l.jsx(Qe,{children:l.jsx("p",{className:"text-3xl font-bold",children:n.length})})]}),l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsx(Et,{className:"text-sm",children:"Active Staff"})}),l.jsx(Qe,{children:l.jsx("p",{className:"text-3xl font-bold",children:n.filter(m=>m.status==="active").length})})]}),l.jsxs(Ke,{children:[l.jsx(gt,{children:l.jsx(Et,{className:"text-sm",children:"Departments"})}),l.jsx(Qe,{children:l.jsx("p",{className:"text-3xl font-bold",children:a.length})})]})]})]})}class yh{static async sendMessage(e,t,r,i,a="text",c,d){try{const p={content:e,senderId:t,senderName:r,organizationId:i,timestamp:Zc(),type:a,...c&&{fileUrl:c},...d&&{fileName:d},edited:!1},m=await go(Rt(Ae,"messages"),p);return await this.createMessageNotification(t,r,e,i),m.id}catch(p){throw console.error("Error sending message:",p),p}}static subscribeToMessages(e,t){const r=Pn(Rt(Ae,"messages"),sn("organizationId","==",e),ta("timestamp","desc"),Iv(50));return Rv(r,i=>{const a=[];i.forEach(c=>{var p;const d=c.data();a.push({id:c.id,...d,timestamp:((p=d.timestamp)==null?void 0:p.toDate())||new Date})}),t(a.reverse())})}static async editMessage(e,t){try{await qn(Xe(Ae,"messages",e),{content:t,edited:!0,editedAt:Zc()})}catch(r){throw console.error("Error editing message:",r),r}}static async deleteMessage(e){try{await ua(Xe(Ae,"messages",e))}catch(t){throw console.error("Error deleting message:",t),t}}static async createMessageNotification(e,t,r,i){try{const a={title:`New message from ${t}`,message:r.length>50?r.substring(0,50)+"...":r,type:"message",read:!1,createdAt:Zc(),metadata:{senderId:e,organizationId:i}};await go(Rt(Ae,"notifications"),a)}catch(a){console.error("Error creating message notification:",a)}}}class Lc{static async createNotification(e,t,r,i="info",a,c){try{const d={userId:e,title:t,message:r,type:i,read:!1,createdAt:Zc(),...a&&{actionUrl:a},...c&&{metadata:c}};return(await go(Rt(Ae,"notifications"),d)).id}catch(d){throw console.error("Error creating notification:",d),d}}static subscribeToNotifications(e,t){const r=Pn(Rt(Ae,"notifications"),sn("userId","==",e),ta("createdAt","desc"),Iv(20));return Rv(r,i=>{const a=[];i.forEach(c=>{var p;const d=c.data();a.push({id:c.id,...d,createdAt:((p=d.createdAt)==null?void 0:p.toDate())||new Date})}),t(a)})}static async markAsRead(e){try{await qn(Xe(Ae,"notifications",e),{read:!0})}catch(t){throw console.error("Error marking notification as read:",t),t}}static async markAllAsRead(e){try{const t=Pn(Rt(Ae,"notifications"),sn("userId","==",e),sn("read","==",!1)),r=await $n(t),i=kv(Ae);r.forEach(a=>{i.update(a.ref,{read:!0})}),await i.commit()}catch(t){throw console.error("Error marking all notifications as read:",t),t}}static async deleteNotification(e){try{await ua(Xe(Ae,"notifications",e))}catch(t){throw console.error("Error deleting notification:",t),t}}}const $z=n=>{const[e,t]=E.useState([]),[r,i]=E.useState(!0);E.useEffect(()=>{if(!n){i(!1);return}i(!0);const p=yh.subscribeToMessages(n,m=>{t(m),i(!1)});return()=>p()},[n]);const a=E.useCallback(async(p,m,y,v="text",_,b)=>{try{await yh.sendMessage(p,m,y,n,v,_,b)}catch(R){throw console.error("Failed to send message:",R),R}},[n]),c=E.useCallback(async(p,m)=>{try{await yh.editMessage(p,m)}catch(y){throw console.error("Failed to edit message:",y),y}},[]),d=E.useCallback(async p=>{try{await yh.deleteMessage(p)}catch(m){throw console.error("Failed to delete message:",m),m}},[]);return{messages:e,loading:r,sendMessage:a,editMessage:c,deleteMessage:d}},Bz=n=>{const[e,t]=E.useState([]),[r,i]=E.useState(0),[a,c]=E.useState(!0);E.useEffect(()=>{if(!n){c(!1);return}c(!0);const v=Lc.subscribeToNotifications(n,_=>{t(_),i(_.filter(b=>!b.read).length),c(!1)});return()=>v()},[n]);const d=E.useCallback(async v=>{try{await Lc.markAsRead(v)}catch(_){throw console.error("Failed to mark notification as read:",_),_}},[]),p=E.useCallback(async()=>{try{await Lc.markAllAsRead(n)}catch(v){throw console.error("Failed to mark all notifications as read:",v),v}},[n]),m=E.useCallback(async v=>{try{await Lc.deleteNotification(v)}catch(_){throw console.error("Failed to delete notification:",_),_}},[]),y=E.useCallback(async(v,_,b="info",R,N)=>{try{await Lc.createNotification(n,v,_,b,R,N)}catch(A){throw console.error("Failed to create notification:",A),A}},[n]);return{notifications:e,unreadCount:r,loading:a,markAsRead:d,markAllAsRead:p,deleteNotification:m,createNotification:y}},qz=({organizationId:n})=>{const{user:e}=Bf(),{messages:t,loading:r,sendMessage:i,editMessage:a,deleteMessage:c}=$z(n),{notifications:d,unreadCount:p,loading:m,markAsRead:y,markAllAsRead:v,deleteNotification:_}=Bz((e==null?void 0:e.uid)||""),[b,R]=E.useState("chat"),[N,A]=E.useState(""),[L,j]=E.useState(null),[k,U]=E.useState(""),K=async P=>{if(P.preventDefault(),!(!N.trim()||!e))try{await i(N,e.uid,e.displayName||e.email||"Unknown"),A("")}catch(z){console.error("Failed to send message:",z)}},ee=async P=>{if(k.trim())try{await a(P,k),j(null),U("")}catch(z){console.error("Failed to edit message:",z)}},C=async P=>{if(confirm("Delete this message?"))try{await c(P)}catch(z){console.error("Failed to delete message:",z)}},T=async P=>{P.read||await y(P.id),P.actionUrl&&(window.location.href=P.actionUrl)},O=P=>{const M=new Date().getTime()-P.getTime(),he=Math.floor(M/6e4),xe=Math.floor(M/36e5),fe=Math.floor(M/864e5);return he<1?"Just now":he<60?`${he}m ago`:xe<24?`${xe}h ago`:`${fe}d ago`},$=P=>{switch(P){case"success":return"";case"warning":return"";case"error":return"";case"message":return"";default:return""}};return l.jsxs("div",{className:"h-full bg-white rounded-lg shadow-md flex flex-col",children:[l.jsx("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Messages & Notifications"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:()=>R("chat"),className:`flex items-center space-x-2 px-3 py-1 rounded ${b==="chat"?"bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:[l.jsx(tT,{size:16}),l.jsx("span",{children:"Chat"})]}),l.jsxs("button",{onClick:()=>R("notifications"),className:`flex items-center space-x-2 px-3 py-1 rounded relative ${b==="notifications"?"bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:[l.jsx(pV,{size:16}),l.jsx("span",{children:"Notifications"}),p>0&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:p>9?"9+":p})]})]})]})}),l.jsx("div",{className:"flex-1 flex flex-col",children:b==="chat"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.length===0?l.jsx("div",{className:"text-center text-gray-500 py-8",children:"No messages yet. Start the conversation!"}):t.map(P=>l.jsx("div",{className:`flex ${P.senderId===(e==null?void 0:e.uid)?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${P.senderId===(e==null?void 0:e.uid)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[P.senderId!==(e==null?void 0:e.uid)&&l.jsx("div",{className:"text-xs font-semibold mb-1",children:P.senderName}),L===P.id?l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",value:k,onChange:z=>U(z.target.value),className:"w-full px-2 py-1 text-sm border rounded text-gray-800",onKeyPress:z=>z.key==="Enter"&&ee(P.id)}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:()=>ee(P.id),className:"text-xs bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1",children:[l.jsx(hu,{size:12}),l.jsx("span",{children:"Save"})]}),l.jsx("button",{onClick:()=>j(null),className:"text-xs bg-gray-500 text-white px-2 py-1 rounded",children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-sm",children:P.content}),P.edited&&l.jsx("div",{className:"text-xs opacity-75 mt-1",children:"(edited)"})]}),l.jsxs("div",{className:"flex items-center justify-between mt-1",children:[l.jsx("div",{className:"text-xs opacity-75",children:O(P.timestamp)}),P.senderId===(e==null?void 0:e.uid)&&L!==P.id&&l.jsxs("div",{className:"flex space-x-1 ml-2",children:[l.jsx("button",{onClick:()=>{j(P.id),U(P.content)},className:"text-xs opacity-75 hover:opacity-100",children:l.jsx(u3,{size:12})}),l.jsx("button",{onClick:()=>C(P.id),className:"text-xs opacity-75 hover:opacity-100",children:l.jsx(Hf,{size:12})})]})]})]})},P.id))}),l.jsx("form",{onSubmit:K,className:"p-4 border-t",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:N,onChange:P=>A(P.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsxs("button",{type:"submit",disabled:!N.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[l.jsx(S3,{size:16}),l.jsx("span",{children:"Send"})]})]})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your Notifications"}),p>0&&l.jsxs("button",{onClick:v,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[l.jsx(hu,{size:16}),l.jsx("span",{children:"Mark all read"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:m?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):d.length===0?l.jsx("div",{className:"text-center text-gray-500 py-8",children:"No notifications yet"}):d.map(P=>l.jsx("div",{className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${P.read?"":"bg-blue-50"}`,onClick:()=>T(P),children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0 text-lg",children:$(P.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:`text-sm font-medium ${P.read?"text-gray-600":"text-gray-900"}`,children:P.title}),l.jsx("button",{onClick:z=>{z.stopPropagation(),_(P.id)},className:"text-gray-400 hover:text-gray-600 ml-2",children:l.jsx(mi,{size:16})})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:P.message}),l.jsx("p",{className:"text-xs text-gray-400 mt-2",children:O(P.createdAt)})]}),!P.read&&l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},P.id))})]})})]})};function Wz(){const{user:n,userProfile:e,loading:t,authError:r,signOut:i,clearAuthError:a}=Bf(),[c,d]=E.useState("dashboard"),[p,m]=E.useState(!1),[y,v]=E.useState(window.location.pathname),_=PN();if(Ks.useEffect(()=>{const R=()=>{v(window.location.pathname)};return window.addEventListener("popstate",R),()=>window.removeEventListener("popstate",R)},[]),t)return l.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[l.jsxs("div",{className:"w-64 border-r bg-card",children:[l.jsx("div",{className:"p-4",children:l.jsx(nr,{className:"h-8 w-32"})}),l.jsx("div",{className:"space-y-2 p-4",children:Array.from({length:6}).map((R,N)=>l.jsx(nr,{className:"h-10 w-full"},N))})]}),l.jsxs("div",{className:"flex flex-col flex-1",children:[l.jsx("div",{className:"border-b p-4",children:l.jsx(nr,{className:"h-10 w-full"})}),l.jsx("div",{className:"flex-1 p-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx(nr,{className:"h-9 w-48"}),l.jsx(nr,{className:"h-5 w-64 mt-2"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((R,N)=>l.jsx(nr,{className:"h-32 w-full"},N))})]})})]})]});if(y==="/register")return l.jsxs(l.Fragment,{children:[l.jsx(H3,{}),l.jsx(lh,{toasts:_.toasts,onRemove:_.removeToast})]});if(r==="pending_approval")return l.jsxs(l.Fragment,{children:[l.jsx(G3,{userEmail:(n==null?void 0:n.email)||void 0,onRetry:a,onSignOut:i}),l.jsx(lh,{toasts:_.toasts,onRemove:_.removeToast})]});if(!n||!e)return l.jsxs(l.Fragment,{children:[l.jsx(W3,{}),l.jsx(lh,{toasts:_.toasts,onRemove:_.removeToast})]});const b=()=>{switch(c){case"dashboard":return l.jsx(f1,{onNavigate:d});case"tasks":return l.jsx(az,{});case"receipts":return l.jsx(Fz,{currentUserId:e.uid,userRole:e.role});case"files":return l.jsx(Uz,{});case"employees":return l.jsx(zz,{});case"messaging":return l.jsx(qz,{organizationId:e.organizationId||"default-org"});default:return l.jsx(f1,{onNavigate:d})}};return l.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[l.jsx(e9,{currentView:c,onViewChange:d,isOpen:p,onClose:()=>m(!1)}),l.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[l.jsx(JU,{onMenuClick:()=>m(!0)}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:b()})})]}),l.jsx(lh,{toasts:_.toasts,onRemove:_.removeToast})]})}function Hz(){return l.jsx(ER,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:l.jsx(dL,{children:l.jsx(pL,{children:l.jsx(Wz,{})})})})}gR.createRoot(document.getElementById("root")).render(l.jsx(Hz,{}));
